/*! For license information please see main.c6ba42f3.js.LICENSE.txt */
(function(){var __webpack_modules__={961:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{n:function(){return FilesetResolver_1},uq:function(){return HandLandmarker_1}});var F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(982),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(752),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(120),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(136),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(277),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(885),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(165),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(762),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(671),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(144),F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(861),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},vision={},fileset_resolver={},supportsSimd;Object.defineProperty(fileset_resolver,"__esModule",{value:!0}),fileset_resolver.FilesetResolver=void 0;var WASM_SIMD_CHECK=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);function _isSimdSupported2(){return _isSimdSupported.apply(this,arguments)}function _isSimdSupported(){return(_isSimdSupported=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==supportsSimd){e.next=10;break}return e.prev=1,e.next=4,WebAssembly.instantiate(WASM_SIMD_CHECK);case 4:supportsSimd=!0,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),supportsSimd=!1;case 10:return e.abrupt("return",supportsSimd);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function createFileset(e){return _createFileset.apply(this,arguments)}function _createFileset(){return _createFileset=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t){var n,r,a=arguments;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"",e.next=3,_isSimdSupported2();case 3:if(!e.sent){e.next=7;break}e.t0="wasm_internal",e.next=8;break;case 7:e.t0="wasm_nosimd_internal";case 8:return r=e.t0,e.abrupt("return",{wasmLoaderPath:"".concat(n,"/").concat(t,"_").concat(r,".js"),wasmBinaryPath:"".concat(n,"/").concat(t,"_").concat(r,".wasm")});case 10:case"end":return e.stop()}}),e)}))),_createFileset.apply(this,arguments)}var FilesetResolver$1=function(){function e(){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,e)}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(e,null,[{key:"isSimdSupported",value:function(){return _isSimdSupported2()}},{key:"forAudioTasks",value:function(e){return createFileset("audio",e)}},{key:"forTextTasks",value:function(e){return createFileset("text",e)}},{key:"forVisionTasks",value:function(e){return createFileset("vision",e)}}]),e}();fileset_resolver.FilesetResolver=FilesetResolver$1;var drawing_utils={};Object.defineProperty(drawing_utils,"__esModule",{value:!0}),drawing_utils.DrawingUtils=void 0;var DEFAULT_OPTIONS={color:"white",lineWidth:4,radius:6};function addDefaultOptions(e){return e=e||{},Object.assign(Object.assign(Object.assign({},DEFAULT_OPTIONS),{fillColor:e.color}),e)}function resolve(e,t){return e instanceof Function?e(t):e}var DrawingUtils$1=function(){function e(t){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,e),this.ctx=t}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(e,[{key:"drawLandmarks",value:function(e,t){if(e){var n=this.ctx,r=addDefaultOptions(t);n.save();var a,o=n.canvas,i=0,s=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(s.s();!(a=s.n()).done;){var u=a.value;n.fillStyle=resolve(r.fillColor,{index:i,from:u}),n.strokeStyle=resolve(r.color,{index:i,from:u}),n.lineWidth=resolve(r.lineWidth,{index:i,from:u});var l=new Path2D;l.arc(u.x*o.width,u.y*o.height,resolve(r.radius,{index:i,from:u}),0,2*Math.PI),n.fill(l),n.stroke(l),++i}}catch(p){s.e(p)}finally{s.f()}n.restore()}}},{key:"drawConnectors",value:function(e,t,n){if(e&&t){var r=this.ctx,a=addDefaultOptions(n);r.save();var o,i=r.canvas,s=0,u=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(t);try{for(u.s();!(o=u.n()).done;){var l=o.value;r.beginPath();var p=e[l.start],c=e[l.end];p&&c&&(r.strokeStyle=resolve(a.color,{index:s,from:p,to:c}),r.lineWidth=resolve(a.lineWidth,{index:s,from:p,to:c}),r.moveTo(p.x*i.width,p.y*i.height),r.lineTo(c.x*i.width,c.y*i.height)),++s,r.stroke()}}catch(d){u.e(d)}finally{u.f()}r.restore()}}},{key:"drawBoundingBox",value:function(e,t){var n=this.ctx,r=addDefaultOptions(t);n.save(),n.beginPath(),n.lineWidth=resolve(r.lineWidth,{}),n.strokeStyle=resolve(r.color,{}),n.fillStyle=resolve(r.fillColor,{}),n.moveTo(e.originX,e.originY),n.lineTo(e.originX+e.width,e.originY),n.lineTo(e.originX+e.width,e.originY+e.height),n.lineTo(e.originX,e.originY+e.height),n.lineTo(e.originX,e.originY),n.stroke(),n.fill(),n.restore()}}],[{key:"clamp",value:function(e,t,n){var r=Math.min(t,n),a=Math.max(t,n);return Math.max(r,Math.min(a,e))}},{key:"lerp",value:function(t,n,r,a,o){var i=a*(1-(t-n)/(r-n))+o*(1-(r-t)/(r-n));return e.clamp(i,a,o)}}]),e}();drawing_utils.DrawingUtils=DrawingUtils$1;var face_detector={},calculator_pb={},googleProtobuf={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,a=0;a<r;a++){var o=e[a];if(t.call(n,o,a,e))return{i:a,v:o}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==commonjsGlobal&&null!=commonjsGlobal?commonjsGlobal:e},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(e,t,n,r){if(t){for(n=$jscomp.global,e=e.split("."),r=0;r<e.length-1;r++){var a=e[r];a in n||(n[a]={}),n=n[a]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}}),"es6","es3"),$jscomp.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;0<r&&0<t;)if(n[--t]!=e[--r])return!1;return 0>=r}}),"es6","es3"),$jscomp.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var n=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var r=n.length,a=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<a&&t<r;)if(n[t++]!=e[o++])return!1;return o>=a}}),"es6","es3"),$jscomp.polyfill("String.prototype.repeat",(function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(e,t,n){e=e.split("."),n=n||goog.global,e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||void 0===t?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=t},goog.define=function(e,t){return t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=e},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&"function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t},goog.globalize=function(e,t){for(var n in t=t||goog.global,e)t[n]=e[n]},goog.addDependency=function(e,t,n,r){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var n=e.call(void 0,{});else{if("string"!=typeof e)throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),n=goog.loadModuleFromSource_.call(void 0,e)}var r=goog.moduleLoaderState_.moduleName;if("string"!=typeof r||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof n&&null!=n&&Object.seal(n),goog.loadedModules_[r]={exports:n,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,n){var r=goog.global.$jscomp;r||(goog.global.$jscomp=r={});var a=r.transpile;if(!a){var o=goog.basePath+goog.TRANSPILER,i=goog.loadFileSync_(o);if(i){if(function(){(0,eval)(i+"\n//# sourceURL="+o)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,a=(r=goog.global.$jscomp).transpile}}return a||(a=r.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),a(e,t,n)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return Object.prototype.hasOwnProperty.call(e,goog.UID_PROPERTY_)&&e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();for(var n in t="array"==t?[]:{},e)t[n]=goog.cloneObject(e[n]);return t}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.head.appendChild(n),t.head.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var n=function(e){return goog.cssNameMapping_[e]||e},r=function(e){e=e.split("-");for(var t=[],r=0;r<e.length;r++)t.push(n(e[r]));return t.join("-")};return r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:r:function(e){return e},e=t?e+"-"+r(t):r(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.getMsg=function(e,t,n){return n&&n.html&&(e=e.replace(/</g,"&lt;")),t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,n){return null!=t&&n in t?t[n]:e}))),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,r){for(var a=Array(arguments.length-2),o=2;o<arguments.length;o++)a[o-2]=arguments[o];return t.prototype[n].apply(e,a)}},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},goog.defineClass=function(e,t){var n=t.constructor,r=t.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,e),e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var n=!goog.defineClass.isUnsealable_(t);return function t(){var r=e.apply(this,arguments)||this;return r[goog.UID_PROPERTY_]=r[goog.UID_PROPERTY_],this.constructor===t&&n&&Object.seal instanceof Function&&Object.seal(r),r}},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.tagUnsealableClass=function(e){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,n=goog.global.trustedTypes||goog.global.TrustedTypes;if(!n||!n.createPolicy)return t;try{t=n.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,n){for(var r in e)t.call(n,e[r],r,e)},goog.object.filter=function(e,t,n){var r,a={};for(r in e)t.call(n,e[r],r,e)&&(a[r]=e[r]);return a},goog.object.map=function(e,t,n){var r,a={};for(r in e)a[r]=t.call(n,e[r],r,e);return a},goog.object.some=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return!0;return!1},goog.object.every=function(e,t,n){for(var r in e)if(!t.call(n,e[r],r,e))return!1;return!0},goog.object.getCount=function(e){var t,n=0;for(t in e)n++;return n},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n},goog.object.getKeys=function(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n},goog.object.getValueByKeys=function(e,t){var n=goog.isArrayLike(t),r=n?t:arguments;for(n=n?0:1;n<r.length;n++){if(null==e)return;e=e[r[n]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},goog.object.findKey=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},goog.object.findValue=function(e,t,n){return(t=goog.object.findKey(e,t,n))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var n;return(n=t in e)&&delete e[t],n},goog.object.add=function(e,t,n){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,n)},goog.object.get=function(e,t,n){return null!==e&&t in e?e[t]:n},goog.object.set=function(e,t,n){e[t]=n},goog.object.setIfUndefined=function(e,t,n){return t in e?e[t]:e[t]=n},goog.object.setWithReturnValueIfNotSet=function(e,t,n){return t in e?e[t]:(n=n(),e[t]=n)},goog.object.equals=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0},goog.object.clone=function(e){var t,n={};for(t in e)n[t]=e[t];return n},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();for(var n in t="array"==t?[]:{},e)t[n]=goog.object.unsafeClone(e[n]);return t}return e},goog.object.transpose=function(e){var t,n={};for(t in e)n[e[t]]=t;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])e[n]=r[n];for(var o=0;o<goog.object.PROTOTYPE_FIELDS_.length;o++)n=goog.object.PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var n={},r=0;r<t;r+=2)n[arguments[r]]=arguments[r+1];return n},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},r=0;r<t;r++)n[arguments[r]]=!0;return n},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,n){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var r={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||n);){for(var a=Object.getOwnPropertyNames(e),o=0;o<a.length;o++)r[a[o]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(r)},goog.object.getSuperClass=function(e){return(e=Object.getPrototypeOf(e.prototype))&&e.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(e,t,n,r){var a="Assertion failed";if(n){a+=": "+n;var o=r}else e&&(a+=": "+e,o=t);throw Error(""+a,o||[])},jspb.asserts.assert=function(e,t,n){for(var r=[],a=2;a<arguments.length;++a)r[a-2]=arguments[a];return e||jspb.asserts.doAssertFailure("",null,t,r),e},jspb.asserts.assertString=function(e,t,n){for(var r=[],a=2;a<arguments.length;++a)r[a-2]=arguments[a];return"string"!=typeof e&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(e),e],t,r),e},jspb.asserts.assertArray=function(e,t,n){for(var r=[],a=2;a<arguments.length;++a)r[a-2]=arguments[a];return Array.isArray(e)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(e),e],t,r),e},jspb.asserts.fail=function(e,t){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];throw Error("Failure"+(e?": "+e:""),n)},jspb.asserts.assertInstanceof=function(e,t,n,r){for(var a=[],o=3;o<arguments.length;++o)a[o-3]=arguments[o];return e instanceof t||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(t),jspb.asserts.getType(e)],n,a),e},jspb.asserts.getType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,n=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return n.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return n.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return n.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return n.FIXED32;default:return n.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var n="",r=(e=e.split("%s")).length-1,a=0;a<r;a++)n+=e[a]+(a<t.length?t[a]:"%s");return n+e[r]},goog.asserts.doAssertFailure_=function(e,t,n,r){var a="Assertion failed";if(n){a+=": "+n;var o=r}else e&&(a+=": "+e,o=t);e=new goog.asserts.AssertionError(""+a,o||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertExists=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&null==e&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&"number"!=typeof e&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&"string"!=typeof e&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&"boolean"!=typeof e&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,r){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,n);for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==n?e.length-1:n)}:function(e,t,n){if(0>(n=null==n?e.length-1:n)&&(n=Math.max(0,e.length+n)),"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.lastIndexOf(t,n);for(;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,n){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,a="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in a&&t.call(n,a[o],o,e)},goog.array.forEachRight=function(e,t,n){var r=e.length,a="string"==typeof e?e.split(""):e;for(--r;0<=r;--r)r in a&&t.call(n,a[r],r,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var r=e.length,a=[],o=0,i="string"==typeof e?e.split(""):e,s=0;s<r;s++)if(s in i){var u=i[s];t.call(n,u,s,e)&&(a[o++]=u)}return a},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var r=e.length,a=Array(r),o="string"==typeof e?e.split(""):e,i=0;i<r;i++)i in o&&(a[i]=t.call(n,o[i],i,e));return a},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,n,r){return goog.asserts.assert(null!=e.length),r&&(t=goog.bind(t,r)),Array.prototype.reduce.call(e,t,n)}:function(e,t,n,r){var a=n;return goog.array.forEach(e,(function(n,o){a=t.call(r,a,n,o,e)})),a},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,n,r){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),r&&(t=goog.bind(t,r)),Array.prototype.reduceRight.call(e,t,n)}:function(e,t,n,r){var a=n;return goog.array.forEachRight(e,(function(n,o){a=t.call(r,a,n,o,e)})),a},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var r=e.length,a="string"==typeof e?e.split(""):e,o=0;o<r;o++)if(o in a&&t.call(n,a[o],o,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,n)}:function(e,t,n){for(var r=e.length,a="string"==typeof e?e.split(""):e,o=0;o<r;o++)if(o in a&&!t.call(n,a[o],o,e))return!1;return!0},goog.array.count=function(e,t,n){var r=0;return goog.array.forEach(e,(function(e,a,o){t.call(n,e,a,o)&&++r}),n),r},goog.array.find=function(e,t,n){return 0>(t=goog.array.findIndex(e,t,n))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,n){for(var r=e.length,a="string"==typeof e?e.split(""):e,o=0;o<r;o++)if(o in a&&t.call(n,a[o],o,e))return o;return-1},goog.array.findRight=function(e,t,n){return 0>(t=goog.array.findIndexRight(e,t,n))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,n){var r=e.length,a="string"==typeof e?e.split(""):e;for(--r;0<=r;r--)if(r in a&&t.call(n,a[r],r,e))return r;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!Array.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,n){goog.array.splice(e,n,0,t)},goog.array.insertArrayAt=function(e,t,n){goog.partial(goog.array.splice,e,n,0).apply(null,t)},goog.array.insertBefore=function(e,t,n){var r;2==arguments.length||0>(r=goog.array.indexOf(e,n))?e.push(t):goog.array.insertAt(e,t,r)},goog.array.remove=function(e,t){var n;return(n=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t),n},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,n){return 0<=(t=goog.array.findIndex(e,t,n))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,n){var r=0;return goog.array.forEachRight(e,(function(a,o){t.call(n,a,o,e)&&goog.array.removeAt(e,o)&&r++})),r},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(goog.isArrayLike(r)){var a=e.length||0,o=r.length||0;e.length=a+o;for(var i=0;i<o;i++)e[a+i]=r[i]}else e.push(r)}},goog.array.splice=function(e,t,n,r){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,n){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},goog.array.removeDuplicates=function(e,t,n){t=t||e;var r=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};n=n||r,r={};for(var a=0,o=0;o<e.length;){var i=e[o++],s=n(i);Object.prototype.hasOwnProperty.call(r,s)||(r[s]=!0,t[a++]=i)}t.length=a},goog.array.binarySearch=function(e,t,n){return goog.array.binarySearch_(e,n||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,n){return goog.array.binarySearch_(e,t,!0,void 0,n)},goog.array.binarySearch_=function(e,t,n,r,a){for(var o,i=0,s=e.length;i<s;){var u=i+(s-i>>>1),l=n?t.call(a,e[u],u,e):t(r,e[u]);0<l?i=u+1:(s=u,o=!l)}return o?i:-i-1},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]={index:r,value:e[r]};var a=t||goog.array.defaultCompare;for(goog.array.sort(n,(function(e,t){return a(e.value,t.value)||e.index-t.index})),r=0;r<e.length;r++)e[r]=n[r].value},goog.array.sortByKey=function(e,t,n){var r=n||goog.array.defaultCompare;goog.array.sort(e,(function(e,n){return r(t(e),t(n))}))},goog.array.sortObjectsByKey=function(e,t,n){goog.array.sortByKey(e,(function(e){return e[t]}),n)},goog.array.isSorted=function(e,t,n){t=t||goog.array.defaultCompare;for(var r=1;r<e.length;r++){var a=t(e[r-1],e[r]);if(0<a||0==a&&n)return!1}return!0},goog.array.equals=function(e,t,n){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var r=e.length;n=n||goog.array.defaultCompareEquality;for(var a=0;a<r;a++)if(!n(e[a],t[a]))return!1;return!0},goog.array.compare3=function(e,t,n){n=n||goog.array.defaultCompare;for(var r=Math.min(e.length,t.length),a=0;a<r;a++){var o=n(e[a],t[a]);if(0!=o)return o}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,n){return 0>(n=goog.array.binarySearch(e,t,n))&&(goog.array.insertAt(e,t,-(n+1)),!0)},goog.array.binaryRemove=function(e,t,n){return 0<=(t=goog.array.binarySearch(e,t,n))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,n){for(var r={},a=0;a<e.length;a++){var o=e[a],i=t.call(n,o,a,e);void 0!==i&&(r[i]||(r[i]=[])).push(o)}return r},goog.array.toObject=function(e,t,n){var r={};return goog.array.forEach(e,(function(a,o){r[t.call(n,a,o,e)]=a})),r},goog.array.range=function(e,t,n){var r=[],a=0,o=e;if(void 0!==t&&(a=e,o=t),0>(n=n||1)*(o-a))return[];if(0<n)for(e=a;e<o;e+=n)r.push(e);else for(e=a;e>o;e+=n)r.push(e);return r},goog.array.repeat=function(e,t){for(var n=[],r=0;r<t;r++)n[r]=e;return n},goog.array.flatten=function(e){for(var t=[],n=0;n<arguments.length;n++){var r=arguments[n];if(Array.isArray(r))for(var a=0;a<r.length;a+=8192){var o=goog.array.slice(r,a,a+8192);o=goog.array.flatten.apply(null,o);for(var i=0;i<o.length;i++)t.push(o[i])}else t.push(r)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,n){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=n&&n<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,n,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],n=arguments[0].length,r=1;r<arguments.length;r++)arguments[r].length<n&&(n=arguments[r].length);for(r=0;r<n;r++){for(var a=[],o=0;o<arguments.length;o++)a.push(arguments[o][r]);t.push(a)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var n=e.length-1;0<n;n--){var r=Math.floor(t()*(n+1)),a=e[n];e[n]=e[r],e[r]=a}},goog.array.copyByIndex=function(e,t){var n=[];return goog.array.forEach(t,(function(t){n.push(e[t])})),n},goog.array.concatMap=function(e,t,n){return goog.array.concat.apply([],goog.array.map(e,t,n))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);255<a&&(t[n++]=255&a,a>>=8),t[n++]=a}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",n=0;n<e.length;n+=8192){var r=goog.array.slice(e,n,n+8192);t+=String.fromCharCode.apply(null,r)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substring(n,n+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);128>a?t[n++]=a:(2048>a?t[n++]=a>>6|192:(55296==(64512&a)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128):t[n++]=a>>12|224,t[n++]=a>>6&63|128),t[n++]=63&a|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],n=0,r=0;n<e.length;){var a=e[n++];if(128>a)t[r++]=String.fromCharCode(a);else if(191<a&&224>a){var o=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&o)}else if(239<a&&365>a){o=e[n++];var i=e[n++];a=((7&a)<<18|(63&o)<<12|(63&i)<<6|63&e[n++])-65536,t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else o=e[n++],i=e[n++],t[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&i)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var n=[],r=0;r<e.length;r++)n.push(e[r]^t[r]);return n},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){if(goog.asserts.ENABLE_ASSERTS){var t=goog.dom.asserts.getWindow_(e);t&&(!e||!(e instanceof t.Location)&&e instanceof t.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsElementType_=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var n=goog.dom.asserts.getWindow_(e);n&&void 0!==n[t]&&(e&&(e instanceof n[t]||!(e instanceof n.Location||e instanceof n.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e)))}return e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){if(!goog.isObject(e))return void 0===e?"undefined":null===e?"null":typeof e;try{return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(e){try{var t=e&&e.ownerDocument,n=t&&(t.defaultView||t.parentWindow);if((n=n||goog.global).Element&&n.Location)return n}catch(e){}return null},goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.push.apply(t,n),e.apply(this,t)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(n){return t?e==n:e===n}},goog.functions.compose=function(e,t){var n=arguments,r=n.length;return function(){var e;r&&(e=n[r-1].apply(this,arguments));for(var t=r-2;0<=t;t--)e=n[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,n=t.length;return function(){for(var e,r=0;r<n;r++)e=t[r].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,n=t.length;return function(){for(var e=0;e<n;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,n=t.length;return function(){for(var e=0;e<n;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var n=function(){};return n.prototype=e.prototype,n=new n,e.apply(n,Array.prototype.slice.call(arguments,1)),n},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,n=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(n||(t=e(),n=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,n){var r=0;return function(a){goog.global.clearTimeout(r);var o=arguments;r=goog.global.setTimeout((function(){e.apply(n,o)}),t)}},goog.functions.throttle=function(e,t,n){var r=0,a=!1,o=[],i=function(){r=0,a&&(a=!1,s())},s=function(){r=goog.global.setTimeout(i,t),e.apply(n,o)};return function(e){o=arguments,r?a=!0:s()}},goog.functions.rateLimit=function(e,t,n){var r=0,a=function(){r=0};return function(o){r||(r=goog.global.setTimeout(a,t),e.apply(n,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(e,t){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var n=[],r=1;r<arguments.length;r++)n.push(goog.html.SafeScript.stringify_(arguments[r]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+n.join(", ")+");")},goog.html.SafeScript.fromJson=function(e){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(e))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return goog.html.SafeScript.unwrapTrustedScript(e).toString()},goog.html.SafeScript.unwrapTrustedScript=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(e):e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(e){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(e){},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return void 0!==goog.global.URL&&void 0!==goog.global.URL.createObjectURL?goog.global.URL:void 0!==goog.global.webkitURL&&void 0!==goog.global.webkitURL.createObjectURL?goog.global.webkitURL:void 0!==goog.global.createObjectURL?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.fs.blob={},goog.fs.blob.getBlob=function(e){var t=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==t){t=new t;for(var n=0;n<arguments.length;n++)t.append(arguments[n]);return t.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(e,t,n){var r=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==r){r=new r;for(var a=0;a<e.length;a++)r.append(e[a],n);return r.getBlob(t)}if(void 0!==goog.global.Blob)return r={},t&&(r.type=t),n&&(r.endings=n),new Blob(e,r);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase()),goog.i18n.bidi.Format={LRE:"\u202a",RLE:"\u202b",PDF:"\u202c",LRM:"\u200e",RLM:"\u200f"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0900-\u1fff\u200e\u2c00-\ud801\ud804-\ud839\ud83c-\udbff\uf900-\ufb1c\ufe00-\ufe6f\ufefd-\uffff",goog.i18n.bidi.rtlChars_="\u0591-\u06ef\u06fa-\u08ff\u200f\ud802-\ud803\ud83a-\ud83b\ufb1d-\ufdff\ufe70-\ufefc",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){return t=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,e.replace(goog.i18n.bidi.bracketGuardTextRe_,t+"$&"+t)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05f4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05f3")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){var n=0,r=0,a=!1;for(e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),t=0;t<e.length;t++){var o=e[t];goog.i18n.bidi.startsWithRtl(o)?(n++,r++):goog.i18n.bidi.isRequiredLtrRe_.test(o)?a=!0:goog.i18n.bidi.hasAnyLtr(o)?r++:goog.i18n.bidi.hasNumeralsRe_.test(o)&&(a=!0)}return 0==r?a?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:n/r>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(e,t){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e,t){var n=goog.html.TrustedResourceUrl.unwrap(this),r=(n=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(n))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",n[2]||"",e)+goog.html.TrustedResourceUrl.stringifyParams_("#",r,t))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(e,t){var n=goog.string.Const.unwrap(e);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof goog.string.Const?goog.string.Const.unwrap(e):encodeURIComponent(String(e))})),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,n,r){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(n,r)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",n=0;n<e.length;n++)t+=goog.string.Const.unwrap(e[n]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.fromSafeScript=function(e){return e=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(e)],"text/javascript"),e=goog.fs.url.createObjectUrl(e),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){return e=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(e):e,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.TrustedResourceUrl.stringifyParams_=function(e,t,n){if(null==n)return t;if("string"==typeof n)return n?e+encodeURIComponent(n):"";for(var r in n){var a=n[r];a=Array.isArray(a)?a:[a];for(var o=0;o<a.length;o++){var i=a[o];null!=i&&(t||(t=e),t+=(t.length>e.length?"&":"")+encodeURIComponent(r)+"="+encodeURIComponent(String(i)))}}return t},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)==n},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var n=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var r=Math.max(e.length,t.length),a=0;0==n&&a<r;a++){var o=e[a]||"",i=t[a]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],0==o[0].length&&0==i[0].length)break;n=0==o[1].length?0:parseInt(o[1],10);var s=0==i[1].length?0:parseInt(i[1],10);n=goog.string.internal.compareElements_(n,s)||goog.string.internal.compareElements_(0==o[2].length,0==i[2].length)||goog.string.internal.compareElements_(o[2],i[2]),o=o[3],i=i[3]}while(0==n)}return n},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.html.SafeUrl=function(e,t){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=e===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(e){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(e)},goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SafeUrl.isSafeMimeType(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromMediaSource=function(e){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),e=e instanceof MediaSource?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=(e=e.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return t=t&&goog.html.SafeUrl.isSafeMimeType(t[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(e){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"fb-messenger://share")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromWhatsAppUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"whatsapp://send")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromSmsUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(e){var t=e.indexOf("#");if(0<t&&(e=e.substring(0,t)),!(t=e.match(/[?&]body=/gi)))return!0;if(1<t.length)return!1;if(!(e=e.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(e)}catch(e){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(e)},goog.html.SafeUrl.fromSshUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"ssh://")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(e,t,n){return(e=e.exec(t))?(e=e[1],-1==(n instanceof goog.string.Const?[goog.string.Const.unwrap(n)]:n.map((function(e){return goog.string.Const.unwrap(e)}))).indexOf(e)&&(t=goog.html.SafeUrl.INNOCUOUS_STRING)):t=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e,t){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),t&&/^data:/i.test(e)&&(t=goog.html.SafeUrl.fromDataUrl(e)).getTypedStringValue()==e?t:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e),"%s does not match the safe URL pattern",e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.internal.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,n="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var r=e[t];null!=r&&(n+=t+":"+(r=Array.isArray(r)?goog.array.map(r,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(r))+";")}return n?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){if(e instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),/[{;}]/.test(e))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[e]);return e},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.COMMENT_RE_.test(e)?(goog.asserts.fail("String value disallows comments, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.hasBalancedSquareBrackets_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var a=e.charAt(r);"'"==a&&n?t=!t:'"'==a&&t&&(n=!n)}return t&&n},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(e){for(var t=!0,n=/^[-_a-zA-Z0-9]$/,r=0;r<e.length;r++){var a=e.charAt(r);if("]"==a){if(t)return!1;t=!0}else if("["==a){if(!t)return!1;t=!1}else if(!t&&!n.test(a))return!1}return t},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,(function(e,t,n,r){var a="";return n=n.replace(/^(['"])(.*)\1$/,(function(e,t,n){return a=t,n})),e=goog.html.SafeUrl.sanitize(n).getTypedStringValue(),t+a+e+a+r}))},goog.html.SafeStyle.concat=function(e){var t="";return goog.array.forEach(arguments,(function e(n){Array.isArray(n)?goog.array.forEach(n,e):t+=goog.html.SafeStyle.unwrap(n)})),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.internal.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var n=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(n))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(n))throw Error("() and [] in selector must be balanced, got: "+e);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),e=e+"{"+goog.html.SafeStyle.unwrap(t).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},n=[],r=0;r<e.length;r++){var a=e[r];if(t[a])n.push(t[a]);else if(goog.object.contains(t,a)&&n.pop()!=a)return!1}return 0==n.length},goog.html.SafeStyleSheet.concat=function(e){var t="";return goog.array.forEach(arguments,(function e(n){Array.isArray(n)?goog.array.forEach(n,e):t+=goog.html.SafeStyleSheet.unwrap(n)})),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,n=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,r=[];t=n.exec(e);)r.push([t[1],t[2],t[3]||void 0]);return r},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,r),n[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var n={};goog.array.forEach(t,(function(e){n[e[0]]=e[1]}));var r=goog.partial(goog.object.containsKey,n);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?e(["Edg"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS","HeadlessChrome"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var n=/MSIE +([\d\.]+)/.exec(e);if(n&&n[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==n[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=n[1];return t},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return goog.html.SafeHtml.unwrapTrustedHTML(e).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t="object"==typeof e,n=null;return t&&e.implementsGoogI18nBidiDirectionalString&&(n=e.getDirection()),e=t&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),n)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(e){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("\x3c!--"+goog.string.internal.htmlEscape(e)+"--\x3e",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,n){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,n)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+e+">.":"");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+e+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(e,t,n,r){e&&goog.html.TrustedResourceUrl.unwrap(e);var a={};return a.src=e||null,a.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(a,{sandbox:""},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,r)},goog.html.SafeHtml.createSandboxIframe=function(e,t,n,r){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var a={};return a.src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,a.srcdoc=t||null,a.sandbox="",e=goog.html.SafeHtml.combineAttributes(a,{},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,r)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){return goog.html.TrustedResourceUrl.unwrap(e),e=goog.html.SafeHtml.combineAttributes({src:e},{},t),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e)},goog.html.SafeHtml.createScript=function(e,t){for(var n in t){var r=n.toLowerCase();if("language"==r||"src"==r||"text"==r||"type"==r)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+r+'" attribute':"")}for(n="",e=goog.array.concat(e),r=0;r<e.length;r++)n+=goog.html.SafeScript.unwrap(e[r]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,e)},goog.html.SafeHtml.createStyle=function(e,t){t=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t);var n="";e=goog.array.concat(e);for(var r=0;r<e.length;r++)n+=goog.html.SafeStyleSheet.unwrap(e[r]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",t,e)},goog.html.SafeHtml.createMetaRefresh=function(e,t){return e=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+e})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,n){if(n instanceof goog.string.Const)n=goog.string.Const.unwrap(n);else if("style"==t.toLowerCase()){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");n=goog.html.SafeHtml.getStyleValue_(n)}else{if(/^on/i.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" requires goog.string.Const value, "'+n+'" given.':"");if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(n instanceof goog.html.TrustedResourceUrl)n=goog.html.TrustedResourceUrl.unwrap(n);else if(n instanceof goog.html.SafeUrl)n=goog.html.SafeUrl.unwrap(n);else{if("string"!=typeof n)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+n+'" given.':"");n=goog.html.SafeUrl.sanitize(n).getTypedStringValue()}}return n.implementsGoogStringTypedString&&(n=n.getTypedStringValue()),goog.asserts.assert("string"==typeof n||"number"==typeof n,"String or number value expected, got "+typeof n+" with value: "+n),t+'="'+goog.string.internal.htmlEscape(String(n))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e:"");return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,n,r){return(t=goog.html.SafeHtml.create(t,n,r)).dir_=e,t},goog.html.SafeHtml.join=function(e,t){var n=(e=goog.html.SafeHtml.htmlEscape(e)).getDirection(),r=[];return goog.array.forEach(t,(function e(t){Array.isArray(t)?goog.array.forEach(t,e):(t=goog.html.SafeHtml.htmlEscape(t),r.push(goog.html.SafeHtml.unwrap(t)),t=t.getDirection(),n==goog.i18n.bidi.Dir.NEUTRAL?n=t:t!=goog.i18n.bidi.Dir.NEUTRAL&&n!=t&&(n=null))})),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r.join(goog.html.SafeHtml.unwrap(e)),n)},goog.html.SafeHtml.concat=function(e){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(e,t){var n=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return n.dir_=e,n},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(e):e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,n){var r=null,a="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return null==n?n=[]:Array.isArray(n)||(n=[n]),goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!n.length,"Void tag <"+e+"> does not allow content."),a+=">"):(r=goog.html.SafeHtml.concat(n),a+=">"+goog.html.SafeHtml.unwrap(r)+"</"+e+">",r=r.getDirection()),(e=t&&t.dir)&&(r=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(a,r)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var n="";if(t)for(var r in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(r))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+r+'".':"");var a=t[r];null!=a&&(n+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,r,a))}return n},goog.html.SafeHtml.combineAttributes=function(e,t,n){var r,a={};for(r in e)goog.asserts.assert(r.toLowerCase()==r,"Must be lower case"),a[r]=e[r];for(r in t)goog.asserts.assert(r.toLowerCase()==r,"Must be lower case"),a[r]=t[r];if(n)for(r in n){var o=r.toLowerCase();if(o in e)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+o+'" attribute, got "'+r+'" with value "'+n[r]+'"':"");o in t&&delete a[o],a[r]=n[r]}return a},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,n){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,n||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,n){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrapTrustedHTML(n))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue((function(){if(goog.DEBUG&&"undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!(goog.DEBUG&&!e.firstChild)&&(t=e.firstChild.firstChild,e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!t.parentElement)})),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(e,t){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;e.lastChild;)e.removeChild(e.lastChild);e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var n=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[n])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(e,t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setFormElementAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setButtonFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setInputFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setImageSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLImageElement(e),!(t instanceof goog.html.SafeUrl)){var n=/^data:image\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,n)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setAudioSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLAudioElement(e),!(t instanceof goog.html.SafeUrl)){var n=/^data:audio\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,n)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setVideoSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLVideoElement(e),!(t instanceof goog.html.SafeUrl)){var n=/^data:video\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,n)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,n){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=n,goog.string.internal.caseInsensitiveContains(n,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(t):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(t))},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrapTrustedScript(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.assignLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.assign(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.replaceLocation=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.replace(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.openInWindow=function(e,t,n,r,a){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t=t||goog.global,n=n instanceof goog.string.Const?goog.string.Const.unwrap(n):n||"",t.open(goog.html.SafeUrl.unwrap(e),n,r,a)},goog.dom.safe.parseFromStringHtml=function(e,t){return goog.dom.safe.parseFromString(e,t,"text/html")},goog.dom.safe.parseFromString=function(e,t,n){return e.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(t),n)},goog.dom.safe.createImageFromBlob=function(e){if(!/^image\/.*/g.test(e.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var t=goog.global.URL.createObjectURL(e);return(e=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(t)},goog.dom.safe.setImageSrc(e,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),t)),e},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:"\xa0"},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var n=e.split("%s"),r="",a=Array.prototype.slice.call(arguments,1);a.length&&1<n.length;)r+=n.shift()+a.shift();return r+n.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||"\x80"<=e&&"\ufffd">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,n){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var r=e.toLowerCase().match(n),a=t.toLowerCase().match(n),o=Math.min(r.length,a.length),i=0;i<o;i++){n=r[i];var s=a[i];if(n!=s)return e=parseInt(n,10),!isNaN(e)&&(t=parseInt(s,10),!isNaN(t)&&e-t)?e-t:n<s?-1:1}return r.length!=a.length?r.length-a.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var a=n[e];return a||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(a=String.fromCharCode(t))),a||(goog.dom.safe.setInnerHtml(r,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),e+" ")),a=r.firstChild.nodeValue.slice(0,-1)),n[e]=a)}))},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var n=t.length,r=0;r<n;r++){var a=1==n?t:t.charAt(r);if(e.charAt(0)==a&&e.charAt(e.length-1)==a)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,n){return n&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),n&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,n,r){if(n&&(e=goog.string.unescapeEntities(e)),r&&e.length>t){r>t&&(r=t);var a=e.length-r;e=e.substring(0,t-r)+"..."+e.substring(a)}else e.length>t&&(r=Math.floor(t/2),a=e.length-r,e=e.substring(0,r+t%2)+"..."+e.substring(a));return n&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],n=0;n<e.length;n++){var r=e.charAt(n),a=r.charCodeAt(0);t[n+1]=goog.string.specialEscapeChars_[r]||(31<a&&127>a?r:goog.string.escapeChar(r))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=goog.string.escapeChar(e.charAt(n));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var n=e;else 256>t?(n="\\x",(16>t||256<t)&&(n+="0")):(n="\\u",4096>t&&(n+="0")),n+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=n},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,n){var r=e;return 0<=t&&t<e.length&&0<n&&(r=e.substr(0,t)+e.substr(t+n,e.length-t-n)),r},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,n){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,n){return-1==(n=(e=void 0!==n?e.toFixed(n):String(e)).indexOf("."))&&(n=e.length),goog.string.repeat("0",Math.max(0,t-n))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,n=0;n<e.length;++n)t=31*t+e.charCodeAt(n)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t="string"==typeof t?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),(function(e,t,n){return t+n.toUpperCase()}))},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),"string"==typeof e?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,n){e=e.split(t);for(var r=[];0<n&&e.length;)r.push(e.shift()),n--;return e.length&&r.push(e.join(t)),r},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var n=-1,r=0;r<t.length;r++)if(""!=t[r]){var a=e.lastIndexOf(t[r]);a>n&&(n=a)}return-1==n?e:e.slice(n+1)},goog.string.editDistance=function(e,t){var n=[],r=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var a=0;a<t.length+1;a++)n[a]=a;for(a=0;a<e.length;a++){r[0]=a+1;for(var o=0;o<t.length;o++)r[o+1]=Math.min(r[o]+1,n[o+1]+1,n[o]+Number(e[a]!=t[o]));for(o=0;o<n.length;o++)n[o]=r[o]}return r[t.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t,n=goog.labs.userAgent.engine.getEngineTuple_(e);if(n)return"Gecko"==n[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):n[1];if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var n=e[t];if("Edge"==n[0])return n}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,(function(e){return t==e[0]})))&&e[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?t=(e=(t=/(?:KaiOS)\/(\S+)/i).exec(e))&&e[1]:goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,n,r){return r=r?r(t):t,Object.prototype.hasOwnProperty.call(e,r)?e[r]:e[r]=n(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e)?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)}))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()||parseInt(goog.userAgent.VERSION,10)||void 0}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(e){return goog.string.contains(goog.crypt.base64.paddingChars_,e)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),void 0===t&&(t=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),t=goog.crypt.base64.byteToCharMaps_[t];for(var n=[],r=0;r<e.length;r+=3){var a=e[r],o=r+1<e.length,i=o?e[r+1]:0,s=r+2<e.length,u=s?e[r+2]:0,l=a>>2;a=(3&a)<<4|i>>4,i=(15&i)<<2|u>>6,u&=63,s||(u=64,o||(i=64)),n.push(t[l],t[a],t[i]||"",t[u]||"")}return n.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var n="";return goog.crypt.base64.decodeStringInternal_(e,(function(e){n+=String.fromCharCode(e)})),n},goog.crypt.base64.decodeStringToByteArray=function(e,t){var n=[];return goog.crypt.base64.decodeStringInternal_(e,(function(e){n.push(e)})),n},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,n=3*t/4;n%3?n=Math.floor(n):goog.crypt.base64.isPadding_(e[t-1])&&(n=goog.crypt.base64.isPadding_(e[t-2])?n-2:n-1);var r=new Uint8Array(n),a=0;return goog.crypt.base64.decodeStringInternal_(e,(function(e){r[a++]=e})),r.subarray(0,a)},goog.crypt.base64.decodeStringInternal_=function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),a=goog.crypt.base64.charToByteMap_[n];if(null!=a)return a;if(!goog.string.isEmptyOrWhitespace(n))throw Error("Unknown base64 encoding at char: "+n)}return t}goog.crypt.base64.init_();for(var r=0;;){var a=n(-1),o=n(0),i=n(64),s=n(64);if(64===s&&-1===a)break;t(a<<2|o>>4),64!=i&&(t(o<<4&240|i>>2),64!=s&&t(i<<6&192|s))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var e=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));goog.crypt.base64.byteToCharMaps_[n]=r;for(var a=0;a<r.length;a++){var o=r[a],i=goog.crypt.base64.charToByteMap_[o];void 0===i?goog.crypt.base64.charToByteMap_[o]=a:goog.asserts.assert(i===a)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e,n=(e=Math.abs(e))>>>0;e=Math.floor((e-n)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(n=1+(~n>>>0))&&(n=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=n,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;t&&(0==e?0==n?n=e=4294967295:(n--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=n},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var n=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-n),16777216<=(e=Math.round(e*jspb.BinaryConstants.TWO_TO_23))&&++n,jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|n+127<<23|8388607&e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var n=e/Math.pow(2,-1074);e=n/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=n>>>0}else{var r=0;if(2<=(n=e))for(;2<=n&&1023>r;)r++,n/=2;else for(;1>n&&-1022<r;)n*=2,r--;e=(n=e*Math.pow(2,-r))*jspb.BinaryConstants.TWO_TO_20&1048575,n=n*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|r+1023<<20|e)>>>0,jspb.utils.split64Low=n}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),o=e.charCodeAt(4),i=e.charCodeAt(5),s=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(n<<8)+(r<<16)+(a<<24)>>>0,jspb.utils.split64High=o+(i<<8)+(s<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+(e>>>0)},jspb.utils.joinInt64=function(e,t){var n=2147483648&t;return n&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),n?-e:e},jspb.utils.toZigzag64=function(e,t,n){var r=t>>31;return n(e<<1^r,(t<<1|e>>>31)^r)},jspb.utils.joinZigzag64=function(e,t){return jspb.utils.fromZigzag64(e,t,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(e,t,n){var r=-(1&e);return n((e>>>1|t<<31)^r,t>>>1^r)},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var n=e>>>23&255;return e&=8388607,255==n?e?NaN:1/0*t:0==n?t*Math.pow(2,-149)*e:t*Math.pow(2,n-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var n=2*(t>>31)+1,r=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==r?e?NaN:1/0*n:0==r?n*Math.pow(2,-1074)*e:n*Math.pow(2,r-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(e,t){function n(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}if(2097151>=t)return""+jspb.utils.joinUint64(e,t);var r=(e>>>24|t<<8)>>>0&16777215;return e=(16777215&e)+6777216*r+6710656*(t=t>>16&65535),r+=8147497*t,t*=2,1e7<=e&&(r+=Math.floor(e/1e7),e%=1e7),1e7<=r&&(t+=Math.floor(r/1e7),r%=1e7),n(t,0)+n(r,t)+n(e,1)},jspb.utils.joinSignedDecimalString=function(e,t){var n=2147483648&t;return n&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),n?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,n):jspb.utils.joinUnsignedDecimalString(e,n)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=jspb.utils.hash64ToDecimalString(e[r],t);return n},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var n=0;8>n&&(1!==e||0<t);n++)t=e*r[n]+t,r[n]=255&t,t>>>=8}jspb.asserts.assert(0<e.length);var n=!1;"-"===e[0]&&(n=!0,e=e.slice(1));for(var r=[0,0,0,0,0,0,0,0],a=0;a<e.length;a++)t(10,e.charCodeAt(a)-jspb.utils.ZERO_CHAR_CODE_);return n&&(function(){for(var e=0;8>e;e++)r[e]=255&~r[e]}(),t(1,1)),goog.crypt.byteArrayToString(r)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.toHexDigit_=function(e){return String.fromCharCode(10>e?jspb.utils.ZERO_CHAR_CODE_+e:jspb.utils.A_CHAR_CODE_-10+e)},jspb.utils.fromHexCharCode_=function(e){return e>=jspb.utils.A_CHAR_CODE_?e-jspb.utils.A_CHAR_CODE_+10:e-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var n=0;8>n;n++){var r=e.charCodeAt(7-n);t[2*n+2]=jspb.utils.toHexDigit_(r>>4),t[2*n+3]=jspb.utils.toHexDigit_(15&r)}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),jspb.asserts.assert(18==e.length),jspb.asserts.assert("0"==e[0]),jspb.asserts.assert("x"==e[1]);for(var t="",n=0;8>n;n++){var r=jspb.utils.fromHexCharCode_(e.charCodeAt(2*n+2)),a=jspb.utils.fromHexCharCode_(e.charCodeAt(2*n+3));t=String.fromCharCode(16*r+a)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var n=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,n):jspb.utils.joinUint64(e,n)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,n){for(var r=0,a=t;a<n;a++)r+=e[a]>>7;return n-t-r},jspb.utils.countVarintFields=function(e,t,n,r){var a=0;if(128>(r=8*r+jspb.BinaryConstants.WireType.VARINT))for(;t<n&&e[t++]==r;)for(a++;;){var o=e[t++];if(0==(128&o))break}else for(;t<n;){for(o=r;128<o;){if(e[t]!=(127&o|128))return a;t++,o>>=7}if(e[t++]!=o)break;for(a++;0!=(128&(o=e[t++])););}return a},jspb.utils.countFixedFields_=function(e,t,n,r,a){var o=0;if(128>r)for(;t<n&&e[t++]==r;)o++,t+=a;else for(;t<n;){for(var i=r;128<i;){if(e[t++]!=(127&i|128))return o;i>>=7}if(e[t++]!=i)break;o++,t+=a}return o},jspb.utils.countFixed32Fields=function(e,t,n,r){return jspb.utils.countFixedFields_(e,t,n,8*r+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,n,r){return jspb.utils.countFixedFields_(e,t,n,8*r+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,n,r){var a=0;for(r=8*r+jspb.BinaryConstants.WireType.DELIMITED;t<n;){for(var o=r;128<o;){if(e[t++]!=(127&o|128))return a;o>>=7}if(e[t++]!=o)break;a++;for(var i=0,s=1;i+=(127&(o=e[t++]))*s,s*=128,0!=(128&o););t+=i}return a},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var n=0;n<e.length;n++)t+="\\x",16>e[n]&&(t+="0"),t+=e[n].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return"string"==typeof e?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++){var r=e.charCodeAt(n);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");t[n]=r}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(e,t,n){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,n)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,n){if(jspb.BinaryDecoder.instanceCache_.length){var r=jspb.BinaryDecoder.instanceCache_.pop();return e&&r.setBlock(e,t,n),r}return new jspb.BinaryDecoder(e,t,n)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,n){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=void 0!==t?t:0,this.end_=void 0!==n?this.start_+n:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(e){for(var t=128,n=0,r=0,a=0;4>a&&128<=t;a++)n|=(127&(t=this.bytes_[this.cursor_++]))<<7*a;if(128<=t&&(n|=(127&(t=this.bytes_[this.cursor_++]))<<28,r|=(127&t)>>4),128<=t)for(a=0;5>a&&128<=t;a++)r|=(127&(t=this.bytes_[this.cursor_++]))<<7*a+3;if(128>t)return e(n>>>0,r>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(e){return this.readSplitVarint64((function(t,n){return jspb.utils.fromZigzag64(t,n,e)}))},jspb.BinaryDecoder.prototype.readSplitFixed64=function(e){var t=this.bytes_,n=this.cursor_;this.cursor_+=8;for(var r=0,a=0,o=n+7;o>=n;o--)r=r<<8|t[o],a=a<<8|t[o+4];return e(r,a)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],n=127&t;return 128>t?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),n):(n|=(127&(t=e[this.cursor_+1]))<<7,128>t?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),n):(n|=(127&(t=e[this.cursor_+2]))<<14,128>t?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),n):(n|=(127&(t=e[this.cursor_+3]))<<21,128>t?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),n):(n|=(15&(t=e[this.cursor_+4]))<<28,128>t?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),n>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),n)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],n=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|n<<16|r<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],n=this.bytes_[this.cursor_+2],r=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|n<<16|r<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,n=this.cursor_;e=n+e;for(var r=[],a="";n<e;){var o=t[n++];if(128>o)r.push(o);else{if(192>o)continue;if(224>o){var i=t[n++];r.push((31&o)<<6|63&i)}else if(240>o){i=t[n++];var s=t[n++];r.push((15&o)<<12|(63&i)<<6|63&s)}else 248>o&&(o=(7&o)<<18|(63&(i=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++],o-=65536,r.push(55296+(o>>10&1023),56320+(1023&o)))}8192<=r.length&&(a+=String.fromCharCode.apply(null,r),r.length=0)}return a+=goog.crypt.byteArrayToString(r),this.cursor_=n,a},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,n=e[t+0],r=e[t+1],a=e[t+2],o=e[t+3],i=e[t+4],s=e[t+5],u=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(n,r,a,o,i,s,u,e)},jspb.BinaryReader=function(e,t,n){this.decoder_=jspb.BinaryDecoder.alloc(e,t,n),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,n){if(jspb.BinaryReader.instanceCache_.length){var r=jspb.BinaryReader.instanceCache_.pop();return e&&r.decoder_.setBlock(e,t,n),r}return new jspb.BinaryReader(e,t,n)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,n){this.decoder_.setBlock(e,t,n),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){null===this.readCallbacks_&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return jspb.asserts.assert(null!==this.readCallbacks_),e=this.readCallbacks_[e],jspb.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var n=this.decoder_.getEnd(),r=this.decoder_.readUnsignedVarint32();r=this.decoder_.getCursor()+r,this.decoder_.setEnd(r),t(e,this),this.decoder_.setCursor(r),this.decoder_.setEnd(n)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(e,t,n){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==e),n(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),n=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(n),e},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(e)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64((function(t,n){return jspb.utils.fromZigzag64(t,n,e)}))},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(e)},jspb.BinaryReader.prototype.readPackedField_=function(e){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var n=[];this.decoder_.getCursor()<t;)n.push(e.call(this.decoder_));return n},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(e){var t=this;jspb.utils.splitHash64(e),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,(function(e,n){t.writeSplitVarint64(e>>>0,n>>>0)}))},jspb.BinaryEncoder.prototype.writeUint8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){jspb.asserts.assert("boolean"==typeof e||"number"==typeof e),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){var t=this.buffer_.length;jspb.asserts.assertString(e);for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(128>r)this.buffer_.push(r);else if(2048>r)this.buffer_.push(r>>6|192),this.buffer_.push(63&r|128);else if(65536>r)if(55296<=r&&56319>=r&&n+1<e.length){var a=e.charCodeAt(n+1);56320<=a&&57343>=a&&(r=1024*(r-55296)+a-56320+65536,this.buffer_.push(r>>18|240),this.buffer_.push(r>>12&63|128),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128),n++)}else this.buffer_.push(r>>12|224),this.buffer_.push(r>>6&63|128),this.buffer_.push(63&r|128)}return this.buffer_.length-t},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var n=65535&e,r=65535&t,a=t>>>16;for(t=n*r+65536*(n*a&65535)+65536*((e>>>=16)*r&65535),n=e*a+(n*a>>>16)+(e*r>>>16);4294967296<=t;)t-=4294967296,n+=1;return new jspb.arith.UInt64(t>>>0,n>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return(e=jspb.arith.UInt64.mul32x32(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),n=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var r=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),r=r.leftShift();for(;!r.zero();)0>=e.cmp(n)&&(t=t.add(r),n=n.sub(e)),e=e.rightShift(),r=r.rightShift();return[t,n]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){var n=(t=t.div(10))[0];e=t[1].lo+e,t=n}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),n=new jspb.arith.UInt64(0,0),r=0;r<e.length;r++){if("0">e[r]||"9"<e[r])return null;var a=parseInt(e[r],10);n.lo=a,t=t.mul(10).add(n)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,jspb.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,n){this.appendUint8Array_(e.subarray(t,n))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,n){null!=e&&null!=t&&null!=n&&this.writeSerializedMessage(e,t,n)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,n=t.length,r=0,a=0;a<n;a++){var o=t[a];e.set(o,r),r+=o.length}return t=this.encoder_.end(),e.set(t,r),r+=t.length,jspb.asserts.assert(r==e.length),this.blocks_=[e],e},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){jspb.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,n){var r=jspb.BinaryConstants.FieldType;switch(e){case r.DOUBLE:this.writeDouble(t,n);break;case r.FLOAT:this.writeFloat(t,n);break;case r.INT64:this.writeInt64(t,n);break;case r.UINT64:this.writeUint64(t,n);break;case r.INT32:this.writeInt32(t,n);break;case r.FIXED64:this.writeFixed64(t,n);break;case r.FIXED32:this.writeFixed32(t,n);break;case r.BOOL:this.writeBool(t,n);break;case r.STRING:this.writeString(t,n);break;case r.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case r.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case r.BYTES:this.writeBytes(t,n);break;case r.UINT32:this.writeUint32(t,n);break;case r.ENUM:this.writeEnum(t,n);break;case r.SFIXED32:this.writeSfixed32(t,n);break;case r.SFIXED64:this.writeSfixed64(t,n);break;case r.SINT32:this.writeSint32(t,n);break;case r.SINT64:this.writeSint64(t,n);break;case r.FHASH64:this.writeFixedHash64(t,n);break;case r.VHASH64:this.writeVarintHash64(t,n);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(e,t){null!=t&&this.writeZigzagVarintHash64_(e,t)},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&this.writeZigzagVarint64String_(e,t)},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(jspb.asserts.assert("boolean"==typeof t||"number"==typeof t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(e,t,n){null!=t&&(e=this.beginDelimited_(e),n(t,this),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,n){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),n(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,n){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),n(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))},jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(e,t,n){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t,n)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(e,t,n){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t,n)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(e,t,n){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT);var r=this.encoder_;jspb.utils.toZigzag64(t,n,(function(e,t){r.writeSplitVarint64(e>>>0,t>>>0)}))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSignedVarint32_(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeInt32String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSignedVarint64_(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(e,t,n,r){if(null!=t)for(var a=0;a<t.length;a++)this.writeSplitFixed64(e,n(t[a]),r(t[a]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(e,t,n,r){if(null!=t)for(var a=0;a<t.length;a++)this.writeSplitVarint64(e,n(t[a]),r(t[a]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(e,t,n,r){if(null!=t)for(var a=0;a<t.length;a++)this.writeSplitZigzagVarint64(e,n(t[a]),r(t[a]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeInt64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUnsignedVarint32_(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUint32String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUnsignedVarint64_(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeUint64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint32_(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint64_(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarint64String_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeZigzagVarintHash64_(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed32(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed64(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixed64String(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed32(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed64(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeSfixed64String(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFloat(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeDouble(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeBool(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeEnum(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeString(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeBytes(e,t[n])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++){var a=this.beginDelimited_(e);n(t[r],this),this.endDelimited_(a)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),n(t[r],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeFixedHash64(e,t[n])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.writeVarintHash64(e,t[n])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(t[n]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSignedVarint64(t[n]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(e,t,n,r){if(null!=t){e=this.beginDelimited_(e);for(var a=0;a<t.length;a++)this.encoder_.writeSplitFixed64(n(t[a]),r(t[a]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(e,t,n,r){if(null!=t){e=this.beginDelimited_(e);for(var a=0;a<t.length;a++)this.encoder_.writeSplitVarint64(n(t[a]),r(t[a]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(e,t,n,r){if(null!=t){e=this.beginDelimited_(e);for(var a=this.encoder_,o=0;o<t.length;o++)jspb.utils.toZigzag64(n(t[o]),r(t[o]),(function(e,t){a.writeSplitVarint64(e>>>0,t>>>0)}));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++){var r=jspb.arith.Int64.fromString(t[n]);this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(t[n]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(parseInt(t[n],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint64(t[n]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++){var r=jspb.arith.UInt64.fromString(t[n]);this.encoder_.writeSplitVarint64(r.lo,r.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint32(t[n]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(t[n]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(t[n]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeZigzagVarintHash64(t[n]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var n=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(n.lo,n.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeEnum(t[n]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeVarintHash64(t[n]);this.endDelimited_(e)}},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],n=t[0];this.map_[n.toString()]=new jspb.Map.Entry_(n,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e].valueWrapper;n&&n.toArray()}}}else{for(this.arr_.length=0,(t=this.stringKeys_()).sort(),e=0;e<t.length;e++){var r=this.map_[t[e]];(n=r.valueWrapper)&&n.toArray(),this.arr_.push([r.key,r.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(e,t){for(var n=this.toArray(),r=[],a=0;a<n.length;a++){var o=this.map_[n[a][0].toString()];this.wrapEntry_(o);var i=o.valueWrapper;i?(jspb.asserts.assert(t),r.push([o.key,t(e,i)])):r.push([o.key,o.value])}return r},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(e,t,n){t=new jspb.Map([],t);for(var r=0;r<e.length;r++){var a=e[r][0],o=n(e[r][1]);t.set(a,o)}return t},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++){var r=this.map_[t[n]];e.push([r.key,r.value])}return e},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++){var r=this.map_[t[n]];e.push([r.key,this.wrapEntry_(r)])}return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++)e.push(this.map_[t[n]].key);return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var n=0;n<t.length;n++)e.push(this.wrapEntry_(this.map_[t[n]]));return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(e,t){var n=this.stringKeys_();n.sort();for(var r=0;r<n.length;r++){var a=this.map_[n[r]];e.call(t,this.wrapEntry_(a),a.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(e,t){var n=new jspb.Map.Entry_(e);return this.valueCtor_?(n.valueWrapper=t,n.value=t.toArray()):n.value=t,this.map_[e.toString()]=n,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(e){return e.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(e,t,n,r,a){var o=this.stringKeys_();o.sort();for(var i=0;i<o.length;i++){var s=this.map_[o[i]];t.beginSubMessage(e),n.call(t,1,s.key),this.valueCtor_?r.call(t,2,this.wrapEntry_(s),a):r.call(t,2,s.value),t.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(e,t,n,r,a,o,i){for(;t.nextField()&&!t.isEndGroup();){var s=t.getFieldNumber();1==s?o=n.call(t):2==s&&(e.valueCtor_?(jspb.asserts.assert(a),i||(i=new e.valueCtor_),r.call(t,i,a)):i=r.call(t))}jspb.asserts.assert(null!=o),jspb.asserts.assert(null!=i),e.set(o,i)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,n,r,a){this.fieldIndex=e,this.fieldName=t,this.ctor=n,this.toObjectFn=r,this.isRepeated=a},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(e,t,n,r,a,o){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=n,this.binaryMessageSerializeFn=r,this.binaryMessageDeserializeFn=a,this.isPacked=o},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,n,r,a,o){if(e.wrappers_=null,t||(t=n?[n]:[]),e.messageId_=n?String(n):void 0,e.arrayIndexOffset_=0===n?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,r),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=a),a)for(t=0;t<a.length;t++)(n=a[t])<e.pivot_?(n=jspb.Message.getIndex_(e,n),e.array[n]=e.array[n]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[n]=e.extensionObject_[n]||jspb.Message.EMPTY_LIST_SENTINEL_);if(o&&o.length)for(t=0;t<o.length;t++)jspb.Message.computeOneofCase(e,o[t])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:Array.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var n=e.array.length,r=-1;if(n&&(r=n-1,n=e.array[r],jspb.Message.isExtensionObject_(n)))return e.pivot_=jspb.Message.getFieldNumber_(e,r),void(e.extensionObject_=n);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,r+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=t.call(e[a],n,e[a]);return r},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(e,t,n,r,a){for(var o in n){var i=n[o],s=r.call(e,i);if(null!=s){for(var u in i.fieldName)if(i.fieldName.hasOwnProperty(u))break;t[u]=i.toObjectFn?i.isRepeated?jspb.Message.toObjectList(s,i.toObjectFn,a):i.toObjectFn(a,s):s}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(e,t,n,r){for(var a in n){var o=n[a],i=o.fieldInfo;if(!o.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var s=r.call(e,i);if(null!=s)if(i.isMessageType()){if(!o.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");o.binaryWriterFn.call(t,i.fieldIndex,s,o.binaryMessageSerializeFn)}else o.binaryWriterFn.call(t,i.fieldIndex,s)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(e,t,n,r,a){var o=n[t.getFieldNumber()];if(o){if(n=o.fieldInfo,!o.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(n.isMessageType()){var i=new n.ctor;o.binaryReaderFn.call(t,i,o.binaryMessageDeserializeFn)}else i=o.binaryReaderFn.call(t);n.isRepeated&&!o.isPacked?(t=r.call(e,n))?t.push(i):a.call(e,n,[i]):a.call(e,n,i)}else t.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var n=e.array[t];return n===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:n}if(e.extensionObject_)return(n=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:n},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:+e},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:!!e},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(e,t){var n=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var r=0;r<n.length;r++)n[r]=+n[r];e.convertedPrimitiveFields_[t]=!0}return n},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(e,t){var n=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var r=0;r<n.length;r++)n[r]=!!n[r];e.convertedPrimitiveFields_[t]=!0}return n},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(e){return null==e||"string"==typeof e?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:"string"==typeof e?goog.crypt.base64.decodeStringToUint8Array(e):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),e.length&&"string"!=typeof e[0]?goog.array.map(e,jspb.Message.bytesAsB64):e},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,(function(e){goog.typeOf(e)!=t&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)}))}},jspb.Message.getFieldWithDefault=function(e,t,n){return null==(e=jspb.Message.getField(e,t))?n:e},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(e,t,n){return null==(e=jspb.Message.getBooleanField(e,t))?n:e},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(e,t,n){return null==(e=jspb.Message.getOptionalFloatingPointField(e,t))?n:e},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(e,t,n,r){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var a=jspb.Message.getField(e,t);if(!a){if(n)return;a=[],jspb.Message.setField(e,t,a)}return e.wrappers_[t]=new jspb.Map(a,r)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(e,t,n){return jspb.asserts.assertInstanceof(e,jspb.Message),t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=n:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=n),e},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(e,t,n){return jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(e,t,n){return jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(e,t,n){return jspb.Message.setFieldIgnoringDefault_(e,t,n,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(e,t,n){return jspb.Message.setFieldIgnoringDefault_(e,t,n,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(e,t,n){return jspb.Message.setFieldIgnoringDefault_(e,t,n,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(e,t,n){return jspb.Message.setFieldIgnoringDefault_(e,t,n,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(e,t,n){return jspb.Message.setFieldIgnoringDefault_(e,t,n,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(e,t,n,r){return jspb.asserts.assertInstanceof(e,jspb.Message),n!==r?jspb.Message.setField(e,t,n):t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(e),delete e.extensionObject_[t]),e},jspb.Message.addToRepeatedField=function(e,t,n,r){return jspb.asserts.assertInstanceof(e,jspb.Message),t=jspb.Message.getRepeatedField(e,t),null!=r?t.splice(r,0,n):t.push(n),e},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(e,t,n,r){return jspb.asserts.assertInstanceof(e,jspb.Message),(n=jspb.Message.computeOneofCase(e,n))&&n!==t&&void 0!==r&&(e.wrappers_&&n in e.wrappers_&&(e.wrappers_[n]=void 0),jspb.Message.setField(e,n,void 0)),jspb.Message.setField(e,t,r)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(e,t){for(var n,r,a=0;a<t.length;a++){var o=t[a],i=jspb.Message.getField(e,o);null!=i&&(n=o,r=i,jspb.Message.setField(e,o,void 0))}return n?(jspb.Message.setField(e,n,r),n):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(e,t,n,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[n]){var a=jspb.Message.getField(e,n);(r||a)&&(e.wrappers_[n]=new t(a))}return e.wrappers_[n]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(e,t,n){return jspb.Message.wrapRepeatedField_(e,t,n),(t=e.wrappers_[n])==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[n]=[]),t},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(e,t,n){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[n]){for(var r=jspb.Message.getRepeatedField(e,n),a=[],o=0;o<r.length;o++)a[o]=new t(r[o]);e.wrappers_[n]=a}},jspb.Message.setWrapperField=function(e,t,n){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var r=n?n.toArray():n;return e.wrappers_[t]=n,jspb.Message.setField(e,t,r)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(e,t,n,r){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var a=r?r.toArray():r;return e.wrappers_[t]=r,jspb.Message.setOneofField(e,t,n,a)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(e,t,n){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={}),n=n||[];for(var r=[],a=0;a<n.length;a++)r[a]=n[a].toArray();return e.wrappers_[t]=n,jspb.Message.setField(e,t,r)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(e,t,n,r,a){jspb.Message.wrapRepeatedField_(e,r,t);var o=e.wrappers_[t];return o||(o=e.wrappers_[t]=[]),n=n||new r,e=jspb.Message.getRepeatedField(e,t),null!=a?(o.splice(a,0,n),e.splice(a,0,n.toArray())):(o.push(n),e.push(n.toArray())),n},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(e,t,n,r){for(var a={},o=0;o<e.length;o++)a[t.call(e[o])]=n?n.call(e[o],r,e[o]):e[o];return a},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]&&t[n].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],(function(t){return new e.ctor(t)}))),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var n=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[n]=t,this.extensionObject_[n]=goog.array.map(t,(function(e){return e.toArray()}))):this.extensionObject_[n]=t):e.isMessageType()?(this.wrappers_[n]=t,this.extensionObject_[n]=t?t.toArray():t):this.extensionObject_[n]=t,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var n=e.toArray();t=t.toArray();var r=[],a=0,o=n.length>t.length?n.length:t.length;for(e.getJsPbMessageId()&&(r[0]=e.getJsPbMessageId(),a=1);a<o;a++)jspb.Message.compareFields(n[a],t[a])||(r[a]=t[a]);return new e.constructor(r)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var n,r={};for(n in e)r[n]=0;for(n in t)r[n]=0;for(n in r)if(!jspb.Message.compareFields(e[n],t[n]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!("number"==typeof e&&isNaN(e)||"number"==typeof t&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}if(e.constructor===Array){var r=void 0,a=void 0,o=Math.max(e.length,t.length);for(n=0;n<o;n++){var i=e[n],s=t[n];if(i&&i.constructor==Object&&(jspb.asserts.assert(void 0===r),jspb.asserts.assert(n===e.length-1),r=i,i=void 0),s&&s.constructor==Object&&(jspb.asserts.assert(void 0===a),jspb.asserts.assert(n===t.length-1),a=s,s=void 0),!jspb.Message.compareFields(i,s))return!1}return!r&&!a||(r=r||{},a=a||{},jspb.Message.compareExtensions(r,a))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){jspb.asserts.assertInstanceof(e,jspb.Message),jspb.asserts.assertInstanceof(t,jspb.Message),jspb.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var n=t.toArray(),r=e.toArray(),a=n.length=0;a<r.length;a++)n[a]=r[a];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(e){if(Array.isArray(e)){for(var t=Array(e.length),n=0;n<e.length;n++){var r=e[n];null!=r&&(t[n]="object"==typeof r?jspb.Message.clone_(jspb.asserts.assert(r)):r)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);for(n in t={},e)null!=(r=e[n])&&(t[n]="object"==typeof r?jspb.Message.clone_(jspb.asserts.assert(r)):r);return t},jspb.Message.registerMessageType=function(e,t){t.messageId=e},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf);var calculator_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.CalculatorOptions",null,r),proto.mediapipe.CalculatorOptions=function(e){t.Message.initialize(this,e,0,2,null,null)},n.inherits(proto.mediapipe.CalculatorOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorOptions.displayName="proto.mediapipe.CalculatorOptions"),proto.mediapipe.CalculatorOptions.extensions={},proto.mediapipe.CalculatorOptions.extensionsBinary={},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorOptions.prototype.toObject=function(e){return proto.mediapipe.CalculatorOptions.toObject(e,this)},proto.mediapipe.CalculatorOptions.toObject=function(e,n){var r,a={mergeFields:null==(r=t.Message.getBooleanField(n,1))?void 0:r};return t.Message.toObjectExtension(n,a,proto.mediapipe.CalculatorOptions.extensions,proto.mediapipe.CalculatorOptions.prototype.getExtension,e),e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.CalculatorOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.CalculatorOptions;return proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader=function(e,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var r=n.readBool();e.setMergeFields(r)}else t.Message.readBinaryExtension(e,n,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension,proto.mediapipe.CalculatorOptions.prototype.setExtension);return e},proto.mediapipe.CalculatorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.CalculatorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.CalculatorOptions.serializeBinaryToWriter=function(e,n){var r;null!=(r=t.Message.getField(e,1))&&n.writeBool(1,r),t.Message.serializeBinaryExtensions(e,n,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension)},proto.mediapipe.CalculatorOptions.prototype.getMergeFields=function(){return t.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.CalculatorOptions.prototype.setMergeFields=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.CalculatorOptions.prototype.clearMergeFields=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.CalculatorOptions.prototype.hasMergeFields=function(){return null!=t.Message.getField(this,1)},n.object.extend(e,proto.mediapipe)}(calculator_options_pb);var any_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.google.protobuf.Any",null,r),proto.google.protobuf.Any=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.google.protobuf.Any,t.Message),n.DEBUG&&!COMPILED&&(proto.google.protobuf.Any.displayName="proto.google.protobuf.Any"),t.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Any.prototype.toObject=function(e){return proto.google.protobuf.Any.toObject(e,this)},proto.google.protobuf.Any.toObject=function(e,n){var r={typeUrl:t.Message.getFieldWithDefault(n,1,""),value:n.getValue_asB64()};return e&&(r.$jspbMessageInstance=n),r}),proto.google.protobuf.Any.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.google.protobuf.Any;return proto.google.protobuf.Any.deserializeBinaryFromReader(r,n)},proto.google.protobuf.Any.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTypeUrl(n);break;case 2:n=t.readBytes(),e.setValue(n);break;default:t.skipField()}return e},proto.google.protobuf.Any.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.google.protobuf.Any.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.Any.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getTypeUrl()).length>0&&t.writeString(1,n),(n=e.getValue_asU8()).length>0&&t.writeBytes(2,n)},proto.google.protobuf.Any.prototype.getTypeUrl=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.Any.prototype.setTypeUrl=function(e){return t.Message.setProto3StringField(this,1,e)},proto.google.protobuf.Any.prototype.getValue=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.Any.prototype.getValue_asB64=function(){return t.Message.bytesAsB64(this.getValue())},proto.google.protobuf.Any.prototype.getValue_asU8=function(){return t.Message.bytesAsU8(this.getValue())},proto.google.protobuf.Any.prototype.setValue=function(e){return t.Message.setProto3BytesField(this,2,e)},n.object.extend(e,proto.google.protobuf),proto.google.protobuf.Any.prototype.getTypeName=function(){return this.getTypeUrl().split("/").pop()},proto.google.protobuf.Any.prototype.pack=function(e,t,n){n||(n="type.googleapis.com/"),"/"!=n.substr(-1)?this.setTypeUrl(n+"/"+t):this.setTypeUrl(n+t),this.setValue(e)},proto.google.protobuf.Any.prototype.unpack=function(e,t){return this.getTypeName()==t?e(this.getValue_asU8()):null}}(any_pb);var mediapipe_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.MediaPipeOptions",null,r),proto.mediapipe.MediaPipeOptions=function(e){t.Message.initialize(this,e,0,1,null,null)},n.inherits(proto.mediapipe.MediaPipeOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.MediaPipeOptions.displayName="proto.mediapipe.MediaPipeOptions"),proto.mediapipe.MediaPipeOptions.extensions={},proto.mediapipe.MediaPipeOptions.extensionsBinary={},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MediaPipeOptions.prototype.toObject=function(e){return proto.mediapipe.MediaPipeOptions.toObject(e,this)},proto.mediapipe.MediaPipeOptions.toObject=function(e,n){var r={};return t.Message.toObjectExtension(n,r,proto.mediapipe.MediaPipeOptions.extensions,proto.mediapipe.MediaPipeOptions.prototype.getExtension,e),e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.MediaPipeOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.MediaPipeOptions;return proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader=function(e,n){for(;n.nextField()&&!n.isEndGroup();)n.getFieldNumber(),t.Message.readBinaryExtension(e,n,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension,proto.mediapipe.MediaPipeOptions.prototype.setExtension);return e},proto.mediapipe.MediaPipeOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter=function(e,n){t.Message.serializeBinaryExtensions(e,n,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension)},n.object.extend(e,proto.mediapipe)}(mediapipe_options_pb);var packet_factory_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.PacketFactoryConfig",null,r),n.exportSymbol("proto.mediapipe.PacketFactoryOptions",null,r),n.exportSymbol("proto.mediapipe.PacketManagerConfig",null,r),proto.mediapipe.PacketFactoryOptions=function(e){t.Message.initialize(this,e,0,1,null,null)},n.inherits(proto.mediapipe.PacketFactoryOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryOptions.displayName="proto.mediapipe.PacketFactoryOptions"),proto.mediapipe.PacketFactoryOptions.extensions={},proto.mediapipe.PacketFactoryOptions.extensionsBinary={},proto.mediapipe.PacketFactoryConfig=function(e){t.Message.initialize(this,e,0,500,null,null)},n.inherits(proto.mediapipe.PacketFactoryConfig,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryConfig.displayName="proto.mediapipe.PacketFactoryConfig"),proto.mediapipe.PacketManagerConfig=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.PacketManagerConfig.repeatedFields_,null)},n.inherits(proto.mediapipe.PacketManagerConfig,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.PacketManagerConfig.displayName="proto.mediapipe.PacketManagerConfig"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryOptions.prototype.toObject=function(e){return proto.mediapipe.PacketFactoryOptions.toObject(e,this)},proto.mediapipe.PacketFactoryOptions.toObject=function(e,n){var r={};return t.Message.toObjectExtension(n,r,proto.mediapipe.PacketFactoryOptions.extensions,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,e),e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.PacketFactoryOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.PacketFactoryOptions;return proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader=function(e,n){for(;n.nextField()&&!n.isEndGroup();)n.getFieldNumber(),t.Message.readBinaryExtension(e,n,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,proto.mediapipe.PacketFactoryOptions.prototype.setExtension);return e},proto.mediapipe.PacketFactoryOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter=function(e,n){t.Message.serializeBinaryExtensions(e,n,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryConfig.prototype.toObject=function(e){return proto.mediapipe.PacketFactoryConfig.toObject(e,this)},proto.mediapipe.PacketFactoryConfig.toObject=function(e,n){var r,a={packetFactory:null==(r=t.Message.getField(n,1))?void 0:r,outputSidePacket:null==(r=t.Message.getField(n,2))?void 0:r,externalOutput:null==(r=t.Message.getField(n,1002))?void 0:r,options:(r=n.getOptions())&&proto.mediapipe.PacketFactoryOptions.toObject(e,r)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.PacketFactoryConfig.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.PacketFactoryConfig;return proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader(r,n)},proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setPacketFactory(n);break;case 2:n=t.readString(),e.setOutputSidePacket(n);break;case 1002:n=t.readString(),e.setExternalOutput(n);break;case 3:n=new proto.mediapipe.PacketFactoryOptions,t.readMessage(n,proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader),e.setOptions(n);break;default:t.skipField()}return e},proto.mediapipe.PacketFactoryConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),null!=(r=t.Message.getField(e,2))&&n.writeString(2,r),null!=(r=t.Message.getField(e,1002))&&n.writeString(1002,r),null!=(r=e.getOptions())&&n.writeMessage(3,r,proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter)},proto.mediapipe.PacketFactoryConfig.prototype.getPacketFactory=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketFactoryConfig.prototype.setPacketFactory=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.PacketFactoryConfig.prototype.clearPacketFactory=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasPacketFactory=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.PacketFactoryConfig.prototype.getOutputSidePacket=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.PacketFactoryConfig.prototype.setOutputSidePacket=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.PacketFactoryConfig.prototype.clearOutputSidePacket=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOutputSidePacket=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.PacketFactoryConfig.prototype.getExternalOutput=function(){return t.Message.getFieldWithDefault(this,1002,"")},proto.mediapipe.PacketFactoryConfig.prototype.setExternalOutput=function(e){return t.Message.setField(this,1002,e)},proto.mediapipe.PacketFactoryConfig.prototype.clearExternalOutput=function(){return t.Message.setField(this,1002,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasExternalOutput=function(){return null!=t.Message.getField(this,1002)},proto.mediapipe.PacketFactoryConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.mediapipe.PacketFactoryOptions,3)},proto.mediapipe.PacketFactoryConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.PacketFactoryConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.PacketManagerConfig.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketManagerConfig.prototype.toObject=function(e){return proto.mediapipe.PacketManagerConfig.toObject(e,this)},proto.mediapipe.PacketManagerConfig.toObject=function(e,n){var r={packetList:t.Message.toObjectList(n.getPacketList(),proto.mediapipe.PacketFactoryConfig.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.PacketManagerConfig.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.PacketManagerConfig;return proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader(r,n)},proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.PacketFactoryConfig;t.readMessage(n,proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader),e.addPacket(n)}else t.skipField();return e},proto.mediapipe.PacketManagerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter=function(e,t){var n;(n=e.getPacketList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter)},proto.mediapipe.PacketManagerConfig.prototype.getPacketList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.PacketFactoryConfig,1)},proto.mediapipe.PacketManagerConfig.prototype.setPacketList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.PacketManagerConfig.prototype.addPacket=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.PacketFactoryConfig,n)},proto.mediapipe.PacketManagerConfig.prototype.clearPacketList=function(){return this.setPacketList([])},n.object.extend(e,proto.mediapipe)}(packet_factory_pb);var packet_generator_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.PacketGeneratorConfig",null,r),n.exportSymbol("proto.mediapipe.PacketGeneratorOptions",null,r),proto.mediapipe.PacketGeneratorOptions=function(e){t.Message.initialize(this,e,0,2,null,null)},n.inherits(proto.mediapipe.PacketGeneratorOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorOptions.displayName="proto.mediapipe.PacketGeneratorOptions"),proto.mediapipe.PacketGeneratorOptions.extensions={},proto.mediapipe.PacketGeneratorOptions.extensionsBinary={},proto.mediapipe.PacketGeneratorConfig=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.PacketGeneratorConfig.repeatedFields_,null)},n.inherits(proto.mediapipe.PacketGeneratorConfig,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorConfig.displayName="proto.mediapipe.PacketGeneratorConfig"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorOptions.prototype.toObject=function(e){return proto.mediapipe.PacketGeneratorOptions.toObject(e,this)},proto.mediapipe.PacketGeneratorOptions.toObject=function(e,n){var r={mergeFields:t.Message.getBooleanFieldWithDefault(n,1,!0)};return t.Message.toObjectExtension(n,r,proto.mediapipe.PacketGeneratorOptions.extensions,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,e),e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.PacketGeneratorOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.PacketGeneratorOptions;return proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader=function(e,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var r=n.readBool();e.setMergeFields(r)}else t.Message.readBinaryExtension(e,n,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,proto.mediapipe.PacketGeneratorOptions.prototype.setExtension);return e},proto.mediapipe.PacketGeneratorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter=function(e,n){var r;null!=(r=t.Message.getField(e,1))&&n.writeBool(1,r),t.Message.serializeBinaryExtensions(e,n,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension)},proto.mediapipe.PacketGeneratorOptions.prototype.getMergeFields=function(){return t.Message.getBooleanFieldWithDefault(this,1,!0)},proto.mediapipe.PacketGeneratorOptions.prototype.setMergeFields=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.PacketGeneratorOptions.prototype.clearMergeFields=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorOptions.prototype.hasMergeFields=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.PacketGeneratorConfig.repeatedFields_=[2,1002,3,1003],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorConfig.prototype.toObject=function(e){return proto.mediapipe.PacketGeneratorConfig.toObject(e,this)},proto.mediapipe.PacketGeneratorConfig.toObject=function(e,n){var r,a={packetGenerator:null==(r=t.Message.getField(n,1))?void 0:r,inputSidePacketList:null==(r=t.Message.getRepeatedField(n,2))?void 0:r,externalInputList:null==(r=t.Message.getRepeatedField(n,1002))?void 0:r,outputSidePacketList:null==(r=t.Message.getRepeatedField(n,3))?void 0:r,externalOutputList:null==(r=t.Message.getRepeatedField(n,1003))?void 0:r,options:(r=n.getOptions())&&proto.mediapipe.PacketGeneratorOptions.toObject(e,r)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.PacketGeneratorConfig.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.PacketGeneratorConfig;return proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader(r,n)},proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setPacketGenerator(n);break;case 2:n=t.readString(),e.addInputSidePacket(n);break;case 1002:n=t.readString(),e.addExternalInput(n);break;case 3:n=t.readString(),e.addOutputSidePacket(n);break;case 1003:n=t.readString(),e.addExternalOutput(n);break;case 4:n=new proto.mediapipe.PacketGeneratorOptions,t.readMessage(n,proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader),e.setOptions(n);break;default:t.skipField()}return e},proto.mediapipe.PacketGeneratorConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),(r=e.getInputSidePacketList()).length>0&&n.writeRepeatedString(2,r),(r=e.getExternalInputList()).length>0&&n.writeRepeatedString(1002,r),(r=e.getOutputSidePacketList()).length>0&&n.writeRepeatedString(3,r),(r=e.getExternalOutputList()).length>0&&n.writeRepeatedString(1003,r),null!=(r=e.getOptions())&&n.writeMessage(4,r,proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter)},proto.mediapipe.PacketGeneratorConfig.prototype.getPacketGenerator=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketGeneratorConfig.prototype.setPacketGenerator=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.PacketGeneratorConfig.prototype.clearPacketGenerator=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasPacketGenerator=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.PacketGeneratorConfig.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.PacketGeneratorConfig.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addInputSidePacket=function(e,n){return t.Message.addToRepeatedField(this,2,e,n)},proto.mediapipe.PacketGeneratorConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalInputList=function(){return t.Message.getRepeatedField(this,1002)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalInputList=function(e){return t.Message.setField(this,1002,e||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalInput=function(e,n){return t.Message.addToRepeatedField(this,1002,e,n)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOutputSidePacketList=function(){return t.Message.getRepeatedField(this,3)},proto.mediapipe.PacketGeneratorConfig.prototype.setOutputSidePacketList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addOutputSidePacket=function(e,n){return t.Message.addToRepeatedField(this,3,e,n)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalOutputList=function(){return t.Message.getRepeatedField(this,1003)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalOutputList=function(e){return t.Message.setField(this,1003,e||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalOutput=function(e,n){return t.Message.addToRepeatedField(this,1003,e,n)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalOutputList=function(){return this.setExternalOutputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,proto.mediapipe.PacketGeneratorOptions,4)},proto.mediapipe.PacketGeneratorConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,4)},n.object.extend(e,proto.mediapipe)}(packet_generator_pb);var status_handler_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=mediapipe_options_pb;n.object.extend(proto,a),n.exportSymbol("proto.mediapipe.StatusHandlerConfig",null,r),proto.mediapipe.StatusHandlerConfig=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.StatusHandlerConfig.repeatedFields_,null)},n.inherits(proto.mediapipe.StatusHandlerConfig,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.StatusHandlerConfig.displayName="proto.mediapipe.StatusHandlerConfig"),proto.mediapipe.StatusHandlerConfig.repeatedFields_=[2,1002],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.StatusHandlerConfig.prototype.toObject=function(e){return proto.mediapipe.StatusHandlerConfig.toObject(e,this)},proto.mediapipe.StatusHandlerConfig.toObject=function(e,n){var r,o={statusHandler:null==(r=t.Message.getField(n,1))?void 0:r,inputSidePacketList:null==(r=t.Message.getRepeatedField(n,2))?void 0:r,externalInputList:null==(r=t.Message.getRepeatedField(n,1002))?void 0:r,options:(r=n.getOptions())&&a.MediaPipeOptions.toObject(e,r)};return e&&(o.$jspbMessageInstance=n),o}),proto.mediapipe.StatusHandlerConfig.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.StatusHandlerConfig;return proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader(r,n)},proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setStatusHandler(n);break;case 2:n=t.readString(),e.addInputSidePacket(n);break;case 1002:n=t.readString(),e.addExternalInput(n);break;case 3:n=new a.MediaPipeOptions,t.readMessage(n,a.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(n);break;default:t.skipField()}return e},proto.mediapipe.StatusHandlerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),(r=e.getInputSidePacketList()).length>0&&n.writeRepeatedString(2,r),(r=e.getExternalInputList()).length>0&&n.writeRepeatedString(1002,r),null!=(r=e.getOptions())&&n.writeMessage(3,r,a.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.StatusHandlerConfig.prototype.getStatusHandler=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.StatusHandlerConfig.prototype.setStatusHandler=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.StatusHandlerConfig.prototype.clearStatusHandler=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasStatusHandler=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.StatusHandlerConfig.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.StatusHandlerConfig.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.StatusHandlerConfig.prototype.addInputSidePacket=function(e,n){return t.Message.addToRepeatedField(this,2,e,n)},proto.mediapipe.StatusHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.StatusHandlerConfig.prototype.getExternalInputList=function(){return t.Message.getRepeatedField(this,1002)},proto.mediapipe.StatusHandlerConfig.prototype.setExternalInputList=function(e){return t.Message.setField(this,1002,e||[])},proto.mediapipe.StatusHandlerConfig.prototype.addExternalInput=function(e,n){return t.Message.addToRepeatedField(this,1002,e,n)},proto.mediapipe.StatusHandlerConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.StatusHandlerConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,a.MediaPipeOptions,3)},proto.mediapipe.StatusHandlerConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.StatusHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},n.object.extend(e,proto.mediapipe)}(status_handler_pb);var stream_handler_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=mediapipe_options_pb;n.object.extend(proto,a),n.exportSymbol("proto.mediapipe.InputStreamHandlerConfig",null,r),n.exportSymbol("proto.mediapipe.OutputStreamHandlerConfig",null,r),proto.mediapipe.InputStreamHandlerConfig=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.InputStreamHandlerConfig,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamHandlerConfig.displayName="proto.mediapipe.InputStreamHandlerConfig"),proto.mediapipe.OutputStreamHandlerConfig=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_,null)},n.inherits(proto.mediapipe.OutputStreamHandlerConfig,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.OutputStreamHandlerConfig.displayName="proto.mediapipe.OutputStreamHandlerConfig"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamHandlerConfig.prototype.toObject=function(e){return proto.mediapipe.InputStreamHandlerConfig.toObject(e,this)},proto.mediapipe.InputStreamHandlerConfig.toObject=function(e,n){var r,o={inputStreamHandler:t.Message.getFieldWithDefault(n,1,"DefaultInputStreamHandler"),options:(r=n.getOptions())&&a.MediaPipeOptions.toObject(e,r)};return e&&(o.$jspbMessageInstance=n),o}),proto.mediapipe.InputStreamHandlerConfig.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InputStreamHandlerConfig;return proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader(r,n)},proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setInputStreamHandler(n);break;case 3:n=new a.MediaPipeOptions,t.readMessage(n,a.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(n);break;default:t.skipField()}return e},proto.mediapipe.InputStreamHandlerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),null!=(r=e.getOptions())&&n.writeMessage(3,r,a.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.InputStreamHandlerConfig.prototype.getInputStreamHandler=function(){return t.Message.getFieldWithDefault(this,1,"DefaultInputStreamHandler")},proto.mediapipe.InputStreamHandlerConfig.prototype.setInputStreamHandler=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearInputStreamHandler=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasInputStreamHandler=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InputStreamHandlerConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,a.MediaPipeOptions,3)},proto.mediapipe.InputStreamHandlerConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_=[2],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.OutputStreamHandlerConfig.prototype.toObject=function(e){return proto.mediapipe.OutputStreamHandlerConfig.toObject(e,this)},proto.mediapipe.OutputStreamHandlerConfig.toObject=function(e,n){var r,o={outputStreamHandler:t.Message.getFieldWithDefault(n,1,"InOrderOutputStreamHandler"),inputSidePacketList:null==(r=t.Message.getRepeatedField(n,2))?void 0:r,options:(r=n.getOptions())&&a.MediaPipeOptions.toObject(e,r)};return e&&(o.$jspbMessageInstance=n),o}),proto.mediapipe.OutputStreamHandlerConfig.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.OutputStreamHandlerConfig;return proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader(r,n)},proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setOutputStreamHandler(n);break;case 2:n=t.readString(),e.addInputSidePacket(n);break;case 3:n=new a.MediaPipeOptions,t.readMessage(n,a.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(n);break;default:t.skipField()}return e},proto.mediapipe.OutputStreamHandlerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),(r=e.getInputSidePacketList()).length>0&&n.writeRepeatedString(2,r),null!=(r=e.getOptions())&&n.writeMessage(3,r,a.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOutputStreamHandler=function(){return t.Message.getFieldWithDefault(this,1,"InOrderOutputStreamHandler")},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOutputStreamHandler=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOutputStreamHandler=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOutputStreamHandler=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.OutputStreamHandlerConfig.prototype.addInputSidePacket=function(e,n){return t.Message.addToRepeatedField(this,2,e,n)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,a.MediaPipeOptions,3)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},n.object.extend(e,proto.mediapipe)}(stream_handler_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_options_pb;n.object.extend(proto,a);var o=any_pb;n.object.extend(proto,o);var i=mediapipe_options_pb;n.object.extend(proto,i);var s=packet_factory_pb;n.object.extend(proto,s);var u=packet_generator_pb;n.object.extend(proto,u);var l=status_handler_pb;n.object.extend(proto,l);var p=stream_handler_pb;n.object.extend(proto,p),n.exportSymbol("proto.mediapipe.CalculatorGraphConfig",null,r),n.exportSymbol("proto.mediapipe.CalculatorGraphConfig.Node",null,r),n.exportSymbol("proto.mediapipe.ExecutorConfig",null,r),n.exportSymbol("proto.mediapipe.InputCollection",null,r),n.exportSymbol("proto.mediapipe.InputCollection.InputType",null,r),n.exportSymbol("proto.mediapipe.InputCollectionSet",null,r),n.exportSymbol("proto.mediapipe.InputStreamInfo",null,r),n.exportSymbol("proto.mediapipe.ProfilerConfig",null,r),proto.mediapipe.ExecutorConfig=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.ExecutorConfig,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.ExecutorConfig.displayName="proto.mediapipe.ExecutorConfig"),proto.mediapipe.InputCollection=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.InputCollection.repeatedFields_,null)},n.inherits(proto.mediapipe.InputCollection,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollection.displayName="proto.mediapipe.InputCollection"),proto.mediapipe.InputCollectionSet=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.InputCollectionSet.repeatedFields_,null)},n.inherits(proto.mediapipe.InputCollectionSet,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollectionSet.displayName="proto.mediapipe.InputCollectionSet"),proto.mediapipe.InputStreamInfo=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.InputStreamInfo,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamInfo.displayName="proto.mediapipe.InputStreamInfo"),proto.mediapipe.ProfilerConfig=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.ProfilerConfig.repeatedFields_,null)},n.inherits(proto.mediapipe.ProfilerConfig,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.ProfilerConfig.displayName="proto.mediapipe.ProfilerConfig"),proto.mediapipe.CalculatorGraphConfig=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.CalculatorGraphConfig.repeatedFields_,null)},n.inherits(proto.mediapipe.CalculatorGraphConfig,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.displayName="proto.mediapipe.CalculatorGraphConfig"),proto.mediapipe.CalculatorGraphConfig.Node=function(e){t.Message.initialize(this,e,0,500,proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_,null)},n.inherits(proto.mediapipe.CalculatorGraphConfig.Node,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.Node.displayName="proto.mediapipe.CalculatorGraphConfig.Node"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ExecutorConfig.prototype.toObject=function(e){return proto.mediapipe.ExecutorConfig.toObject(e,this)},proto.mediapipe.ExecutorConfig.toObject=function(e,n){var r,a={name:t.Message.getFieldWithDefault(n,1,""),type:t.Message.getFieldWithDefault(n,2,""),options:(r=n.getOptions())&&i.MediaPipeOptions.toObject(e,r)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.ExecutorConfig.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.ExecutorConfig;return proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader(r,n)},proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setName(n);break;case 2:n=t.readString(),e.setType(n);break;case 3:n=new i.MediaPipeOptions,t.readMessage(n,i.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(n);break;default:t.skipField()}return e},proto.mediapipe.ExecutorConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ExecutorConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ExecutorConfig.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getName()).length>0&&t.writeString(1,n),(n=e.getType()).length>0&&t.writeString(2,n),null!=(n=e.getOptions())&&t.writeMessage(3,n,i.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.ExecutorConfig.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.ExecutorConfig.prototype.setName=function(e){return t.Message.setProto3StringField(this,1,e)},proto.mediapipe.ExecutorConfig.prototype.getType=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.ExecutorConfig.prototype.setType=function(e){return t.Message.setProto3StringField(this,2,e)},proto.mediapipe.ExecutorConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,i.MediaPipeOptions,3)},proto.mediapipe.ExecutorConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.ExecutorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.ExecutorConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.InputCollection.repeatedFields_=[2,1002],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollection.prototype.toObject=function(e){return proto.mediapipe.InputCollection.toObject(e,this)},proto.mediapipe.InputCollection.toObject=function(e,n){var r,a={name:t.Message.getFieldWithDefault(n,1,""),sidePacketNameList:null==(r=t.Message.getRepeatedField(n,2))?void 0:r,externalInputNameList:null==(r=t.Message.getRepeatedField(n,1002))?void 0:r,inputType:t.Message.getFieldWithDefault(n,3,0),fileName:t.Message.getFieldWithDefault(n,4,"")};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.InputCollection.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InputCollection;return proto.mediapipe.InputCollection.deserializeBinaryFromReader(r,n)},proto.mediapipe.InputCollection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setName(n);break;case 2:n=t.readString(),e.addSidePacketName(n);break;case 1002:n=t.readString(),e.addExternalInputName(n);break;case 3:n=t.readEnum(),e.setInputType(n);break;case 4:n=t.readString(),e.setFileName(n);break;default:t.skipField()}return e},proto.mediapipe.InputCollection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InputCollection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InputCollection.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getName()).length>0&&t.writeString(1,n),(n=e.getSidePacketNameList()).length>0&&t.writeRepeatedString(2,n),(n=e.getExternalInputNameList()).length>0&&t.writeRepeatedString(1002,n),0!==(n=e.getInputType())&&t.writeEnum(3,n),(n=e.getFileName()).length>0&&t.writeString(4,n)},proto.mediapipe.InputCollection.InputType={UNKNOWN:0,RECORDIO:1,FOREIGN_RECORDIO:2,FOREIGN_CSV_TEXT:3,INVALID_UPPER_BOUND:4},proto.mediapipe.InputCollection.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputCollection.prototype.setName=function(e){return t.Message.setProto3StringField(this,1,e)},proto.mediapipe.InputCollection.prototype.getSidePacketNameList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.InputCollection.prototype.setSidePacketNameList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.InputCollection.prototype.addSidePacketName=function(e,n){return t.Message.addToRepeatedField(this,2,e,n)},proto.mediapipe.InputCollection.prototype.clearSidePacketNameList=function(){return this.setSidePacketNameList([])},proto.mediapipe.InputCollection.prototype.getExternalInputNameList=function(){return t.Message.getRepeatedField(this,1002)},proto.mediapipe.InputCollection.prototype.setExternalInputNameList=function(e){return t.Message.setField(this,1002,e||[])},proto.mediapipe.InputCollection.prototype.addExternalInputName=function(e,n){return t.Message.addToRepeatedField(this,1002,e,n)},proto.mediapipe.InputCollection.prototype.clearExternalInputNameList=function(){return this.setExternalInputNameList([])},proto.mediapipe.InputCollection.prototype.getInputType=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.InputCollection.prototype.setInputType=function(e){return t.Message.setProto3EnumField(this,3,e)},proto.mediapipe.InputCollection.prototype.getFileName=function(){return t.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.InputCollection.prototype.setFileName=function(e){return t.Message.setProto3StringField(this,4,e)},proto.mediapipe.InputCollectionSet.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollectionSet.prototype.toObject=function(e){return proto.mediapipe.InputCollectionSet.toObject(e,this)},proto.mediapipe.InputCollectionSet.toObject=function(e,n){var r={inputCollectionList:t.Message.toObjectList(n.getInputCollectionList(),proto.mediapipe.InputCollection.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.InputCollectionSet.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InputCollectionSet;return proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader(r,n)},proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.InputCollection;t.readMessage(n,proto.mediapipe.InputCollection.deserializeBinaryFromReader),e.addInputCollection(n)}else t.skipField();return e},proto.mediapipe.InputCollectionSet.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InputCollectionSet.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InputCollectionSet.serializeBinaryToWriter=function(e,t){var n;(n=e.getInputCollectionList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.InputCollection.serializeBinaryToWriter)},proto.mediapipe.InputCollectionSet.prototype.getInputCollectionList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.InputCollection,1)},proto.mediapipe.InputCollectionSet.prototype.setInputCollectionList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.InputCollectionSet.prototype.addInputCollection=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.InputCollection,n)},proto.mediapipe.InputCollectionSet.prototype.clearInputCollectionList=function(){return this.setInputCollectionList([])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamInfo.prototype.toObject=function(e){return proto.mediapipe.InputStreamInfo.toObject(e,this)},proto.mediapipe.InputStreamInfo.toObject=function(e,n){var r={tagIndex:t.Message.getFieldWithDefault(n,1,""),backEdge:t.Message.getBooleanFieldWithDefault(n,2,!1)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.InputStreamInfo.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InputStreamInfo;return proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader(r,n)},proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTagIndex(n);break;case 2:n=t.readBool(),e.setBackEdge(n);break;default:t.skipField()}return e},proto.mediapipe.InputStreamInfo.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InputStreamInfo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InputStreamInfo.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getTagIndex()).length>0&&t.writeString(1,n),(n=e.getBackEdge())&&t.writeBool(2,n)},proto.mediapipe.InputStreamInfo.prototype.getTagIndex=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputStreamInfo.prototype.setTagIndex=function(e){return t.Message.setProto3StringField(this,1,e)},proto.mediapipe.InputStreamInfo.prototype.getBackEdge=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InputStreamInfo.prototype.setBackEdge=function(e){return t.Message.setProto3BooleanField(this,2,e)},proto.mediapipe.ProfilerConfig.repeatedFields_=[8],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ProfilerConfig.prototype.toObject=function(e){return proto.mediapipe.ProfilerConfig.toObject(e,this)},proto.mediapipe.ProfilerConfig.toObject=function(e,n){var r,a={histogramIntervalSizeUsec:t.Message.getFieldWithDefault(n,1,0),numHistogramIntervals:t.Message.getFieldWithDefault(n,2,0),enableInputOutputLatency:t.Message.getBooleanFieldWithDefault(n,3,!1),enableProfiler:t.Message.getBooleanFieldWithDefault(n,4,!1),enableStreamLatency:t.Message.getBooleanFieldWithDefault(n,5,!1),usePacketTimestampForAddedPacket:t.Message.getBooleanFieldWithDefault(n,6,!1),traceLogCapacity:t.Message.getFieldWithDefault(n,7,0),traceEventTypesDisabledList:null==(r=t.Message.getRepeatedField(n,8))?void 0:r,traceLogPath:t.Message.getFieldWithDefault(n,9,""),traceLogCount:t.Message.getFieldWithDefault(n,10,0),traceLogIntervalUsec:t.Message.getFieldWithDefault(n,11,0),traceLogMarginUsec:t.Message.getFieldWithDefault(n,12,0),traceLogDurationEvents:t.Message.getBooleanFieldWithDefault(n,13,!1),traceLogIntervalCount:t.Message.getFieldWithDefault(n,14,0),traceLogDisabled:t.Message.getBooleanFieldWithDefault(n,15,!1),traceEnabled:t.Message.getBooleanFieldWithDefault(n,16,!1),traceLogInstantEvents:t.Message.getBooleanFieldWithDefault(n,17,!1),calculatorFilter:t.Message.getFieldWithDefault(n,18,"")};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.ProfilerConfig.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.ProfilerConfig;return proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader(r,n)},proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt64();e.setHistogramIntervalSizeUsec(n);break;case 2:n=t.readInt64(),e.setNumHistogramIntervals(n);break;case 3:n=t.readBool(),e.setEnableInputOutputLatency(n);break;case 4:n=t.readBool(),e.setEnableProfiler(n);break;case 5:n=t.readBool(),e.setEnableStreamLatency(n);break;case 6:n=t.readBool(),e.setUsePacketTimestampForAddedPacket(n);break;case 7:n=t.readInt64(),e.setTraceLogCapacity(n);break;case 8:for(var r=t.isDelimited()?t.readPackedInt32():[t.readInt32()],a=0;a<r.length;a++)e.addTraceEventTypesDisabled(r[a]);break;case 9:n=t.readString(),e.setTraceLogPath(n);break;case 10:n=t.readInt32(),e.setTraceLogCount(n);break;case 11:n=t.readInt64(),e.setTraceLogIntervalUsec(n);break;case 12:n=t.readInt64(),e.setTraceLogMarginUsec(n);break;case 13:n=t.readBool(),e.setTraceLogDurationEvents(n);break;case 14:n=t.readInt32(),e.setTraceLogIntervalCount(n);break;case 15:n=t.readBool(),e.setTraceLogDisabled(n);break;case 16:n=t.readBool(),e.setTraceEnabled(n);break;case 17:n=t.readBool(),e.setTraceLogInstantEvents(n);break;case 18:n=t.readString(),e.setCalculatorFilter(n);break;default:t.skipField()}return e},proto.mediapipe.ProfilerConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ProfilerConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ProfilerConfig.serializeBinaryToWriter=function(e,t){var n=void 0;0!==(n=e.getHistogramIntervalSizeUsec())&&t.writeInt64(1,n),0!==(n=e.getNumHistogramIntervals())&&t.writeInt64(2,n),(n=e.getEnableInputOutputLatency())&&t.writeBool(3,n),(n=e.getEnableProfiler())&&t.writeBool(4,n),(n=e.getEnableStreamLatency())&&t.writeBool(5,n),(n=e.getUsePacketTimestampForAddedPacket())&&t.writeBool(6,n),0!==(n=e.getTraceLogCapacity())&&t.writeInt64(7,n),(n=e.getTraceEventTypesDisabledList()).length>0&&t.writePackedInt32(8,n),(n=e.getTraceLogPath()).length>0&&t.writeString(9,n),0!==(n=e.getTraceLogCount())&&t.writeInt32(10,n),0!==(n=e.getTraceLogIntervalUsec())&&t.writeInt64(11,n),0!==(n=e.getTraceLogMarginUsec())&&t.writeInt64(12,n),(n=e.getTraceLogDurationEvents())&&t.writeBool(13,n),0!==(n=e.getTraceLogIntervalCount())&&t.writeInt32(14,n),(n=e.getTraceLogDisabled())&&t.writeBool(15,n),(n=e.getTraceEnabled())&&t.writeBool(16,n),(n=e.getTraceLogInstantEvents())&&t.writeBool(17,n),(n=e.getCalculatorFilter()).length>0&&t.writeString(18,n)},proto.mediapipe.ProfilerConfig.prototype.getHistogramIntervalSizeUsec=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.ProfilerConfig.prototype.setHistogramIntervalSizeUsec=function(e){return t.Message.setProto3IntField(this,1,e)},proto.mediapipe.ProfilerConfig.prototype.getNumHistogramIntervals=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.ProfilerConfig.prototype.setNumHistogramIntervals=function(e){return t.Message.setProto3IntField(this,2,e)},proto.mediapipe.ProfilerConfig.prototype.getEnableInputOutputLatency=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableInputOutputLatency=function(e){return t.Message.setProto3BooleanField(this,3,e)},proto.mediapipe.ProfilerConfig.prototype.getEnableProfiler=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableProfiler=function(e){return t.Message.setProto3BooleanField(this,4,e)},proto.mediapipe.ProfilerConfig.prototype.getEnableStreamLatency=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableStreamLatency=function(e){return t.Message.setProto3BooleanField(this,5,e)},proto.mediapipe.ProfilerConfig.prototype.getUsePacketTimestampForAddedPacket=function(){return t.Message.getBooleanFieldWithDefault(this,6,!1)},proto.mediapipe.ProfilerConfig.prototype.setUsePacketTimestampForAddedPacket=function(e){return t.Message.setProto3BooleanField(this,6,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCapacity=function(){return t.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCapacity=function(e){return t.Message.setProto3IntField(this,7,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceEventTypesDisabledList=function(){return t.Message.getRepeatedField(this,8)},proto.mediapipe.ProfilerConfig.prototype.setTraceEventTypesDisabledList=function(e){return t.Message.setField(this,8,e||[])},proto.mediapipe.ProfilerConfig.prototype.addTraceEventTypesDisabled=function(e,n){return t.Message.addToRepeatedField(this,8,e,n)},proto.mediapipe.ProfilerConfig.prototype.clearTraceEventTypesDisabledList=function(){return this.setTraceEventTypesDisabledList([])},proto.mediapipe.ProfilerConfig.prototype.getTraceLogPath=function(){return t.Message.getFieldWithDefault(this,9,"")},proto.mediapipe.ProfilerConfig.prototype.setTraceLogPath=function(e){return t.Message.setProto3StringField(this,9,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCount=function(){return t.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCount=function(e){return t.Message.setProto3IntField(this,10,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalUsec=function(){return t.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalUsec=function(e){return t.Message.setProto3IntField(this,11,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogMarginUsec=function(){return t.Message.getFieldWithDefault(this,12,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogMarginUsec=function(e){return t.Message.setProto3IntField(this,12,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDurationEvents=function(){return t.Message.getBooleanFieldWithDefault(this,13,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDurationEvents=function(e){return t.Message.setProto3BooleanField(this,13,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalCount=function(){return t.Message.getFieldWithDefault(this,14,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalCount=function(e){return t.Message.setProto3IntField(this,14,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDisabled=function(){return t.Message.getBooleanFieldWithDefault(this,15,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDisabled=function(e){return t.Message.setProto3BooleanField(this,15,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceEnabled=function(){return t.Message.getBooleanFieldWithDefault(this,16,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceEnabled=function(e){return t.Message.setProto3BooleanField(this,16,e)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogInstantEvents=function(){return t.Message.getBooleanFieldWithDefault(this,17,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogInstantEvents=function(e){return t.Message.setProto3BooleanField(this,17,e)},proto.mediapipe.ProfilerConfig.prototype.getCalculatorFilter=function(){return t.Message.getFieldWithDefault(this,18,"")},proto.mediapipe.ProfilerConfig.prototype.setCalculatorFilter=function(e){return t.Message.setProto3StringField(this,18,e)},proto.mediapipe.CalculatorGraphConfig.repeatedFields_=[1,6,7,9,10,15,16,17,14,1002],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.prototype.toObject=function(e){return proto.mediapipe.CalculatorGraphConfig.toObject(e,this)},proto.mediapipe.CalculatorGraphConfig.toObject=function(e,n){var r,a={nodeList:t.Message.toObjectList(n.getNodeList(),proto.mediapipe.CalculatorGraphConfig.Node.toObject,e),packetFactoryList:t.Message.toObjectList(n.getPacketFactoryList(),s.PacketFactoryConfig.toObject,e),packetGeneratorList:t.Message.toObjectList(n.getPacketGeneratorList(),u.PacketGeneratorConfig.toObject,e),numThreads:t.Message.getFieldWithDefault(n,8,0),statusHandlerList:t.Message.toObjectList(n.getStatusHandlerList(),l.StatusHandlerConfig.toObject,e),inputStreamList:null==(r=t.Message.getRepeatedField(n,10))?void 0:r,outputStreamList:null==(r=t.Message.getRepeatedField(n,15))?void 0:r,inputSidePacketList:null==(r=t.Message.getRepeatedField(n,16))?void 0:r,outputSidePacketList:null==(r=t.Message.getRepeatedField(n,17))?void 0:r,maxQueueSize:t.Message.getFieldWithDefault(n,11,0),reportDeadlock:t.Message.getBooleanFieldWithDefault(n,21,!1),inputStreamHandler:(r=n.getInputStreamHandler())&&p.InputStreamHandlerConfig.toObject(e,r),outputStreamHandler:(r=n.getOutputStreamHandler())&&p.OutputStreamHandlerConfig.toObject(e,r),executorList:t.Message.toObjectList(n.getExecutorList(),proto.mediapipe.ExecutorConfig.toObject,e),profilerConfig:(r=n.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(e,r),pb_package:t.Message.getFieldWithDefault(n,19,""),type:t.Message.getFieldWithDefault(n,20,""),options:(r=n.getOptions())&&i.MediaPipeOptions.toObject(e,r),graphOptionsList:t.Message.toObjectList(n.getGraphOptionsList(),o.Any.toObject,e)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.CalculatorGraphConfig.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.CalculatorGraphConfig;return proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader(r,n)},proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.CalculatorGraphConfig.Node;t.readMessage(n,proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader),e.addNode(n);break;case 6:n=new s.PacketFactoryConfig,t.readMessage(n,s.PacketFactoryConfig.deserializeBinaryFromReader),e.addPacketFactory(n);break;case 7:n=new u.PacketGeneratorConfig,t.readMessage(n,u.PacketGeneratorConfig.deserializeBinaryFromReader),e.addPacketGenerator(n);break;case 8:n=t.readInt32(),e.setNumThreads(n);break;case 9:n=new l.StatusHandlerConfig,t.readMessage(n,l.StatusHandlerConfig.deserializeBinaryFromReader),e.addStatusHandler(n);break;case 10:n=t.readString(),e.addInputStream(n);break;case 15:n=t.readString(),e.addOutputStream(n);break;case 16:n=t.readString(),e.addInputSidePacket(n);break;case 17:n=t.readString(),e.addOutputSidePacket(n);break;case 11:n=t.readInt32(),e.setMaxQueueSize(n);break;case 21:n=t.readBool(),e.setReportDeadlock(n);break;case 12:n=new p.InputStreamHandlerConfig,t.readMessage(n,p.InputStreamHandlerConfig.deserializeBinaryFromReader),e.setInputStreamHandler(n);break;case 13:n=new p.OutputStreamHandlerConfig,t.readMessage(n,p.OutputStreamHandlerConfig.deserializeBinaryFromReader),e.setOutputStreamHandler(n);break;case 14:n=new proto.mediapipe.ExecutorConfig,t.readMessage(n,proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader),e.addExecutor(n);break;case 18:n=new proto.mediapipe.ProfilerConfig,t.readMessage(n,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),e.setProfilerConfig(n);break;case 19:n=t.readString(),e.setPackage(n);break;case 20:n=t.readString(),e.setType(n);break;case 1001:n=new i.MediaPipeOptions,t.readMessage(n,i.MediaPipeOptions.deserializeBinaryFromReader),e.setOptions(n);break;case 1002:n=new o.Any,t.readMessage(n,o.Any.deserializeBinaryFromReader),e.addGraphOptions(n);break;default:t.skipField()}return e},proto.mediapipe.CalculatorGraphConfig.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getNodeList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter),(n=e.getPacketFactoryList()).length>0&&t.writeRepeatedMessage(6,n,s.PacketFactoryConfig.serializeBinaryToWriter),(n=e.getPacketGeneratorList()).length>0&&t.writeRepeatedMessage(7,n,u.PacketGeneratorConfig.serializeBinaryToWriter),0!==(n=e.getNumThreads())&&t.writeInt32(8,n),(n=e.getStatusHandlerList()).length>0&&t.writeRepeatedMessage(9,n,l.StatusHandlerConfig.serializeBinaryToWriter),(n=e.getInputStreamList()).length>0&&t.writeRepeatedString(10,n),(n=e.getOutputStreamList()).length>0&&t.writeRepeatedString(15,n),(n=e.getInputSidePacketList()).length>0&&t.writeRepeatedString(16,n),(n=e.getOutputSidePacketList()).length>0&&t.writeRepeatedString(17,n),0!==(n=e.getMaxQueueSize())&&t.writeInt32(11,n),(n=e.getReportDeadlock())&&t.writeBool(21,n),null!=(n=e.getInputStreamHandler())&&t.writeMessage(12,n,p.InputStreamHandlerConfig.serializeBinaryToWriter),null!=(n=e.getOutputStreamHandler())&&t.writeMessage(13,n,p.OutputStreamHandlerConfig.serializeBinaryToWriter),(n=e.getExecutorList()).length>0&&t.writeRepeatedMessage(14,n,proto.mediapipe.ExecutorConfig.serializeBinaryToWriter),null!=(n=e.getProfilerConfig())&&t.writeMessage(18,n,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(n=e.getPackage()).length>0&&t.writeString(19,n),(n=e.getType()).length>0&&t.writeString(20,n),null!=(n=e.getOptions())&&t.writeMessage(1001,n,i.MediaPipeOptions.serializeBinaryToWriter),(n=e.getGraphOptionsList()).length>0&&t.writeRepeatedMessage(1002,n,o.Any.serializeBinaryToWriter)},proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_=[3,4,5,6,8,13,17,1005],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.Node.prototype.toObject=function(e){return proto.mediapipe.CalculatorGraphConfig.Node.toObject(e,this)},proto.mediapipe.CalculatorGraphConfig.Node.toObject=function(e,n){var r,i={name:t.Message.getFieldWithDefault(n,1,""),calculator:t.Message.getFieldWithDefault(n,2,""),inputStreamList:null==(r=t.Message.getRepeatedField(n,3))?void 0:r,outputStreamList:null==(r=t.Message.getRepeatedField(n,4))?void 0:r,inputSidePacketList:null==(r=t.Message.getRepeatedField(n,5))?void 0:r,outputSidePacketList:null==(r=t.Message.getRepeatedField(n,6))?void 0:r,options:(r=n.getOptions())&&a.CalculatorOptions.toObject(e,r),nodeOptionsList:t.Message.toObjectList(n.getNodeOptionsList(),o.Any.toObject,e),sourceLayer:t.Message.getFieldWithDefault(n,9,0),bufferSizeHint:t.Message.getFieldWithDefault(n,10,0),inputStreamHandler:(r=n.getInputStreamHandler())&&p.InputStreamHandlerConfig.toObject(e,r),outputStreamHandler:(r=n.getOutputStreamHandler())&&p.OutputStreamHandlerConfig.toObject(e,r),inputStreamInfoList:t.Message.toObjectList(n.getInputStreamInfoList(),proto.mediapipe.InputStreamInfo.toObject,e),executor:t.Message.getFieldWithDefault(n,14,""),profilerConfig:(r=n.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(e,r),maxInFlight:t.Message.getFieldWithDefault(n,16,0),optionValueList:null==(r=t.Message.getRepeatedField(n,17))?void 0:r,externalInputList:null==(r=t.Message.getRepeatedField(n,1005))?void 0:r};return e&&(i.$jspbMessageInstance=n),i}),proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.CalculatorGraphConfig.Node;return proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader(r,n)},proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setName(n);break;case 2:n=t.readString(),e.setCalculator(n);break;case 3:n=t.readString(),e.addInputStream(n);break;case 4:n=t.readString(),e.addOutputStream(n);break;case 5:n=t.readString(),e.addInputSidePacket(n);break;case 6:n=t.readString(),e.addOutputSidePacket(n);break;case 7:n=new a.CalculatorOptions,t.readMessage(n,a.CalculatorOptions.deserializeBinaryFromReader),e.setOptions(n);break;case 8:n=new o.Any,t.readMessage(n,o.Any.deserializeBinaryFromReader),e.addNodeOptions(n);break;case 9:n=t.readInt32(),e.setSourceLayer(n);break;case 10:n=t.readInt32(),e.setBufferSizeHint(n);break;case 11:n=new p.InputStreamHandlerConfig,t.readMessage(n,p.InputStreamHandlerConfig.deserializeBinaryFromReader),e.setInputStreamHandler(n);break;case 12:n=new p.OutputStreamHandlerConfig,t.readMessage(n,p.OutputStreamHandlerConfig.deserializeBinaryFromReader),e.setOutputStreamHandler(n);break;case 13:n=new proto.mediapipe.InputStreamInfo,t.readMessage(n,proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader),e.addInputStreamInfo(n);break;case 14:n=t.readString(),e.setExecutor(n);break;case 15:n=new proto.mediapipe.ProfilerConfig,t.readMessage(n,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),e.setProfilerConfig(n);break;case 16:n=t.readInt32(),e.setMaxInFlight(n);break;case 17:n=t.readString(),e.addOptionValue(n);break;case 1005:n=t.readString(),e.addExternalInput(n);break;default:t.skipField()}return e},proto.mediapipe.CalculatorGraphConfig.Node.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getName()).length>0&&t.writeString(1,n),(n=e.getCalculator()).length>0&&t.writeString(2,n),(n=e.getInputStreamList()).length>0&&t.writeRepeatedString(3,n),(n=e.getOutputStreamList()).length>0&&t.writeRepeatedString(4,n),(n=e.getInputSidePacketList()).length>0&&t.writeRepeatedString(5,n),(n=e.getOutputSidePacketList()).length>0&&t.writeRepeatedString(6,n),null!=(n=e.getOptions())&&t.writeMessage(7,n,a.CalculatorOptions.serializeBinaryToWriter),(n=e.getNodeOptionsList()).length>0&&t.writeRepeatedMessage(8,n,o.Any.serializeBinaryToWriter),0!==(n=e.getSourceLayer())&&t.writeInt32(9,n),0!==(n=e.getBufferSizeHint())&&t.writeInt32(10,n),null!=(n=e.getInputStreamHandler())&&t.writeMessage(11,n,p.InputStreamHandlerConfig.serializeBinaryToWriter),null!=(n=e.getOutputStreamHandler())&&t.writeMessage(12,n,p.OutputStreamHandlerConfig.serializeBinaryToWriter),(n=e.getInputStreamInfoList()).length>0&&t.writeRepeatedMessage(13,n,proto.mediapipe.InputStreamInfo.serializeBinaryToWriter),(n=e.getExecutor()).length>0&&t.writeString(14,n),null!=(n=e.getProfilerConfig())&&t.writeMessage(15,n,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),0!==(n=e.getMaxInFlight())&&t.writeInt32(16,n),(n=e.getOptionValueList()).length>0&&t.writeRepeatedString(17,n),(n=e.getExternalInputList()).length>0&&t.writeRepeatedString(1005,n)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setName=function(e){return t.Message.setProto3StringField(this,1,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getCalculator=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setCalculator=function(e){return t.Message.setProto3StringField(this,2,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamList=function(){return t.Message.getRepeatedField(this,3)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStream=function(e,n){return t.Message.addToRepeatedField(this,3,e,n)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamList=function(){return t.Message.getRepeatedField(this,4)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamList=function(e){return t.Message.setField(this,4,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputStream=function(e,n){return t.Message.addToRepeatedField(this,4,e,n)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,5)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,5,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputSidePacket=function(e,n){return t.Message.addToRepeatedField(this,5,e,n)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputSidePacketList=function(){return t.Message.getRepeatedField(this,6)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputSidePacketList=function(e){return t.Message.setField(this,6,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputSidePacket=function(e,n){return t.Message.addToRepeatedField(this,6,e,n)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptions=function(){return t.Message.getWrapperField(this,a.CalculatorOptions,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptions=function(e){return t.Message.setWrapperField(this,7,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOptions=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getNodeOptionsList=function(){return t.Message.getRepeatedWrapperField(this,o.Any,8)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setNodeOptionsList=function(e){return t.Message.setRepeatedWrapperField(this,8,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addNodeOptions=function(e,n){return t.Message.addToRepeatedWrapperField(this,8,e,proto.google.protobuf.Any,n)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearNodeOptionsList=function(){return this.setNodeOptionsList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getSourceLayer=function(){return t.Message.getFieldWithDefault(this,9,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setSourceLayer=function(e){return t.Message.setProto3IntField(this,9,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getBufferSizeHint=function(){return t.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setBufferSizeHint=function(e){return t.Message.setProto3IntField(this,10,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamHandler=function(){return t.Message.getWrapperField(this,p.InputStreamHandlerConfig,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamHandler=function(e){return t.Message.setWrapperField(this,11,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasInputStreamHandler=function(){return null!=t.Message.getField(this,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamHandler=function(){return t.Message.getWrapperField(this,p.OutputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamHandler=function(e){return t.Message.setWrapperField(this,12,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOutputStreamHandler=function(){return null!=t.Message.getField(this,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamInfoList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.InputStreamInfo,13)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamInfoList=function(e){return t.Message.setRepeatedWrapperField(this,13,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStreamInfo=function(e,n){return t.Message.addToRepeatedWrapperField(this,13,e,proto.mediapipe.InputStreamInfo,n)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamInfoList=function(){return this.setInputStreamInfoList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExecutor=function(){return t.Message.getFieldWithDefault(this,14,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExecutor=function(e){return t.Message.setProto3StringField(this,14,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getProfilerConfig=function(){return t.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setProfilerConfig=function(e){return t.Message.setWrapperField(this,15,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasProfilerConfig=function(){return null!=t.Message.getField(this,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getMaxInFlight=function(){return t.Message.getFieldWithDefault(this,16,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setMaxInFlight=function(e){return t.Message.setProto3IntField(this,16,e)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptionValueList=function(){return t.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptionValueList=function(e){return t.Message.setField(this,17,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOptionValue=function(e,n){return t.Message.addToRepeatedField(this,17,e,n)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptionValueList=function(){return this.setOptionValueList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExternalInputList=function(){return t.Message.getRepeatedField(this,1005)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExternalInputList=function(e){return t.Message.setField(this,1005,e||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addExternalInput=function(e,n){return t.Message.addToRepeatedField(this,1005,e,n)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNodeList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.CalculatorGraphConfig.Node,1)},proto.mediapipe.CalculatorGraphConfig.prototype.setNodeList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addNode=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.CalculatorGraphConfig.Node,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearNodeList=function(){return this.setNodeList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketFactoryList=function(){return t.Message.getRepeatedWrapperField(this,s.PacketFactoryConfig,6)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketFactoryList=function(e){return t.Message.setRepeatedWrapperField(this,6,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketFactory=function(e,n){return t.Message.addToRepeatedWrapperField(this,6,e,proto.mediapipe.PacketFactoryConfig,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketFactoryList=function(){return this.setPacketFactoryList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketGeneratorList=function(){return t.Message.getRepeatedWrapperField(this,u.PacketGeneratorConfig,7)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketGeneratorList=function(e){return t.Message.setRepeatedWrapperField(this,7,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketGenerator=function(e,n){return t.Message.addToRepeatedWrapperField(this,7,e,proto.mediapipe.PacketGeneratorConfig,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketGeneratorList=function(){return this.setPacketGeneratorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNumThreads=function(){return t.Message.getFieldWithDefault(this,8,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setNumThreads=function(e){return t.Message.setProto3IntField(this,8,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getStatusHandlerList=function(){return t.Message.getRepeatedWrapperField(this,l.StatusHandlerConfig,9)},proto.mediapipe.CalculatorGraphConfig.prototype.setStatusHandlerList=function(e){return t.Message.setRepeatedWrapperField(this,9,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addStatusHandler=function(e,n){return t.Message.addToRepeatedWrapperField(this,9,e,proto.mediapipe.StatusHandlerConfig,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearStatusHandlerList=function(){return this.setStatusHandlerList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamList=function(){return t.Message.getRepeatedField(this,10)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamList=function(e){return t.Message.setField(this,10,e||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputStream=function(e,n){return t.Message.addToRepeatedField(this,10,e,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamList=function(){return t.Message.getRepeatedField(this,15)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamList=function(e){return t.Message.setField(this,15,e||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputStream=function(e,n){return t.Message.addToRepeatedField(this,15,e,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputSidePacketList=function(){return t.Message.getRepeatedField(this,16)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputSidePacketList=function(e){return t.Message.setField(this,16,e||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputSidePacket=function(e,n){return t.Message.addToRepeatedField(this,16,e,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputSidePacketList=function(){return t.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputSidePacketList=function(e){return t.Message.setField(this,17,e||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputSidePacket=function(e,n){return t.Message.addToRepeatedField(this,17,e,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getMaxQueueSize=function(){return t.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setMaxQueueSize=function(e){return t.Message.setProto3IntField(this,11,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getReportDeadlock=function(){return t.Message.getBooleanFieldWithDefault(this,21,!1)},proto.mediapipe.CalculatorGraphConfig.prototype.setReportDeadlock=function(e){return t.Message.setProto3BooleanField(this,21,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamHandler=function(){return t.Message.getWrapperField(this,p.InputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamHandler=function(e){return t.Message.setWrapperField(this,12,e)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasInputStreamHandler=function(){return null!=t.Message.getField(this,12)},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamHandler=function(){return t.Message.getWrapperField(this,p.OutputStreamHandlerConfig,13)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamHandler=function(e){return t.Message.setWrapperField(this,13,e)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOutputStreamHandler=function(){return null!=t.Message.getField(this,13)},proto.mediapipe.CalculatorGraphConfig.prototype.getExecutorList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.ExecutorConfig,14)},proto.mediapipe.CalculatorGraphConfig.prototype.setExecutorList=function(e){return t.Message.setRepeatedWrapperField(this,14,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addExecutor=function(e,n){return t.Message.addToRepeatedWrapperField(this,14,e,proto.mediapipe.ExecutorConfig,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearExecutorList=function(){return this.setExecutorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getProfilerConfig=function(){return t.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,18)},proto.mediapipe.CalculatorGraphConfig.prototype.setProfilerConfig=function(e){return t.Message.setWrapperField(this,18,e)},proto.mediapipe.CalculatorGraphConfig.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasProfilerConfig=function(){return null!=t.Message.getField(this,18)},proto.mediapipe.CalculatorGraphConfig.prototype.getPackage=function(){return t.Message.getFieldWithDefault(this,19,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setPackage=function(e){return t.Message.setProto3StringField(this,19,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getType=function(){return t.Message.getFieldWithDefault(this,20,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setType=function(e){return t.Message.setProto3StringField(this,20,e)},proto.mediapipe.CalculatorGraphConfig.prototype.getOptions=function(){return t.Message.getWrapperField(this,i.MediaPipeOptions,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.setOptions=function(e){return t.Message.setWrapperField(this,1001,e)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOptions=function(){return null!=t.Message.getField(this,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.getGraphOptionsList=function(){return t.Message.getRepeatedWrapperField(this,o.Any,1002)},proto.mediapipe.CalculatorGraphConfig.prototype.setGraphOptionsList=function(e){return t.Message.setRepeatedWrapperField(this,1002,e)},proto.mediapipe.CalculatorGraphConfig.prototype.addGraphOptions=function(e,n){return t.Message.addToRepeatedWrapperField(this,1002,e,proto.google.protobuf.Any,n)},proto.mediapipe.CalculatorGraphConfig.prototype.clearGraphOptionsList=function(){return this.setGraphOptionsList([])},n.object.extend(e,proto.mediapipe)}(calculator_pb);var detection_pb={},location_data_pb={},rasterization_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.Rasterization",null,r),n.exportSymbol("proto.mediapipe.Rasterization.Interval",null,r),proto.mediapipe.Rasterization=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.Rasterization.repeatedFields_,null)},n.inherits(proto.mediapipe.Rasterization,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.displayName="proto.mediapipe.Rasterization"),proto.mediapipe.Rasterization.Interval=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.Rasterization.Interval,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.Interval.displayName="proto.mediapipe.Rasterization.Interval"),proto.mediapipe.Rasterization.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.prototype.toObject=function(e){return proto.mediapipe.Rasterization.toObject(e,this)},proto.mediapipe.Rasterization.toObject=function(e,n){var r={intervalList:t.Message.toObjectList(n.getIntervalList(),proto.mediapipe.Rasterization.Interval.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.Rasterization.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.Rasterization;return proto.mediapipe.Rasterization.deserializeBinaryFromReader(r,n)},proto.mediapipe.Rasterization.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.Rasterization.Interval;t.readMessage(n,proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader),e.addInterval(n)}else t.skipField();return e},proto.mediapipe.Rasterization.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Rasterization.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Rasterization.serializeBinaryToWriter=function(e,t){var n;(n=e.getIntervalList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.Interval.prototype.toObject=function(e){return proto.mediapipe.Rasterization.Interval.toObject(e,this)},proto.mediapipe.Rasterization.Interval.toObject=function(e,n){var r,a={y:null==(r=t.Message.getField(n,1))?void 0:r,leftX:null==(r=t.Message.getField(n,2))?void 0:r,rightX:null==(r=t.Message.getField(n,3))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.Rasterization.Interval.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.Rasterization.Interval;return proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader(r,n)},proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setY(n);break;case 2:n=t.readInt32(),e.setLeftX(n);break;case 3:n=t.readInt32(),e.setRightX(n);break;default:t.skipField()}return e},proto.mediapipe.Rasterization.Interval.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),null!=(r=t.Message.getField(e,3))&&n.writeInt32(3,r)},proto.mediapipe.Rasterization.Interval.prototype.getY=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rasterization.Interval.prototype.setY=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Rasterization.Interval.prototype.clearY=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasY=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Rasterization.Interval.prototype.getLeftX=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rasterization.Interval.prototype.setLeftX=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Rasterization.Interval.prototype.clearLeftX=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasLeftX=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Rasterization.Interval.prototype.getRightX=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rasterization.Interval.prototype.setRightX=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Rasterization.Interval.prototype.clearRightX=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasRightX=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.Rasterization.prototype.getIntervalList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Rasterization.Interval,1)},proto.mediapipe.Rasterization.prototype.setIntervalList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.Rasterization.prototype.addInterval=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.Rasterization.Interval,n)},proto.mediapipe.Rasterization.prototype.clearIntervalList=function(){return this.setIntervalList([])},n.object.extend(e,proto.mediapipe)}(rasterization_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=rasterization_pb;n.object.extend(proto,a),n.exportSymbol("proto.mediapipe.LocationData",null,r),n.exportSymbol("proto.mediapipe.LocationData.BinaryMask",null,r),n.exportSymbol("proto.mediapipe.LocationData.BoundingBox",null,r),n.exportSymbol("proto.mediapipe.LocationData.Format",null,r),n.exportSymbol("proto.mediapipe.LocationData.RelativeBoundingBox",null,r),n.exportSymbol("proto.mediapipe.LocationData.RelativeKeypoint",null,r),proto.mediapipe.LocationData=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.LocationData.repeatedFields_,null)},n.inherits(proto.mediapipe.LocationData,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.displayName="proto.mediapipe.LocationData"),proto.mediapipe.LocationData.BoundingBox=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.LocationData.BoundingBox,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BoundingBox.displayName="proto.mediapipe.LocationData.BoundingBox"),proto.mediapipe.LocationData.RelativeBoundingBox=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.LocationData.RelativeBoundingBox,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeBoundingBox.displayName="proto.mediapipe.LocationData.RelativeBoundingBox"),proto.mediapipe.LocationData.BinaryMask=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.LocationData.BinaryMask,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BinaryMask.displayName="proto.mediapipe.LocationData.BinaryMask"),proto.mediapipe.LocationData.RelativeKeypoint=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.LocationData.RelativeKeypoint,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeKeypoint.displayName="proto.mediapipe.LocationData.RelativeKeypoint"),proto.mediapipe.LocationData.repeatedFields_=[5],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.prototype.toObject=function(e){return proto.mediapipe.LocationData.toObject(e,this)},proto.mediapipe.LocationData.toObject=function(e,n){var r,a={format:null==(r=t.Message.getField(n,1))?void 0:r,boundingBox:(r=n.getBoundingBox())&&proto.mediapipe.LocationData.BoundingBox.toObject(e,r),relativeBoundingBox:(r=n.getRelativeBoundingBox())&&proto.mediapipe.LocationData.RelativeBoundingBox.toObject(e,r),mask:(r=n.getMask())&&proto.mediapipe.LocationData.BinaryMask.toObject(e,r),relativeKeypointsList:t.Message.toObjectList(n.getRelativeKeypointsList(),proto.mediapipe.LocationData.RelativeKeypoint.toObject,e)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.LocationData.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.LocationData;return proto.mediapipe.LocationData.deserializeBinaryFromReader(r,n)},proto.mediapipe.LocationData.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readEnum();e.setFormat(n);break;case 2:n=new proto.mediapipe.LocationData.BoundingBox,t.readMessage(n,proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader),e.setBoundingBox(n);break;case 3:n=new proto.mediapipe.LocationData.RelativeBoundingBox,t.readMessage(n,proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader),e.setRelativeBoundingBox(n);break;case 4:n=new proto.mediapipe.LocationData.BinaryMask,t.readMessage(n,proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader),e.setMask(n);break;case 5:n=new proto.mediapipe.LocationData.RelativeKeypoint,t.readMessage(n,proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader),e.addRelativeKeypoints(n);break;default:t.skipField()}return e},proto.mediapipe.LocationData.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeEnum(1,r),null!=(r=e.getBoundingBox())&&n.writeMessage(2,r,proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter),null!=(r=e.getRelativeBoundingBox())&&n.writeMessage(3,r,proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter),null!=(r=e.getMask())&&n.writeMessage(4,r,proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter),(r=e.getRelativeKeypointsList()).length>0&&n.writeRepeatedMessage(5,r,proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter)},proto.mediapipe.LocationData.Format={GLOBAL:0,BOUNDING_BOX:1,RELATIVE_BOUNDING_BOX:2,MASK:3},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BoundingBox.prototype.toObject=function(e){return proto.mediapipe.LocationData.BoundingBox.toObject(e,this)},proto.mediapipe.LocationData.BoundingBox.toObject=function(e,n){var r,a={xmin:null==(r=t.Message.getField(n,1))?void 0:r,ymin:null==(r=t.Message.getField(n,2))?void 0:r,width:null==(r=t.Message.getField(n,3))?void 0:r,height:null==(r=t.Message.getField(n,4))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.LocationData.BoundingBox.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.LocationData.BoundingBox;return proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader(r,n)},proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setXmin(n);break;case 2:n=t.readInt32(),e.setYmin(n);break;case 3:n=t.readInt32(),e.setWidth(n);break;case 4:n=t.readInt32(),e.setHeight(n);break;default:t.skipField()}return e},proto.mediapipe.LocationData.BoundingBox.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),null!=(r=t.Message.getField(e,3))&&n.writeInt32(3,r),null!=(r=t.Message.getField(e,4))&&n.writeInt32(4,r)},proto.mediapipe.LocationData.BoundingBox.prototype.getXmin=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setXmin=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.BoundingBox.prototype.clearXmin=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasXmin=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.BoundingBox.prototype.getYmin=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setYmin=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LocationData.BoundingBox.prototype.clearYmin=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasYmin=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.BoundingBox.prototype.getWidth=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setWidth=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.LocationData.BoundingBox.prototype.clearWidth=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasWidth=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.LocationData.BoundingBox.prototype.getHeight=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setHeight=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.LocationData.BoundingBox.prototype.clearHeight=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasHeight=function(){return null!=t.Message.getField(this,4)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeBoundingBox.prototype.toObject=function(e){return proto.mediapipe.LocationData.RelativeBoundingBox.toObject(e,this)},proto.mediapipe.LocationData.RelativeBoundingBox.toObject=function(e,n){var r,a={xmin:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,ymin:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,width:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,height:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.LocationData.RelativeBoundingBox;return proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader(r,n)},proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readFloat();e.setXmin(n);break;case 2:n=t.readFloat(),e.setYmin(n);break;case 3:n=t.readFloat(),e.setWidth(n);break;case 4:n=t.readFloat(),e.setHeight(n);break;default:t.skipField()}return e},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeFloat(1,r),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r),null!=(r=t.Message.getField(e,3))&&n.writeFloat(3,r),null!=(r=t.Message.getField(e,4))&&n.writeFloat(4,r)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getXmin=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setXmin=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearXmin=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasXmin=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getYmin=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setYmin=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearYmin=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasYmin=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getWidth=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setWidth=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearWidth=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasWidth=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getHeight=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setHeight=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearHeight=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasHeight=function(){return null!=t.Message.getField(this,4)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BinaryMask.prototype.toObject=function(e){return proto.mediapipe.LocationData.BinaryMask.toObject(e,this)},proto.mediapipe.LocationData.BinaryMask.toObject=function(e,n){var r,o={width:null==(r=t.Message.getField(n,1))?void 0:r,height:null==(r=t.Message.getField(n,2))?void 0:r,rasterization:(r=n.getRasterization())&&a.Rasterization.toObject(e,r)};return e&&(o.$jspbMessageInstance=n),o}),proto.mediapipe.LocationData.BinaryMask.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.LocationData.BinaryMask;return proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader(r,n)},proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setWidth(n);break;case 2:n=t.readInt32(),e.setHeight(n);break;case 3:n=new a.Rasterization,t.readMessage(n,a.Rasterization.deserializeBinaryFromReader),e.setRasterization(n);break;default:t.skipField()}return e},proto.mediapipe.LocationData.BinaryMask.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),null!=(r=e.getRasterization())&&n.writeMessage(3,r,a.Rasterization.serializeBinaryToWriter)},proto.mediapipe.LocationData.BinaryMask.prototype.getWidth=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setWidth=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.BinaryMask.prototype.clearWidth=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasWidth=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.BinaryMask.prototype.getHeight=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setHeight=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LocationData.BinaryMask.prototype.clearHeight=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasHeight=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.BinaryMask.prototype.getRasterization=function(){return t.Message.getWrapperField(this,a.Rasterization,3)},proto.mediapipe.LocationData.BinaryMask.prototype.setRasterization=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.LocationData.BinaryMask.prototype.clearRasterization=function(){return this.setRasterization(void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasRasterization=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeKeypoint.prototype.toObject=function(e){return proto.mediapipe.LocationData.RelativeKeypoint.toObject(e,this)},proto.mediapipe.LocationData.RelativeKeypoint.toObject=function(e,n){var r,a={x:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,y:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,keypointLabel:null==(r=t.Message.getField(n,3))?void 0:r,score:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.LocationData.RelativeKeypoint;return proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader(r,n)},proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readFloat();e.setX(n);break;case 2:n=t.readFloat(),e.setY(n);break;case 3:n=t.readString(),e.setKeypointLabel(n);break;case 4:n=t.readFloat(),e.setScore(n);break;default:t.skipField()}return e},proto.mediapipe.LocationData.RelativeKeypoint.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeFloat(1,r),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r),null!=(r=t.Message.getField(e,3))&&n.writeString(3,r),null!=(r=t.Message.getField(e,4))&&n.writeFloat(4,r)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getX=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setX=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearX=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasX=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getY=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setY=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearY=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasY=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getKeypointLabel=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setKeypointLabel=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearKeypointLabel=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasKeypointLabel=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setScore=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearScore=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasScore=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.LocationData.prototype.getFormat=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.prototype.setFormat=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LocationData.prototype.clearFormat=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.prototype.hasFormat=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LocationData.prototype.getBoundingBox=function(){return t.Message.getWrapperField(this,proto.mediapipe.LocationData.BoundingBox,2)},proto.mediapipe.LocationData.prototype.setBoundingBox=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.LocationData.prototype.clearBoundingBox=function(){return this.setBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasBoundingBox=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LocationData.prototype.getRelativeBoundingBox=function(){return t.Message.getWrapperField(this,proto.mediapipe.LocationData.RelativeBoundingBox,3)},proto.mediapipe.LocationData.prototype.setRelativeBoundingBox=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.LocationData.prototype.clearRelativeBoundingBox=function(){return this.setRelativeBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasRelativeBoundingBox=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.LocationData.prototype.getMask=function(){return t.Message.getWrapperField(this,proto.mediapipe.LocationData.BinaryMask,4)},proto.mediapipe.LocationData.prototype.setMask=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.LocationData.prototype.clearMask=function(){return this.setMask(void 0)},proto.mediapipe.LocationData.prototype.hasMask=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.LocationData.prototype.getRelativeKeypointsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.LocationData.RelativeKeypoint,5)},proto.mediapipe.LocationData.prototype.setRelativeKeypointsList=function(e){return t.Message.setRepeatedWrapperField(this,5,e)},proto.mediapipe.LocationData.prototype.addRelativeKeypoints=function(e,n){return t.Message.addToRepeatedWrapperField(this,5,e,proto.mediapipe.LocationData.RelativeKeypoint,n)},proto.mediapipe.LocationData.prototype.clearRelativeKeypointsList=function(){return this.setRelativeKeypointsList([])},n.object.extend(e,proto.mediapipe)}(location_data_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=location_data_pb;n.object.extend(proto,a),n.exportSymbol("proto.mediapipe.Detection",null,r),n.exportSymbol("proto.mediapipe.Detection.AssociatedDetection",null,r),n.exportSymbol("proto.mediapipe.DetectionList",null,r),proto.mediapipe.Detection=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.Detection.repeatedFields_,null)},n.inherits(proto.mediapipe.Detection,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.displayName="proto.mediapipe.Detection"),proto.mediapipe.Detection.AssociatedDetection=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.Detection.AssociatedDetection,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.AssociatedDetection.displayName="proto.mediapipe.Detection.AssociatedDetection"),proto.mediapipe.DetectionList=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.DetectionList.repeatedFields_,null)},n.inherits(proto.mediapipe.DetectionList,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.DetectionList.displayName="proto.mediapipe.DetectionList"),proto.mediapipe.Detection.repeatedFields_=[1,2,3,8,9],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.prototype.toObject=function(e){return proto.mediapipe.Detection.toObject(e,this)},proto.mediapipe.Detection.toObject=function(e,n){var r,o={labelList:null==(r=t.Message.getRepeatedField(n,1))?void 0:r,labelIdList:null==(r=t.Message.getRepeatedField(n,2))?void 0:r,scoreList:null==(r=t.Message.getRepeatedFloatingPointField(n,3))?void 0:r,locationData:(r=n.getLocationData())&&a.LocationData.toObject(e,r),featureTag:null==(r=t.Message.getField(n,5))?void 0:r,trackId:null==(r=t.Message.getField(n,6))?void 0:r,detectionId:null==(r=t.Message.getField(n,7))?void 0:r,associatedDetectionsList:t.Message.toObjectList(n.getAssociatedDetectionsList(),proto.mediapipe.Detection.AssociatedDetection.toObject,e),displayNameList:null==(r=t.Message.getRepeatedField(n,9))?void 0:r,timestampUsec:null==(r=t.Message.getField(n,10))?void 0:r};return e&&(o.$jspbMessageInstance=n),o}),proto.mediapipe.Detection.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.Detection;return proto.mediapipe.Detection.deserializeBinaryFromReader(r,n)},proto.mediapipe.Detection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.addLabel(n);break;case 2:for(var r=t.isDelimited()?t.readPackedInt32():[t.readInt32()],o=0;o<r.length;o++)e.addLabelId(r[o]);break;case 3:for(r=t.isDelimited()?t.readPackedFloat():[t.readFloat()],o=0;o<r.length;o++)e.addScore(r[o]);break;case 4:n=new a.LocationData,t.readMessage(n,a.LocationData.deserializeBinaryFromReader),e.setLocationData(n);break;case 5:n=t.readString(),e.setFeatureTag(n);break;case 6:n=t.readString(),e.setTrackId(n);break;case 7:n=t.readInt64(),e.setDetectionId(n);break;case 8:n=new proto.mediapipe.Detection.AssociatedDetection,t.readMessage(n,proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader),e.addAssociatedDetections(n);break;case 9:n=t.readString(),e.addDisplayName(n);break;case 10:n=t.readInt64(),e.setTimestampUsec(n);break;default:t.skipField()}return e},proto.mediapipe.Detection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Detection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Detection.serializeBinaryToWriter=function(e,n){var r=void 0;(r=e.getLabelList()).length>0&&n.writeRepeatedString(1,r),(r=e.getLabelIdList()).length>0&&n.writePackedInt32(2,r),(r=e.getScoreList()).length>0&&n.writePackedFloat(3,r),null!=(r=e.getLocationData())&&n.writeMessage(4,r,a.LocationData.serializeBinaryToWriter),null!=(r=t.Message.getField(e,5))&&n.writeString(5,r),null!=(r=t.Message.getField(e,6))&&n.writeString(6,r),null!=(r=t.Message.getField(e,7))&&n.writeInt64(7,r),(r=e.getAssociatedDetectionsList()).length>0&&n.writeRepeatedMessage(8,r,proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter),(r=e.getDisplayNameList()).length>0&&n.writeRepeatedString(9,r),null!=(r=t.Message.getField(e,10))&&n.writeInt64(10,r)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.AssociatedDetection.prototype.toObject=function(e){return proto.mediapipe.Detection.AssociatedDetection.toObject(e,this)},proto.mediapipe.Detection.AssociatedDetection.toObject=function(e,n){var r,a={id:null==(r=t.Message.getField(n,1))?void 0:r,confidence:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.Detection.AssociatedDetection.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.Detection.AssociatedDetection;return proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader(r,n)},proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setId(n);break;case 2:n=t.readFloat(),e.setConfidence(n);break;default:t.skipField()}return e},proto.mediapipe.Detection.AssociatedDetection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r)},proto.mediapipe.Detection.AssociatedDetection.prototype.getId=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setId=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearId=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasId=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Detection.AssociatedDetection.prototype.getConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Detection.prototype.getLabelList=function(){return t.Message.getRepeatedField(this,1)},proto.mediapipe.Detection.prototype.setLabelList=function(e){return t.Message.setField(this,1,e||[])},proto.mediapipe.Detection.prototype.addLabel=function(e,n){return t.Message.addToRepeatedField(this,1,e,n)},proto.mediapipe.Detection.prototype.clearLabelList=function(){return this.setLabelList([])},proto.mediapipe.Detection.prototype.getLabelIdList=function(){return t.Message.getRepeatedField(this,2)},proto.mediapipe.Detection.prototype.setLabelIdList=function(e){return t.Message.setField(this,2,e||[])},proto.mediapipe.Detection.prototype.addLabelId=function(e,n){return t.Message.addToRepeatedField(this,2,e,n)},proto.mediapipe.Detection.prototype.clearLabelIdList=function(){return this.setLabelIdList([])},proto.mediapipe.Detection.prototype.getScoreList=function(){return t.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.Detection.prototype.setScoreList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.Detection.prototype.addScore=function(e,n){return t.Message.addToRepeatedField(this,3,e,n)},proto.mediapipe.Detection.prototype.clearScoreList=function(){return this.setScoreList([])},proto.mediapipe.Detection.prototype.getLocationData=function(){return t.Message.getWrapperField(this,a.LocationData,4)},proto.mediapipe.Detection.prototype.setLocationData=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.Detection.prototype.clearLocationData=function(){return this.setLocationData(void 0)},proto.mediapipe.Detection.prototype.hasLocationData=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.Detection.prototype.getFeatureTag=function(){return t.Message.getFieldWithDefault(this,5,"")},proto.mediapipe.Detection.prototype.setFeatureTag=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.Detection.prototype.clearFeatureTag=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.Detection.prototype.hasFeatureTag=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.Detection.prototype.getTrackId=function(){return t.Message.getFieldWithDefault(this,6,"")},proto.mediapipe.Detection.prototype.setTrackId=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.Detection.prototype.clearTrackId=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.Detection.prototype.hasTrackId=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.Detection.prototype.getDetectionId=function(){return t.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.Detection.prototype.setDetectionId=function(e){return t.Message.setField(this,7,e)},proto.mediapipe.Detection.prototype.clearDetectionId=function(){return t.Message.setField(this,7,void 0)},proto.mediapipe.Detection.prototype.hasDetectionId=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.Detection.prototype.getAssociatedDetectionsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection.AssociatedDetection,8)},proto.mediapipe.Detection.prototype.setAssociatedDetectionsList=function(e){return t.Message.setRepeatedWrapperField(this,8,e)},proto.mediapipe.Detection.prototype.addAssociatedDetections=function(e,n){return t.Message.addToRepeatedWrapperField(this,8,e,proto.mediapipe.Detection.AssociatedDetection,n)},proto.mediapipe.Detection.prototype.clearAssociatedDetectionsList=function(){return this.setAssociatedDetectionsList([])},proto.mediapipe.Detection.prototype.getDisplayNameList=function(){return t.Message.getRepeatedField(this,9)},proto.mediapipe.Detection.prototype.setDisplayNameList=function(e){return t.Message.setField(this,9,e||[])},proto.mediapipe.Detection.prototype.addDisplayName=function(e,n){return t.Message.addToRepeatedField(this,9,e,n)},proto.mediapipe.Detection.prototype.clearDisplayNameList=function(){return this.setDisplayNameList([])},proto.mediapipe.Detection.prototype.getTimestampUsec=function(){return t.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.Detection.prototype.setTimestampUsec=function(e){return t.Message.setField(this,10,e)},proto.mediapipe.Detection.prototype.clearTimestampUsec=function(){return t.Message.setField(this,10,void 0)},proto.mediapipe.Detection.prototype.hasTimestampUsec=function(){return null!=t.Message.getField(this,10)},proto.mediapipe.DetectionList.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.DetectionList.prototype.toObject=function(e){return proto.mediapipe.DetectionList.toObject(e,this)},proto.mediapipe.DetectionList.toObject=function(e,n){var r={detectionList:t.Message.toObjectList(n.getDetectionList(),proto.mediapipe.Detection.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.DetectionList.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.DetectionList;return proto.mediapipe.DetectionList.deserializeBinaryFromReader(r,n)},proto.mediapipe.DetectionList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.Detection;t.readMessage(n,proto.mediapipe.Detection.deserializeBinaryFromReader),e.addDetection(n)}else t.skipField();return e},proto.mediapipe.DetectionList.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.DetectionList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.DetectionList.serializeBinaryToWriter=function(e,t){var n;(n=e.getDetectionList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.Detection.serializeBinaryToWriter)},proto.mediapipe.DetectionList.prototype.getDetectionList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection,1)},proto.mediapipe.DetectionList.prototype.setDetectionList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.DetectionList.prototype.addDetection=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.Detection,n)},proto.mediapipe.DetectionList.prototype.clearDetectionList=function(){return this.setDetectionList([])},n.object.extend(e,proto.mediapipe)}(detection_pb);var base_options_pb={},acceleration_pb={},inference_calculator_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o),n.exportSymbol("proto.mediapipe.InferenceCalculatorOptions",null,r),n.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate",null,r),n.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase",null,r),n.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu",null,r),n.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api",null,r),n.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage",null,r),n.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi",null,r),n.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite",null,r),n.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack",null,r),proto.mediapipe.InferenceCalculatorOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.InferenceCalculatorOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.displayName="proto.mediapipe.InferenceCalculatorOptions"),proto.mediapipe.InferenceCalculatorOptions.Delegate=function(e){t.Message.initialize(this,e,0,-1,null,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_)},n.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate"),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.toObject=function(e,n){var r,a={modelPath:null==(r=t.Message.getField(n,1))?void 0:r,useGpu:t.Message.getBooleanFieldWithDefault(n,2,!1),useNnapi:t.Message.getBooleanFieldWithDefault(n,3,!1),cpuNumThread:t.Message.getFieldWithDefault(n,4,-1),delegate:(r=n.getDelegate())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(e,r)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.InferenceCalculatorOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InferenceCalculatorOptions;return proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setModelPath(n);break;case 2:n=t.readBool(),e.setUseGpu(n);break;case 3:n=t.readBool(),e.setUseNnapi(n);break;case 4:n=t.readInt32(),e.setCpuNumThread(n);break;case 5:n=new proto.mediapipe.InferenceCalculatorOptions.Delegate,t.readMessage(n,proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader),e.setDelegate(n);break;default:t.skipField()}return e},proto.mediapipe.InferenceCalculatorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),null!=(r=t.Message.getField(e,2))&&n.writeBool(2,r),null!=(r=t.Message.getField(e,3))&&n.writeBool(3,r),null!=(r=t.Message.getField(e,4))&&n.writeInt32(4,r),null!=(r=e.getDelegate())&&n.writeMessage(5,r,proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter)},proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_=[[1,2,3,4]],proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase={DELEGATE_NOT_SET:0,TFLITE:1,GPU:2,NNAPI:3,XNNPACK:4},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getDelegateCase=function(){return t.Message.computeOneofCase(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject=function(e,t){var n,r={tflite:(n=t.getTflite())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(e,n),gpu:(n=t.getGpu())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(e,n),nnapi:(n=t.getNnapi())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(e,n),xnnpack:(n=t.getXnnpack())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InferenceCalculatorOptions.Delegate;return proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader(r,n)},proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;t.readMessage(n,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),e.setTflite(n);break;case 2:n=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,t.readMessage(n,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),e.setGpu(n);break;case 3:n=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,t.readMessage(n,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),e.setNnapi(n);break;case 4:n=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,t.readMessage(n,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),e.setXnnpack(n);break;default:t.skipField()}return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getTflite())&&t.writeMessage(1,n,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),null!=(n=e.getGpu())&&t.writeMessage(2,n,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),null!=(n=e.getNnapi())&&t.writeMessage(3,n,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter),null!=(n=e.getXnnpack())&&t.writeMessage(4,n,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject=function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader(r,n)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter=function(e,t){},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject=function(e,n){var r,a={useAdvancedGpuApi:t.Message.getBooleanFieldWithDefault(n,1,!1),api:t.Message.getFieldWithDefault(n,4,0),allowPrecisionLoss:t.Message.getBooleanFieldWithDefault(n,3,!0),cachedKernelPath:null==(r=t.Message.getField(n,2))?void 0:r,serializedModelDir:null==(r=t.Message.getField(n,7))?void 0:r,modelToken:null==(r=t.Message.getField(n,8))?void 0:r,usage:t.Message.getFieldWithDefault(n,5,2)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader(r,n)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readBool();e.setUseAdvancedGpuApi(n);break;case 4:n=t.readEnum(),e.setApi(n);break;case 3:n=t.readBool(),e.setAllowPrecisionLoss(n);break;case 2:n=t.readString(),e.setCachedKernelPath(n);break;case 7:n=t.readString(),e.setSerializedModelDir(n);break;case 8:n=t.readString(),e.setModelToken(n);break;case 5:n=t.readEnum(),e.setUsage(n);break;default:t.skipField()}return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeBool(1,r),null!=(r=t.Message.getField(e,4))&&n.writeEnum(4,r),null!=(r=t.Message.getField(e,3))&&n.writeBool(3,r),null!=(r=t.Message.getField(e,2))&&n.writeString(2,r),null!=(r=t.Message.getField(e,7))&&n.writeString(7,r),null!=(r=t.Message.getField(e,8))&&n.writeString(8,r),null!=(r=t.Message.getField(e,5))&&n.writeEnum(5,r)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api={ANY:0,OPENGL:1,OPENCL:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage={UNSPECIFIED:0,FAST_SINGLE_ANSWER:1,SUSTAINED_SPEED:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUseAdvancedGpuApi=function(){return t.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUseAdvancedGpuApi=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUseAdvancedGpuApi=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUseAdvancedGpuApi=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getApi=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setApi=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearApi=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasApi=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getAllowPrecisionLoss=function(){return t.Message.getBooleanFieldWithDefault(this,3,!0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setAllowPrecisionLoss=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearAllowPrecisionLoss=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasAllowPrecisionLoss=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getCachedKernelPath=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setCachedKernelPath=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearCachedKernelPath=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasCachedKernelPath=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getSerializedModelDir=function(){return t.Message.getFieldWithDefault(this,7,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setSerializedModelDir=function(e){return t.Message.setField(this,7,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearSerializedModelDir=function(){return t.Message.setField(this,7,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasSerializedModelDir=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getModelToken=function(){return t.Message.getFieldWithDefault(this,8,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setModelToken=function(e){return t.Message.setField(this,8,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearModelToken=function(){return t.Message.setField(this,8,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasModelToken=function(){return null!=t.Message.getField(this,8)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUsage=function(){return t.Message.getFieldWithDefault(this,5,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUsage=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUsage=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUsage=function(){return null!=t.Message.getField(this,5)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject=function(e,n){var r,a={cacheDir:null==(r=t.Message.getField(n,1))?void 0:r,modelToken:null==(r=t.Message.getField(n,2))?void 0:r,acceleratorName:null==(r=t.Message.getField(n,3))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader(r,n)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setCacheDir(n);break;case 2:n=t.readString(),e.setModelToken(n);break;case 3:n=t.readString(),e.setAcceleratorName(n);break;default:t.skipField()}return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),null!=(r=t.Message.getField(e,2))&&n.writeString(2,r),null!=(r=t.Message.getField(e,3))&&n.writeString(3,r)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getCacheDir=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setCacheDir=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearCacheDir=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasCacheDir=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getModelToken=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setModelToken=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearModelToken=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasModelToken=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getAcceleratorName=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setAcceleratorName=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearAcceleratorName=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasAcceleratorName=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.toObject=function(e){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(e,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject=function(e,n){var r={numThreads:t.Message.getFieldWithDefault(n,1,-1)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader(r,n)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readInt32();e.setNumThreads(n)}else t.skipField();return e},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter=function(e,n){var r;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.getNumThreads=function(){return t.Message.getFieldWithDefault(this,1,-1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.setNumThreads=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.clearNumThreads=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.hasNumThreads=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getTflite=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setTflite=function(e){return t.Message.setOneofWrapperField(this,1,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasTflite=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getGpu=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setGpu=function(e){return t.Message.setOneofWrapperField(this,2,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasGpu=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getNnapi=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setNnapi=function(e){return t.Message.setOneofWrapperField(this,3,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasNnapi=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getXnnpack=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setXnnpack=function(e){return t.Message.setOneofWrapperField(this,4,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],e)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasXnnpack=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.InferenceCalculatorOptions.ext=new t.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[336783863]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,proto.mediapipe.InferenceCalculatorOptions.prototype.getModelPath=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.prototype.setModelPath=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearModelPath=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasModelPath=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseGpu=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseGpu=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseGpu=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseGpu=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseNnapi=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseNnapi=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseNnapi=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseNnapi=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.InferenceCalculatorOptions.prototype.getCpuNumThread=function(){return t.Message.getFieldWithDefault(this,4,-1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setCpuNumThread=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearCpuNumThread=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasCpuNumThread=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.InferenceCalculatorOptions.prototype.getDelegate=function(){return t.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate,5)},proto.mediapipe.InferenceCalculatorOptions.prototype.setDelegate=function(e){return t.Message.setWrapperField(this,5,e)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearDelegate=function(){return this.setDelegate(void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasDelegate=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.InferenceCalculatorOptions.ext=new t.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[336783863]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,n.object.extend(e,proto.mediapipe)}(inference_calculator_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=inference_calculator_pb;n.object.extend(proto,a),n.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration",null,r),n.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase",null,r),proto.mediapipe.tasks.core.proto.Acceleration=function(e){t.Message.initialize(this,e,0,-1,null,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_)},n.inherits(proto.mediapipe.tasks.core.proto.Acceleration,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.Acceleration.displayName="proto.mediapipe.tasks.core.proto.Acceleration"),proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_=[[1,2,4,5]],proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase={DELEGATE_NOT_SET:0,XNNPACK:1,GPU:2,TFLITE:4,NNAPI:5},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getDelegateCase=function(){return t.Message.computeOneofCase(this,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.Acceleration.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.Acceleration.toObject(e,this)},proto.mediapipe.tasks.core.proto.Acceleration.toObject=function(e,t){var n,r={xnnpack:(n=t.getXnnpack())&&a.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(e,n),gpu:(n=t.getGpu())&&a.InferenceCalculatorOptions.Delegate.Gpu.toObject(e,n),tflite:(n=t.getTflite())&&a.InferenceCalculatorOptions.Delegate.TfLite.toObject(e,n),nnapi:(n=t.getNnapi())&&a.InferenceCalculatorOptions.Delegate.Nnapi.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.core.proto.Acceleration;return proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new a.InferenceCalculatorOptions.Delegate.Xnnpack;t.readMessage(n,a.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),e.setXnnpack(n);break;case 2:n=new a.InferenceCalculatorOptions.Delegate.Gpu,t.readMessage(n,a.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),e.setGpu(n);break;case 4:n=new a.InferenceCalculatorOptions.Delegate.TfLite,t.readMessage(n,a.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),e.setTflite(n);break;case 5:n=new a.InferenceCalculatorOptions.Delegate.Nnapi,t.readMessage(n,a.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),e.setNnapi(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.Acceleration.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getXnnpack())&&t.writeMessage(1,n,a.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter),null!=(n=e.getGpu())&&t.writeMessage(2,n,a.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),null!=(n=e.getTflite())&&t.writeMessage(4,n,a.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),null!=(n=e.getNnapi())&&t.writeMessage(5,n,a.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getXnnpack=function(){return t.Message.getWrapperField(this,a.InferenceCalculatorOptions.Delegate.Xnnpack,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setXnnpack=function(e){return t.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],e)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasXnnpack=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getGpu=function(){return t.Message.getWrapperField(this,a.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setGpu=function(e){return t.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],e)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasGpu=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getTflite=function(){return t.Message.getWrapperField(this,a.InferenceCalculatorOptions.Delegate.TfLite,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setTflite=function(e){return t.Message.setOneofWrapperField(this,4,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],e)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasTflite=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getNnapi=function(){return t.Message.getWrapperField(this,a.InferenceCalculatorOptions.Delegate.Nnapi,5)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setNnapi=function(e){return t.Message.setOneofWrapperField(this,5,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],e)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasNnapi=function(){return null!=t.Message.getField(this,5)},n.object.extend(e,proto.mediapipe.tasks.core.proto)}(acceleration_pb);var external_file_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.tasks.core.proto.ExternalFile",null,r),n.exportSymbol("proto.mediapipe.tasks.core.proto.FileDescriptorMeta",null,r),n.exportSymbol("proto.mediapipe.tasks.core.proto.FilePointerMeta",null,r),proto.mediapipe.tasks.core.proto.ExternalFile=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.core.proto.ExternalFile,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.ExternalFile.displayName="proto.mediapipe.tasks.core.proto.ExternalFile"),proto.mediapipe.tasks.core.proto.FileDescriptorMeta=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.core.proto.FileDescriptorMeta,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.displayName="proto.mediapipe.tasks.core.proto.FileDescriptorMeta"),proto.mediapipe.tasks.core.proto.FilePointerMeta=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.core.proto.FilePointerMeta,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.displayName="proto.mediapipe.tasks.core.proto.FilePointerMeta"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.ExternalFile.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.ExternalFile.toObject(e,this)},proto.mediapipe.tasks.core.proto.ExternalFile.toObject=function(e,n){var r,a={fileContent:n.getFileContent_asB64(),fileName:null==(r=t.Message.getField(n,2))?void 0:r,fileDescriptorMeta:(r=n.getFileDescriptorMeta())&&proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(e,r),filePointerMeta:(r=n.getFilePointerMeta())&&proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(e,r)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.core.proto.ExternalFile;return proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readBytes();e.setFileContent(n);break;case 2:n=t.readString(),e.setFileName(n);break;case 3:n=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta,t.readMessage(n,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader),e.setFileDescriptorMeta(n);break;case 4:n=new proto.mediapipe.tasks.core.proto.FilePointerMeta,t.readMessage(n,proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader),e.setFilePointerMeta(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeBytes(1,r),null!=(r=t.Message.getField(e,2))&&n.writeString(2,r),null!=(r=e.getFileDescriptorMeta())&&n.writeMessage(3,r,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter),null!=(r=e.getFilePointerMeta())&&n.writeMessage(4,r,proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asB64=function(){return t.Message.bytesAsB64(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asU8=function(){return t.Message.bytesAsU8(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileContent=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileContent=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileContent=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileName=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileName=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileName=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileName=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileDescriptorMeta=function(){return t.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FileDescriptorMeta,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileDescriptorMeta=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileDescriptorMeta=function(){return this.setFileDescriptorMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileDescriptorMeta=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFilePointerMeta=function(){return t.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FilePointerMeta,4)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFilePointerMeta=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFilePointerMeta=function(){return this.setFilePointerMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFilePointerMeta=function(){return null!=t.Message.getField(this,4)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(e,this)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject=function(e,n){var r,a={fd:null==(r=t.Message.getField(n,1))?void 0:r,length:null==(r=t.Message.getField(n,2))?void 0:r,offset:null==(r=t.Message.getField(n,3))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setFd(n);break;case 2:n=t.readInt64(),e.setLength(n);break;case 3:n=t.readInt64(),e.setOffset(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt64(2,r),null!=(r=t.Message.getField(e,3))&&n.writeInt64(3,r)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getFd=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setFd=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearFd=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasFd=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getLength=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setLength=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearLength=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasLength=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getOffset=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setOffset=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearOffset=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasOffset=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(e,this)},proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject=function(e,n){var r,a={pointer:null==(r=t.Message.getField(n,1))?void 0:r,length:null==(r=t.Message.getField(n,2))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.core.proto.FilePointerMeta;return proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readUint64();e.setPointer(n);break;case 2:n=t.readInt64(),e.setLength(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeUint64(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt64(2,r)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getPointer=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setPointer=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearPointer=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasPointer=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getLength=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setLength=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearLength=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasLength=function(){return null!=t.Message.getField(this,2)},n.object.extend(e,proto.mediapipe.tasks.core.proto)}(external_file_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=acceleration_pb;n.object.extend(proto,a);var o=external_file_pb;n.object.extend(proto,o),n.exportSymbol("proto.mediapipe.tasks.core.proto.BaseOptions",null,r),proto.mediapipe.tasks.core.proto.BaseOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.core.proto.BaseOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.BaseOptions.displayName="proto.mediapipe.tasks.core.proto.BaseOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.BaseOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.core.proto.BaseOptions.toObject(e,this)},proto.mediapipe.tasks.core.proto.BaseOptions.toObject=function(e,n){var r,i={modelAsset:(r=n.getModelAsset())&&o.ExternalFile.toObject(e,r),useStreamMode:t.Message.getBooleanFieldWithDefault(n,2,!1),acceleration:(r=n.getAcceleration())&&a.Acceleration.toObject(e,r)};return e&&(i.$jspbMessageInstance=n),i}),proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.core.proto.BaseOptions;return proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new o.ExternalFile;t.readMessage(n,o.ExternalFile.deserializeBinaryFromReader),e.setModelAsset(n);break;case 2:n=t.readBool(),e.setUseStreamMode(n);break;case 3:n=new a.Acceleration,t.readMessage(n,a.Acceleration.deserializeBinaryFromReader),e.setAcceleration(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getModelAsset())&&n.writeMessage(1,r,o.ExternalFile.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeBool(2,r),null!=(r=e.getAcceleration())&&n.writeMessage(3,r,a.Acceleration.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getModelAsset=function(){return t.Message.getWrapperField(this,o.ExternalFile,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setModelAsset=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearModelAsset=function(){return this.setModelAsset(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasModelAsset=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getUseStreamMode=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setUseStreamMode=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearUseStreamMode=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasUseStreamMode=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getAcceleration=function(){return t.Message.getWrapperField(this,a.Acceleration,3)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setAcceleration=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearAcceleration=function(){return this.setAcceleration(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasAcceleration=function(){return null!=t.Message.getField(this,3)},n.object.extend(e,proto.mediapipe.tasks.core.proto)}(base_options_pb);var face_detector_graph_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i),n.exportSymbol("proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions",null,r),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject=function(e,n){var r,a={baseOptions:(r=n.getBaseOptions())&&i.BaseOptions.toObject(e,r),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(n,2,.5),minSuppressionThreshold:t.Message.getFloatingPointFieldWithDefault(n,3,.5),numFaces:null==(r=t.Message.getField(n,4))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=t.readFloat(),e.setMinDetectionConfidence(n);break;case 3:n=t.readFloat(),e.setMinSuppressionThreshold(n);break;case 4:n=t.readInt32(),e.setNumFaces(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getBaseOptions())&&n.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r),null!=(r=t.Message.getField(e,3))&&n.writeFloat(3,r),null!=(r=t.Message.getField(e,4))&&n.writeInt32(4,r)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new t.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[502141897]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getNumFaces=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setNumFaces=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearNumFaces=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasNumFaces=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new t.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[502141897]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.face_detector.proto)}(face_detector_graph_options_pb);var detection_result={};Object.defineProperty(detection_result,"__esModule",{value:!0}),detection_result.convertFromDetectionProto=void 0;var DEFAULT_CATEGORY_INDEX=-1;function convertFromDetectionProto(e){for(var t,n,r,a,o,i,s,u,l,p,c,d,f,g=e.getScoreList(),h=e.getLabelIdList(),m=e.getLabelList(),v=e.getDisplayNameList(),y={categories:[]},b=0;b<g.length;b++)y.categories.push({score:g[b],index:null!==(t=h[b])&&void 0!==t?t:DEFAULT_CATEGORY_INDEX,categoryName:null!==(n=m[b])&&void 0!==n?n:"",displayName:null!==(r=v[b])&&void 0!==r?r:""});var _=null===(a=e.getLocationData())||void 0===a?void 0:a.getBoundingBox();if(_&&(y.boundingBox={originX:null!==(o=_.getXmin())&&void 0!==o?o:0,originY:null!==(i=_.getYmin())&&void 0!==i?i:0,width:null!==(s=_.getWidth())&&void 0!==s?s:0,height:null!==(u=_.getHeight())&&void 0!==u?u:0}),null===(l=e.getLocationData())||void 0===l?void 0:l.getRelativeKeypointsList().length){y.keypoints=[];var k,x=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e.getLocationData().getRelativeKeypointsList());try{for(x.s();!(k=x.n()).done;){var w=k.value;y.keypoints.push({x:null!==(p=w.getX())&&void 0!==p?p:0,y:null!==(c=w.getY())&&void 0!==c?c:0,score:null!==(d=w.getScore())&&void 0!==d?d:0,label:null!==(f=w.getKeypointLabel())&&void 0!==f?f:""})}}catch(O){x.e(O)}finally{x.f()}}return y}detection_result.convertFromDetectionProto=convertFromDetectionProto;var vision_task_runner={},rect_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.NormalizedRect",null,r),n.exportSymbol("proto.mediapipe.Rect",null,r),proto.mediapipe.Rect=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.Rect,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.Rect.displayName="proto.mediapipe.Rect"),proto.mediapipe.NormalizedRect=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.NormalizedRect,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedRect.displayName="proto.mediapipe.NormalizedRect"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rect.prototype.toObject=function(e){return proto.mediapipe.Rect.toObject(e,this)},proto.mediapipe.Rect.toObject=function(e,n){var r,a={xCenter:null==(r=t.Message.getField(n,1))?void 0:r,yCenter:null==(r=t.Message.getField(n,2))?void 0:r,height:null==(r=t.Message.getField(n,3))?void 0:r,width:null==(r=t.Message.getField(n,4))?void 0:r,rotation:t.Message.getFloatingPointFieldWithDefault(n,5,0),rectId:null==(r=t.Message.getField(n,6))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.Rect.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.Rect;return proto.mediapipe.Rect.deserializeBinaryFromReader(r,n)},proto.mediapipe.Rect.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setXCenter(n);break;case 2:n=t.readInt32(),e.setYCenter(n);break;case 3:n=t.readInt32(),e.setHeight(n);break;case 4:n=t.readInt32(),e.setWidth(n);break;case 5:n=t.readFloat(),e.setRotation(n);break;case 6:n=t.readInt64(),e.setRectId(n);break;default:t.skipField()}return e},proto.mediapipe.Rect.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Rect.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Rect.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),null!=(r=t.Message.getField(e,3))&&n.writeInt32(3,r),null!=(r=t.Message.getField(e,4))&&n.writeInt32(4,r),null!=(r=t.Message.getField(e,5))&&n.writeFloat(5,r),null!=(r=t.Message.getField(e,6))&&n.writeInt64(6,r)},proto.mediapipe.Rect.prototype.getXCenter=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rect.prototype.setXCenter=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Rect.prototype.clearXCenter=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Rect.prototype.hasXCenter=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Rect.prototype.getYCenter=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rect.prototype.setYCenter=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Rect.prototype.clearYCenter=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Rect.prototype.hasYCenter=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Rect.prototype.getHeight=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rect.prototype.setHeight=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Rect.prototype.clearHeight=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Rect.prototype.hasHeight=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.Rect.prototype.getWidth=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.Rect.prototype.setWidth=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.Rect.prototype.clearWidth=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.Rect.prototype.hasWidth=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.Rect.prototype.getRotation=function(){return t.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Rect.prototype.setRotation=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.Rect.prototype.clearRotation=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.Rect.prototype.hasRotation=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.Rect.prototype.getRectId=function(){return t.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.Rect.prototype.setRectId=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.Rect.prototype.clearRectId=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.Rect.prototype.hasRectId=function(){return null!=t.Message.getField(this,6)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedRect.prototype.toObject=function(e){return proto.mediapipe.NormalizedRect.toObject(e,this)},proto.mediapipe.NormalizedRect.toObject=function(e,n){var r,a={xCenter:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,yCenter:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,height:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,width:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r,rotation:t.Message.getFloatingPointFieldWithDefault(n,5,0),rectId:null==(r=t.Message.getField(n,6))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.NormalizedRect.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.NormalizedRect;return proto.mediapipe.NormalizedRect.deserializeBinaryFromReader(r,n)},proto.mediapipe.NormalizedRect.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readFloat();e.setXCenter(n);break;case 2:n=t.readFloat(),e.setYCenter(n);break;case 3:n=t.readFloat(),e.setHeight(n);break;case 4:n=t.readFloat(),e.setWidth(n);break;case 5:n=t.readFloat(),e.setRotation(n);break;case 6:n=t.readInt64(),e.setRectId(n);break;default:t.skipField()}return e},proto.mediapipe.NormalizedRect.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.NormalizedRect.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.NormalizedRect.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeFloat(1,r),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r),null!=(r=t.Message.getField(e,3))&&n.writeFloat(3,r),null!=(r=t.Message.getField(e,4))&&n.writeFloat(4,r),null!=(r=t.Message.getField(e,5))&&n.writeFloat(5,r),null!=(r=t.Message.getField(e,6))&&n.writeInt64(6,r)},proto.mediapipe.NormalizedRect.prototype.getXCenter=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedRect.prototype.setXCenter=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.NormalizedRect.prototype.clearXCenter=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedRect.prototype.hasXCenter=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.NormalizedRect.prototype.getYCenter=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedRect.prototype.setYCenter=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.NormalizedRect.prototype.clearYCenter=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedRect.prototype.hasYCenter=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.NormalizedRect.prototype.getHeight=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedRect.prototype.setHeight=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.NormalizedRect.prototype.clearHeight=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedRect.prototype.hasHeight=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.NormalizedRect.prototype.getWidth=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedRect.prototype.setWidth=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.NormalizedRect.prototype.clearWidth=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedRect.prototype.hasWidth=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.NormalizedRect.prototype.getRotation=function(){return t.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedRect.prototype.setRotation=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.NormalizedRect.prototype.clearRotation=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRotation=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.NormalizedRect.prototype.getRectId=function(){return t.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.NormalizedRect.prototype.setRectId=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.NormalizedRect.prototype.clearRectId=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRectId=function(){return null!=t.Message.getField(this,6)},n.object.extend(e,proto.mediapipe)}(rect_pb);var task_runner={},graph_runner={},platform_utils={};function isWebKit(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator).userAgent;return e.includes("Safari")&&!e.includes("Chrome")}Object.defineProperty(platform_utils,"__esModule",{value:!0}),platform_utils.isWebKit=void 0,platform_utils.isWebKit=isWebKit,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createGraphRunner=e.createMediaPipeLib=e.GraphRunner=e.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME=void 0;var t=platform_utils;e.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME="__graph_config__";var n=function(){function n(e,r){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),this.autoResizeCanvas=!0,this.wasmModule=e,this.audioPtr=null,this.audioSize=0,this.hasMultiStreamSupport="function"==typeof this.wasmModule._addIntToInputStream,void 0!==r?this.wasmModule.canvas=r:"undefined"==typeof OffscreenCanvas||(0,t.isWebKit)()?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.wasmModule.canvas=document.createElement("canvas")):this.wasmModule.canvas=new OffscreenCanvas(1,1)}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"initializeGraph",value:function(){var e=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t){var n,r,a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.arrayBuffer();case 5:r=e.sent,a=!(t.endsWith(".pbtxt")||t.endsWith(".textproto")),this.setGraph(new Uint8Array(r),a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setGraphFromString",value:function(e){this.setGraph((new TextEncoder).encode(e),!1)}},{key:"setGraph",value:function(e,t){var n=e.length,r=this.wasmModule._malloc(n);this.wasmModule.HEAPU8.set(e,r),t?this.wasmModule._changeBinaryGraph(n,r):this.wasmModule._changeTextGraph(n,r),this.wasmModule._free(r)}},{key:"configureAudio",value:function(e,t,n,r,a){var o=this;this.wasmModule._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),r=r||"input_audio",this.wrapStringPtr(r,(function(r){a=a||"audio_header",o.wrapStringPtr(a,(function(a){o.wasmModule._configureAudio(r,a,e,t,n)}))}))}},{key:"setAutoResizeCanvas",value:function(e){this.autoResizeCanvas=e}},{key:"setAutoRenderToScreen",value:function(e){this.wasmModule._setAutoRenderToScreen(e)}},{key:"bindTextureToStream",value:function(e,t){if(!this.wasmModule.canvas)throw new Error("No OpenGL canvas configured.");t?this.wasmModule._bindTextureToStream(t):console.assert(this.wasmModule._bindTextureToCanvas());var n,r,a=this.wasmModule.canvas.getContext("webgl2")||this.wasmModule.canvas.getContext("webgl");if(!a)throw new Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");return a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e),e.videoWidth?(n=e.videoWidth,r=e.videoHeight):e.naturalWidth?(n=e.naturalWidth,r=e.naturalHeight):(n=e.width,r=e.height),!this.autoResizeCanvas||n===this.wasmModule.canvas.width&&r===this.wasmModule.canvas.height||(this.wasmModule.canvas.width=n,this.wasmModule.canvas.height=r),[n,r]}},{key:"processGl",value:function(e,t){var n=this.bindTextureToStream(e),r=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__.Z)(n,2),a=r[0],o=r[1],i=this.wasmModule._malloc(16);this.wasmModule.HEAPU32[i/4]=a,this.wasmModule.HEAPU32[i/4+1]=o,this.wasmModule.HEAPF64[i/8+1]=t,this.wasmModule._processGl(i),this.wasmModule._free(i)}},{key:"wrapStringPtr",value:function(e,t){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");var n=this.wasmModule.stringToNewUTF8(e);t(n),this.wasmModule._free(n)}},{key:"wrapStringPtrPtr",value:function(e,t){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=this.wasmModule.stringToNewUTF8(e[r]);var a=this.wasmModule._malloc(4*n.length);this.wasmModule.HEAPU32.set(n,a>>2),t(a);var o,i=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(n);try{for(i.s();!(o=i.n()).done;){var s=o.value;this.wasmModule._free(s)}}catch(u){i.e(u)}finally{i.f()}this.wasmModule._free(a)}},{key:"getCalculatorGraphConfig",value:function(t,n){var r=this,a=e.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME;this.setListener(a,(function(e){t(e)})),this.wrapStringPtr(a,(function(e){r.wasmModule._getGraphConfig(e,n)})),delete this.wasmModule.simpleListeners[a]}},{key:"setListener",value:function(e,t){this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[e]=t}},{key:"setVectorListener",value:function(e,t){var n=[];this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[e]=function(e,r,a){r?(t(n,a),n=[]):n.push(e)}}},{key:"attachErrorListener",value:function(e){this.wasmModule.errorListener=e}},{key:"attachEmptyPacketListener",value:function(e,t){this.wasmModule.emptyPacketListeners=this.wasmModule.emptyPacketListeners||{},this.wasmModule.emptyPacketListeners[e]=t}},{key:"addAudioToStream",value:function(e,t,n){this.addAudioToStreamWithShape(e,0,0,t,n)}},{key:"addAudioToStreamWithShape",value:function(e,t,n,r,a){var o=this,i=4*e.length;this.audioSize!==i&&(this.audioPtr&&this.wasmModule._free(this.audioPtr),this.audioPtr=this.wasmModule._malloc(i),this.audioSize=i),this.wasmModule.HEAPF32.set(e,this.audioPtr/4),this.wrapStringPtr(r,(function(e){o.wasmModule._addAudioToInputStream(o.audioPtr,t,n,e,a)}))}},{key:"addGpuBufferToStream",value:function(e,t,n){var r=this;this.wrapStringPtr(t,(function(t){var a=r.bindTextureToStream(e,t),o=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__.Z)(a,2),i=o[0],s=o[1];r.wasmModule._addBoundTextureToStream(t,i,s,n)}))}},{key:"addBoolToStream",value:function(e,t,n){var r=this;this.wrapStringPtr(t,(function(t){r.wasmModule._addBoolToInputStream(e,t,n)}))}},{key:"addDoubleToStream",value:function(e,t,n){var r=this;this.wrapStringPtr(t,(function(t){r.wasmModule._addDoubleToInputStream(e,t,n)}))}},{key:"addFloatToStream",value:function(e,t,n){var r=this;this.wrapStringPtr(t,(function(t){r.wasmModule._addFloatToInputStream(e,t,n)}))}},{key:"addIntToStream",value:function(e,t,n){var r=this;this.wrapStringPtr(t,(function(t){r.wasmModule._addIntToInputStream(e,t,n)}))}},{key:"addStringToStream",value:function(e,t,n){var r=this;this.wrapStringPtr(t,(function(t){r.wrapStringPtr(e,(function(e){r.wasmModule._addStringToInputStream(e,t,n)}))}))}},{key:"addStringRecordToStream",value:function(e,t,n){var r=this;this.wrapStringPtr(t,(function(t){r.wrapStringPtrPtr(Object.keys(e),(function(a){r.wrapStringPtrPtr(Object.values(e),(function(o){r.wasmModule._addFlatHashMapToInputStream(a,o,Object.keys(e).length,t,n)}))}))}))}},{key:"addProtoToStream",value:function(e,t,n,r){var a=this;this.wrapStringPtr(n,(function(n){a.wrapStringPtr(t,(function(t){var o=a.wasmModule._malloc(e.length);a.wasmModule.HEAPU8.set(e,o),a.wasmModule._addProtoToInputStream(o,e.length,t,n,r),a.wasmModule._free(o)}))}))}},{key:"addEmptyPacketToStream",value:function(e,t){var n=this;this.wrapStringPtr(e,(function(e){n.wasmModule._addEmptyPacketToInputStream(e,t)}))}},{key:"addBoolToInputSidePacket",value:function(e,t){var n=this;this.wrapStringPtr(t,(function(t){n.wasmModule._addBoolToInputSidePacket(e,t)}))}},{key:"addDoubleToInputSidePacket",value:function(e,t){var n=this;this.wrapStringPtr(t,(function(t){n.wasmModule._addDoubleToInputSidePacket(e,t)}))}},{key:"addFloatToInputSidePacket",value:function(e,t){var n=this;this.wrapStringPtr(t,(function(t){n.wasmModule._addFloatToInputSidePacket(e,t)}))}},{key:"addIntToInputSidePacket",value:function(e,t){var n=this;this.wrapStringPtr(t,(function(t){n.wasmModule._addIntToInputSidePacket(e,t)}))}},{key:"addStringToInputSidePacket",value:function(e,t){var n=this;this.wrapStringPtr(t,(function(t){n.wrapStringPtr(e,(function(e){n.wasmModule._addStringToInputSidePacket(e,t)}))}))}},{key:"addProtoToInputSidePacket",value:function(e,t,n){var r=this;this.wrapStringPtr(n,(function(n){r.wrapStringPtr(t,(function(t){var a=r.wasmModule._malloc(e.length);r.wasmModule.HEAPU8.set(e,a),r.wasmModule._addProtoToInputSidePacket(a,e.length,t,n),r.wasmModule._free(a)}))}))}},{key:"attachBoolListener",value:function(e,t){var n=this;this.setListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachBoolListener(e)}))}},{key:"attachBoolVectorListener",value:function(e,t){var n=this;this.setVectorListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachBoolVectorListener(e)}))}},{key:"attachIntListener",value:function(e,t){var n=this;this.setListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachIntListener(e)}))}},{key:"attachIntVectorListener",value:function(e,t){var n=this;this.setVectorListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachIntVectorListener(e)}))}},{key:"attachDoubleListener",value:function(e,t){var n=this;this.setListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachDoubleListener(e)}))}},{key:"attachDoubleVectorListener",value:function(e,t){var n=this;this.setVectorListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachDoubleVectorListener(e)}))}},{key:"attachFloatListener",value:function(e,t){var n=this;this.setListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachFloatListener(e)}))}},{key:"attachFloatVectorListener",value:function(e,t){var n=this;this.setVectorListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachFloatVectorListener(e)}))}},{key:"attachStringListener",value:function(e,t){var n=this;this.setListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachStringListener(e)}))}},{key:"attachStringVectorListener",value:function(e,t){var n=this;this.setVectorListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmModule._attachStringVectorListener(e)}))}},{key:"attachProtoListener",value:function(e,t,n){var r=this;this.setListener(e,t),this.wrapStringPtr(e,(function(e){r.wasmModule._attachProtoListener(e,n||!1)}))}},{key:"attachProtoVectorListener",value:function(e,t,n){var r=this;this.setVectorListener(e,t),this.wrapStringPtr(e,(function(e){r.wasmModule._attachProtoVectorListener(e,n||!1)}))}},{key:"attachAudioListener",value:function(e,t,n){var r=this;this.wasmModule._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),this.setListener(e,(function(e,n){var r=new Float32Array(e.buffer,e.byteOffset,e.length/4);t(r,n)})),this.wrapStringPtr(e,(function(e){r.wasmModule._attachAudioListener(e,n||!1)}))}},{key:"finishProcessing",value:function(){this.wasmModule._waitUntilIdle()}}]),n}();function r(e){return a.apply(this,arguments)}function a(){return a=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t){var n;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof importScripts){e.next=3;break}return n=document.createElement("script"),e.abrupt("return",(n.setAttribute("src",t),n.setAttribute("crossorigin","anonymous"),new Promise((function(e){n.addEventListener("load",(function(){e()}),!1),n.addEventListener("error",(function(){e()}),!1),document.body.appendChild(n)}))));case 3:importScripts(t.toString());case 4:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function o(e,t,n,r,a){return i.apply(this,arguments)}function i(){return i=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t,n,a,o,i){var s,u;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=[],n&&s.push(n),a&&s.push(a),e.t0=s.length,!e.t0){e.next=7;break}return e.next=7,Promise.all(s.map(r));case 7:if(self.ModuleFactory){e.next=9;break}throw new Error("ModuleFactory not set.");case 9:return self.Module&&i&&(self.Module.locateFile=i.locateFile),e.next=12,self.ModuleFactory(self.Module||i);case 12:return u=e.sent,e.abrupt("return",(self.ModuleFactory=self.Module=void 0,new t(u,o)));case 14:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}e.GraphRunner=n,e.createMediaPipeLib=o,e.createGraphRunner=function(){var e=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t,r,a,i){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o(n,t,r,a,i));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()}(graph_runner);var register_model_resources_graph_service={};function SupportModelResourcesGraphService(e){return function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),t.apply(this,arguments)}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"registerModelResourcesGraphService",value:function(){this.wasmModule._registerModelResourcesGraphService()}}]),n}(e)}Object.defineProperty(register_model_resources_graph_service,"__esModule",{value:!0}),register_model_resources_graph_service.SupportModelResourcesGraphService=void 0,register_model_resources_graph_service.SupportModelResourcesGraphService=SupportModelResourcesGraphService,Object.defineProperty(task_runner,"__esModule",{value:!0}),task_runner.TaskRunner=task_runner.createTaskRunner=task_runner.CachedGraphRunner=void 0;var inference_calculator_pb_1=inference_calculator_pb,calculator_pb_1=calculator_pb,acceleration_pb_1=acceleration_pb,external_file_pb_1=external_file_pb,graph_runner_1$1=graph_runner,register_model_resources_graph_service_1$1=register_model_resources_graph_service,NO_ASSETS=void 0,CachedGraphRunnerType=(0,register_model_resources_graph_service_1$1.SupportModelResourcesGraphService)(graph_runner_1$1.GraphRunner),CachedGraphRunner=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),t.apply(this,arguments)}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n)}(CachedGraphRunnerType);function createTaskRunner(e,t,n,r){return _createTaskRunner.apply(this,arguments)}function _createTaskRunner(){return(_createTaskRunner=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t,n,r,a){var o,i;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={locateFile:function(){return r.wasmBinaryPath.toString()}},e.next=3,(0,graph_runner_1$1.createMediaPipeLib)(t,r.wasmLoaderPath,NO_ASSETS,n,o);case 3:return i=e.sent,e.next=6,i.setOptions(a);case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}task_runner.CachedGraphRunner=CachedGraphRunner,task_runner.createTaskRunner=createTaskRunner;var TaskRunner=function(){function e(t){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,e),this.graphRunner=t,this.processingErrors=[],this.latestOutputTimestamp=0,this.graphRunner.setAutoRenderToScreen(!1)}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(e,[{key:"applyOptions",value:function(e){var t,n,r,a,o,i=this,s=e.baseOptions||{};if((null===(t=e.baseOptions)||void 0===t?void 0:t.modelAssetBuffer)&&(null===(n=e.baseOptions)||void 0===n?void 0:n.modelAssetPath))throw new Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((null===(r=this.baseOptions.getModelAsset())||void 0===r?void 0:r.hasFileContent())||(null===(a=e.baseOptions)||void 0===a?void 0:a.modelAssetBuffer)||(null===(o=e.baseOptions)||void 0===o?void 0:o.modelAssetPath)))throw new Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");return this.setAcceleration(s),s.modelAssetPath?fetch(s.modelAssetPath.toString()).then((function(e){if(e.ok)return e.arrayBuffer();throw new Error("Failed to fetch model: ".concat(s.modelAssetPath," (").concat(e.status,")"))})).then((function(e){i.setExternalFile(new Uint8Array(e)),i.refreshGraph(),i.onGraphRefreshed()})):(this.setExternalFile(s.modelAssetBuffer),this.refreshGraph(),this.onGraphRefreshed(),Promise.resolve())}},{key:"onGraphRefreshed",value:function(){}},{key:"getCalculatorGraphConfig",value:function(){var e;if(this.graphRunner.getCalculatorGraphConfig((function(t){e=calculator_pb_1.CalculatorGraphConfig.deserializeBinary(t)})),!e)throw new Error("Failed to retrieve CalculatorGraphConfig");return e}},{key:"setGraph",value:function(e,t){var n=this;this.graphRunner.attachErrorListener((function(e,t){n.processingErrors.push(new Error(t))})),this.graphRunner.registerModelResourcesGraphService(),this.graphRunner.setGraph(e,t),this.handleErrors()}},{key:"finishProcessing",value:function(){this.graphRunner.finishProcessing(),this.handleErrors()}},{key:"setLatestOutputTimestamp",value:function(e){this.latestOutputTimestamp=Math.max(this.latestOutputTimestamp,e)}},{key:"getSynctheticTimestamp",value:function(){return this.latestOutputTimestamp+1}},{key:"handleErrors",value:function(){try{var e=this.processingErrors.length;if(1===e)throw new Error(this.processingErrors[0].message);if(e>1)throw new Error("Encountered multiple errors: "+this.processingErrors.map((function(e){return e.message})).join(", "))}finally{this.processingErrors=[]}}},{key:"setExternalFile",value:function(e){var t=this.baseOptions.getModelAsset()||new external_file_pb_1.ExternalFile;e&&t.setFileContent(e),this.baseOptions.setModelAsset(t)}},{key:"setAcceleration",value:function(e){var t=this.baseOptions.getAcceleration();t||(t=new acceleration_pb_1.Acceleration).setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite),"delegate"in e&&("GPU"===e.delegate?t.setGpu(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.Gpu):t.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),this.baseOptions.setAcceleration(t)}}],[{key:"createInstance",value:function(){var e=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t,n,r,a){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",createTaskRunner(t,n,r,a));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()}]),e}();task_runner.TaskRunner=TaskRunner;var graph_runner_image_lib={};function SupportImage(e){return function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),t.apply(this,arguments)}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"wasmImageModule",get:function(){return this.wasmModule}},{key:"addGpuBufferAsImageToStream",value:function(e,t,n){var r=this;this.wrapStringPtr(t,(function(t){var a=r.bindTextureToStream(e,t),o=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__.Z)(a,2),i=o[0],s=o[1];r.wasmImageModule._addBoundTextureAsImageToStream(t,i,s,n)}))}},{key:"attachImageListener",value:function(e,t){var n=this;this.setListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmImageModule._attachImageListener(e)}))}},{key:"attachImageVectorListener",value:function(e,t){var n=this;this.setVectorListener(e,t),this.wrapStringPtr(e,(function(e){n.wasmImageModule._attachImageVectorListener(e)}))}}]),n}(e)}Object.defineProperty(graph_runner_image_lib,"__esModule",{value:!0}),graph_runner_image_lib.SupportImage=void 0,graph_runner_image_lib.SupportImage=SupportImage,Object.defineProperty(vision_task_runner,"__esModule",{value:!0}),vision_task_runner.VisionTaskRunner=vision_task_runner.VisionGraphRunner=void 0;var rect_pb_1=rect_pb,task_runner_1=task_runner,graph_runner_1=graph_runner,graph_runner_image_lib_1=graph_runner_image_lib,platform_utils_1=platform_utils,register_model_resources_graph_service_1=register_model_resources_graph_service,GraphRunnerVisionType=(0,register_model_resources_graph_service_1.SupportModelResourcesGraphService)((0,graph_runner_image_lib_1.SupportImage)(graph_runner_1.GraphRunner)),VisionGraphRunner=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),t.apply(this,arguments)}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n)}(GraphRunnerVisionType);function createCanvas(){return"undefined"==typeof OffscreenCanvas||(0,platform_utils_1.isWebKit)()?document.createElement("canvas"):void 0}vision_task_runner.VisionGraphRunner=VisionGraphRunner;var VisionTaskRunner=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r,a,o){var i;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(i=t.call(this,e)).graphRunner=e,i.imageStreamName=r,i.normRectStreamName=a,i.roiAllowed=o,i}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"applyOptions",value:function(e){if("runningMode"in e){var t=!!e.runningMode&&"IMAGE"!==e.runningMode;this.baseOptions.setUseStreamMode(t)}if(void 0!==e.canvas&&this.graphRunner.wasmModule.canvas!==e.canvas)throw new Error("You must create a new task to reset the canvas.");return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_8__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9__.Z)(n.prototype),"applyOptions",this).call(this,e)}},{key:"processImageData",value:function(e,t){var n;if(null===(n=this.baseOptions)||void 0===n?void 0:n.getUseStreamMode())throw new Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");this.process(e,t,this.getSynctheticTimestamp())}},{key:"processVideoData",value:function(e,t,n){var r;if(!(null===(r=this.baseOptions)||void 0===r?void 0:r.getUseStreamMode()))throw new Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");this.process(e,t,n)}},{key:"getImageSourceSize",value:function(e){return void 0!==e.videoWidth?[e.videoWidth,e.videoHeight]:void 0!==e.naturalWidth?[e.naturalWidth,e.naturalHeight]:[e.width,e.height]}},{key:"convertToNormalizedRect",value:function(e,t){var n=new rect_pb_1.NormalizedRect;if(null==t?void 0:t.regionOfInterest){if(!this.roiAllowed)throw new Error("This task doesn't support region-of-interest.");var r=t.regionOfInterest;if(r.left>=r.right||r.top>=r.bottom)throw new Error("Expected RectF with left < right and top < bottom.");if(r.left<0||r.top<0||r.right>1||r.bottom>1)throw new Error("Expected RectF values to be in [0,1].");n.setXCenter((r.left+r.right)/2),n.setYCenter((r.top+r.bottom)/2),n.setWidth(r.right-r.left),n.setHeight(r.bottom-r.top)}else n.setXCenter(.5),n.setYCenter(.5),n.setWidth(1),n.setHeight(1);if(null==t?void 0:t.rotationDegrees){if((null==t?void 0:t.rotationDegrees)%90!=0)throw new Error("Expected rotation to be a multiple of 90\xb0.");if(n.setRotation(-Math.PI*t.rotationDegrees/180),(null==t?void 0:t.rotationDegrees)%180!=0){var a=this.getImageSourceSize(e),o=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__.Z)(a,2),i=o[0],s=o[1],u=n.getHeight()*s/i,l=n.getWidth()*i/s;n.setWidth(u),n.setHeight(l)}}return n}},{key:"process",value:function(e,t,n){var r=this.convertToNormalizedRect(e,t);this.graphRunner.addProtoToStream(r.serializeBinary(),"mediapipe.NormalizedRect",this.normRectStreamName,n),this.graphRunner.addGpuBufferAsImageToStream(e,this.imageStreamName,null!=n?n:performance.now()),this.finishProcessing()}},{key:"convertToImageData",value:function(e){var t=e.data,n=e.width,r=e.height;if(!(t instanceof Uint8ClampedArray))throw new Error("Only Uint8ClampedArray-based images can be converted to ImageData");if(t.length===n*r*4)return new ImageData(t,n,r);if(t.length===n*r*3){for(var a=new Uint8ClampedArray(n*r*4),o=0;o<n*r;++o)a[4*o]=t[3*o],a[4*o+1]=t[3*o+1],a[4*o+2]=t[3*o+2],a[4*o+3]=255;return new ImageData(a,n,r)}throw new Error("Unsupported channel count: "+t.length/n/r)}}],[{key:"createVisionInstance",value:function(){var e=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t,n,r){var a,o,i;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("GPU"!==(null===(a=r.baseOptions)||void 0===a?void 0:a.delegate)||r.canvas){e.next=2;break}throw new Error("You must specify a canvas for GPU processing.");case 2:return i=null!==(o=r.canvas)&&void 0!==o?o:createCanvas(),e.abrupt("return",task_runner_1.TaskRunner.createInstance(t,i,n,r));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(task_runner_1.TaskRunner);vision_task_runner.VisionTaskRunner=VisionTaskRunner;var face_detector_options={};Object.defineProperty(face_detector_options,"__esModule",{value:!0});var face_detector_result={};Object.defineProperty(face_detector_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.FaceDetector=void 0;var r=calculator_pb,a=calculator_options_pb,o=detection_pb,i=base_options_pb,s=face_detector_graph_options_pb,u=detection_result,l=vision_task_runner,p="image_in",c="norm_rect_in",d="detections";n(face_detector_options,e),n(face_detector_result,e);var f=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new l.VisionGraphRunner(e,r),p,c,!1)).result={detections:[]},a.options=new s.FaceDetectorGraphOptions,a.options.setBaseOptions(new i.BaseOptions),a.options.setMinDetectionConfidence(.5),a.options.setMinSuppressionThreshold(.3),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){var t,n;return"minDetectionConfidence"in e&&this.options.setMinDetectionConfidence(null!==(t=e.minDetectionConfidence)&&void 0!==t?t:.5),"minSuppressionThreshold"in e&&this.options.setMinSuppressionThreshold(null!==(n=e.minSuppressionThreshold)&&void 0!==n?n:.3),this.applyOptions(e)}},{key:"detect",value:function(e,t){return this.result={detections:[]},this.processImageData(e,t),this.result}},{key:"detectForVideo",value:function(e,t,n){return this.result={detections:[]},this.processVideoData(e,n,t),this.result}},{key:"addJsFaceDetections",value:function(e){var t,n=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=o.Detection.deserializeBinary(r);this.result.detections.push((0,u.convertFromDetectionProto)(a))}}catch(i){n.e(i)}finally{n.f()}}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(p),t.addInputStream(c),t.addOutputStream(d);var n=new a.CalculatorOptions;n.setExtension(s.FaceDetectorGraphOptions.ext,this.options);var o=new r.CalculatorGraphConfig.Node;o.setCalculator("mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),o.addInputStream("IMAGE:"+p),o.addInputStream("NORM_RECT:"+c),o.addOutputStream("DETECTIONS:"+d),o.setOptions(n),t.addNode(o),this.graphRunner.attachProtoVectorListener(d,(function(t,n){e.addJsFaceDetections(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(d,(function(t){e.setLatestOutputTimestamp(t)}));var i=t.serializeBinary();this.setGraph(new Uint8Array(i),!0)}}],[{key:"createFromOptions",value:function(e,t){return l.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return l.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(){var e=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t,r){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.VisionTaskRunner.createVisionInstance(n,t,{baseOptions:{modelAssetPath:r}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(l.VisionTaskRunner);e.FaceDetector=f}(face_detector);var face_landmarker={},classification_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.Classification",null,r),n.exportSymbol("proto.mediapipe.ClassificationList",null,r),n.exportSymbol("proto.mediapipe.ClassificationListCollection",null,r),proto.mediapipe.Classification=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.Classification,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.Classification.displayName="proto.mediapipe.Classification"),proto.mediapipe.ClassificationList=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.ClassificationList.repeatedFields_,null)},n.inherits(proto.mediapipe.ClassificationList,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationList.displayName="proto.mediapipe.ClassificationList"),proto.mediapipe.ClassificationListCollection=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.ClassificationListCollection.repeatedFields_,null)},n.inherits(proto.mediapipe.ClassificationListCollection,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationListCollection.displayName="proto.mediapipe.ClassificationListCollection"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Classification.prototype.toObject=function(e){return proto.mediapipe.Classification.toObject(e,this)},proto.mediapipe.Classification.toObject=function(e,n){var r,a={index:null==(r=t.Message.getField(n,1))?void 0:r,score:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,label:null==(r=t.Message.getField(n,3))?void 0:r,displayName:null==(r=t.Message.getField(n,4))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.Classification.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.Classification;return proto.mediapipe.Classification.deserializeBinaryFromReader(r,n)},proto.mediapipe.Classification.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setIndex(n);break;case 2:n=t.readFloat(),e.setScore(n);break;case 3:n=t.readString(),e.setLabel(n);break;case 4:n=t.readString(),e.setDisplayName(n);break;default:t.skipField()}return e},proto.mediapipe.Classification.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Classification.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Classification.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r),null!=(r=t.Message.getField(e,3))&&n.writeString(3,r),null!=(r=t.Message.getField(e,4))&&n.writeString(4,r)},proto.mediapipe.Classification.prototype.getIndex=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Classification.prototype.setIndex=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Classification.prototype.clearIndex=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Classification.prototype.hasIndex=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Classification.prototype.getScore=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Classification.prototype.setScore=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Classification.prototype.clearScore=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Classification.prototype.hasScore=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Classification.prototype.getLabel=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.Classification.prototype.setLabel=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Classification.prototype.clearLabel=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Classification.prototype.hasLabel=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.Classification.prototype.getDisplayName=function(){return t.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.Classification.prototype.setDisplayName=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.Classification.prototype.clearDisplayName=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.Classification.prototype.hasDisplayName=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.ClassificationList.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationList.prototype.toObject=function(e){return proto.mediapipe.ClassificationList.toObject(e,this)},proto.mediapipe.ClassificationList.toObject=function(e,n){var r={classificationList:t.Message.toObjectList(n.getClassificationList(),proto.mediapipe.Classification.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.ClassificationList.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.ClassificationList;return proto.mediapipe.ClassificationList.deserializeBinaryFromReader(r,n)},proto.mediapipe.ClassificationList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.Classification;t.readMessage(n,proto.mediapipe.Classification.deserializeBinaryFromReader),e.addClassification(n)}else t.skipField();return e},proto.mediapipe.ClassificationList.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ClassificationList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ClassificationList.serializeBinaryToWriter=function(e,t){var n;(n=e.getClassificationList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.Classification.serializeBinaryToWriter)},proto.mediapipe.ClassificationList.prototype.getClassificationList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Classification,1)},proto.mediapipe.ClassificationList.prototype.setClassificationList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.ClassificationList.prototype.addClassification=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.Classification,n)},proto.mediapipe.ClassificationList.prototype.clearClassificationList=function(){return this.setClassificationList([])},proto.mediapipe.ClassificationListCollection.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationListCollection.prototype.toObject=function(e){return proto.mediapipe.ClassificationListCollection.toObject(e,this)},proto.mediapipe.ClassificationListCollection.toObject=function(e,n){var r={classificationListList:t.Message.toObjectList(n.getClassificationListList(),proto.mediapipe.ClassificationList.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.ClassificationListCollection.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.ClassificationListCollection;return proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader(r,n)},proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.ClassificationList;t.readMessage(n,proto.mediapipe.ClassificationList.deserializeBinaryFromReader),e.addClassificationList(n)}else t.skipField();return e},proto.mediapipe.ClassificationListCollection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter=function(e,t){var n;(n=e.getClassificationListList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.ClassificationList.serializeBinaryToWriter)},proto.mediapipe.ClassificationListCollection.prototype.getClassificationListList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.ClassificationList,1)},proto.mediapipe.ClassificationListCollection.prototype.setClassificationListList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.ClassificationListCollection.prototype.addClassificationList=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.ClassificationList,n)},proto.mediapipe.ClassificationListCollection.prototype.clearClassificationListList=function(){return this.setClassificationListList([])},n.object.extend(e,proto.mediapipe)}(classification_pb);var landmark_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.Landmark",null,r),n.exportSymbol("proto.mediapipe.LandmarkList",null,r),n.exportSymbol("proto.mediapipe.LandmarkListCollection",null,r),n.exportSymbol("proto.mediapipe.NormalizedLandmark",null,r),n.exportSymbol("proto.mediapipe.NormalizedLandmarkList",null,r),n.exportSymbol("proto.mediapipe.NormalizedLandmarkListCollection",null,r),proto.mediapipe.Landmark=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.Landmark,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.Landmark.displayName="proto.mediapipe.Landmark"),proto.mediapipe.LandmarkList=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.LandmarkList.repeatedFields_,null)},n.inherits(proto.mediapipe.LandmarkList,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkList.displayName="proto.mediapipe.LandmarkList"),proto.mediapipe.LandmarkListCollection=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.LandmarkListCollection.repeatedFields_,null)},n.inherits(proto.mediapipe.LandmarkListCollection,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkListCollection.displayName="proto.mediapipe.LandmarkListCollection"),proto.mediapipe.NormalizedLandmark=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.NormalizedLandmark,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmark.displayName="proto.mediapipe.NormalizedLandmark"),proto.mediapipe.NormalizedLandmarkList=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.NormalizedLandmarkList.repeatedFields_,null)},n.inherits(proto.mediapipe.NormalizedLandmarkList,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkList.displayName="proto.mediapipe.NormalizedLandmarkList"),proto.mediapipe.NormalizedLandmarkListCollection=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_,null)},n.inherits(proto.mediapipe.NormalizedLandmarkListCollection,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkListCollection.displayName="proto.mediapipe.NormalizedLandmarkListCollection"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Landmark.prototype.toObject=function(e){return proto.mediapipe.Landmark.toObject(e,this)},proto.mediapipe.Landmark.toObject=function(e,n){var r,a={x:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,y:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,z:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,visibility:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r,presence:null==(r=t.Message.getOptionalFloatingPointField(n,5))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.Landmark.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.Landmark;return proto.mediapipe.Landmark.deserializeBinaryFromReader(r,n)},proto.mediapipe.Landmark.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readFloat();e.setX(n);break;case 2:n=t.readFloat(),e.setY(n);break;case 3:n=t.readFloat(),e.setZ(n);break;case 4:n=t.readFloat(),e.setVisibility(n);break;case 5:n=t.readFloat(),e.setPresence(n);break;default:t.skipField()}return e},proto.mediapipe.Landmark.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Landmark.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Landmark.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeFloat(1,r),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r),null!=(r=t.Message.getField(e,3))&&n.writeFloat(3,r),null!=(r=t.Message.getField(e,4))&&n.writeFloat(4,r),null!=(r=t.Message.getField(e,5))&&n.writeFloat(5,r)},proto.mediapipe.Landmark.prototype.getX=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.Landmark.prototype.setX=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Landmark.prototype.clearX=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Landmark.prototype.hasX=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Landmark.prototype.getY=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Landmark.prototype.setY=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Landmark.prototype.clearY=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Landmark.prototype.hasY=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Landmark.prototype.getZ=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.Landmark.prototype.setZ=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Landmark.prototype.clearZ=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Landmark.prototype.hasZ=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.Landmark.prototype.getVisibility=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.Landmark.prototype.setVisibility=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.Landmark.prototype.clearVisibility=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.Landmark.prototype.hasVisibility=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.Landmark.prototype.getPresence=function(){return t.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Landmark.prototype.setPresence=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.Landmark.prototype.clearPresence=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.Landmark.prototype.hasPresence=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.LandmarkList.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkList.prototype.toObject=function(e){return proto.mediapipe.LandmarkList.toObject(e,this)},proto.mediapipe.LandmarkList.toObject=function(e,n){var r={landmarkList:t.Message.toObjectList(n.getLandmarkList(),proto.mediapipe.Landmark.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.LandmarkList.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.LandmarkList;return proto.mediapipe.LandmarkList.deserializeBinaryFromReader(r,n)},proto.mediapipe.LandmarkList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.Landmark;t.readMessage(n,proto.mediapipe.Landmark.deserializeBinaryFromReader),e.addLandmark(n)}else t.skipField();return e},proto.mediapipe.LandmarkList.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LandmarkList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LandmarkList.serializeBinaryToWriter=function(e,t){var n;(n=e.getLandmarkList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.Landmark.serializeBinaryToWriter)},proto.mediapipe.LandmarkList.prototype.getLandmarkList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.Landmark,1)},proto.mediapipe.LandmarkList.prototype.setLandmarkList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.LandmarkList.prototype.addLandmark=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.Landmark,n)},proto.mediapipe.LandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.LandmarkListCollection.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkListCollection.prototype.toObject=function(e){return proto.mediapipe.LandmarkListCollection.toObject(e,this)},proto.mediapipe.LandmarkListCollection.toObject=function(e,n){var r={landmarkListList:t.Message.toObjectList(n.getLandmarkListList(),proto.mediapipe.LandmarkList.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.LandmarkListCollection.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.LandmarkListCollection;return proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader(r,n)},proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.LandmarkList;t.readMessage(n,proto.mediapipe.LandmarkList.deserializeBinaryFromReader),e.addLandmarkList(n)}else t.skipField();return e},proto.mediapipe.LandmarkListCollection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter=function(e,t){var n;(n=e.getLandmarkListList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.LandmarkList.serializeBinaryToWriter)},proto.mediapipe.LandmarkListCollection.prototype.getLandmarkListList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.LandmarkList,1)},proto.mediapipe.LandmarkListCollection.prototype.setLandmarkListList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.LandmarkListCollection.prototype.addLandmarkList=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.LandmarkList,n)},proto.mediapipe.LandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmark.prototype.toObject=function(e){return proto.mediapipe.NormalizedLandmark.toObject(e,this)},proto.mediapipe.NormalizedLandmark.toObject=function(e,n){var r,a={x:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,y:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,z:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,visibility:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r,presence:null==(r=t.Message.getOptionalFloatingPointField(n,5))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.NormalizedLandmark.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.NormalizedLandmark;return proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader(r,n)},proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readFloat();e.setX(n);break;case 2:n=t.readFloat(),e.setY(n);break;case 3:n=t.readFloat(),e.setZ(n);break;case 4:n=t.readFloat(),e.setVisibility(n);break;case 5:n=t.readFloat(),e.setPresence(n);break;default:t.skipField()}return e},proto.mediapipe.NormalizedLandmark.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeFloat(1,r),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r),null!=(r=t.Message.getField(e,3))&&n.writeFloat(3,r),null!=(r=t.Message.getField(e,4))&&n.writeFloat(4,r),null!=(r=t.Message.getField(e,5))&&n.writeFloat(5,r)},proto.mediapipe.NormalizedLandmark.prototype.getX=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedLandmark.prototype.setX=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.NormalizedLandmark.prototype.clearX=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasX=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.NormalizedLandmark.prototype.getY=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedLandmark.prototype.setY=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.NormalizedLandmark.prototype.clearY=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasY=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.NormalizedLandmark.prototype.getZ=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedLandmark.prototype.setZ=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.NormalizedLandmark.prototype.clearZ=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasZ=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.NormalizedLandmark.prototype.getVisibility=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedLandmark.prototype.setVisibility=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.NormalizedLandmark.prototype.clearVisibility=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasVisibility=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.NormalizedLandmark.prototype.getPresence=function(){return t.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedLandmark.prototype.setPresence=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.NormalizedLandmark.prototype.clearPresence=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasPresence=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.NormalizedLandmarkList.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkList.prototype.toObject=function(e){return proto.mediapipe.NormalizedLandmarkList.toObject(e,this)},proto.mediapipe.NormalizedLandmarkList.toObject=function(e,n){var r={landmarkList:t.Message.toObjectList(n.getLandmarkList(),proto.mediapipe.NormalizedLandmark.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.NormalizedLandmarkList.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.NormalizedLandmarkList;return proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader(r,n)},proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.NormalizedLandmark;t.readMessage(n,proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader),e.addLandmark(n)}else t.skipField();return e},proto.mediapipe.NormalizedLandmarkList.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter=function(e,t){var n;(n=e.getLandmarkList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkList.prototype.getLandmarkList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmark,1)},proto.mediapipe.NormalizedLandmarkList.prototype.setLandmarkList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.NormalizedLandmarkList.prototype.addLandmark=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.NormalizedLandmark,n)},proto.mediapipe.NormalizedLandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkListCollection.prototype.toObject=function(e){return proto.mediapipe.NormalizedLandmarkListCollection.toObject(e,this)},proto.mediapipe.NormalizedLandmarkListCollection.toObject=function(e,n){var r={landmarkListList:t.Message.toObjectList(n.getLandmarkListList(),proto.mediapipe.NormalizedLandmarkList.toObject,e)};return e&&(r.$jspbMessageInstance=n),r}),proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.NormalizedLandmarkListCollection;return proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader(r,n)},proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.NormalizedLandmarkList;t.readMessage(n,proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader),e.addLandmarkList(n)}else t.skipField();return e},proto.mediapipe.NormalizedLandmarkListCollection.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter=function(e,t){var n;(n=e.getLandmarkListList()).length>0&&t.writeRepeatedMessage(1,n,proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.getLandmarkListList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmarkList,1)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.setLandmarkListList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.addLandmarkList=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.NormalizedLandmarkList,n)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},n.object.extend(e,proto.mediapipe)}(landmark_pb);var face_geometry_pb={},matrix_data_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.MatrixData",null,r),n.exportSymbol("proto.mediapipe.MatrixData.Layout",null,r),proto.mediapipe.MatrixData=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.MatrixData.repeatedFields_,null)},n.inherits(proto.mediapipe.MatrixData,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.MatrixData.displayName="proto.mediapipe.MatrixData"),proto.mediapipe.MatrixData.repeatedFields_=[3],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MatrixData.prototype.toObject=function(e){return proto.mediapipe.MatrixData.toObject(e,this)},proto.mediapipe.MatrixData.toObject=function(e,n){var r,a={rows:null==(r=t.Message.getField(n,1))?void 0:r,cols:null==(r=t.Message.getField(n,2))?void 0:r,packedDataList:null==(r=t.Message.getRepeatedFloatingPointField(n,3))?void 0:r,layout:t.Message.getFieldWithDefault(n,4,0)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.MatrixData.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.MatrixData;return proto.mediapipe.MatrixData.deserializeBinaryFromReader(r,n)},proto.mediapipe.MatrixData.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setRows(n);break;case 2:n=t.readInt32(),e.setCols(n);break;case 3:for(var r=t.isDelimited()?t.readPackedFloat():[t.readFloat()],a=0;a<r.length;a++)e.addPackedData(r[a]);break;case 4:n=t.readEnum(),e.setLayout(n);break;default:t.skipField()}return e},proto.mediapipe.MatrixData.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.MatrixData.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.MatrixData.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),(r=e.getPackedDataList()).length>0&&n.writePackedFloat(3,r),null!=(r=t.Message.getField(e,4))&&n.writeEnum(4,r)},proto.mediapipe.MatrixData.Layout={COLUMN_MAJOR:0,ROW_MAJOR:1},proto.mediapipe.MatrixData.prototype.getRows=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.MatrixData.prototype.setRows=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.MatrixData.prototype.clearRows=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.MatrixData.prototype.hasRows=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.MatrixData.prototype.getCols=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.MatrixData.prototype.setCols=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.MatrixData.prototype.clearCols=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.MatrixData.prototype.hasCols=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.MatrixData.prototype.getPackedDataList=function(){return t.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.MatrixData.prototype.setPackedDataList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.MatrixData.prototype.addPackedData=function(e,n){return t.Message.addToRepeatedField(this,3,e,n)},proto.mediapipe.MatrixData.prototype.clearPackedDataList=function(){return this.setPackedDataList([])},proto.mediapipe.MatrixData.prototype.getLayout=function(){return t.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.MatrixData.prototype.setLayout=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.MatrixData.prototype.clearLayout=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.MatrixData.prototype.hasLayout=function(){return null!=t.Message.getField(this,4)},n.object.extend(e,proto.mediapipe)}(matrix_data_pb);var mesh_3d_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d",null,r),n.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType",null,r),n.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType",null,r),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_,null)},n.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d"),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_=[3,4],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject(e,this)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject=function(e,n){var r,a={vertexType:null==(r=t.Message.getField(n,1))?void 0:r,primitiveType:null==(r=t.Message.getField(n,2))?void 0:r,vertexBufferList:null==(r=t.Message.getRepeatedFloatingPointField(n,3))?void 0:r,indexBufferList:null==(r=t.Message.getRepeatedField(n,4))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readEnum();e.setVertexType(n);break;case 2:n=t.readEnum(),e.setPrimitiveType(n);break;case 3:for(var r=t.isDelimited()?t.readPackedFloat():[t.readFloat()],a=0;a<r.length;a++)e.addVertexBuffer(r[a]);break;case 4:for(r=t.isDelimited()?t.readPackedUint32():[t.readUint32()],a=0;a<r.length;a++)e.addIndexBuffer(r[a]);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeEnum(1,r),null!=(r=t.Message.getField(e,2))&&n.writeEnum(2,r),(r=e.getVertexBufferList()).length>0&&n.writeRepeatedFloat(3,r),(r=e.getIndexBufferList()).length>0&&n.writeRepeatedUint32(4,r)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType={VERTEX_PT:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType={TRIANGLE:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexType=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexType=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexType=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasVertexType=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getPrimitiveType=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setPrimitiveType=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearPrimitiveType=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasPrimitiveType=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexBufferList=function(){return t.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexBufferList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addVertexBuffer=function(e,n){return t.Message.addToRepeatedField(this,3,e,n)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexBufferList=function(){return this.setVertexBufferList([])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getIndexBufferList=function(){return t.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setIndexBufferList=function(e){return t.Message.setField(this,4,e||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addIndexBuffer=function(e,n){return t.Message.addToRepeatedField(this,4,e,n)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearIndexBufferList=function(){return this.setIndexBufferList([])},n.object.extend(e,proto.mediapipe.tasks.vision.face_geometry.proto)}(mesh_3d_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=matrix_data_pb;n.object.extend(proto,a);var o=mesh_3d_pb;n.object.extend(proto,o),n.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry",null,r),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject(e,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject=function(e,t){var n,r={mesh:(n=t.getMesh())&&o.Mesh3d.toObject(e,n),poseTransformMatrix:(n=t.getPoseTransformMatrix())&&a.MatrixData.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new o.Mesh3d;t.readMessage(n,o.Mesh3d.deserializeBinaryFromReader),e.setMesh(n);break;case 2:n=new a.MatrixData,t.readMessage(n,a.MatrixData.deserializeBinaryFromReader),e.setPoseTransformMatrix(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getMesh())&&t.writeMessage(1,n,o.Mesh3d.serializeBinaryToWriter),null!=(n=e.getPoseTransformMatrix())&&t.writeMessage(2,n,a.MatrixData.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getMesh=function(){return t.Message.getWrapperField(this,o.Mesh3d,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setMesh=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearMesh=function(){return this.setMesh(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasMesh=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getPoseTransformMatrix=function(){return t.Message.getWrapperField(this,a.MatrixData,2)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setPoseTransformMatrix=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearPoseTransformMatrix=function(){return this.setPoseTransformMatrix(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasPoseTransformMatrix=function(){return null!=t.Message.getField(this,2)},n.object.extend(e,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_pb);var face_landmarker_graph_options_pb={},face_geometry_graph_options_pb={},geometry_pipeline_calculator_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_options_pb;n.object.extend(proto,a);var o=external_file_pb;n.object.extend(proto,o),n.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions",null,r),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject=function(e,t){var n,r={metadataFile:(n=t.getMetadataFile())&&o.ExternalFile.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new o.ExternalFile;t.readMessage(n,o.ExternalFile.deserializeBinaryFromReader),e.setMetadataFile(n)}else t.skipField();return e},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter=function(e,t){var n;null!=(n=e.getMetadataFile())&&t.writeMessage(1,n,o.ExternalFile.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new t.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),a.CalculatorOptions.extensionsBinary[512499200]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.getMetadataFile=function(){return t.Message.getWrapperField(this,o.ExternalFile,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.setMetadataFile=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.clearMetadataFile=function(){return this.setMetadataFile(void 0)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.hasMetadataFile=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new t.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),a.CalculatorOptions.extensionsBinary[512499200]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.face_geometry)}(geometry_pipeline_calculator_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_options_pb;n.object.extend(proto,a);var o=geometry_pipeline_calculator_pb;n.object.extend(proto,o),n.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions",null,r),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject=function(e,t){var n,r={geometryPipelineOptions:(n=t.getGeometryPipelineOptions())&&o.FaceGeometryPipelineCalculatorOptions.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new o.FaceGeometryPipelineCalculatorOptions;t.readMessage(n,o.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader),e.setGeometryPipelineOptions(n)}else t.skipField();return e},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter=function(e,t){var n;null!=(n=e.getGeometryPipelineOptions())&&t.writeMessage(1,n,o.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new t.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[515723506]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.getGeometryPipelineOptions=function(){return t.Message.getWrapperField(this,o.FaceGeometryPipelineCalculatorOptions,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.setGeometryPipelineOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.clearGeometryPipelineOptions=function(){return this.setGeometryPipelineOptions(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.hasGeometryPipelineOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new t.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),a.CalculatorOptions.extensionsBinary[515723506]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_graph_options_pb);var face_landmarks_detector_graph_options_pb={},face_blendshapes_graph_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i),n.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions",null,r),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject=function(e,t){var n,r={baseOptions:(n=t.getBaseOptions())&&i.BaseOptions.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n)}else t.skipField();return e},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter=function(e,t){var n;null!=(n=e.getBaseOptions())&&t.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new t.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508981768]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new t.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508981768]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_blendshapes_graph_options_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i);var s=face_blendshapes_graph_options_pb;n.object.extend(proto,s),n.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions",null,r),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject=function(e,n){var r,a={baseOptions:(r=n.getBaseOptions())&&i.BaseOptions.toObject(e,r),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(n,2,.5),faceBlendshapesGraphOptions:(r=n.getFaceBlendshapesGraphOptions())&&s.FaceBlendshapesGraphOptions.toObject(e,r)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=t.readFloat(),e.setMinDetectionConfidence(n);break;case 3:n=new s.FaceBlendshapesGraphOptions,t.readMessage(n,s.FaceBlendshapesGraphOptions.deserializeBinaryFromReader),e.setFaceBlendshapesGraphOptions(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getBaseOptions())&&n.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r),null!=(r=e.getFaceBlendshapesGraphOptions())&&n.writeMessage(3,r,s.FaceBlendshapesGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508968149]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getFaceBlendshapesGraphOptions=function(){return t.Message.getWrapperField(this,s.FaceBlendshapesGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setFaceBlendshapesGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearFaceBlendshapesGraphOptions=function(){return this.setFaceBlendshapesGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasFaceBlendshapesGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508968149]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarks_detector_graph_options_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i);var s=face_detector_graph_options_pb;n.object.extend(proto,s);var u=face_geometry_graph_options_pb;n.object.extend(proto,u);var l=face_landmarks_detector_graph_options_pb;n.object.extend(proto,l),n.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions",null,r),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject=function(e,n){var r,a={baseOptions:(r=n.getBaseOptions())&&i.BaseOptions.toObject(e,r),faceDetectorGraphOptions:(r=n.getFaceDetectorGraphOptions())&&s.FaceDetectorGraphOptions.toObject(e,r),faceLandmarksDetectorGraphOptions:(r=n.getFaceLandmarksDetectorGraphOptions())&&l.FaceLandmarksDetectorGraphOptions.toObject(e,r),minTrackingConfidence:t.Message.getFloatingPointFieldWithDefault(n,4,.5),faceGeometryGraphOptions:(r=n.getFaceGeometryGraphOptions())&&u.FaceGeometryGraphOptions.toObject(e,r)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=new s.FaceDetectorGraphOptions,t.readMessage(n,s.FaceDetectorGraphOptions.deserializeBinaryFromReader),e.setFaceDetectorGraphOptions(n);break;case 3:n=new l.FaceLandmarksDetectorGraphOptions,t.readMessage(n,l.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader),e.setFaceLandmarksDetectorGraphOptions(n);break;case 4:n=t.readFloat(),e.setMinTrackingConfidence(n);break;case 5:n=new u.FaceGeometryGraphOptions,t.readMessage(n,u.FaceGeometryGraphOptions.deserializeBinaryFromReader),e.setFaceGeometryGraphOptions(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getBaseOptions())&&n.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=e.getFaceDetectorGraphOptions())&&n.writeMessage(2,r,s.FaceDetectorGraphOptions.serializeBinaryToWriter),null!=(r=e.getFaceLandmarksDetectorGraphOptions())&&n.writeMessage(3,r,l.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter),null!=(r=t.Message.getField(e,4))&&n.writeFloat(4,r),null!=(r=e.getFaceGeometryGraphOptions())&&n.writeMessage(5,r,u.FaceGeometryGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508968150]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceDetectorGraphOptions=function(){return t.Message.getWrapperField(this,s.FaceDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceDetectorGraphOptions=function(){return this.setFaceDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceDetectorGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceLandmarksDetectorGraphOptions=function(){return t.Message.getWrapperField(this,l.FaceLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceLandmarksDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceLandmarksDetectorGraphOptions=function(){return this.setFaceLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceLandmarksDetectorGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceGeometryGraphOptions=function(){return t.Message.getWrapperField(this,u.FaceGeometryGraphOptions,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceGeometryGraphOptions=function(e){return t.Message.setWrapperField(this,5,e)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceGeometryGraphOptions=function(){return this.setFaceGeometryGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceGeometryGraphOptions=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508968150]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarker_graph_options_pb);var classifier_result={};Object.defineProperty(classifier_result,"__esModule",{value:!0}),classifier_result.convertFromClassificationResultProto=classifier_result.convertFromClassifications=void 0;var DEFAULT_INDEX$1=-1,DEFAULT_SCORE=0;function convertFromClassifications(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_INDEX$1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{categories:e.map((function(e){var t,n,r,a;return{index:null!==(t=e.getIndex())&&void 0!==t?t:DEFAULT_INDEX$1,score:null!==(n=e.getScore())&&void 0!==n?n:DEFAULT_SCORE,categoryName:null!==(r=e.getLabel())&&void 0!==r?r:"",displayName:null!==(a=e.getDisplayName())&&void 0!==a?a:""}})),headIndex:t,headName:n}}function convertFromClassificationsProto(e){var t,n;return convertFromClassifications(null!==(n=null===(t=e.getClassificationList())||void 0===t?void 0:t.getClassificationList())&&void 0!==n?n:[],e.getHeadIndex(),e.getHeadName())}function convertFromClassificationResultProto(e){var t={classifications:e.getClassificationsList().map((function(e){return convertFromClassificationsProto(e)}))};return e.hasTimestampMs()&&(t.timestampMs=e.getTimestampMs()),t}classifier_result.convertFromClassifications=convertFromClassifications,classifier_result.convertFromClassificationResultProto=convertFromClassificationResultProto;var face_landmarker_options={};Object.defineProperty(face_landmarker_options,"__esModule",{value:!0});var face_landmarker_result={};Object.defineProperty(face_landmarker_result,"__esModule",{value:!0});var face_landmarks_connections={};Object.defineProperty(face_landmarks_connections,"__esModule",{value:!0}),face_landmarks_connections.FaceLandmarksConnections=void 0;var FaceLandmarksConnections$1=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)((function e(){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,e)}));face_landmarks_connections.FaceLandmarksConnections=FaceLandmarksConnections$1,FaceLandmarksConnections$1.FACE_LANDMARKS_LIPS=[{start:61,end:146},{start:146,end:91},{start:91,end:181},{start:181,end:84},{start:84,end:17},{start:17,end:314},{start:314,end:405},{start:405,end:321},{start:321,end:375},{start:375,end:291},{start:61,end:185},{start:185,end:40},{start:40,end:39},{start:39,end:37},{start:37,end:0},{start:0,end:267},{start:267,end:269},{start:269,end:270},{start:270,end:409},{start:409,end:291},{start:78,end:95},{start:95,end:88},{start:88,end:178},{start:178,end:87},{start:87,end:14},{start:14,end:317},{start:317,end:402},{start:402,end:318},{start:318,end:324},{start:324,end:308},{start:78,end:191},{start:191,end:80},{start:80,end:81},{start:81,end:82},{start:82,end:13},{start:13,end:312},{start:312,end:311},{start:311,end:310},{start:310,end:415},{start:415,end:308}],FaceLandmarksConnections$1.FACE_LANDMARKS_LEFT_EYE=[{start:263,end:249},{start:249,end:390},{start:390,end:373},{start:373,end:374},{start:374,end:380},{start:380,end:381},{start:381,end:382},{start:382,end:362},{start:263,end:466},{start:466,end:388},{start:388,end:387},{start:387,end:386},{start:386,end:385},{start:385,end:384},{start:384,end:398},{start:398,end:362}],FaceLandmarksConnections$1.FACE_LANDMARKS_LEFT_EYEBROW=[{start:276,end:283},{start:283,end:282},{start:282,end:295},{start:295,end:285},{start:300,end:293},{start:293,end:334},{start:334,end:296},{start:296,end:336}],FaceLandmarksConnections$1.FACE_LANDMARKS_LEFT_IRIS=[{start:474,end:475},{start:475,end:476},{start:476,end:477},{start:477,end:474}],FaceLandmarksConnections$1.FACE_LANDMARKS_RIGHT_EYE=[{start:33,end:7},{start:7,end:163},{start:163,end:144},{start:144,end:145},{start:145,end:153},{start:153,end:154},{start:154,end:155},{start:155,end:133},{start:33,end:246},{start:246,end:161},{start:161,end:160},{start:160,end:159},{start:159,end:158},{start:158,end:157},{start:157,end:173},{start:173,end:133}],FaceLandmarksConnections$1.FACE_LANDMARKS_RIGHT_EYEBROW=[{start:46,end:53},{start:53,end:52},{start:52,end:65},{start:65,end:55},{start:70,end:63},{start:63,end:105},{start:105,end:66},{start:66,end:107}],FaceLandmarksConnections$1.FACE_LANDMARKS_RIGHT_IRIS=[{start:469,end:470},{start:470,end:471},{start:471,end:472},{start:472,end:469}],FaceLandmarksConnections$1.FACE_LANDMARKS_FACE_OVAL=[{start:10,end:338},{start:338,end:297},{start:297,end:332},{start:332,end:284},{start:284,end:251},{start:251,end:389},{start:389,end:356},{start:356,end:454},{start:454,end:323},{start:323,end:361},{start:361,end:288},{start:288,end:397},{start:397,end:365},{start:365,end:379},{start:379,end:378},{start:378,end:400},{start:400,end:377},{start:377,end:152},{start:152,end:148},{start:148,end:176},{start:176,end:149},{start:149,end:150},{start:150,end:136},{start:136,end:172},{start:172,end:58},{start:58,end:132},{start:132,end:93},{start:93,end:234},{start:234,end:127},{start:127,end:162},{start:162,end:21},{start:21,end:54},{start:54,end:103},{start:103,end:67},{start:67,end:109},{start:109,end:10}],FaceLandmarksConnections$1.FACE_LANDMARKS_CONTOURS=[].concat((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(FaceLandmarksConnections$1.FACE_LANDMARKS_LIPS),(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(FaceLandmarksConnections$1.FACE_LANDMARKS_LEFT_EYE),(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(FaceLandmarksConnections$1.FACE_LANDMARKS_LEFT_EYEBROW),(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(FaceLandmarksConnections$1.FACE_LANDMARKS_RIGHT_EYE),(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(FaceLandmarksConnections$1.FACE_LANDMARKS_RIGHT_EYEBROW),(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(FaceLandmarksConnections$1.FACE_LANDMARKS_FACE_OVAL)),FaceLandmarksConnections$1.FACE_LANDMARKS_TESSELATION=[{start:127,end:34},{start:34,end:139},{start:139,end:127},{start:11,end:0},{start:0,end:37},{start:37,end:11},{start:232,end:231},{start:231,end:120},{start:120,end:232},{start:72,end:37},{start:37,end:39},{start:39,end:72},{start:128,end:121},{start:121,end:47},{start:47,end:128},{start:232,end:121},{start:121,end:128},{start:128,end:232},{start:104,end:69},{start:69,end:67},{start:67,end:104},{start:175,end:171},{start:171,end:148},{start:148,end:175},{start:118,end:50},{start:50,end:101},{start:101,end:118},{start:73,end:39},{start:39,end:40},{start:40,end:73},{start:9,end:151},{start:151,end:108},{start:108,end:9},{start:48,end:115},{start:115,end:131},{start:131,end:48},{start:194,end:204},{start:204,end:211},{start:211,end:194},{start:74,end:40},{start:40,end:185},{start:185,end:74},{start:80,end:42},{start:42,end:183},{start:183,end:80},{start:40,end:92},{start:92,end:186},{start:186,end:40},{start:230,end:229},{start:229,end:118},{start:118,end:230},{start:202,end:212},{start:212,end:214},{start:214,end:202},{start:83,end:18},{start:18,end:17},{start:17,end:83},{start:76,end:61},{start:61,end:146},{start:146,end:76},{start:160,end:29},{start:29,end:30},{start:30,end:160},{start:56,end:157},{start:157,end:173},{start:173,end:56},{start:106,end:204},{start:204,end:194},{start:194,end:106},{start:135,end:214},{start:214,end:192},{start:192,end:135},{start:203,end:165},{start:165,end:98},{start:98,end:203},{start:21,end:71},{start:71,end:68},{start:68,end:21},{start:51,end:45},{start:45,end:4},{start:4,end:51},{start:144,end:24},{start:24,end:23},{start:23,end:144},{start:77,end:146},{start:146,end:91},{start:91,end:77},{start:205,end:50},{start:50,end:187},{start:187,end:205},{start:201,end:200},{start:200,end:18},{start:18,end:201},{start:91,end:106},{start:106,end:182},{start:182,end:91},{start:90,end:91},{start:91,end:181},{start:181,end:90},{start:85,end:84},{start:84,end:17},{start:17,end:85},{start:206,end:203},{start:203,end:36},{start:36,end:206},{start:148,end:171},{start:171,end:140},{start:140,end:148},{start:92,end:40},{start:40,end:39},{start:39,end:92},{start:193,end:189},{start:189,end:244},{start:244,end:193},{start:159,end:158},{start:158,end:28},{start:28,end:159},{start:247,end:246},{start:246,end:161},{start:161,end:247},{start:236,end:3},{start:3,end:196},{start:196,end:236},{start:54,end:68},{start:68,end:104},{start:104,end:54},{start:193,end:168},{start:168,end:8},{start:8,end:193},{start:117,end:228},{start:228,end:31},{start:31,end:117},{start:189,end:193},{start:193,end:55},{start:55,end:189},{start:98,end:97},{start:97,end:99},{start:99,end:98},{start:126,end:47},{start:47,end:100},{start:100,end:126},{start:166,end:79},{start:79,end:218},{start:218,end:166},{start:155,end:154},{start:154,end:26},{start:26,end:155},{start:209,end:49},{start:49,end:131},{start:131,end:209},{start:135,end:136},{start:136,end:150},{start:150,end:135},{start:47,end:126},{start:126,end:217},{start:217,end:47},{start:223,end:52},{start:52,end:53},{start:53,end:223},{start:45,end:51},{start:51,end:134},{start:134,end:45},{start:211,end:170},{start:170,end:140},{start:140,end:211},{start:67,end:69},{start:69,end:108},{start:108,end:67},{start:43,end:106},{start:106,end:91},{start:91,end:43},{start:230,end:119},{start:119,end:120},{start:120,end:230},{start:226,end:130},{start:130,end:247},{start:247,end:226},{start:63,end:53},{start:53,end:52},{start:52,end:63},{start:238,end:20},{start:20,end:242},{start:242,end:238},{start:46,end:70},{start:70,end:156},{start:156,end:46},{start:78,end:62},{start:62,end:96},{start:96,end:78},{start:46,end:53},{start:53,end:63},{start:63,end:46},{start:143,end:34},{start:34,end:227},{start:227,end:143},{start:123,end:117},{start:117,end:111},{start:111,end:123},{start:44,end:125},{start:125,end:19},{start:19,end:44},{start:236,end:134},{start:134,end:51},{start:51,end:236},{start:216,end:206},{start:206,end:205},{start:205,end:216},{start:154,end:153},{start:153,end:22},{start:22,end:154},{start:39,end:37},{start:37,end:167},{start:167,end:39},{start:200,end:201},{start:201,end:208},{start:208,end:200},{start:36,end:142},{start:142,end:100},{start:100,end:36},{start:57,end:212},{start:212,end:202},{start:202,end:57},{start:20,end:60},{start:60,end:99},{start:99,end:20},{start:28,end:158},{start:158,end:157},{start:157,end:28},{start:35,end:226},{start:226,end:113},{start:113,end:35},{start:160,end:159},{start:159,end:27},{start:27,end:160},{start:204,end:202},{start:202,end:210},{start:210,end:204},{start:113,end:225},{start:225,end:46},{start:46,end:113},{start:43,end:202},{start:202,end:204},{start:204,end:43},{start:62,end:76},{start:76,end:77},{start:77,end:62},{start:137,end:123},{start:123,end:116},{start:116,end:137},{start:41,end:38},{start:38,end:72},{start:72,end:41},{start:203,end:129},{start:129,end:142},{start:142,end:203},{start:64,end:98},{start:98,end:240},{start:240,end:64},{start:49,end:102},{start:102,end:64},{start:64,end:49},{start:41,end:73},{start:73,end:74},{start:74,end:41},{start:212,end:216},{start:216,end:207},{start:207,end:212},{start:42,end:74},{start:74,end:184},{start:184,end:42},{start:169,end:170},{start:170,end:211},{start:211,end:169},{start:170,end:149},{start:149,end:176},{start:176,end:170},{start:105,end:66},{start:66,end:69},{start:69,end:105},{start:122,end:6},{start:6,end:168},{start:168,end:122},{start:123,end:147},{start:147,end:187},{start:187,end:123},{start:96,end:77},{start:77,end:90},{start:90,end:96},{start:65,end:55},{start:55,end:107},{start:107,end:65},{start:89,end:90},{start:90,end:180},{start:180,end:89},{start:101,end:100},{start:100,end:120},{start:120,end:101},{start:63,end:105},{start:105,end:104},{start:104,end:63},{start:93,end:137},{start:137,end:227},{start:227,end:93},{start:15,end:86},{start:86,end:85},{start:85,end:15},{start:129,end:102},{start:102,end:49},{start:49,end:129},{start:14,end:87},{start:87,end:86},{start:86,end:14},{start:55,end:8},{start:8,end:9},{start:9,end:55},{start:100,end:47},{start:47,end:121},{start:121,end:100},{start:145,end:23},{start:23,end:22},{start:22,end:145},{start:88,end:89},{start:89,end:179},{start:179,end:88},{start:6,end:122},{start:122,end:196},{start:196,end:6},{start:88,end:95},{start:95,end:96},{start:96,end:88},{start:138,end:172},{start:172,end:136},{start:136,end:138},{start:215,end:58},{start:58,end:172},{start:172,end:215},{start:115,end:48},{start:48,end:219},{start:219,end:115},{start:42,end:80},{start:80,end:81},{start:81,end:42},{start:195,end:3},{start:3,end:51},{start:51,end:195},{start:43,end:146},{start:146,end:61},{start:61,end:43},{start:171,end:175},{start:175,end:199},{start:199,end:171},{start:81,end:82},{start:82,end:38},{start:38,end:81},{start:53,end:46},{start:46,end:225},{start:225,end:53},{start:144,end:163},{start:163,end:110},{start:110,end:144},{start:52,end:65},{start:65,end:66},{start:66,end:52},{start:229,end:228},{start:228,end:117},{start:117,end:229},{start:34,end:127},{start:127,end:234},{start:234,end:34},{start:107,end:108},{start:108,end:69},{start:69,end:107},{start:109,end:108},{start:108,end:151},{start:151,end:109},{start:48,end:64},{start:64,end:235},{start:235,end:48},{start:62,end:78},{start:78,end:191},{start:191,end:62},{start:129,end:209},{start:209,end:126},{start:126,end:129},{start:111,end:35},{start:35,end:143},{start:143,end:111},{start:117,end:123},{start:123,end:50},{start:50,end:117},{start:222,end:65},{start:65,end:52},{start:52,end:222},{start:19,end:125},{start:125,end:141},{start:141,end:19},{start:221,end:55},{start:55,end:65},{start:65,end:221},{start:3,end:195},{start:195,end:197},{start:197,end:3},{start:25,end:7},{start:7,end:33},{start:33,end:25},{start:220,end:237},{start:237,end:44},{start:44,end:220},{start:70,end:71},{start:71,end:139},{start:139,end:70},{start:122,end:193},{start:193,end:245},{start:245,end:122},{start:247,end:130},{start:130,end:33},{start:33,end:247},{start:71,end:21},{start:21,end:162},{start:162,end:71},{start:170,end:169},{start:169,end:150},{start:150,end:170},{start:188,end:174},{start:174,end:196},{start:196,end:188},{start:216,end:186},{start:186,end:92},{start:92,end:216},{start:2,end:97},{start:97,end:167},{start:167,end:2},{start:141,end:125},{start:125,end:241},{start:241,end:141},{start:164,end:167},{start:167,end:37},{start:37,end:164},{start:72,end:38},{start:38,end:12},{start:12,end:72},{start:38,end:82},{start:82,end:13},{start:13,end:38},{start:63,end:68},{start:68,end:71},{start:71,end:63},{start:226,end:35},{start:35,end:111},{start:111,end:226},{start:101,end:50},{start:50,end:205},{start:205,end:101},{start:206,end:92},{start:92,end:165},{start:165,end:206},{start:209,end:198},{start:198,end:217},{start:217,end:209},{start:165,end:167},{start:167,end:97},{start:97,end:165},{start:220,end:115},{start:115,end:218},{start:218,end:220},{start:133,end:112},{start:112,end:243},{start:243,end:133},{start:239,end:238},{start:238,end:241},{start:241,end:239},{start:214,end:135},{start:135,end:169},{start:169,end:214},{start:190,end:173},{start:173,end:133},{start:133,end:190},{start:171,end:208},{start:208,end:32},{start:32,end:171},{start:125,end:44},{start:44,end:237},{start:237,end:125},{start:86,end:87},{start:87,end:178},{start:178,end:86},{start:85,end:86},{start:86,end:179},{start:179,end:85},{start:84,end:85},{start:85,end:180},{start:180,end:84},{start:83,end:84},{start:84,end:181},{start:181,end:83},{start:201,end:83},{start:83,end:182},{start:182,end:201},{start:137,end:93},{start:93,end:132},{start:132,end:137},{start:76,end:62},{start:62,end:183},{start:183,end:76},{start:61,end:76},{start:76,end:184},{start:184,end:61},{start:57,end:61},{start:61,end:185},{start:185,end:57},{start:212,end:57},{start:57,end:186},{start:186,end:212},{start:214,end:207},{start:207,end:187},{start:187,end:214},{start:34,end:143},{start:143,end:156},{start:156,end:34},{start:79,end:239},{start:239,end:237},{start:237,end:79},{start:123,end:137},{start:137,end:177},{start:177,end:123},{start:44,end:1},{start:1,end:4},{start:4,end:44},{start:201,end:194},{start:194,end:32},{start:32,end:201},{start:64,end:102},{start:102,end:129},{start:129,end:64},{start:213,end:215},{start:215,end:138},{start:138,end:213},{start:59,end:166},{start:166,end:219},{start:219,end:59},{start:242,end:99},{start:99,end:97},{start:97,end:242},{start:2,end:94},{start:94,end:141},{start:141,end:2},{start:75,end:59},{start:59,end:235},{start:235,end:75},{start:24,end:110},{start:110,end:228},{start:228,end:24},{start:25,end:130},{start:130,end:226},{start:226,end:25},{start:23,end:24},{start:24,end:229},{start:229,end:23},{start:22,end:23},{start:23,end:230},{start:230,end:22},{start:26,end:22},{start:22,end:231},{start:231,end:26},{start:112,end:26},{start:26,end:232},{start:232,end:112},{start:189,end:190},{start:190,end:243},{start:243,end:189},{start:221,end:56},{start:56,end:190},{start:190,end:221},{start:28,end:56},{start:56,end:221},{start:221,end:28},{start:27,end:28},{start:28,end:222},{start:222,end:27},{start:29,end:27},{start:27,end:223},{start:223,end:29},{start:30,end:29},{start:29,end:224},{start:224,end:30},{start:247,end:30},{start:30,end:225},{start:225,end:247},{start:238,end:79},{start:79,end:20},{start:20,end:238},{start:166,end:59},{start:59,end:75},{start:75,end:166},{start:60,end:75},{start:75,end:240},{start:240,end:60},{start:147,end:177},{start:177,end:215},{start:215,end:147},{start:20,end:79},{start:79,end:166},{start:166,end:20},{start:187,end:147},{start:147,end:213},{start:213,end:187},{start:112,end:233},{start:233,end:244},{start:244,end:112},{start:233,end:128},{start:128,end:245},{start:245,end:233},{start:128,end:114},{start:114,end:188},{start:188,end:128},{start:114,end:217},{start:217,end:174},{start:174,end:114},{start:131,end:115},{start:115,end:220},{start:220,end:131},{start:217,end:198},{start:198,end:236},{start:236,end:217},{start:198,end:131},{start:131,end:134},{start:134,end:198},{start:177,end:132},{start:132,end:58},{start:58,end:177},{start:143,end:35},{start:35,end:124},{start:124,end:143},{start:110,end:163},{start:163,end:7},{start:7,end:110},{start:228,end:110},{start:110,end:25},{start:25,end:228},{start:356,end:389},{start:389,end:368},{start:368,end:356},{start:11,end:302},{start:302,end:267},{start:267,end:11},{start:452,end:350},{start:350,end:349},{start:349,end:452},{start:302,end:303},{start:303,end:269},{start:269,end:302},{start:357,end:343},{start:343,end:277},{start:277,end:357},{start:452,end:453},{start:453,end:357},{start:357,end:452},{start:333,end:332},{start:332,end:297},{start:297,end:333},{start:175,end:152},{start:152,end:377},{start:377,end:175},{start:347,end:348},{start:348,end:330},{start:330,end:347},{start:303,end:304},{start:304,end:270},{start:270,end:303},{start:9,end:336},{start:336,end:337},{start:337,end:9},{start:278,end:279},{start:279,end:360},{start:360,end:278},{start:418,end:262},{start:262,end:431},{start:431,end:418},{start:304,end:408},{start:408,end:409},{start:409,end:304},{start:310,end:415},{start:415,end:407},{start:407,end:310},{start:270,end:409},{start:409,end:410},{start:410,end:270},{start:450,end:348},{start:348,end:347},{start:347,end:450},{start:422,end:430},{start:430,end:434},{start:434,end:422},{start:313,end:314},{start:314,end:17},{start:17,end:313},{start:306,end:307},{start:307,end:375},{start:375,end:306},{start:387,end:388},{start:388,end:260},{start:260,end:387},{start:286,end:414},{start:414,end:398},{start:398,end:286},{start:335,end:406},{start:406,end:418},{start:418,end:335},{start:364,end:367},{start:367,end:416},{start:416,end:364},{start:423,end:358},{start:358,end:327},{start:327,end:423},{start:251,end:284},{start:284,end:298},{start:298,end:251},{start:281,end:5},{start:5,end:4},{start:4,end:281},{start:373,end:374},{start:374,end:253},{start:253,end:373},{start:307,end:320},{start:320,end:321},{start:321,end:307},{start:425,end:427},{start:427,end:411},{start:411,end:425},{start:421,end:313},{start:313,end:18},{start:18,end:421},{start:321,end:405},{start:405,end:406},{start:406,end:321},{start:320,end:404},{start:404,end:405},{start:405,end:320},{start:315,end:16},{start:16,end:17},{start:17,end:315},{start:426,end:425},{start:425,end:266},{start:266,end:426},{start:377,end:400},{start:400,end:369},{start:369,end:377},{start:322,end:391},{start:391,end:269},{start:269,end:322},{start:417,end:465},{start:465,end:464},{start:464,end:417},{start:386,end:257},{start:257,end:258},{start:258,end:386},{start:466,end:260},{start:260,end:388},{start:388,end:466},{start:456,end:399},{start:399,end:419},{start:419,end:456},{start:284,end:332},{start:332,end:333},{start:333,end:284},{start:417,end:285},{start:285,end:8},{start:8,end:417},{start:346,end:340},{start:340,end:261},{start:261,end:346},{start:413,end:441},{start:441,end:285},{start:285,end:413},{start:327,end:460},{start:460,end:328},{start:328,end:327},{start:355,end:371},{start:371,end:329},{start:329,end:355},{start:392,end:439},{start:439,end:438},{start:438,end:392},{start:382,end:341},{start:341,end:256},{start:256,end:382},{start:429,end:420},{start:420,end:360},{start:360,end:429},{start:364,end:394},{start:394,end:379},{start:379,end:364},{start:277,end:343},{start:343,end:437},{start:437,end:277},{start:443,end:444},{start:444,end:283},{start:283,end:443},{start:275,end:440},{start:440,end:363},{start:363,end:275},{start:431,end:262},{start:262,end:369},{start:369,end:431},{start:297,end:338},{start:338,end:337},{start:337,end:297},{start:273,end:375},{start:375,end:321},{start:321,end:273},{start:450,end:451},{start:451,end:349},{start:349,end:450},{start:446,end:342},{start:342,end:467},{start:467,end:446},{start:293,end:334},{start:334,end:282},{start:282,end:293},{start:458,end:461},{start:461,end:462},{start:462,end:458},{start:276,end:353},{start:353,end:383},{start:383,end:276},{start:308,end:324},{start:324,end:325},{start:325,end:308},{start:276,end:300},{start:300,end:293},{start:293,end:276},{start:372,end:345},{start:345,end:447},{start:447,end:372},{start:352,end:345},{start:345,end:340},{start:340,end:352},{start:274,end:1},{start:1,end:19},{start:19,end:274},{start:456,end:248},{start:248,end:281},{start:281,end:456},{start:436,end:427},{start:427,end:425},{start:425,end:436},{start:381,end:256},{start:256,end:252},{start:252,end:381},{start:269,end:391},{start:391,end:393},{start:393,end:269},{start:200,end:199},{start:199,end:428},{start:428,end:200},{start:266,end:330},{start:330,end:329},{start:329,end:266},{start:287,end:273},{start:273,end:422},{start:422,end:287},{start:250,end:462},{start:462,end:328},{start:328,end:250},{start:258,end:286},{start:286,end:384},{start:384,end:258},{start:265,end:353},{start:353,end:342},{start:342,end:265},{start:387,end:259},{start:259,end:257},{start:257,end:387},{start:424,end:431},{start:431,end:430},{start:430,end:424},{start:342,end:353},{start:353,end:276},{start:276,end:342},{start:273,end:335},{start:335,end:424},{start:424,end:273},{start:292,end:325},{start:325,end:307},{start:307,end:292},{start:366,end:447},{start:447,end:345},{start:345,end:366},{start:271,end:303},{start:303,end:302},{start:302,end:271},{start:423,end:266},{start:266,end:371},{start:371,end:423},{start:294,end:455},{start:455,end:460},{start:460,end:294},{start:279,end:278},{start:278,end:294},{start:294,end:279},{start:271,end:272},{start:272,end:304},{start:304,end:271},{start:432,end:434},{start:434,end:427},{start:427,end:432},{start:272,end:407},{start:407,end:408},{start:408,end:272},{start:394,end:430},{start:430,end:431},{start:431,end:394},{start:395,end:369},{start:369,end:400},{start:400,end:395},{start:334,end:333},{start:333,end:299},{start:299,end:334},{start:351,end:417},{start:417,end:168},{start:168,end:351},{start:352,end:280},{start:280,end:411},{start:411,end:352},{start:325,end:319},{start:319,end:320},{start:320,end:325},{start:295,end:296},{start:296,end:336},{start:336,end:295},{start:319,end:403},{start:403,end:404},{start:404,end:319},{start:330,end:348},{start:348,end:349},{start:349,end:330},{start:293,end:298},{start:298,end:333},{start:333,end:293},{start:323,end:454},{start:454,end:447},{start:447,end:323},{start:15,end:16},{start:16,end:315},{start:315,end:15},{start:358,end:429},{start:429,end:279},{start:279,end:358},{start:14,end:15},{start:15,end:316},{start:316,end:14},{start:285,end:336},{start:336,end:9},{start:9,end:285},{start:329,end:349},{start:349,end:350},{start:350,end:329},{start:374,end:380},{start:380,end:252},{start:252,end:374},{start:318,end:402},{start:402,end:403},{start:403,end:318},{start:6,end:197},{start:197,end:419},{start:419,end:6},{start:318,end:319},{start:319,end:325},{start:325,end:318},{start:367,end:364},{start:364,end:365},{start:365,end:367},{start:435,end:367},{start:367,end:397},{start:397,end:435},{start:344,end:438},{start:438,end:439},{start:439,end:344},{start:272,end:271},{start:271,end:311},{start:311,end:272},{start:195,end:5},{start:5,end:281},{start:281,end:195},{start:273,end:287},{start:287,end:291},{start:291,end:273},{start:396,end:428},{start:428,end:199},{start:199,end:396},{start:311,end:271},{start:271,end:268},{start:268,end:311},{start:283,end:444},{start:444,end:445},{start:445,end:283},{start:373,end:254},{start:254,end:339},{start:339,end:373},{start:282,end:334},{start:334,end:296},{start:296,end:282},{start:449,end:347},{start:347,end:346},{start:346,end:449},{start:264,end:447},{start:447,end:454},{start:454,end:264},{start:336,end:296},{start:296,end:299},{start:299,end:336},{start:338,end:10},{start:10,end:151},{start:151,end:338},{start:278,end:439},{start:439,end:455},{start:455,end:278},{start:292,end:407},{start:407,end:415},{start:415,end:292},{start:358,end:371},{start:371,end:355},{start:355,end:358},{start:340,end:345},{start:345,end:372},{start:372,end:340},{start:346,end:347},{start:347,end:280},{start:280,end:346},{start:442,end:443},{start:443,end:282},{start:282,end:442},{start:19,end:94},{start:94,end:370},{start:370,end:19},{start:441,end:442},{start:442,end:295},{start:295,end:441},{start:248,end:419},{start:419,end:197},{start:197,end:248},{start:263,end:255},{start:255,end:359},{start:359,end:263},{start:440,end:275},{start:275,end:274},{start:274,end:440},{start:300,end:383},{start:383,end:368},{start:368,end:300},{start:351,end:412},{start:412,end:465},{start:465,end:351},{start:263,end:467},{start:467,end:466},{start:466,end:263},{start:301,end:368},{start:368,end:389},{start:389,end:301},{start:395,end:378},{start:378,end:379},{start:379,end:395},{start:412,end:351},{start:351,end:419},{start:419,end:412},{start:436,end:426},{start:426,end:322},{start:322,end:436},{start:2,end:164},{start:164,end:393},{start:393,end:2},{start:370,end:462},{start:462,end:461},{start:461,end:370},{start:164,end:0},{start:0,end:267},{start:267,end:164},{start:302,end:11},{start:11,end:12},{start:12,end:302},{start:268,end:12},{start:12,end:13},{start:13,end:268},{start:293,end:300},{start:300,end:301},{start:301,end:293},{start:446,end:261},{start:261,end:340},{start:340,end:446},{start:330,end:266},{start:266,end:425},{start:425,end:330},{start:426,end:423},{start:423,end:391},{start:391,end:426},{start:429,end:355},{start:355,end:437},{start:437,end:429},{start:391,end:327},{start:327,end:326},{start:326,end:391},{start:440,end:457},{start:457,end:438},{start:438,end:440},{start:341,end:382},{start:382,end:362},{start:362,end:341},{start:459,end:457},{start:457,end:461},{start:461,end:459},{start:434,end:430},{start:430,end:394},{start:394,end:434},{start:414,end:463},{start:463,end:362},{start:362,end:414},{start:396,end:369},{start:369,end:262},{start:262,end:396},{start:354,end:461},{start:461,end:457},{start:457,end:354},{start:316,end:403},{start:403,end:402},{start:402,end:316},{start:315,end:404},{start:404,end:403},{start:403,end:315},{start:314,end:405},{start:405,end:404},{start:404,end:314},{start:313,end:406},{start:406,end:405},{start:405,end:313},{start:421,end:418},{start:418,end:406},{start:406,end:421},{start:366,end:401},{start:401,end:361},{start:361,end:366},{start:306,end:408},{start:408,end:407},{start:407,end:306},{start:291,end:409},{start:409,end:408},{start:408,end:291},{start:287,end:410},{start:410,end:409},{start:409,end:287},{start:432,end:436},{start:436,end:410},{start:410,end:432},{start:434,end:416},{start:416,end:411},{start:411,end:434},{start:264,end:368},{start:368,end:383},{start:383,end:264},{start:309,end:438},{start:438,end:457},{start:457,end:309},{start:352,end:376},{start:376,end:401},{start:401,end:352},{start:274,end:275},{start:275,end:4},{start:4,end:274},{start:421,end:428},{start:428,end:262},{start:262,end:421},{start:294,end:327},{start:327,end:358},{start:358,end:294},{start:433,end:416},{start:416,end:367},{start:367,end:433},{start:289,end:455},{start:455,end:439},{start:439,end:289},{start:462,end:370},{start:370,end:326},{start:326,end:462},{start:2,end:326},{start:326,end:370},{start:370,end:2},{start:305,end:460},{start:460,end:455},{start:455,end:305},{start:254,end:449},{start:449,end:448},{start:448,end:254},{start:255,end:261},{start:261,end:446},{start:446,end:255},{start:253,end:450},{start:450,end:449},{start:449,end:253},{start:252,end:451},{start:451,end:450},{start:450,end:252},{start:256,end:452},{start:452,end:451},{start:451,end:256},{start:341,end:453},{start:453,end:452},{start:452,end:341},{start:413,end:464},{start:464,end:463},{start:463,end:413},{start:441,end:413},{start:413,end:414},{start:414,end:441},{start:258,end:442},{start:442,end:441},{start:441,end:258},{start:257,end:443},{start:443,end:442},{start:442,end:257},{start:259,end:444},{start:444,end:443},{start:443,end:259},{start:260,end:445},{start:445,end:444},{start:444,end:260},{start:467,end:342},{start:342,end:445},{start:445,end:467},{start:459,end:458},{start:458,end:250},{start:250,end:459},{start:289,end:392},{start:392,end:290},{start:290,end:289},{start:290,end:328},{start:328,end:460},{start:460,end:290},{start:376,end:433},{start:433,end:435},{start:435,end:376},{start:250,end:290},{start:290,end:392},{start:392,end:250},{start:411,end:416},{start:416,end:433},{start:433,end:411},{start:341,end:463},{start:463,end:464},{start:464,end:341},{start:453,end:464},{start:464,end:465},{start:465,end:453},{start:357,end:465},{start:465,end:412},{start:412,end:357},{start:343,end:412},{start:412,end:399},{start:399,end:343},{start:360,end:363},{start:363,end:440},{start:440,end:360},{start:437,end:399},{start:399,end:456},{start:456,end:437},{start:420,end:456},{start:456,end:363},{start:363,end:420},{start:401,end:435},{start:435,end:288},{start:288,end:401},{start:372,end:383},{start:383,end:353},{start:353,end:372},{start:339,end:255},{start:255,end:249},{start:249,end:339},{start:448,end:261},{start:261,end:255},{start:255,end:448},{start:133,end:243},{start:243,end:190},{start:190,end:133},{start:133,end:155},{start:155,end:112},{start:112,end:133},{start:33,end:246},{start:246,end:247},{start:247,end:33},{start:33,end:130},{start:130,end:25},{start:25,end:33},{start:398,end:384},{start:384,end:286},{start:286,end:398},{start:362,end:398},{start:398,end:414},{start:414,end:362},{start:362,end:463},{start:463,end:341},{start:341,end:362},{start:263,end:359},{start:359,end:467},{start:467,end:263},{start:263,end:249},{start:249,end:255},{start:255,end:263},{start:466,end:467},{start:467,end:260},{start:260,end:466},{start:75,end:60},{start:60,end:166},{start:166,end:75},{start:238,end:239},{start:239,end:79},{start:79,end:238},{start:162,end:127},{start:127,end:139},{start:139,end:162},{start:72,end:11},{start:11,end:37},{start:37,end:72},{start:121,end:232},{start:232,end:120},{start:120,end:121},{start:73,end:72},{start:72,end:39},{start:39,end:73},{start:114,end:128},{start:128,end:47},{start:47,end:114},{start:233,end:232},{start:232,end:128},{start:128,end:233},{start:103,end:104},{start:104,end:67},{start:67,end:103},{start:152,end:175},{start:175,end:148},{start:148,end:152},{start:119,end:118},{start:118,end:101},{start:101,end:119},{start:74,end:73},{start:73,end:40},{start:40,end:74},{start:107,end:9},{start:9,end:108},{start:108,end:107},{start:49,end:48},{start:48,end:131},{start:131,end:49},{start:32,end:194},{start:194,end:211},{start:211,end:32},{start:184,end:74},{start:74,end:185},{start:185,end:184},{start:191,end:80},{start:80,end:183},{start:183,end:191},{start:185,end:40},{start:40,end:186},{start:186,end:185},{start:119,end:230},{start:230,end:118},{start:118,end:119},{start:210,end:202},{start:202,end:214},{start:214,end:210},{start:84,end:83},{start:83,end:17},{start:17,end:84},{start:77,end:76},{start:76,end:146},{start:146,end:77},{start:161,end:160},{start:160,end:30},{start:30,end:161},{start:190,end:56},{start:56,end:173},{start:173,end:190},{start:182,end:106},{start:106,end:194},{start:194,end:182},{start:138,end:135},{start:135,end:192},{start:192,end:138},{start:129,end:203},{start:203,end:98},{start:98,end:129},{start:54,end:21},{start:21,end:68},{start:68,end:54},{start:5,end:51},{start:51,end:4},{start:4,end:5},{start:145,end:144},{start:144,end:23},{start:23,end:145},{start:90,end:77},{start:77,end:91},{start:91,end:90},{start:207,end:205},{start:205,end:187},{start:187,end:207},{start:83,end:201},{start:201,end:18},{start:18,end:83},{start:181,end:91},{start:91,end:182},{start:182,end:181},{start:180,end:90},{start:90,end:181},{start:181,end:180},{start:16,end:85},{start:85,end:17},{start:17,end:16},{start:205,end:206},{start:206,end:36},{start:36,end:205},{start:176,end:148},{start:148,end:140},{start:140,end:176},{start:165,end:92},{start:92,end:39},{start:39,end:165},{start:245,end:193},{start:193,end:244},{start:244,end:245},{start:27,end:159},{start:159,end:28},{start:28,end:27},{start:30,end:247},{start:247,end:161},{start:161,end:30},{start:174,end:236},{start:236,end:196},{start:196,end:174},{start:103,end:54},{start:54,end:104},{start:104,end:103},{start:55,end:193},{start:193,end:8},{start:8,end:55},{start:111,end:117},{start:117,end:31},{start:31,end:111},{start:221,end:189},{start:189,end:55},{start:55,end:221},{start:240,end:98},{start:98,end:99},{start:99,end:240},{start:142,end:126},{start:126,end:100},{start:100,end:142},{start:219,end:166},{start:166,end:218},{start:218,end:219},{start:112,end:155},{start:155,end:26},{start:26,end:112},{start:198,end:209},{start:209,end:131},{start:131,end:198},{start:169,end:135},{start:135,end:150},{start:150,end:169},{start:114,end:47},{start:47,end:217},{start:217,end:114},{start:224,end:223},{start:223,end:53},{start:53,end:224},{start:220,end:45},{start:45,end:134},{start:134,end:220},{start:32,end:211},{start:211,end:140},{start:140,end:32},{start:109,end:67},{start:67,end:108},{start:108,end:109},{start:146,end:43},{start:43,end:91},{start:91,end:146},{start:231,end:230},{start:230,end:120},{start:120,end:231},{start:113,end:226},{start:226,end:247},{start:247,end:113},{start:105,end:63},{start:63,end:52},{start:52,end:105},{start:241,end:238},{start:238,end:242},{start:242,end:241},{start:124,end:46},{start:46,end:156},{start:156,end:124},{start:95,end:78},{start:78,end:96},{start:96,end:95},{start:70,end:46},{start:46,end:63},{start:63,end:70},{start:116,end:143},{start:143,end:227},{start:227,end:116},{start:116,end:123},{start:123,end:111},{start:111,end:116},{start:1,end:44},{start:44,end:19},{start:19,end:1},{start:3,end:236},{start:236,end:51},{start:51,end:3},{start:207,end:216},{start:216,end:205},{start:205,end:207},{start:26,end:154},{start:154,end:22},{start:22,end:26},{start:165,end:39},{start:39,end:167},{start:167,end:165},{start:199,end:200},{start:200,end:208},{start:208,end:199},{start:101,end:36},{start:36,end:100},{start:100,end:101},{start:43,end:57},{start:57,end:202},{start:202,end:43},{start:242,end:20},{start:20,end:99},{start:99,end:242},{start:56,end:28},{start:28,end:157},{start:157,end:56},{start:124,end:35},{start:35,end:113},{start:113,end:124},{start:29,end:160},{start:160,end:27},{start:27,end:29},{start:211,end:204},{start:204,end:210},{start:210,end:211},{start:124,end:113},{start:113,end:46},{start:46,end:124},{start:106,end:43},{start:43,end:204},{start:204,end:106},{start:96,end:62},{start:62,end:77},{start:77,end:96},{start:227,end:137},{start:137,end:116},{start:116,end:227},{start:73,end:41},{start:41,end:72},{start:72,end:73},{start:36,end:203},{start:203,end:142},{start:142,end:36},{start:235,end:64},{start:64,end:240},{start:240,end:235},{start:48,end:49},{start:49,end:64},{start:64,end:48},{start:42,end:41},{start:41,end:74},{start:74,end:42},{start:214,end:212},{start:212,end:207},{start:207,end:214},{start:183,end:42},{start:42,end:184},{start:184,end:183},{start:210,end:169},{start:169,end:211},{start:211,end:210},{start:140,end:170},{start:170,end:176},{start:176,end:140},{start:104,end:105},{start:105,end:69},{start:69,end:104},{start:193,end:122},{start:122,end:168},{start:168,end:193},{start:50,end:123},{start:123,end:187},{start:187,end:50},{start:89,end:96},{start:96,end:90},{start:90,end:89},{start:66,end:65},{start:65,end:107},{start:107,end:66},{start:179,end:89},{start:89,end:180},{start:180,end:179},{start:119,end:101},{start:101,end:120},{start:120,end:119},{start:68,end:63},{start:63,end:104},{start:104,end:68},{start:234,end:93},{start:93,end:227},{start:227,end:234},{start:16,end:15},{start:15,end:85},{start:85,end:16},{start:209,end:129},{start:129,end:49},{start:49,end:209},{start:15,end:14},{start:14,end:86},{start:86,end:15},{start:107,end:55},{start:55,end:9},{start:9,end:107},{start:120,end:100},{start:100,end:121},{start:121,end:120},{start:153,end:145},{start:145,end:22},{start:22,end:153},{start:178,end:88},{start:88,end:179},{start:179,end:178},{start:197,end:6},{start:6,end:196},{start:196,end:197},{start:89,end:88},{start:88,end:96},{start:96,end:89},{start:135,end:138},{start:138,end:136},{start:136,end:135},{start:138,end:215},{start:215,end:172},{start:172,end:138},{start:218,end:115},{start:115,end:219},{start:219,end:218},{start:41,end:42},{start:42,end:81},{start:81,end:41},{start:5,end:195},{start:195,end:51},{start:51,end:5},{start:57,end:43},{start:43,end:61},{start:61,end:57},{start:208,end:171},{start:171,end:199},{start:199,end:208},{start:41,end:81},{start:81,end:38},{start:38,end:41},{start:224,end:53},{start:53,end:225},{start:225,end:224},{start:24,end:144},{start:144,end:110},{start:110,end:24},{start:105,end:52},{start:52,end:66},{start:66,end:105},{start:118,end:229},{start:229,end:117},{start:117,end:118},{start:227,end:34},{start:34,end:234},{start:234,end:227},{start:66,end:107},{start:107,end:69},{start:69,end:66},{start:10,end:109},{start:109,end:151},{start:151,end:10},{start:219,end:48},{start:48,end:235},{start:235,end:219},{start:183,end:62},{start:62,end:191},{start:191,end:183},{start:142,end:129},{start:129,end:126},{start:126,end:142},{start:116,end:111},{start:111,end:143},{start:143,end:116},{start:118,end:117},{start:117,end:50},{start:50,end:118},{start:223,end:222},{start:222,end:52},{start:52,end:223},{start:94,end:19},{start:19,end:141},{start:141,end:94},{start:222,end:221},{start:221,end:65},{start:65,end:222},{start:196,end:3},{start:3,end:197},{start:197,end:196},{start:45,end:220},{start:220,end:44},{start:44,end:45},{start:156,end:70},{start:70,end:139},{start:139,end:156},{start:188,end:122},{start:122,end:245},{start:245,end:188},{start:139,end:71},{start:71,end:162},{start:162,end:139},{start:149,end:170},{start:170,end:150},{start:150,end:149},{start:122,end:188},{start:188,end:196},{start:196,end:122},{start:206,end:216},{start:216,end:92},{start:92,end:206},{start:164,end:2},{start:2,end:167},{start:167,end:164},{start:242,end:141},{start:141,end:241},{start:241,end:242},{start:0,end:164},{start:164,end:37},{start:37,end:0},{start:11,end:72},{start:72,end:12},{start:12,end:11},{start:12,end:38},{start:38,end:13},{start:13,end:12},{start:70,end:63},{start:63,end:71},{start:71,end:70},{start:31,end:226},{start:226,end:111},{start:111,end:31},{start:36,end:101},{start:101,end:205},{start:205,end:36},{start:203,end:206},{start:206,end:165},{start:165,end:203},{start:126,end:209},{start:209,end:217},{start:217,end:126},{start:98,end:165},{start:165,end:97},{start:97,end:98},{start:237,end:220},{start:220,end:218},{start:218,end:237},{start:237,end:239},{start:239,end:241},{start:241,end:237},{start:210,end:214},{start:214,end:169},{start:169,end:210},{start:140,end:171},{start:171,end:32},{start:32,end:140},{start:241,end:125},{start:125,end:237},{start:237,end:241},{start:179,end:86},{start:86,end:178},{start:178,end:179},{start:180,end:85},{start:85,end:179},{start:179,end:180},{start:181,end:84},{start:84,end:180},{start:180,end:181},{start:182,end:83},{start:83,end:181},{start:181,end:182},{start:194,end:201},{start:201,end:182},{start:182,end:194},{start:177,end:137},{start:137,end:132},{start:132,end:177},{start:184,end:76},{start:76,end:183},{start:183,end:184},{start:185,end:61},{start:61,end:184},{start:184,end:185},{start:186,end:57},{start:57,end:185},{start:185,end:186},{start:216,end:212},{start:212,end:186},{start:186,end:216},{start:192,end:214},{start:214,end:187},{start:187,end:192},{start:139,end:34},{start:34,end:156},{start:156,end:139},{start:218,end:79},{start:79,end:237},{start:237,end:218},{start:147,end:123},{start:123,end:177},{start:177,end:147},{start:45,end:44},{start:44,end:4},{start:4,end:45},{start:208,end:201},{start:201,end:32},{start:32,end:208},{start:98,end:64},{start:64,end:129},{start:129,end:98},{start:192,end:213},{start:213,end:138},{start:138,end:192},{start:235,end:59},{start:59,end:219},{start:219,end:235},{start:141,end:242},{start:242,end:97},{start:97,end:141},{start:97,end:2},{start:2,end:141},{start:141,end:97},{start:240,end:75},{start:75,end:235},{start:235,end:240},{start:229,end:24},{start:24,end:228},{start:228,end:229},{start:31,end:25},{start:25,end:226},{start:226,end:31},{start:230,end:23},{start:23,end:229},{start:229,end:230},{start:231,end:22},{start:22,end:230},{start:230,end:231},{start:232,end:26},{start:26,end:231},{start:231,end:232},{start:233,end:112},{start:112,end:232},{start:232,end:233},{start:244,end:189},{start:189,end:243},{start:243,end:244},{start:189,end:221},{start:221,end:190},{start:190,end:189},{start:222,end:28},{start:28,end:221},{start:221,end:222},{start:223,end:27},{start:27,end:222},{start:222,end:223},{start:224,end:29},{start:29,end:223},{start:223,end:224},{start:225,end:30},{start:30,end:224},{start:224,end:225},{start:113,end:247},{start:247,end:225},{start:225,end:113},{start:99,end:60},{start:60,end:240},{start:240,end:99},{start:213,end:147},{start:147,end:215},{start:215,end:213},{start:60,end:20},{start:20,end:166},{start:166,end:60},{start:192,end:187},{start:187,end:213},{start:213,end:192},{start:243,end:112},{start:112,end:244},{start:244,end:243},{start:244,end:233},{start:233,end:245},{start:245,end:244},{start:245,end:128},{start:128,end:188},{start:188,end:245},{start:188,end:114},{start:114,end:174},{start:174,end:188},{start:134,end:131},{start:131,end:220},{start:220,end:134},{start:174,end:217},{start:217,end:236},{start:236,end:174},{start:236,end:198},{start:198,end:134},{start:134,end:236},{start:215,end:177},{start:177,end:58},{start:58,end:215},{start:156,end:143},{start:143,end:124},{start:124,end:156},{start:25,end:110},{start:110,end:7},{start:7,end:25},{start:31,end:228},{start:228,end:25},{start:25,end:31},{start:264,end:356},{start:356,end:368},{start:368,end:264},{start:0,end:11},{start:11,end:267},{start:267,end:0},{start:451,end:452},{start:452,end:349},{start:349,end:451},{start:267,end:302},{start:302,end:269},{start:269,end:267},{start:350,end:357},{start:357,end:277},{start:277,end:350},{start:350,end:452},{start:452,end:357},{start:357,end:350},{start:299,end:333},{start:333,end:297},{start:297,end:299},{start:396,end:175},{start:175,end:377},{start:377,end:396},{start:280,end:347},{start:347,end:330},{start:330,end:280},{start:269,end:303},{start:303,end:270},{start:270,end:269},{start:151,end:9},{start:9,end:337},{start:337,end:151},{start:344,end:278},{start:278,end:360},{start:360,end:344},{start:424,end:418},{start:418,end:431},{start:431,end:424},{start:270,end:304},{start:304,end:409},{start:409,end:270},{start:272,end:310},{start:310,end:407},{start:407,end:272},{start:322,end:270},{start:270,end:410},{start:410,end:322},{start:449,end:450},{start:450,end:347},{start:347,end:449},{start:432,end:422},{start:422,end:434},{start:434,end:432},{start:18,end:313},{start:313,end:17},{start:17,end:18},{start:291,end:306},{start:306,end:375},{start:375,end:291},{start:259,end:387},{start:387,end:260},{start:260,end:259},{start:424,end:335},{start:335,end:418},{start:418,end:424},{start:434,end:364},{start:364,end:416},{start:416,end:434},{start:391,end:423},{start:423,end:327},{start:327,end:391},{start:301,end:251},{start:251,end:298},{start:298,end:301},{start:275,end:281},{start:281,end:4},{start:4,end:275},{start:254,end:373},{start:373,end:253},{start:253,end:254},{start:375,end:307},{start:307,end:321},{start:321,end:375},{start:280,end:425},{start:425,end:411},{start:411,end:280},{start:200,end:421},{start:421,end:18},{start:18,end:200},{start:335,end:321},{start:321,end:406},{start:406,end:335},{start:321,end:320},{start:320,end:405},{start:405,end:321},{start:314,end:315},{start:315,end:17},{start:17,end:314},{start:423,end:426},{start:426,end:266},{start:266,end:423},{start:396,end:377},{start:377,end:369},{start:369,end:396},{start:270,end:322},{start:322,end:269},{start:269,end:270},{start:413,end:417},{start:417,end:464},{start:464,end:413},{start:385,end:386},{start:386,end:258},{start:258,end:385},{start:248,end:456},{start:456,end:419},{start:419,end:248},{start:298,end:284},{start:284,end:333},{start:333,end:298},{start:168,end:417},{start:417,end:8},{start:8,end:168},{start:448,end:346},{start:346,end:261},{start:261,end:448},{start:417,end:413},{start:413,end:285},{start:285,end:417},{start:326,end:327},{start:327,end:328},{start:328,end:326},{start:277,end:355},{start:355,end:329},{start:329,end:277},{start:309,end:392},{start:392,end:438},{start:438,end:309},{start:381,end:382},{start:382,end:256},{start:256,end:381},{start:279,end:429},{start:429,end:360},{start:360,end:279},{start:365,end:364},{start:364,end:379},{start:379,end:365},{start:355,end:277},{start:277,end:437},{start:437,end:355},{start:282,end:443},{start:443,end:283},{start:283,end:282},{start:281,end:275},{start:275,end:363},{start:363,end:281},{start:395,end:431},{start:431,end:369},{start:369,end:395},{start:299,end:297},{start:297,end:337},{start:337,end:299},{start:335,end:273},{start:273,end:321},{start:321,end:335},{start:348,end:450},{start:450,end:349},{start:349,end:348},{start:359,end:446},{start:446,end:467},{start:467,end:359},{start:283,end:293},{start:293,end:282},{start:282,end:283},{start:250,end:458},{start:458,end:462},{start:462,end:250},{start:300,end:276},{start:276,end:383},{start:383,end:300},{start:292,end:308},{start:308,end:325},{start:325,end:292},{start:283,end:276},{start:276,end:293},{start:293,end:283},{start:264,end:372},{start:372,end:447},{start:447,end:264},{start:346,end:352},{start:352,end:340},{start:340,end:346},{start:354,end:274},{start:274,end:19},{start:19,end:354},{start:363,end:456},{start:456,end:281},{start:281,end:363},{start:426,end:436},{start:436,end:425},{start:425,end:426},{start:380,end:381},{start:381,end:252},{start:252,end:380},{start:267,end:269},{start:269,end:393},{start:393,end:267},{start:421,end:200},{start:200,end:428},{start:428,end:421},{start:371,end:266},{start:266,end:329},{start:329,end:371},{start:432,end:287},{start:287,end:422},{start:422,end:432},{start:290,end:250},{start:250,end:328},{start:328,end:290},{start:385,end:258},{start:258,end:384},{start:384,end:385},{start:446,end:265},{start:265,end:342},{start:342,end:446},{start:386,end:387},{start:387,end:257},{start:257,end:386},{start:422,end:424},{start:424,end:430},{start:430,end:422},{start:445,end:342},{start:342,end:276},{start:276,end:445},{start:422,end:273},{start:273,end:424},{start:424,end:422},{start:306,end:292},{start:292,end:307},{start:307,end:306},{start:352,end:366},{start:366,end:345},{start:345,end:352},{start:268,end:271},{start:271,end:302},{start:302,end:268},{start:358,end:423},{start:423,end:371},{start:371,end:358},{start:327,end:294},{start:294,end:460},{start:460,end:327},{start:331,end:279},{start:279,end:294},{start:294,end:331},{start:303,end:271},{start:271,end:304},{start:304,end:303},{start:436,end:432},{start:432,end:427},{start:427,end:436},{start:304,end:272},{start:272,end:408},{start:408,end:304},{start:395,end:394},{start:394,end:431},{start:431,end:395},{start:378,end:395},{start:395,end:400},{start:400,end:378},{start:296,end:334},{start:334,end:299},{start:299,end:296},{start:6,end:351},{start:351,end:168},{start:168,end:6},{start:376,end:352},{start:352,end:411},{start:411,end:376},{start:307,end:325},{start:325,end:320},{start:320,end:307},{start:285,end:295},{start:295,end:336},{start:336,end:285},{start:320,end:319},{start:319,end:404},{start:404,end:320},{start:329,end:330},{start:330,end:349},{start:349,end:329},{start:334,end:293},{start:293,end:333},{start:333,end:334},{start:366,end:323},{start:323,end:447},{start:447,end:366},{start:316,end:15},{start:15,end:315},{start:315,end:316},{start:331,end:358},{start:358,end:279},{start:279,end:331},{start:317,end:14},{start:14,end:316},{start:316,end:317},{start:8,end:285},{start:285,end:9},{start:9,end:8},{start:277,end:329},{start:329,end:350},{start:350,end:277},{start:253,end:374},{start:374,end:252},{start:252,end:253},{start:319,end:318},{start:318,end:403},{start:403,end:319},{start:351,end:6},{start:6,end:419},{start:419,end:351},{start:324,end:318},{start:318,end:325},{start:325,end:324},{start:397,end:367},{start:367,end:365},{start:365,end:397},{start:288,end:435},{start:435,end:397},{start:397,end:288},{start:278,end:344},{start:344,end:439},{start:439,end:278},{start:310,end:272},{start:272,end:311},{start:311,end:310},{start:248,end:195},{start:195,end:281},{start:281,end:248},{start:375,end:273},{start:273,end:291},{start:291,end:375},{start:175,end:396},{start:396,end:199},{start:199,end:175},{start:312,end:311},{start:311,end:268},{start:268,end:312},{start:276,end:283},{start:283,end:445},{start:445,end:276},{start:390,end:373},{start:373,end:339},{start:339,end:390},{start:295,end:282},{start:282,end:296},{start:296,end:295},{start:448,end:449},{start:449,end:346},{start:346,end:448},{start:356,end:264},{start:264,end:454},{start:454,end:356},{start:337,end:336},{start:336,end:299},{start:299,end:337},{start:337,end:338},{start:338,end:151},{start:151,end:337},{start:294,end:278},{start:278,end:455},{start:455,end:294},{start:308,end:292},{start:292,end:415},{start:415,end:308},{start:429,end:358},{start:358,end:355},{start:355,end:429},{start:265,end:340},{start:340,end:372},{start:372,end:265},{start:352,end:346},{start:346,end:280},{start:280,end:352},{start:295,end:442},{start:442,end:282},{start:282,end:295},{start:354,end:19},{start:19,end:370},{start:370,end:354},{start:285,end:441},{start:441,end:295},{start:295,end:285},{start:195,end:248},{start:248,end:197},{start:197,end:195},{start:457,end:440},{start:440,end:274},{start:274,end:457},{start:301,end:300},{start:300,end:368},{start:368,end:301},{start:417,end:351},{start:351,end:465},{start:465,end:417},{start:251,end:301},{start:301,end:389},{start:389,end:251},{start:394,end:395},{start:395,end:379},{start:379,end:394},{start:399,end:412},{start:412,end:419},{start:419,end:399},{start:410,end:436},{start:436,end:322},{start:322,end:410},{start:326,end:2},{start:2,end:393},{start:393,end:326},{start:354,end:370},{start:370,end:461},{start:461,end:354},{start:393,end:164},{start:164,end:267},{start:267,end:393},{start:268,end:302},{start:302,end:12},{start:12,end:268},{start:312,end:268},{start:268,end:13},{start:13,end:312},{start:298,end:293},{start:293,end:301},{start:301,end:298},{start:265,end:446},{start:446,end:340},{start:340,end:265},{start:280,end:330},{start:330,end:425},{start:425,end:280},{start:322,end:426},{start:426,end:391},{start:391,end:322},{start:420,end:429},{start:429,end:437},{start:437,end:420},{start:393,end:391},{start:391,end:326},{start:326,end:393},{start:344,end:440},{start:440,end:438},{start:438,end:344},{start:458,end:459},{start:459,end:461},{start:461,end:458},{start:364,end:434},{start:434,end:394},{start:394,end:364},{start:428,end:396},{start:396,end:262},{start:262,end:428},{start:274,end:354},{start:354,end:457},{start:457,end:274},{start:317,end:316},{start:316,end:402},{start:402,end:317},{start:316,end:315},{start:315,end:403},{start:403,end:316},{start:315,end:314},{start:314,end:404},{start:404,end:315},{start:314,end:313},{start:313,end:405},{start:405,end:314},{start:313,end:421},{start:421,end:406},{start:406,end:313},{start:323,end:366},{start:366,end:361},{start:361,end:323},{start:292,end:306},{start:306,end:407},{start:407,end:292},{start:306,end:291},{start:291,end:408},{start:408,end:306},{start:291,end:287},{start:287,end:409},{start:409,end:291},{start:287,end:432},{start:432,end:410},{start:410,end:287},{start:427,end:434},{start:434,end:411},{start:411,end:427},{start:372,end:264},{start:264,end:383},{start:383,end:372},{start:459,end:309},{start:309,end:457},{start:457,end:459},{start:366,end:352},{start:352,end:401},{start:401,end:366},{start:1,end:274},{start:274,end:4},{start:4,end:1},{start:418,end:421},{start:421,end:262},{start:262,end:418},{start:331,end:294},{start:294,end:358},{start:358,end:331},{start:435,end:433},{start:433,end:367},{start:367,end:435},{start:392,end:289},{start:289,end:439},{start:439,end:392},{start:328,end:462},{start:462,end:326},{start:326,end:328},{start:94,end:2},{start:2,end:370},{start:370,end:94},{start:289,end:305},{start:305,end:455},{start:455,end:289},{start:339,end:254},{start:254,end:448},{start:448,end:339},{start:359,end:255},{start:255,end:446},{start:446,end:359},{start:254,end:253},{start:253,end:449},{start:449,end:254},{start:253,end:252},{start:252,end:450},{start:450,end:253},{start:252,end:256},{start:256,end:451},{start:451,end:252},{start:256,end:341},{start:341,end:452},{start:452,end:256},{start:414,end:413},{start:413,end:463},{start:463,end:414},{start:286,end:441},{start:441,end:414},{start:414,end:286},{start:286,end:258},{start:258,end:441},{start:441,end:286},{start:258,end:257},{start:257,end:442},{start:442,end:258},{start:257,end:259},{start:259,end:443},{start:443,end:257},{start:259,end:260},{start:260,end:444},{start:444,end:259},{start:260,end:467},{start:467,end:445},{start:445,end:260},{start:309,end:459},{start:459,end:250},{start:250,end:309},{start:305,end:289},{start:289,end:290},{start:290,end:305},{start:305,end:290},{start:290,end:460},{start:460,end:305},{start:401,end:376},{start:376,end:435},{start:435,end:401},{start:309,end:250},{start:250,end:392},{start:392,end:309},{start:376,end:411},{start:411,end:433},{start:433,end:376},{start:453,end:341},{start:341,end:464},{start:464,end:453},{start:357,end:453},{start:453,end:465},{start:465,end:357},{start:343,end:357},{start:357,end:412},{start:412,end:343},{start:437,end:343},{start:343,end:399},{start:399,end:437},{start:344,end:360},{start:360,end:440},{start:440,end:344},{start:420,end:437},{start:437,end:456},{start:456,end:420},{start:360,end:420},{start:420,end:363},{start:363,end:360},{start:361,end:401},{start:401,end:288},{start:288,end:361},{start:265,end:372},{start:372,end:353},{start:353,end:265},{start:390,end:339},{start:339,end:249},{start:249,end:390},{start:339,end:448},{start:448,end:255},{start:255,end:339}],function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.FaceLandmarker=void 0;var r=calculator_pb,a=calculator_options_pb,o=classification_pb,i=landmark_pb,s=base_options_pb,u=face_detector_graph_options_pb,l=face_geometry_pb,p=face_landmarker_graph_options_pb,c=face_landmarks_detector_graph_options_pb,d=classifier_result,f=vision_task_runner;n(face_landmarker_options,e),n(face_landmarker_result,e),n(face_landmarks_connections,e);var g="image_in",h="norm_rect",m="face_landmarks",v="blendshapes",y="face_geometry",b=.5,_=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new f.VisionGraphRunner(e,r),g,h,!1)).result={faceLandmarks:[]},a.outputFaceBlendshapes=!1,a.outputFacialTransformationMatrixes=!1,a.options=new p.FaceLandmarkerGraphOptions,a.options.setBaseOptions(new s.BaseOptions),a.faceLandmarksDetectorGraphOptions=new c.FaceLandmarksDetectorGraphOptions,a.options.setFaceLandmarksDetectorGraphOptions(a.faceLandmarksDetectorGraphOptions),a.faceDetectorGraphOptions=new u.FaceDetectorGraphOptions,a.options.setFaceDetectorGraphOptions(a.faceDetectorGraphOptions),a.initDefaults(),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){var t,n,r,a;return"numFaces"in e&&this.faceDetectorGraphOptions.setNumFaces(null!==(t=e.numFaces)&&void 0!==t?t:1),"minFaceDetectionConfidence"in e&&this.faceDetectorGraphOptions.setMinDetectionConfidence(null!==(n=e.minFaceDetectionConfidence)&&void 0!==n?n:b),"minTrackingConfidence"in e&&this.options.setMinTrackingConfidence(null!==(r=e.minTrackingConfidence)&&void 0!==r?r:b),"minFacePresenceConfidence"in e&&this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(null!==(a=e.minFacePresenceConfidence)&&void 0!==a?a:b),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.applyOptions(e)}},{key:"detect",value:function(e,t){return this.resetResults(),this.processImageData(e,t),this.result}},{key:"detectForVideo",value:function(e,t,n){return this.resetResults(),this.processVideoData(e,n,t),this.result}},{key:"resetResults",value:function(){this.result={faceLandmarks:[]},this.outputFaceBlendshapes&&(this.result.faceBlendshapes=[]),this.outputFacialTransformationMatrixes&&(this.result.facialTransformationMatrixes=[])}},{key:"initDefaults",value:function(){this.faceDetectorGraphOptions.setNumFaces(1),this.faceDetectorGraphOptions.setMinDetectionConfidence(b),this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(b),this.options.setMinTrackingConfidence(b)}},{key:"addJsLandmarks",value:function(e){var t,n,r,a,o=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(o.s();!(a=o.n()).done;){var s,u=a.value,l=i.NormalizedLandmarkList.deserializeBinary(u),p=[],c=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(l.getLandmarkList());try{for(c.s();!(s=c.n()).done;){var d=s.value;p.push({x:null!==(t=d.getX())&&void 0!==t?t:0,y:null!==(n=d.getY())&&void 0!==n?n:0,z:null!==(r=d.getZ())&&void 0!==r?r:0})}}catch(f){c.e(f)}finally{c.f()}this.result.faceLandmarks.push(p)}}catch(f){o.e(f)}finally{o.f()}}},{key:"addBlenshape",value:function(e){var t;if(this.result.faceBlendshapes){var n,r=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=o.ClassificationList.deserializeBinary(a);this.result.faceBlendshapes.push((0,d.convertFromClassifications)(null!==(t=i.getClassificationList())&&void 0!==t?t:[]))}}catch(s){r.e(s)}finally{r.f()}}}},{key:"addFacialTransformationMatrixes",value:function(e){var t,n,r;if(this.result.facialTransformationMatrixes){var a,o=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(o.s();!(a=o.n()).done;){var i=a.value,s=l.FaceGeometry.deserializeBinary(i).getPoseTransformMatrix();s&&this.result.facialTransformationMatrixes.push({rows:null!==(t=s.getRows())&&void 0!==t?t:0,columns:null!==(n=s.getCols())&&void 0!==n?n:0,data:null!==(r=s.getPackedDataList())&&void 0!==r?r:[]})}}catch(u){o.e(u)}finally{o.f()}}}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(g),t.addInputStream(h),t.addOutputStream(m);var n=new a.CalculatorOptions;n.setExtension(p.FaceLandmarkerGraphOptions.ext,this.options);var o=new r.CalculatorGraphConfig.Node;o.setCalculator("mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),o.addInputStream("IMAGE:"+g),o.addInputStream("NORM_RECT:"+h),o.addOutputStream("NORM_LANDMARKS:"+m),o.setOptions(n),t.addNode(o),this.graphRunner.attachProtoVectorListener(m,(function(t,n){e.addJsLandmarks(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(m,(function(t){e.setLatestOutputTimestamp(t)})),this.outputFaceBlendshapes&&(t.addOutputStream(v),o.addOutputStream("BLENDSHAPES:"+v),this.graphRunner.attachProtoVectorListener(v,(function(t,n){e.addBlenshape(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(v,(function(t){e.setLatestOutputTimestamp(t)}))),this.outputFacialTransformationMatrixes&&(t.addOutputStream(y),o.addOutputStream("FACE_GEOMETRY:"+y),this.graphRunner.attachProtoVectorListener(y,(function(t,n){e.addFacialTransformationMatrixes(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(y,(function(t){e.setLatestOutputTimestamp(t)})));var i=t.serializeBinary();this.setGraph(new Uint8Array(i),!0)}}],[{key:"createFromOptions",value:function(e,t){return f.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return f.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(e,t){return f.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetPath:t}})}}]),n}(f.VisionTaskRunner);e.FaceLandmarker=_}(face_landmarker);var face_stylizer={},face_stylizer_graph_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i);var s=face_landmarker_graph_options_pb;n.object.extend(proto,s),n.exportSymbol("proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions",null,r),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject=function(e,t){var n,r={baseOptions:(n=t.getBaseOptions())&&i.BaseOptions.toObject(e,n),faceLandmarkerGraphOptions:(n=t.getFaceLandmarkerGraphOptions())&&s.FaceLandmarkerGraphOptions.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=new s.FaceLandmarkerGraphOptions,t.readMessage(n,s.FaceLandmarkerGraphOptions.deserializeBinaryFromReader),e.setFaceLandmarkerGraphOptions(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getBaseOptions())&&t.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=e.getFaceLandmarkerGraphOptions())&&t.writeMessage(2,n,s.FaceLandmarkerGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new t.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[513916220]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceLandmarkerGraphOptions=function(){return t.Message.getWrapperField(this,s.FaceLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceLandmarkerGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceLandmarkerGraphOptions=function(){return this.setFaceLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceLandmarkerGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new t.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[513916220]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.face_stylizer.proto)}(face_stylizer_graph_options_pb);var face_stylizer_options={};Object.defineProperty(face_stylizer_options,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.FaceStylizer=void 0;var r=calculator_pb,a=calculator_options_pb,o=base_options_pb,i=face_stylizer_graph_options_pb,s=vision_task_runner;n(face_stylizer_options,e);var u="image_in",l="norm_rect",p="stylized_image",c=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new s.VisionGraphRunner(e,r),u,l,!0)).userCallback=function(){},a.options=new i.FaceStylizerGraphOptions,a.options.setBaseOptions(new o.BaseOptions),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_8__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9__.Z)(n.prototype),"applyOptions",this).call(this,e)}},{key:"stylize",value:function(e,t,n){var r="function"!=typeof t?t:{};this.userCallback="function"==typeof t?t:n,this.processImageData(e,null!=r?r:{}),this.userCallback=function(){}}},{key:"stylizeForVideo",value:function(e,t,n,r){var a="number"!=typeof t?t:{},o="number"==typeof t?t:n;this.userCallback="function"==typeof n?n:r,this.processVideoData(e,a,o),this.userCallback=function(){}}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(u),t.addInputStream(l),t.addOutputStream(p);var n=new a.CalculatorOptions;n.setExtension(i.FaceStylizerGraphOptions.ext,this.options);var o=new r.CalculatorGraphConfig.Node;o.setCalculator("mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),o.addInputStream("IMAGE:"+u),o.addInputStream("NORM_RECT:"+l),o.addOutputStream("STYLIZED_IMAGE:"+p),o.setOptions(n),t.addNode(o),this.graphRunner.attachImageListener(p,(function(t,n){if(t.data instanceof WebGLTexture)e.userCallback(t.data,t.width,t.height);else{var r=e.convertToImageData(t);e.userCallback(r,t.width,t.height)}e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(p,(function(t){e.setLatestOutputTimestamp(t)}));var s=t.serializeBinary();this.setGraph(new Uint8Array(s),!0)}}],[{key:"createFromOptions",value:function(e,t){return s.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return s.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(e,t){return s.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetPath:t}})}}]),n}(s.VisionTaskRunner);e.FaceStylizer=c}(face_stylizer);var gesture_recognizer={},gesture_classifier_graph_options_pb={},classifier_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.tasks.components.processors.proto.ClassifierOptions",null,r),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_,null)},n.inherits(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.displayName="proto.mediapipe.tasks.components.processors.proto.ClassifierOptions"),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_=[4,5],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject(e,this)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject=function(e,n){var r,a={displayNamesLocale:t.Message.getFieldWithDefault(n,1,"en"),maxResults:t.Message.getFieldWithDefault(n,2,-1),scoreThreshold:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,categoryAllowlistList:null==(r=t.Message.getRepeatedField(n,4))?void 0:r,categoryDenylistList:null==(r=t.Message.getRepeatedField(n,5))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.components.processors.proto.ClassifierOptions;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setDisplayNamesLocale(n);break;case 2:n=t.readInt32(),e.setMaxResults(n);break;case 3:n=t.readFloat(),e.setScoreThreshold(n);break;case 4:n=t.readString(),e.addCategoryAllowlist(n);break;case 5:n=t.readString(),e.addCategoryDenylist(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),null!=(r=t.Message.getField(e,3))&&n.writeFloat(3,r),(r=e.getCategoryAllowlistList()).length>0&&n.writeRepeatedString(4,r),(r=e.getCategoryDenylistList()).length>0&&n.writeRepeatedString(5,r)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getDisplayNamesLocale=function(){return t.Message.getFieldWithDefault(this,1,"en")},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setDisplayNamesLocale=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearDisplayNamesLocale=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasDisplayNamesLocale=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getMaxResults=function(){return t.Message.getFieldWithDefault(this,2,-1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setMaxResults=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearMaxResults=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasMaxResults=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getScoreThreshold=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setScoreThreshold=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearScoreThreshold=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasScoreThreshold=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryAllowlistList=function(){return t.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryAllowlistList=function(e){return t.Message.setField(this,4,e||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryAllowlist=function(e,n){return t.Message.addToRepeatedField(this,4,e,n)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryDenylistList=function(){return t.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryDenylistList=function(e){return t.Message.setField(this,5,e||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryDenylist=function(e,n){return t.Message.addToRepeatedField(this,5,e,n)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},n.object.extend(e,proto.mediapipe.tasks.components.processors.proto)}(classifier_options_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=classifier_options_pb;n.object.extend(proto,i);var s=base_options_pb;n.object.extend(proto,s),n.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions",null,r),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject=function(e,t){var n,r={baseOptions:(n=t.getBaseOptions())&&s.BaseOptions.toObject(e,n),classifierOptions:(n=t.getClassifierOptions())&&i.ClassifierOptions.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new s.BaseOptions;t.readMessage(n,s.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=new i.ClassifierOptions,t.readMessage(n,i.ClassifierOptions.deserializeBinaryFromReader),e.setClassifierOptions(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getBaseOptions())&&t.writeMessage(1,n,s.BaseOptions.serializeBinaryToWriter),null!=(n=e.getClassifierOptions())&&t.writeMessage(2,n,i.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new t.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[478825465]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getClassifierOptions=function(){return t.Message.getWrapperField(this,i.ClassifierOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setClassifierOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasClassifierOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new t.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[478825465]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_classifier_graph_options_pb);var gesture_recognizer_graph_options_pb={},hand_gesture_recognizer_graph_options_pb={},gesture_embedder_graph_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i),n.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions",null,r),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject=function(e,t){var n,r={baseOptions:(n=t.getBaseOptions())&&i.BaseOptions.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n)}else t.skipField();return e},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter=function(e,t){var n;null!=(n=e.getBaseOptions())&&t.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new t.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[478825422]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new t.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[478825422]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_embedder_graph_options_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i);var s=gesture_classifier_graph_options_pb;n.object.extend(proto,s);var u=gesture_embedder_graph_options_pb;n.object.extend(proto,u),n.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions",null,r),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject=function(e,t){var n,r={baseOptions:(n=t.getBaseOptions())&&i.BaseOptions.toObject(e,n),gestureEmbedderGraphOptions:(n=t.getGestureEmbedderGraphOptions())&&u.GestureEmbedderGraphOptions.toObject(e,n),cannedGestureClassifierGraphOptions:(n=t.getCannedGestureClassifierGraphOptions())&&s.GestureClassifierGraphOptions.toObject(e,n),customGestureClassifierGraphOptions:(n=t.getCustomGestureClassifierGraphOptions())&&s.GestureClassifierGraphOptions.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=new u.GestureEmbedderGraphOptions,t.readMessage(n,u.GestureEmbedderGraphOptions.deserializeBinaryFromReader),e.setGestureEmbedderGraphOptions(n);break;case 3:n=new s.GestureClassifierGraphOptions,t.readMessage(n,s.GestureClassifierGraphOptions.deserializeBinaryFromReader),e.setCannedGestureClassifierGraphOptions(n);break;case 4:n=new s.GestureClassifierGraphOptions,t.readMessage(n,s.GestureClassifierGraphOptions.deserializeBinaryFromReader),e.setCustomGestureClassifierGraphOptions(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getBaseOptions())&&t.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=e.getGestureEmbedderGraphOptions())&&t.writeMessage(2,n,u.GestureEmbedderGraphOptions.serializeBinaryToWriter),null!=(n=e.getCannedGestureClassifierGraphOptions())&&t.writeMessage(3,n,s.GestureClassifierGraphOptions.serializeBinaryToWriter),null!=(n=e.getCustomGestureClassifierGraphOptions())&&t.writeMessage(4,n,s.GestureClassifierGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new t.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[463370452]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getGestureEmbedderGraphOptions=function(){return t.Message.getWrapperField(this,u.GestureEmbedderGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setGestureEmbedderGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearGestureEmbedderGraphOptions=function(){return this.setGestureEmbedderGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasGestureEmbedderGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCannedGestureClassifierGraphOptions=function(){return t.Message.getWrapperField(this,s.GestureClassifierGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCannedGestureClassifierGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCannedGestureClassifierGraphOptions=function(){return this.setCannedGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCannedGestureClassifierGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCustomGestureClassifierGraphOptions=function(){return t.Message.getWrapperField(this,s.GestureClassifierGraphOptions,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCustomGestureClassifierGraphOptions=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCustomGestureClassifierGraphOptions=function(){return this.setCustomGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCustomGestureClassifierGraphOptions=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new t.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[463370452]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(hand_gesture_recognizer_graph_options_pb);var hand_landmarker_graph_options_pb={},hand_detector_graph_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i),n.exportSymbol("proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions",null,r),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject=function(e,n){var r,a={baseOptions:(r=n.getBaseOptions())&&i.BaseOptions.toObject(e,r),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(n,2,.5),numHands:null==(r=t.Message.getField(n,3))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=t.readFloat(),e.setMinDetectionConfidence(n);break;case 3:n=t.readInt32(),e.setNumHands(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getBaseOptions())&&n.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r),null!=(r=t.Message.getField(e,3))&&n.writeInt32(3,r)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new t.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[464864288]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getNumHands=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setNumHands=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearNumHands=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasNumHands=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new t.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[464864288]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.hand_detector.proto)}(hand_detector_graph_options_pb);var hand_landmarks_detector_graph_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i),n.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions",null,r),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject=function(e,n){var r,a={baseOptions:(r=n.getBaseOptions())&&i.BaseOptions.toObject(e,r),minDetectionConfidence:t.Message.getFloatingPointFieldWithDefault(n,2,.5)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=t.readFloat(),e.setMinDetectionConfidence(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getBaseOptions())&&n.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeFloat(2,r)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[474472470]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new t.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[474472470]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.hand_landmarker.proto)}(hand_landmarks_detector_graph_options_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i);var s=hand_detector_graph_options_pb;n.object.extend(proto,s);var u=hand_landmarks_detector_graph_options_pb;n.object.extend(proto,u),n.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions",null,r),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject=function(e,n){var r,a={baseOptions:(r=n.getBaseOptions())&&i.BaseOptions.toObject(e,r),handDetectorGraphOptions:(r=n.getHandDetectorGraphOptions())&&s.HandDetectorGraphOptions.toObject(e,r),handLandmarksDetectorGraphOptions:(r=n.getHandLandmarksDetectorGraphOptions())&&u.HandLandmarksDetectorGraphOptions.toObject(e,r),minTrackingConfidence:t.Message.getFloatingPointFieldWithDefault(n,4,.5)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=new s.HandDetectorGraphOptions,t.readMessage(n,s.HandDetectorGraphOptions.deserializeBinaryFromReader),e.setHandDetectorGraphOptions(n);break;case 3:n=new u.HandLandmarksDetectorGraphOptions,t.readMessage(n,u.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader),e.setHandLandmarksDetectorGraphOptions(n);break;case 4:n=t.readFloat(),e.setMinTrackingConfidence(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getBaseOptions())&&n.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=e.getHandDetectorGraphOptions())&&n.writeMessage(2,r,s.HandDetectorGraphOptions.serializeBinaryToWriter),null!=(r=e.getHandLandmarksDetectorGraphOptions())&&n.writeMessage(3,r,u.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter),null!=(r=t.Message.getField(e,4))&&n.writeFloat(4,r)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[462713202]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandDetectorGraphOptions=function(){return t.Message.getWrapperField(this,s.HandDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandDetectorGraphOptions=function(){return this.setHandDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandDetectorGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandLandmarksDetectorGraphOptions=function(){return t.Message.getWrapperField(this,u.HandLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandLandmarksDetectorGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandLandmarksDetectorGraphOptions=function(){return this.setHandLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandLandmarksDetectorGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new t.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[462713202]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.hand_landmarker.proto)}(hand_landmarker_graph_options_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i);var s=hand_gesture_recognizer_graph_options_pb;n.object.extend(proto,s);var u=hand_landmarker_graph_options_pb;n.object.extend(proto,u),n.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions",null,r),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject=function(e,t){var n,r={baseOptions:(n=t.getBaseOptions())&&i.BaseOptions.toObject(e,n),handLandmarkerGraphOptions:(n=t.getHandLandmarkerGraphOptions())&&u.HandLandmarkerGraphOptions.toObject(e,n),handGestureRecognizerGraphOptions:(n=t.getHandGestureRecognizerGraphOptions())&&s.HandGestureRecognizerGraphOptions.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=new u.HandLandmarkerGraphOptions,t.readMessage(n,u.HandLandmarkerGraphOptions.deserializeBinaryFromReader),e.setHandLandmarkerGraphOptions(n);break;case 3:n=new s.HandGestureRecognizerGraphOptions,t.readMessage(n,s.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader),e.setHandGestureRecognizerGraphOptions(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getBaseOptions())&&t.writeMessage(1,n,i.BaseOptions.serializeBinaryToWriter),null!=(n=e.getHandLandmarkerGraphOptions())&&t.writeMessage(2,n,u.HandLandmarkerGraphOptions.serializeBinaryToWriter),null!=(n=e.getHandGestureRecognizerGraphOptions())&&t.writeMessage(3,n,s.HandGestureRecognizerGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new t.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[479097054]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandLandmarkerGraphOptions=function(){return t.Message.getWrapperField(this,u.HandLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandLandmarkerGraphOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandLandmarkerGraphOptions=function(){return this.setHandLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandLandmarkerGraphOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandGestureRecognizerGraphOptions=function(){return t.Message.getWrapperField(this,s.HandGestureRecognizerGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandGestureRecognizerGraphOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandGestureRecognizerGraphOptions=function(){return this.setHandGestureRecognizerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandGestureRecognizerGraphOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new t.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[479097054]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_recognizer_graph_options_pb);var classifier_options={};Object.defineProperty(classifier_options,"__esModule",{value:!0}),classifier_options.convertClassifierOptionsToProto=void 0;var classifier_options_pb_1=classifier_options_pb;function convertClassifierOptionsToProto(e,t){var n=t?t.clone():new classifier_options_pb_1.ClassifierOptions;return void 0!==e.displayNamesLocale?n.setDisplayNamesLocale(e.displayNamesLocale):void 0===e.displayNamesLocale&&n.clearDisplayNamesLocale(),void 0!==e.maxResults?n.setMaxResults(e.maxResults):"maxResults"in e&&n.clearMaxResults(),void 0!==e.scoreThreshold?n.setScoreThreshold(e.scoreThreshold):"scoreThreshold"in e&&n.clearScoreThreshold(),void 0!==e.categoryAllowlist?n.setCategoryAllowlistList(e.categoryAllowlist):"categoryAllowlist"in e&&n.clearCategoryAllowlistList(),void 0!==e.categoryDenylist?n.setCategoryDenylistList(e.categoryDenylist):"categoryDenylist"in e&&n.clearCategoryDenylistList(),n}classifier_options.convertClassifierOptionsToProto=convertClassifierOptionsToProto;var hand_landmarks_connections={};Object.defineProperty(hand_landmarks_connections,"__esModule",{value:!0}),hand_landmarks_connections.HAND_CONNECTIONS=void 0,hand_landmarks_connections.HAND_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:4},{start:0,end:5},{start:5,end:6},{start:6,end:7},{start:7,end:8},{start:5,end:9},{start:9,end:10},{start:10,end:11},{start:11,end:12},{start:9,end:13},{start:13,end:14},{start:14,end:15},{start:15,end:16},{start:13,end:17},{start:0,end:17},{start:17,end:18},{start:18,end:19},{start:19,end:20}];var gesture_recognizer_options={};Object.defineProperty(gesture_recognizer_options,"__esModule",{value:!0});var gesture_recognizer_result={};Object.defineProperty(gesture_recognizer_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.GestureRecognizer=void 0;var r=calculator_pb,a=calculator_options_pb,o=classification_pb,i=landmark_pb,s=base_options_pb,u=gesture_classifier_graph_options_pb,l=gesture_recognizer_graph_options_pb,p=hand_gesture_recognizer_graph_options_pb,c=hand_detector_graph_options_pb,d=hand_landmarker_graph_options_pb,f=hand_landmarks_detector_graph_options_pb,g=classifier_options,h=vision_task_runner,m=hand_landmarks_connections;n(gesture_recognizer_options,e),n(gesture_recognizer_result,e);var v="image_in",y="norm_rect",b="hand_gestures",_="hand_landmarks",k="world_hand_landmarks",x="handedness",w=.5,O=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new h.VisionGraphRunner(e,r),v,y,!1)).gestures=[],a.landmarks=[],a.worldLandmarks=[],a.handednesses=[],a.options=new l.GestureRecognizerGraphOptions,a.options.setBaseOptions(new s.BaseOptions),a.handLandmarkerGraphOptions=new d.HandLandmarkerGraphOptions,a.options.setHandLandmarkerGraphOptions(a.handLandmarkerGraphOptions),a.handLandmarksDetectorGraphOptions=new f.HandLandmarksDetectorGraphOptions,a.handLandmarkerGraphOptions.setHandLandmarksDetectorGraphOptions(a.handLandmarksDetectorGraphOptions),a.handDetectorGraphOptions=new c.HandDetectorGraphOptions,a.handLandmarkerGraphOptions.setHandDetectorGraphOptions(a.handDetectorGraphOptions),a.handGestureRecognizerGraphOptions=new p.HandGestureRecognizerGraphOptions,a.options.setHandGestureRecognizerGraphOptions(a.handGestureRecognizerGraphOptions),a.handDetectorGraphOptions.setMinDetectionConfidence(w),a.handLandmarkerGraphOptions.setMinTrackingConfidence(w),a.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(w),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){var t,n,r,a,o,i,s,l;if(this.handDetectorGraphOptions.setNumHands(null!==(t=e.numHands)&&void 0!==t?t:1),"minHandDetectionConfidence"in e&&this.handDetectorGraphOptions.setMinDetectionConfidence(null!==(n=e.minHandDetectionConfidence)&&void 0!==n?n:w),"minTrackingConfidence"in e&&this.handLandmarkerGraphOptions.setMinTrackingConfidence(null!==(r=e.minTrackingConfidence)&&void 0!==r?r:w),"minHandPresenceConfidence"in e&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(null!==(a=e.minHandPresenceConfidence)&&void 0!==a?a:w),e.cannedGesturesClassifierOptions){var p=new u.GestureClassifierGraphOptions;p.setClassifierOptions((0,g.convertClassifierOptionsToProto)(e.cannedGesturesClassifierOptions,null===(o=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())||void 0===o?void 0:o.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCannedGestureClassifierGraphOptions(p)}else void 0===e.cannedGesturesClassifierOptions&&(null===(i=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())||void 0===i||i.clearClassifierOptions());if(e.customGesturesClassifierOptions){var c=new u.GestureClassifierGraphOptions;c.setClassifierOptions((0,g.convertClassifierOptionsToProto)(e.customGesturesClassifierOptions,null===(s=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())||void 0===s?void 0:s.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCustomGestureClassifierGraphOptions(c)}else void 0===e.customGesturesClassifierOptions&&(null===(l=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())||void 0===l||l.clearClassifierOptions());return this.applyOptions(e)}},{key:"recognize",value:function(e,t){return this.resetResults(),this.processImageData(e,t),this.processResults()}},{key:"recognizeForVideo",value:function(e,t,n){return this.resetResults(),this.processVideoData(e,n,t),this.processResults()}},{key:"resetResults",value:function(){this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}},{key:"processResults",value:function(){return 0===this.gestures.length?{gestures:[],landmarks:[],worldLandmarks:[],handednesses:[]}:{gestures:this.gestures,landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}},{key:"toJsCategories",value:function(e){var t,n,r,a,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=[],u=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(u.s();!(a=u.n()).done;){var l,p=a.value,c=o.ClassificationList.deserializeBinary(p),d=[],f=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(c.getClassificationList());try{for(f.s();!(l=f.n()).done;){var g=l.value,h=i&&g.hasIndex()?g.getIndex():-1;d.push({score:null!==(t=g.getScore())&&void 0!==t?t:0,index:h,categoryName:null!==(n=g.getLabel())&&void 0!==n?n:"",displayName:null!==(r=g.getDisplayName())&&void 0!==r?r:""})}}catch(m){f.e(m)}finally{f.f()}s.push(d)}}catch(m){u.e(m)}finally{u.f()}return s}},{key:"addJsLandmarks",value:function(e){var t,n,r,a,o=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(o.s();!(a=o.n()).done;){var s,u=a.value,l=i.NormalizedLandmarkList.deserializeBinary(u),p=[],c=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(l.getLandmarkList());try{for(c.s();!(s=c.n()).done;){var d=s.value;p.push({x:null!==(t=d.getX())&&void 0!==t?t:0,y:null!==(n=d.getY())&&void 0!==n?n:0,z:null!==(r=d.getZ())&&void 0!==r?r:0})}}catch(f){c.e(f)}finally{c.f()}this.landmarks.push(p)}}catch(f){o.e(f)}finally{o.f()}}},{key:"adddJsWorldLandmarks",value:function(e){var t,n,r,a,o=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(o.s();!(a=o.n()).done;){var s,u=a.value,l=i.LandmarkList.deserializeBinary(u),p=[],c=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(l.getLandmarkList());try{for(c.s();!(s=c.n()).done;){var d=s.value;p.push({x:null!==(t=d.getX())&&void 0!==t?t:0,y:null!==(n=d.getY())&&void 0!==n?n:0,z:null!==(r=d.getZ())&&void 0!==r?r:0})}}catch(f){c.e(f)}finally{c.f()}this.worldLandmarks.push(p)}}catch(f){o.e(f)}finally{o.f()}}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(v),t.addInputStream(y),t.addOutputStream(b),t.addOutputStream(_),t.addOutputStream(k),t.addOutputStream(x);var n=new a.CalculatorOptions;n.setExtension(l.GestureRecognizerGraphOptions.ext,this.options);var o=new r.CalculatorGraphConfig.Node;o.setCalculator("mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),o.addInputStream("IMAGE:"+v),o.addInputStream("NORM_RECT:"+y),o.addOutputStream("HAND_GESTURES:"+b),o.addOutputStream("LANDMARKS:"+_),o.addOutputStream("WORLD_LANDMARKS:"+k),o.addOutputStream("HANDEDNESS:"+x),o.setOptions(n),t.addNode(o),this.graphRunner.attachProtoVectorListener(_,(function(t,n){e.addJsLandmarks(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(_,(function(t){e.setLatestOutputTimestamp(t)})),this.graphRunner.attachProtoVectorListener(k,(function(t,n){e.adddJsWorldLandmarks(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(k,(function(t){e.setLatestOutputTimestamp(t)})),this.graphRunner.attachProtoVectorListener(b,(function(t,n){var r;(r=e.gestures).push.apply(r,(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e.toJsCategories(t,!1))),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(b,(function(t){e.setLatestOutputTimestamp(t)})),this.graphRunner.attachProtoVectorListener(x,(function(t,n){var r;(r=e.handednesses).push.apply(r,(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e.toJsCategories(t))),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(x,(function(t){e.setLatestOutputTimestamp(t)}));var i=t.serializeBinary();this.setGraph(new Uint8Array(i),!0)}}],[{key:"createFromOptions",value:function(e,t){return h.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return h.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(e,t){return h.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetPath:t}})}}]),n}(h.VisionTaskRunner);e.GestureRecognizer=O,O.HAND_CONNECTIONS=m.HAND_CONNECTIONS}(gesture_recognizer);var hand_landmarker={},hand_landmarker_options={};Object.defineProperty(hand_landmarker_options,"__esModule",{value:!0});var hand_landmarker_result={};Object.defineProperty(hand_landmarker_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.HandLandmarker=void 0;var r=calculator_pb,a=calculator_options_pb,o=classification_pb,i=landmark_pb,s=base_options_pb,u=hand_detector_graph_options_pb,l=hand_landmarker_graph_options_pb,p=hand_landmarks_detector_graph_options_pb,c=vision_task_runner,d=hand_landmarks_connections;n(hand_landmarker_options,e),n(hand_landmarker_result,e);var f="image_in",g="norm_rect",h="hand_landmarks",m="world_hand_landmarks",v="handedness",y=.5,b=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new c.VisionGraphRunner(e,r),f,g,!1)).landmarks=[],a.worldLandmarks=[],a.handednesses=[],a.options=new l.HandLandmarkerGraphOptions,a.options.setBaseOptions(new s.BaseOptions),a.handLandmarksDetectorGraphOptions=new p.HandLandmarksDetectorGraphOptions,a.options.setHandLandmarksDetectorGraphOptions(a.handLandmarksDetectorGraphOptions),a.handDetectorGraphOptions=new u.HandDetectorGraphOptions,a.options.setHandDetectorGraphOptions(a.handDetectorGraphOptions),a.initDefaults(),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){var t,n,r,a;return"numHands"in e&&this.handDetectorGraphOptions.setNumHands(null!==(t=e.numHands)&&void 0!==t?t:1),"minHandDetectionConfidence"in e&&this.handDetectorGraphOptions.setMinDetectionConfidence(null!==(n=e.minHandDetectionConfidence)&&void 0!==n?n:y),"minTrackingConfidence"in e&&this.options.setMinTrackingConfidence(null!==(r=e.minTrackingConfidence)&&void 0!==r?r:y),"minHandPresenceConfidence"in e&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(null!==(a=e.minHandPresenceConfidence)&&void 0!==a?a:y),this.applyOptions(e)}},{key:"detect",value:function(e,t){return this.resetResults(),this.processImageData(e,t),this.processResults()}},{key:"detectForVideo",value:function(e,t,n){return this.resetResults(),this.processVideoData(e,n,t),this.processResults()}},{key:"resetResults",value:function(){this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}},{key:"processResults",value:function(){return{landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}},{key:"initDefaults",value:function(){this.handDetectorGraphOptions.setNumHands(1),this.handDetectorGraphOptions.setMinDetectionConfidence(y),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(y),this.options.setMinTrackingConfidence(y)}},{key:"toJsCategories",value:function(e){var t,n,r,a,i,s=[],u=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(u.s();!(i=u.n()).done;){var l,p=i.value,c=o.ClassificationList.deserializeBinary(p),d=[],f=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(c.getClassificationList());try{for(f.s();!(l=f.n()).done;){var g=l.value;d.push({score:null!==(t=g.getScore())&&void 0!==t?t:0,index:null!==(n=g.getIndex())&&void 0!==n?n:-1,categoryName:null!==(r=g.getLabel())&&void 0!==r?r:"",displayName:null!==(a=g.getDisplayName())&&void 0!==a?a:""})}}catch(h){f.e(h)}finally{f.f()}s.push(d)}}catch(h){u.e(h)}finally{u.f()}return s}},{key:"addJsLandmarks",value:function(e){var t,n,r,a,o=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(o.s();!(a=o.n()).done;){var s,u=a.value,l=i.NormalizedLandmarkList.deserializeBinary(u),p=[],c=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(l.getLandmarkList());try{for(c.s();!(s=c.n()).done;){var d=s.value;p.push({x:null!==(t=d.getX())&&void 0!==t?t:0,y:null!==(n=d.getY())&&void 0!==n?n:0,z:null!==(r=d.getZ())&&void 0!==r?r:0})}}catch(f){c.e(f)}finally{c.f()}this.landmarks.push(p)}}catch(f){o.e(f)}finally{o.f()}}},{key:"adddJsWorldLandmarks",value:function(e){var t,n,r,a,o=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(o.s();!(a=o.n()).done;){var s,u=a.value,l=i.LandmarkList.deserializeBinary(u),p=[],c=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(l.getLandmarkList());try{for(c.s();!(s=c.n()).done;){var d=s.value;p.push({x:null!==(t=d.getX())&&void 0!==t?t:0,y:null!==(n=d.getY())&&void 0!==n?n:0,z:null!==(r=d.getZ())&&void 0!==r?r:0})}}catch(f){c.e(f)}finally{c.f()}this.worldLandmarks.push(p)}}catch(f){o.e(f)}finally{o.f()}}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(f),t.addInputStream(g),t.addOutputStream(h),t.addOutputStream(m),t.addOutputStream(v);var n=new a.CalculatorOptions;n.setExtension(l.HandLandmarkerGraphOptions.ext,this.options);var o=new r.CalculatorGraphConfig.Node;o.setCalculator("mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),o.addInputStream("IMAGE:"+f),o.addInputStream("NORM_RECT:"+g),o.addOutputStream("LANDMARKS:"+h),o.addOutputStream("WORLD_LANDMARKS:"+m),o.addOutputStream("HANDEDNESS:"+v),o.setOptions(n),t.addNode(o),this.graphRunner.attachProtoVectorListener(h,(function(t,n){e.addJsLandmarks(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(h,(function(t){e.setLatestOutputTimestamp(t)})),this.graphRunner.attachProtoVectorListener(m,(function(t,n){e.adddJsWorldLandmarks(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(m,(function(t){e.setLatestOutputTimestamp(t)})),this.graphRunner.attachProtoVectorListener(v,(function(t,n){var r;(r=e.handednesses).push.apply(r,(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e.toJsCategories(t))),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(v,(function(t){e.setLatestOutputTimestamp(t)}));var i=t.serializeBinary();this.setGraph(new Uint8Array(i),!0)}}],[{key:"createFromOptions",value:function(e,t){return c.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return c.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(e,t){return c.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetPath:t}})}}]),n}(c.VisionTaskRunner);e.HandLandmarker=b,b.HAND_CONNECTIONS=d.HAND_CONNECTIONS}(hand_landmarker);var image_classifier={},classifications_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=classification_pb;n.object.extend(proto,a),n.exportSymbol("proto.mediapipe.tasks.components.containers.proto.ClassificationResult",null,r),n.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Classifications",null,r),proto.mediapipe.tasks.components.containers.proto.Classifications=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.components.containers.proto.Classifications,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Classifications.displayName="proto.mediapipe.tasks.components.containers.proto.Classifications"),proto.mediapipe.tasks.components.containers.proto.ClassificationResult=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_,null)},n.inherits(proto.mediapipe.tasks.components.containers.proto.ClassificationResult,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.displayName="proto.mediapipe.tasks.components.containers.proto.ClassificationResult"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.Classifications.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.Classifications.toObject=function(e,n){var r,o={classificationList:(r=n.getClassificationList())&&a.ClassificationList.toObject(e,r),headIndex:null==(r=t.Message.getField(n,2))?void 0:r,headName:null==(r=t.Message.getField(n,3))?void 0:r};return e&&(o.$jspbMessageInstance=n),o}),proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.components.containers.proto.Classifications;return proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 4:var n=new a.ClassificationList;t.readMessage(n,a.ClassificationList.deserializeBinaryFromReader),e.setClassificationList(n);break;case 2:n=t.readInt32(),e.setHeadIndex(n);break;case 3:n=t.readString(),e.setHeadName(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getClassificationList())&&n.writeMessage(4,r,a.ClassificationList.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),null!=(r=t.Message.getField(e,3))&&n.writeString(3,r)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getClassificationList=function(){return t.Message.getWrapperField(this,a.ClassificationList,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setClassificationList=function(e){return t.Message.setWrapperField(this,4,e)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearClassificationList=function(){return this.setClassificationList(void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasClassificationList=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadIndex=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadIndex=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadIndex=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadIndex=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadName=function(){return t.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadName=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadName=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadName=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject=function(e,n){var r,a={classificationsList:t.Message.toObjectList(n.getClassificationsList(),proto.mediapipe.tasks.components.containers.proto.Classifications.toObject,e),timestampMs:null==(r=t.Message.getField(n,2))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.components.containers.proto.ClassificationResult;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.tasks.components.containers.proto.Classifications;t.readMessage(n,proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader),e.addClassifications(n);break;case 2:n=t.readInt64(),e.setTimestampMs(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter=function(e,n){var r=void 0;(r=e.getClassificationsList()).length>0&&n.writeRepeatedMessage(1,r,proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeInt64(2,r)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getClassificationsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Classifications,1)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setClassificationsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.addClassifications=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.tasks.components.containers.proto.Classifications,n)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearClassificationsList=function(){return this.setClassificationsList([])},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getTimestampMs=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setTimestampMs=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearTimestampMs=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.hasTimestampMs=function(){return null!=t.Message.getField(this,2)},n.object.extend(e,proto.mediapipe.tasks.components.containers.proto)}(classifications_pb);var image_classifier_graph_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=classifier_options_pb;n.object.extend(proto,i);var s=base_options_pb;n.object.extend(proto,s),n.exportSymbol("proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions",null,r),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject=function(e,t){var n,r={baseOptions:(n=t.getBaseOptions())&&s.BaseOptions.toObject(e,n),classifierOptions:(n=t.getClassifierOptions())&&i.ClassifierOptions.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new s.BaseOptions;t.readMessage(n,s.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=new i.ClassifierOptions,t.readMessage(n,i.ClassifierOptions.deserializeBinaryFromReader),e.setClassifierOptions(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getBaseOptions())&&t.writeMessage(1,n,s.BaseOptions.serializeBinaryToWriter),null!=(n=e.getClassifierOptions())&&t.writeMessage(2,n,i.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new t.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[456383383]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getClassifierOptions=function(){return t.Message.getWrapperField(this,i.ClassifierOptions,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setClassifierOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasClassifierOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new t.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[456383383]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.image_classifier.proto)}(image_classifier_graph_options_pb);var image_classifier_options={};Object.defineProperty(image_classifier_options,"__esModule",{value:!0});var image_classifier_result={};Object.defineProperty(image_classifier_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.ImageClassifier=void 0;var r=calculator_pb,a=calculator_options_pb,o=classifications_pb,i=base_options_pb,s=image_classifier_graph_options_pb,u=classifier_options,l=classifier_result,p=vision_task_runner,c="input_image",d="norm_rect",f="classifications";n(image_classifier_options,e),n(image_classifier_result,e);var g=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new p.VisionGraphRunner(e,r),c,d,!0)).classificationResult={classifications:[]},a.options=new s.ImageClassifierGraphOptions,a.options.setBaseOptions(new i.BaseOptions),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){return this.options.setClassifierOptions((0,u.convertClassifierOptionsToProto)(e,this.options.getClassifierOptions())),this.applyOptions(e)}},{key:"classify",value:function(e,t){return this.classificationResult={classifications:[]},this.processImageData(e,t),this.classificationResult}},{key:"classifyForVideo",value:function(e,t,n){return this.classificationResult={classifications:[]},this.processVideoData(e,n,t),this.classificationResult}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(c),t.addInputStream(d),t.addOutputStream(f);var n=new a.CalculatorOptions;n.setExtension(s.ImageClassifierGraphOptions.ext,this.options);var i=new r.CalculatorGraphConfig.Node;i.setCalculator("mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),i.addInputStream("IMAGE:"+c),i.addInputStream("NORM_RECT:"+d),i.addOutputStream("CLASSIFICATIONS:"+f),i.setOptions(n),t.addNode(i),this.graphRunner.attachProtoListener(f,(function(t,n){e.classificationResult=(0,l.convertFromClassificationResultProto)(o.ClassificationResult.deserializeBinary(t)),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(f,(function(t){e.setLatestOutputTimestamp(t)}));var u=t.serializeBinary();this.setGraph(new Uint8Array(u),!0)}}],[{key:"createFromOptions",value:function(e,t){return p.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return p.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(e,t){return p.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetPath:t}})}}]),n}(p.VisionTaskRunner);e.ImageClassifier=g}(image_classifier);var image_embedder={},embeddings_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding",null,r),n.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase",null,r),n.exportSymbol("proto.mediapipe.tasks.components.containers.proto.EmbeddingResult",null,r),n.exportSymbol("proto.mediapipe.tasks.components.containers.proto.FloatEmbedding",null,r),n.exportSymbol("proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding",null,r),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_,null)},n.inherits(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.FloatEmbedding"),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding"),proto.mediapipe.tasks.components.containers.proto.Embedding=function(e){t.Message.initialize(this,e,0,-1,null,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_)},n.inherits(proto.mediapipe.tasks.components.containers.proto.Embedding,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Embedding.displayName="proto.mediapipe.tasks.components.containers.proto.Embedding"),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_,null)},n.inherits(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.displayName="proto.mediapipe.tasks.components.containers.proto.EmbeddingResult"),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject=function(e,n){var r,a={valuesList:null==(r=t.Message.getRepeatedFloatingPointField(n,1))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber())for(var n=t.isDelimited()?t.readPackedFloat():[t.readFloat()],r=0;r<n.length;r++)e.addValues(n[r]);else t.skipField();return e},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter=function(e,t){var n;(n=e.getValuesList()).length>0&&t.writePackedFloat(1,n)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.getValuesList=function(){return t.Message.getRepeatedFloatingPointField(this,1)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.setValuesList=function(e){return t.Message.setField(this,1,e||[])},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.addValues=function(e,n){return t.Message.addToRepeatedField(this,1,e,n)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.clearValuesList=function(){return this.setValuesList([])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject=function(e,t){var n={values:t.getValues_asB64()};return e&&(n.$jspbMessageInstance=t),n}),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readBytes();e.setValues(n)}else t.skipField();return e},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter=function(e,n){var r;null!=(r=t.Message.getField(e,1))&&n.writeBytes(1,r)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asB64=function(){return t.Message.bytesAsB64(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asU8=function(){return t.Message.bytesAsU8(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.setValues=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.clearValues=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.hasValues=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_=[[1,2]],proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase={EMBEDDING_NOT_SET:0,FLOAT_EMBEDDING:1,QUANTIZED_EMBEDDING:2},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getEmbeddingCase=function(){return t.Message.computeOneofCase(this,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.Embedding.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.Embedding.toObject=function(e,n){var r,a={floatEmbedding:(r=n.getFloatEmbedding())&&proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(e,r),quantizedEmbedding:(r=n.getQuantizedEmbedding())&&proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(e,r),headIndex:null==(r=t.Message.getField(n,3))?void 0:r,headName:null==(r=t.Message.getField(n,4))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.components.containers.proto.Embedding;return proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;t.readMessage(n,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader),e.setFloatEmbedding(n);break;case 2:n=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,t.readMessage(n,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader),e.setQuantizedEmbedding(n);break;case 3:n=t.readInt32(),e.setHeadIndex(n);break;case 4:n=t.readString(),e.setHeadName(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getFloatEmbedding())&&n.writeMessage(1,r,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter),null!=(r=e.getQuantizedEmbedding())&&n.writeMessage(2,r,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter),null!=(r=t.Message.getField(e,3))&&n.writeInt32(3,r),null!=(r=t.Message.getField(e,4))&&n.writeString(4,r)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getFloatEmbedding=function(){return t.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setFloatEmbedding=function(e){return t.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],e)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearFloatEmbedding=function(){return this.setFloatEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasFloatEmbedding=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getQuantizedEmbedding=function(){return t.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setQuantizedEmbedding=function(e){return t.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],e)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearQuantizedEmbedding=function(){return this.setQuantizedEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasQuantizedEmbedding=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadIndex=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadIndex=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadIndex=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadIndex=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadName=function(){return t.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadName=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadName=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadName=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.toObject=function(e){return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject(e,this)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject=function(e,n){var r,a={embeddingsList:t.Message.toObjectList(n.getEmbeddingsList(),proto.mediapipe.tasks.components.containers.proto.Embedding.toObject,e),timestampMs:null==(r=t.Message.getField(n,2))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.components.containers.proto.EmbeddingResult;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.tasks.components.containers.proto.Embedding;t.readMessage(n,proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader),e.addEmbeddings(n);break;case 2:n=t.readInt64(),e.setTimestampMs(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter=function(e,n){var r=void 0;(r=e.getEmbeddingsList()).length>0&&n.writeRepeatedMessage(1,r,proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeInt64(2,r)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getEmbeddingsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Embedding,1)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setEmbeddingsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.addEmbeddings=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.tasks.components.containers.proto.Embedding,n)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearEmbeddingsList=function(){return this.setEmbeddingsList([])},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getTimestampMs=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setTimestampMs=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearTimestampMs=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.hasTimestampMs=function(){return null!=t.Message.getField(this,2)},n.object.extend(e,proto.mediapipe.tasks.components.containers.proto)}(embeddings_pb);var image_embedder_graph_options_pb={},embedder_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.tasks.components.processors.proto.EmbedderOptions",null,r),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.displayName="proto.mediapipe.tasks.components.processors.proto.EmbedderOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject(e,this)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject=function(e,n){var r,a={l2Normalize:null==(r=t.Message.getBooleanField(n,1))?void 0:r,quantize:null==(r=t.Message.getBooleanField(n,2))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.components.processors.proto.EmbedderOptions;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readBool();e.setL2Normalize(n);break;case 2:n=t.readBool(),e.setQuantize(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeBool(1,r),null!=(r=t.Message.getField(e,2))&&n.writeBool(2,r)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getL2Normalize=function(){return t.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setL2Normalize=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearL2Normalize=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasL2Normalize=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getQuantize=function(){return t.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setQuantize=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearQuantize=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasQuantize=function(){return null!=t.Message.getField(this,2)},n.object.extend(e,proto.mediapipe.tasks.components.processors.proto)}(embedder_options_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=embedder_options_pb;n.object.extend(proto,i);var s=base_options_pb;n.object.extend(proto,s),n.exportSymbol("proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions",null,r),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject=function(e,t){var n,r={baseOptions:(n=t.getBaseOptions())&&s.BaseOptions.toObject(e,n),embedderOptions:(n=t.getEmbedderOptions())&&i.EmbedderOptions.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new s.BaseOptions;t.readMessage(n,s.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=new i.EmbedderOptions,t.readMessage(n,i.EmbedderOptions.deserializeBinaryFromReader),e.setEmbedderOptions(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getBaseOptions())&&t.writeMessage(1,n,s.BaseOptions.serializeBinaryToWriter),null!=(n=e.getEmbedderOptions())&&t.writeMessage(2,n,i.EmbedderOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new t.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[476348187]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getEmbedderOptions=function(){return t.Message.getWrapperField(this,i.EmbedderOptions,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setEmbedderOptions=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearEmbedderOptions=function(){return this.setEmbedderOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasEmbedderOptions=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new t.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[476348187]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.image_embedder.proto)}(image_embedder_graph_options_pb);var embedder_options={};Object.defineProperty(embedder_options,"__esModule",{value:!0}),embedder_options.convertEmbedderOptionsToProto=void 0;var embedder_options_pb_1=embedder_options_pb;function convertEmbedderOptionsToProto(e,t){var n=t?t.clone():new embedder_options_pb_1.EmbedderOptions;return void 0!==e.l2Normalize?n.setL2Normalize(e.l2Normalize):"l2Normalize"in e&&n.clearL2Normalize(),void 0!==e.quantize?n.setQuantize(e.quantize):"quantize"in e&&n.clearQuantize(),n}embedder_options.convertEmbedderOptionsToProto=convertEmbedderOptionsToProto;var embedder_result={};Object.defineProperty(embedder_result,"__esModule",{value:!0}),embedder_result.convertFromEmbeddingResultProto=void 0;var DEFAULT_INDEX=-1;function convertFromEmbeddingsProto(e){var t,n,r,a,o={headIndex:null!==(t=e.getHeadIndex())&&void 0!==t?t:DEFAULT_INDEX,headName:null!==(n=e.getHeadName())&&void 0!==n?n:""};if(e.hasFloatEmbedding())o.floatEmbedding=e.getFloatEmbedding().getValuesList();else{var i=null!==(a=null===(r=e.getQuantizedEmbedding())||void 0===r?void 0:r.getValues())&&void 0!==a?a:"";o.quantizedEmbedding="string"==typeof i?Uint8Array.from(atob(i),(function(e){return e.charCodeAt(0)})):i}return o}function convertFromEmbeddingResultProto(e){return{embeddings:e.getEmbeddingsList().map((function(e){return convertFromEmbeddingsProto(e)})),timestampMs:e.getTimestampMs()}}embedder_result.convertFromEmbeddingResultProto=convertFromEmbeddingResultProto;var cosine_similarity={};function computeCosineSimilarity(e,t){if(e.floatEmbedding&&t.floatEmbedding)return compute(e.floatEmbedding,t.floatEmbedding);if(e.quantizedEmbedding&&t.quantizedEmbedding)return compute(convertToBytes(e.quantizedEmbedding),convertToBytes(t.quantizedEmbedding));throw new Error("Cannot compute cosine similarity between quantized and float embeddings.")}function convertToBytes(e){return Array.from(e,(function(e){return e>127?e-256:e}))}function compute(e,t){if(e.length!==t.length)throw new Error("Cannot compute cosine similarity between embeddings of different sizes (".concat(e.length," vs. ").concat(t.length,")."));for(var n=0,r=0,a=0,o=0;o<e.length;o++)n+=e[o]*t[o],r+=e[o]*e[o],a+=t[o]*t[o];if(r<=0||a<=0)throw new Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*a)}Object.defineProperty(cosine_similarity,"__esModule",{value:!0}),cosine_similarity.computeCosineSimilarity=void 0,cosine_similarity.computeCosineSimilarity=computeCosineSimilarity;var image_embedder_options={};Object.defineProperty(image_embedder_options,"__esModule",{value:!0});var image_embedder_result={};Object.defineProperty(image_embedder_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.ImageEmbedder=void 0;var r=calculator_pb,a=calculator_options_pb,o=embeddings_pb,i=base_options_pb,s=image_embedder_graph_options_pb,u=embedder_options,l=embedder_result,p=cosine_similarity,c=vision_task_runner,d="image_in",f="norm_rect",g="embeddings_out";n(image_embedder_options,e),n(image_embedder_result,e);var h=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new c.VisionGraphRunner(e,r),d,f,!0)).options=new s.ImageEmbedderGraphOptions,a.embeddings={embeddings:[]},a.options.setBaseOptions(new i.BaseOptions),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){return this.options.setEmbedderOptions((0,u.convertEmbedderOptionsToProto)(e,this.options.getEmbedderOptions())),this.applyOptions(e)}},{key:"embed",value:function(e,t){return this.processImageData(e,t),this.embeddings}},{key:"embedForVideo",value:function(e,t,n){return this.processVideoData(e,n,t),this.embeddings}},{key:"addJsImageEmdedding",value:function(e){var t=o.EmbeddingResult.deserializeBinary(e);this.embeddings=(0,l.convertFromEmbeddingResultProto)(t)}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(d),t.addInputStream(f),t.addOutputStream(g);var n=new a.CalculatorOptions;n.setExtension(s.ImageEmbedderGraphOptions.ext,this.options);var o=new r.CalculatorGraphConfig.Node;o.setCalculator("mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),o.addInputStream("IMAGE:"+d),o.addInputStream("NORM_RECT:"+f),o.addOutputStream("EMBEDDINGS:"+g),o.setOptions(n),t.addNode(o),this.graphRunner.attachProtoListener(g,(function(t,n){e.addJsImageEmdedding(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(g,(function(t){e.setLatestOutputTimestamp(t)}));var i=t.serializeBinary();this.setGraph(new Uint8Array(i),!0)}}],[{key:"createFromOptions",value:function(e,t){return c.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return c.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(e,t){return c.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetPath:t}})}},{key:"cosineSimilarity",value:function(e,t){return(0,p.computeCosineSimilarity)(e,t)}}]),n}(c.VisionTaskRunner);e.ImageEmbedder=h}(image_embedder);var image_segmenter={},tensors_to_segmentation_calculator_pb={},segmenter_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions",null,r),n.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation",null,r),n.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType",null,r),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject(e,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject=function(e,n){var r,a={outputType:null==(r=t.Message.getField(n,1))?void 0:r,activation:t.Message.getFieldWithDefault(n,2,0)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readEnum();e.setOutputType(n);break;case 2:n=t.readEnum(),e.setActivation(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeEnum(1,r),null!=(r=t.Message.getField(e,2))&&n.writeEnum(2,r)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType={UNSPECIFIED:0,CATEGORY_MASK:1,CONFIDENCE_MASK:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation={NONE:0,SIGMOID:1,SOFTMAX:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getOutputType=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setOutputType=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearOutputType=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasOutputType=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getActivation=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setActivation=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearActivation=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasActivation=function(){return null!=t.Message.getField(this,2)},n.object.extend(e,proto.mediapipe.tasks.vision.image_segmenter.proto)}(segmenter_options_pb);var label_map_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.LabelMapItem",null,r),proto.mediapipe.LabelMapItem=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.LabelMapItem.repeatedFields_,null)},n.inherits(proto.mediapipe.LabelMapItem,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.LabelMapItem.displayName="proto.mediapipe.LabelMapItem"),proto.mediapipe.LabelMapItem.repeatedFields_=[3],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LabelMapItem.prototype.toObject=function(e){return proto.mediapipe.LabelMapItem.toObject(e,this)},proto.mediapipe.LabelMapItem.toObject=function(e,n){var r,a={name:null==(r=t.Message.getField(n,1))?void 0:r,displayName:null==(r=t.Message.getField(n,2))?void 0:r,childNameList:null==(r=t.Message.getRepeatedField(n,3))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.LabelMapItem.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.LabelMapItem;return proto.mediapipe.LabelMapItem.deserializeBinaryFromReader(r,n)},proto.mediapipe.LabelMapItem.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setName(n);break;case 2:n=t.readString(),e.setDisplayName(n);break;case 3:n=t.readString(),e.addChildName(n);break;default:t.skipField()}return e},proto.mediapipe.LabelMapItem.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.LabelMapItem.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.LabelMapItem.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),null!=(r=t.Message.getField(e,2))&&n.writeString(2,r),(r=e.getChildNameList()).length>0&&n.writeRepeatedString(3,r)},proto.mediapipe.LabelMapItem.prototype.getName=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.LabelMapItem.prototype.setName=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.LabelMapItem.prototype.clearName=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.LabelMapItem.prototype.hasName=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.LabelMapItem.prototype.getDisplayName=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.LabelMapItem.prototype.setDisplayName=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.LabelMapItem.prototype.clearDisplayName=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.LabelMapItem.prototype.hasDisplayName=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.LabelMapItem.prototype.getChildNameList=function(){return t.Message.getRepeatedField(this,3)},proto.mediapipe.LabelMapItem.prototype.setChildNameList=function(e){return t.Message.setField(this,3,e||[])},proto.mediapipe.LabelMapItem.prototype.addChildName=function(e,n){return t.Message.addToRepeatedField(this,3,e,n)},proto.mediapipe.LabelMapItem.prototype.clearChildNameList=function(){return this.setChildNameList([])},n.object.extend(e,proto.mediapipe)}(label_map_pb),function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_options_pb;n.object.extend(proto,a);var o=segmenter_options_pb;n.object.extend(proto,o);var i=label_map_pb;n.object.extend(proto,i),n.exportSymbol("proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions",null,r),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.displayName="proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject(e,this)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject=function(e,t){var n,r={segmenterOptions:(n=t.getSegmenterOptions())&&o.SegmenterOptions.toObject(e,n),labelItemsMap:(n=t.getLabelItemsMap())?n.toObject(e,proto.mediapipe.LabelMapItem.toObject):[]};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader=function(e,n){for(;n.nextField()&&!n.isEndGroup();)switch(n.getFieldNumber()){case 1:var r=new o.SegmenterOptions;n.readMessage(r,o.SegmenterOptions.deserializeBinaryFromReader),e.setSegmenterOptions(r);break;case 2:r=e.getLabelItemsMap(),n.readMessage(r,(function(e,n){t.Map.deserializeBinary(e,n,t.BinaryReader.prototype.readInt64,t.BinaryReader.prototype.readMessage,proto.mediapipe.LabelMapItem.deserializeBinaryFromReader,0,new proto.mediapipe.LabelMapItem)}));break;default:n.skipField()}return e},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getSegmenterOptions())&&n.writeMessage(1,r,o.SegmenterOptions.serializeBinaryToWriter),(r=e.getLabelItemsMap(!0))&&r.getLength()>0&&r.serializeBinary(2,n,t.BinaryWriter.prototype.writeInt64,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.LabelMapItem.serializeBinaryToWriter)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new t.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),a.CalculatorOptions.extensionsBinary[458105876]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getSegmenterOptions=function(){return t.Message.getWrapperField(this,o.SegmenterOptions,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.setSegmenterOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.hasSegmenterOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getLabelItemsMap=function(e){return t.Message.getMapField(this,2,e,proto.mediapipe.LabelMapItem)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearLabelItemsMap=function(){return this.getLabelItemsMap().clear(),this},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new t.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),a.CalculatorOptions.extensionsBinary[458105876]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),a.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,n.object.extend(e,proto.mediapipe.tasks)}(tensors_to_segmentation_calculator_pb);var image_segmenter_graph_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i);var s=segmenter_options_pb;n.object.extend(proto,s),n.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions",null,r),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject(e,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject=function(e,n){var r,a={baseOptions:(r=n.getBaseOptions())&&i.BaseOptions.toObject(e,r),displayNamesLocale:t.Message.getFieldWithDefault(n,2,"en"),segmenterOptions:(r=n.getSegmenterOptions())&&s.SegmenterOptions.toObject(e,r)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=t.readString(),e.setDisplayNamesLocale(n);break;case 3:n=new s.SegmenterOptions,t.readMessage(n,s.SegmenterOptions.deserializeBinaryFromReader),e.setSegmenterOptions(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getBaseOptions())&&n.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeString(2,r),null!=(r=e.getSegmenterOptions())&&n.writeMessage(3,r,s.SegmenterOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new t.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[458105758]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getDisplayNamesLocale=function(){return t.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setDisplayNamesLocale=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearDisplayNamesLocale=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasDisplayNamesLocale=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getSegmenterOptions=function(){return t.Message.getWrapperField(this,s.SegmenterOptions,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setSegmenterOptions=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasSegmenterOptions=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new t.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[458105758]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.image_segmenter.proto)}(image_segmenter_graph_options_pb);var image_segmenter_options={};Object.defineProperty(image_segmenter_options,"__esModule",{value:!0});var image_segmenter_result={};Object.defineProperty(image_segmenter_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.ImageSegmenter=void 0;var r=calculator_pb,a=calculator_options_pb,o=base_options_pb,i=tensors_to_segmentation_calculator_pb,s=image_segmenter_graph_options_pb,u=segmenter_options_pb,l=vision_task_runner;n(image_segmenter_options,e),n(image_segmenter_result,e);var p="image_in",c="norm_rect",d="confidence_masks",f="category_mask",g="mediapipe.tasks.TensorsToSegmentationCalculator",h=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new l.VisionGraphRunner(e,r),p,c,!1)).result={width:0,height:0},a.labels=[],a.outputCategoryMask=!1,a.outputConfidenceMasks=!0,a.options=new s.ImageSegmenterGraphOptions,a.segmenterOptions=new u.SegmenterOptions,a.options.setSegmenterOptions(a.segmenterOptions),a.options.setBaseOptions(new o.BaseOptions),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){var t,r;return void 0!==e.displayNamesLocale?this.options.setDisplayNamesLocale(e.displayNamesLocale):"displayNamesLocale"in e&&this.options.clearDisplayNamesLocale(),"outputCategoryMask"in e&&(this.outputCategoryMask=null!==(t=e.outputCategoryMask)&&void 0!==t&&t),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=null===(r=e.outputConfidenceMasks)||void 0===r||r),(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_8__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9__.Z)(n.prototype),"applyOptions",this).call(this,e)}},{key:"onGraphRefreshed",value:function(){this.populateLabels()}},{key:"populateLabels",value:function(){var e,t,n,r=this,a=this.getCalculatorGraphConfig().getNodeList().filter((function(e){return e.getName().includes(g)}));if(this.labels=[],a.length>1)throw new Error("The graph has more than one ".concat(g,"."));1===a.length&&(null!==(n=null===(t=null===(e=a[0].getOptions())||void 0===e?void 0:e.getExtension(i.TensorsToSegmentationCalculatorOptions.ext))||void 0===t?void 0:t.getLabelItemsMap())&&void 0!==n?n:new Map).forEach((function(e,t){r.labels[Number(t)]=e.getName()}))}},{key:"segment",value:function(e,t,n){var r="function"!=typeof t?t:{},a="function"==typeof t?t:n;this.reset(),this.processImageData(e,r),a(this.result)}},{key:"segmentForVideo",value:function(e,t,n,r){var a="number"!=typeof t?t:{},o="number"==typeof t?t:n,i="function"==typeof n?n:r;this.reset(),this.processVideoData(e,a,o),i(this.result)}},{key:"getLabels",value:function(){return this.labels}},{key:"reset",value:function(){this.result={width:0,height:0}}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(p),t.addInputStream(c);var n=new a.CalculatorOptions;n.setExtension(s.ImageSegmenterGraphOptions.ext,this.options);var o=new r.CalculatorGraphConfig.Node;o.setCalculator("mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),o.addInputStream("IMAGE:"+p),o.addInputStream("NORM_RECT:"+c),o.setOptions(n),t.addNode(o),this.outputConfidenceMasks&&(t.addOutputStream(d),o.addOutputStream("CONFIDENCE_MASKS:"+d),this.graphRunner.attachImageVectorListener(d,(function(t,n){e.result.confidenceMasks=t.map((function(e){return e.data})),t.length>=0&&(e.result.width=t[0].width,e.result.height=t[0].height),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(d,(function(t){e.setLatestOutputTimestamp(t)}))),this.outputCategoryMask&&(t.addOutputStream(f),o.addOutputStream("CATEGORY_MASK:"+f),this.graphRunner.attachImageListener(f,(function(t,n){e.result.categoryMask=t.data,e.result.width=t.width,e.result.height=t.height,e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(f,(function(t){e.setLatestOutputTimestamp(t)})));var i=t.serializeBinary();this.setGraph(new Uint8Array(i),!0)}}],[{key:"createFromOptions",value:function(e,t){return l.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return l.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(e,t){return l.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetPath:t}})}}]),n}(l.VisionTaskRunner);e.ImageSegmenter=h}(image_segmenter);var interactive_segmenter={},color_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.mediapipe.Color",null,r),n.exportSymbol("proto.mediapipe.ColorMap",null,r),proto.mediapipe.Color=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.Color,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.Color.displayName="proto.mediapipe.Color"),proto.mediapipe.ColorMap=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.ColorMap,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.ColorMap.displayName="proto.mediapipe.ColorMap"),t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Color.prototype.toObject=function(e){return proto.mediapipe.Color.toObject(e,this)},proto.mediapipe.Color.toObject=function(e,n){var r,a={r:null==(r=t.Message.getField(n,1))?void 0:r,g:null==(r=t.Message.getField(n,2))?void 0:r,b:null==(r=t.Message.getField(n,3))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.Color.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.Color;return proto.mediapipe.Color.deserializeBinaryFromReader(r,n)},proto.mediapipe.Color.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setR(n);break;case 2:n=t.readInt32(),e.setG(n);break;case 3:n=t.readInt32(),e.setB(n);break;default:t.skipField()}return e},proto.mediapipe.Color.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.Color.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.Color.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeInt32(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),null!=(r=t.Message.getField(e,3))&&n.writeInt32(3,r)},proto.mediapipe.Color.prototype.getR=function(){return t.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Color.prototype.setR=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.Color.prototype.clearR=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.Color.prototype.hasR=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.Color.prototype.getG=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Color.prototype.setG=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.Color.prototype.clearG=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.Color.prototype.hasG=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.Color.prototype.getB=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Color.prototype.setB=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.Color.prototype.clearB=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.Color.prototype.hasB=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ColorMap.prototype.toObject=function(e){return proto.mediapipe.ColorMap.toObject(e,this)},proto.mediapipe.ColorMap.toObject=function(e,t){var n,r={labelToColorMap:(n=t.getLabelToColorMap())?n.toObject(e,proto.mediapipe.Color.toObject):[]};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.ColorMap.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.ColorMap;return proto.mediapipe.ColorMap.deserializeBinaryFromReader(r,n)},proto.mediapipe.ColorMap.deserializeBinaryFromReader=function(e,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var r=e.getLabelToColorMap();n.readMessage(r,(function(e,n){t.Map.deserializeBinary(e,n,t.BinaryReader.prototype.readString,t.BinaryReader.prototype.readMessage,proto.mediapipe.Color.deserializeBinaryFromReader,"",new proto.mediapipe.Color)}))}else n.skipField();return e},proto.mediapipe.ColorMap.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.ColorMap.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.ColorMap.serializeBinaryToWriter=function(e,n){var r=void 0;(r=e.getLabelToColorMap(!0))&&r.getLength()>0&&r.serializeBinary(1,n,t.BinaryWriter.prototype.writeString,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.Color.serializeBinaryToWriter)},proto.mediapipe.ColorMap.prototype.getLabelToColorMap=function(e){return t.Message.getMapField(this,1,e,proto.mediapipe.Color)},proto.mediapipe.ColorMap.prototype.clearLabelToColorMap=function(){return this.getLabelToColorMap().clear(),this},n.object.extend(e,proto.mediapipe)}(color_pb);var render_data_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=color_pb;n.object.extend(proto,a),n.exportSymbol("proto.mediapipe.RenderAnnotation",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.Arrow",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.DataCase",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.FilledOval",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRectangle",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRoundedRectangle",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.GradientLine",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.Line",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.Line.LineType",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.Oval",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.Point",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.Rectangle",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.RoundedRectangle",null,r),n.exportSymbol("proto.mediapipe.RenderAnnotation.Text",null,r),n.exportSymbol("proto.mediapipe.RenderData",null,r),n.exportSymbol("proto.mediapipe.RenderViewport",null,r),proto.mediapipe.RenderData=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.RenderData.repeatedFields_,null)},n.inherits(proto.mediapipe.RenderData,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderData.displayName="proto.mediapipe.RenderData"),proto.mediapipe.RenderAnnotation=function(e){t.Message.initialize(this,e,0,-1,null,proto.mediapipe.RenderAnnotation.oneofGroups_)},n.inherits(proto.mediapipe.RenderAnnotation,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.displayName="proto.mediapipe.RenderAnnotation"),proto.mediapipe.RenderAnnotation.Rectangle=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.Rectangle,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Rectangle.displayName="proto.mediapipe.RenderAnnotation.Rectangle"),proto.mediapipe.RenderAnnotation.FilledRectangle=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.FilledRectangle,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRectangle"),proto.mediapipe.RenderAnnotation.RoundedRectangle=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.RoundedRectangle,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.RoundedRectangle"),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRoundedRectangle"),proto.mediapipe.RenderAnnotation.Oval=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.Oval,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Oval.displayName="proto.mediapipe.RenderAnnotation.Oval"),proto.mediapipe.RenderAnnotation.FilledOval=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.FilledOval,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledOval.displayName="proto.mediapipe.RenderAnnotation.FilledOval"),proto.mediapipe.RenderAnnotation.Point=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.Point,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Point.displayName="proto.mediapipe.RenderAnnotation.Point"),proto.mediapipe.RenderAnnotation.Line=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.Line,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Line.displayName="proto.mediapipe.RenderAnnotation.Line"),proto.mediapipe.RenderAnnotation.GradientLine=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.GradientLine,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.GradientLine.displayName="proto.mediapipe.RenderAnnotation.GradientLine"),proto.mediapipe.RenderAnnotation.Arrow=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.Arrow,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Arrow.displayName="proto.mediapipe.RenderAnnotation.Arrow"),proto.mediapipe.RenderAnnotation.Text=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderAnnotation.Text,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Text.displayName="proto.mediapipe.RenderAnnotation.Text"),proto.mediapipe.RenderViewport=function(e){t.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.mediapipe.RenderViewport,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.RenderViewport.displayName="proto.mediapipe.RenderViewport"),proto.mediapipe.RenderData.repeatedFields_=[1],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderData.prototype.toObject=function(e){return proto.mediapipe.RenderData.toObject(e,this)},proto.mediapipe.RenderData.toObject=function(e,n){var r,a={renderAnnotationsList:t.Message.toObjectList(n.getRenderAnnotationsList(),proto.mediapipe.RenderAnnotation.toObject,e),sceneClass:null==(r=t.Message.getField(n,2))?void 0:r,sceneViewport:(r=n.getSceneViewport())&&proto.mediapipe.RenderViewport.toObject(e,r)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.RenderData.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderData;return proto.mediapipe.RenderData.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderData.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.RenderAnnotation;t.readMessage(n,proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader),e.addRenderAnnotations(n);break;case 2:n=t.readString(),e.setSceneClass(n);break;case 3:n=new proto.mediapipe.RenderViewport,t.readMessage(n,proto.mediapipe.RenderViewport.deserializeBinaryFromReader),e.setSceneViewport(n);break;default:t.skipField()}return e},proto.mediapipe.RenderData.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderData.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderData.serializeBinaryToWriter=function(e,n){var r=void 0;(r=e.getRenderAnnotationsList()).length>0&&n.writeRepeatedMessage(1,r,proto.mediapipe.RenderAnnotation.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeString(2,r),null!=(r=e.getSceneViewport())&&n.writeMessage(3,r,proto.mediapipe.RenderViewport.serializeBinaryToWriter)},proto.mediapipe.RenderData.prototype.getRenderAnnotationsList=function(){return t.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation,1)},proto.mediapipe.RenderData.prototype.setRenderAnnotationsList=function(e){return t.Message.setRepeatedWrapperField(this,1,e)},proto.mediapipe.RenderData.prototype.addRenderAnnotations=function(e,n){return t.Message.addToRepeatedWrapperField(this,1,e,proto.mediapipe.RenderAnnotation,n)},proto.mediapipe.RenderData.prototype.clearRenderAnnotationsList=function(){return this.setRenderAnnotationsList([])},proto.mediapipe.RenderData.prototype.getSceneClass=function(){return t.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.RenderData.prototype.setSceneClass=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderData.prototype.clearSceneClass=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderData.prototype.hasSceneClass=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderData.prototype.getSceneViewport=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderViewport,3)},proto.mediapipe.RenderData.prototype.setSceneViewport=function(e){return t.Message.setWrapperField(this,3,e)},proto.mediapipe.RenderData.prototype.clearSceneViewport=function(){return this.setSceneViewport(void 0)},proto.mediapipe.RenderData.prototype.hasSceneViewport=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,14]],proto.mediapipe.RenderAnnotation.DataCase={DATA_NOT_SET:0,RECTANGLE:1,FILLED_RECTANGLE:2,OVAL:3,FILLED_OVAL:4,POINT:5,LINE:6,ARROW:7,TEXT:8,ROUNDED_RECTANGLE:9,FILLED_ROUNDED_RECTANGLE:10,GRADIENT_LINE:14},proto.mediapipe.RenderAnnotation.prototype.getDataCase=function(){return t.Message.computeOneofCase(this,proto.mediapipe.RenderAnnotation.oneofGroups_[0])},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.toObject(e,this)},proto.mediapipe.RenderAnnotation.toObject=function(e,n){var r,o={rectangle:(r=n.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,r),filledRectangle:(r=n.getFilledRectangle())&&proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(e,r),oval:(r=n.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(e,r),filledOval:(r=n.getFilledOval())&&proto.mediapipe.RenderAnnotation.FilledOval.toObject(e,r),point:(r=n.getPoint())&&proto.mediapipe.RenderAnnotation.Point.toObject(e,r),line:(r=n.getLine())&&proto.mediapipe.RenderAnnotation.Line.toObject(e,r),arrow:(r=n.getArrow())&&proto.mediapipe.RenderAnnotation.Arrow.toObject(e,r),text:(r=n.getText())&&proto.mediapipe.RenderAnnotation.Text.toObject(e,r),roundedRectangle:(r=n.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(e,r),filledRoundedRectangle:(r=n.getFilledRoundedRectangle())&&proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(e,r),gradientLine:(r=n.getGradientLine())&&proto.mediapipe.RenderAnnotation.GradientLine.toObject(e,r),thickness:t.Message.getFloatingPointFieldWithDefault(n,11,1),color:(r=n.getColor())&&a.Color.toObject(e,r),sceneTag:null==(r=t.Message.getField(n,13))?void 0:r};return e&&(o.$jspbMessageInstance=n),o}),proto.mediapipe.RenderAnnotation.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation;return proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.RenderAnnotation.Rectangle;t.readMessage(n,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),e.setRectangle(n);break;case 2:n=new proto.mediapipe.RenderAnnotation.FilledRectangle,t.readMessage(n,proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader),e.setFilledRectangle(n);break;case 3:n=new proto.mediapipe.RenderAnnotation.Oval,t.readMessage(n,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),e.setOval(n);break;case 4:n=new proto.mediapipe.RenderAnnotation.FilledOval,t.readMessage(n,proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader),e.setFilledOval(n);break;case 5:n=new proto.mediapipe.RenderAnnotation.Point,t.readMessage(n,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),e.setPoint(n);break;case 6:n=new proto.mediapipe.RenderAnnotation.Line,t.readMessage(n,proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader),e.setLine(n);break;case 7:n=new proto.mediapipe.RenderAnnotation.Arrow,t.readMessage(n,proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader),e.setArrow(n);break;case 8:n=new proto.mediapipe.RenderAnnotation.Text,t.readMessage(n,proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader),e.setText(n);break;case 9:n=new proto.mediapipe.RenderAnnotation.RoundedRectangle,t.readMessage(n,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),e.setRoundedRectangle(n);break;case 10:n=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,t.readMessage(n,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader),e.setFilledRoundedRectangle(n);break;case 14:n=new proto.mediapipe.RenderAnnotation.GradientLine,t.readMessage(n,proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader),e.setGradientLine(n);break;case 11:n=t.readDouble(),e.setThickness(n);break;case 12:n=new a.Color,t.readMessage(n,a.Color.deserializeBinaryFromReader),e.setColor(n);break;case 13:n=t.readString(),e.setSceneTag(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getRectangle())&&n.writeMessage(1,r,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),null!=(r=e.getFilledRectangle())&&n.writeMessage(2,r,proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter),null!=(r=e.getOval())&&n.writeMessage(3,r,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),null!=(r=e.getFilledOval())&&n.writeMessage(4,r,proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter),null!=(r=e.getPoint())&&n.writeMessage(5,r,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter),null!=(r=e.getLine())&&n.writeMessage(6,r,proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter),null!=(r=e.getArrow())&&n.writeMessage(7,r,proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter),null!=(r=e.getText())&&n.writeMessage(8,r,proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter),null!=(r=e.getRoundedRectangle())&&n.writeMessage(9,r,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),null!=(r=e.getFilledRoundedRectangle())&&n.writeMessage(10,r,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter),null!=(r=e.getGradientLine())&&n.writeMessage(14,r,proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter),null!=(r=t.Message.getField(e,11))&&n.writeDouble(11,r),null!=(r=e.getColor())&&n.writeMessage(12,r,a.Color.serializeBinaryToWriter),null!=(r=t.Message.getField(e,13))&&n.writeString(13,r)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Rectangle.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,this)},proto.mediapipe.RenderAnnotation.Rectangle.toObject=function(e,n){var r,a={left:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,top:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,right:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,bottom:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r,normalized:t.Message.getBooleanFieldWithDefault(n,5,!1),rotation:null==(r=t.Message.getOptionalFloatingPointField(n,6))?void 0:r,topLeftThickness:null==(r=t.Message.getOptionalFloatingPointField(n,7))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.Rectangle;return proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readDouble();e.setLeft(n);break;case 2:n=t.readDouble(),e.setTop(n);break;case 3:n=t.readDouble(),e.setRight(n);break;case 4:n=t.readDouble(),e.setBottom(n);break;case 5:n=t.readBool(),e.setNormalized(n);break;case 6:n=t.readDouble(),e.setRotation(n);break;case 7:n=t.readDouble(),e.setTopLeftThickness(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Rectangle.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeDouble(1,r),null!=(r=t.Message.getField(e,2))&&n.writeDouble(2,r),null!=(r=t.Message.getField(e,3))&&n.writeDouble(3,r),null!=(r=t.Message.getField(e,4))&&n.writeDouble(4,r),null!=(r=t.Message.getField(e,5))&&n.writeBool(5,r),null!=(r=t.Message.getField(e,6))&&n.writeDouble(6,r),null!=(r=t.Message.getField(e,7))&&n.writeDouble(7,r)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getLeft=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setLeft=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearLeft=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasLeft=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTop=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTop=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTop=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTop=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRight=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRight=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRight=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRight=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getBottom=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setBottom=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearBottom=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasBottom=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRotation=function(){return t.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRotation=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRotation=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRotation=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTopLeftThickness=function(){return t.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTopLeftThickness=function(e){return t.Message.setField(this,7,e)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTopLeftThickness=function(){return t.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTopLeftThickness=function(){return null!=t.Message.getField(this,7)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(e,this)},proto.mediapipe.RenderAnnotation.FilledRectangle.toObject=function(e,t){var n,r={rectangle:(n=t.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,n),fillColor:(n=t.getFillColor())&&a.Color.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.FilledRectangle;return proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.RenderAnnotation.Rectangle;t.readMessage(n,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),e.setRectangle(n);break;case 2:n=new a.Color,t.readMessage(n,a.Color.deserializeBinaryFromReader),e.setFillColor(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getRectangle())&&t.writeMessage(1,n,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),null!=(n=e.getFillColor())&&t.writeMessage(2,n,a.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setRectangle=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasRectangle=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getFillColor=function(){return t.Message.getWrapperField(this,a.Color,2)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setFillColor=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasFillColor=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(e,this)},proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject=function(e,n){var r,a={rectangle:(r=n.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,r),cornerRadius:t.Message.getFieldWithDefault(n,2,0),lineType:t.Message.getFieldWithDefault(n,3,4)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.RoundedRectangle;return proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.RenderAnnotation.Rectangle;t.readMessage(n,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),e.setRectangle(n);break;case 2:n=t.readInt32(),e.setCornerRadius(n);break;case 3:n=t.readInt32(),e.setLineType(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getRectangle())&&n.writeMessage(1,r,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),null!=(r=t.Message.getField(e,3))&&n.writeInt32(3,r)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setRectangle=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasRectangle=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getCornerRadius=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setCornerRadius=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearCornerRadius=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasCornerRadius=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getLineType=function(){return t.Message.getFieldWithDefault(this,3,4)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setLineType=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearLineType=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasLineType=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(e,this)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject=function(e,t){var n,r={roundedRectangle:(n=t.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(e,n),fillColor:(n=t.getFillColor())&&a.Color.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.RenderAnnotation.RoundedRectangle;t.readMessage(n,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),e.setRoundedRectangle(n);break;case 2:n=new a.Color,t.readMessage(n,a.Color.deserializeBinaryFromReader),e.setFillColor(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getRoundedRectangle())&&t.writeMessage(1,n,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),null!=(n=e.getFillColor())&&t.writeMessage(2,n,a.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getRoundedRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setRoundedRectangle=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasRoundedRectangle=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getFillColor=function(){return t.Message.getWrapperField(this,a.Color,2)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setFillColor=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasFillColor=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Oval.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Oval.toObject(e,this)},proto.mediapipe.RenderAnnotation.Oval.toObject=function(e,t){var n,r={rectangle:(n=t.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.RenderAnnotation.Oval.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.Oval;return proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.mediapipe.RenderAnnotation.Rectangle;t.readMessage(n,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),e.setRectangle(n)}else t.skipField();return e},proto.mediapipe.RenderAnnotation.Oval.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter=function(e,t){var n;null!=(n=e.getRectangle())&&t.writeMessage(1,n,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Oval.prototype.getRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.Oval.prototype.setRectangle=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.Oval.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.Oval.prototype.hasRectangle=function(){return null!=t.Message.getField(this,1)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledOval.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.FilledOval.toObject(e,this)},proto.mediapipe.RenderAnnotation.FilledOval.toObject=function(e,t){var n,r={oval:(n=t.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(e,n),fillColor:(n=t.getFillColor())&&a.Color.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.FilledOval;return proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.mediapipe.RenderAnnotation.Oval;t.readMessage(n,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),e.setOval(n);break;case 2:n=new a.Color,t.readMessage(n,a.Color.deserializeBinaryFromReader),e.setFillColor(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.FilledOval.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getOval())&&t.writeMessage(1,n,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),null!=(n=e.getFillColor())&&t.writeMessage(2,n,a.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getOval=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setOval=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasOval=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getFillColor=function(){return t.Message.getWrapperField(this,a.Color,2)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setFillColor=function(e){return t.Message.setWrapperField(this,2,e)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasFillColor=function(){return null!=t.Message.getField(this,2)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Point.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Point.toObject(e,this)},proto.mediapipe.RenderAnnotation.Point.toObject=function(e,n){var r,a={x:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,y:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,normalized:t.Message.getBooleanFieldWithDefault(n,3,!1)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.RenderAnnotation.Point.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.Point;return proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readDouble();e.setX(n);break;case 2:n=t.readDouble(),e.setY(n);break;case 3:n=t.readBool(),e.setNormalized(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Point.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeDouble(1,r),null!=(r=t.Message.getField(e,2))&&n.writeDouble(2,r),null!=(r=t.Message.getField(e,3))&&n.writeBool(3,r)},proto.mediapipe.RenderAnnotation.Point.prototype.getX=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setX=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Point.prototype.clearX=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasX=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Point.prototype.getY=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setY=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Point.prototype.clearY=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasY=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Point.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.RenderAnnotation.Point.prototype.setNormalized=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Point.prototype.clearNormalized=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasNormalized=function(){return null!=t.Message.getField(this,3)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Line.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Line.toObject(e,this)},proto.mediapipe.RenderAnnotation.Line.toObject=function(e,n){var r,a={xStart:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,yStart:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,xEnd:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,yEnd:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r,normalized:t.Message.getBooleanFieldWithDefault(n,5,!1),lineType:t.Message.getFieldWithDefault(n,6,1)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.RenderAnnotation.Line.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.Line;return proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readDouble();e.setXStart(n);break;case 2:n=t.readDouble(),e.setYStart(n);break;case 3:n=t.readDouble(),e.setXEnd(n);break;case 4:n=t.readDouble(),e.setYEnd(n);break;case 5:n=t.readBool(),e.setNormalized(n);break;case 6:n=t.readEnum(),e.setLineType(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Line.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeDouble(1,r),null!=(r=t.Message.getField(e,2))&&n.writeDouble(2,r),null!=(r=t.Message.getField(e,3))&&n.writeDouble(3,r),null!=(r=t.Message.getField(e,4))&&n.writeDouble(4,r),null!=(r=t.Message.getField(e,5))&&n.writeBool(5,r),null!=(r=t.Message.getField(e,6))&&n.writeEnum(6,r)},proto.mediapipe.RenderAnnotation.Line.LineType={UNKNOWN:0,SOLID:1,DASHED:2},proto.mediapipe.RenderAnnotation.Line.prototype.getXStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXStart=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXStart=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXStart=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Line.prototype.getYStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYStart=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYStart=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYStart=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Line.prototype.getXEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXEnd=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXEnd=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXEnd=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.Line.prototype.getYEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYEnd=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYEnd=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYEnd=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.Line.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Line.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.Line.prototype.getLineType=function(){return t.Message.getFieldWithDefault(this,6,1)},proto.mediapipe.RenderAnnotation.Line.prototype.setLineType=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.RenderAnnotation.Line.prototype.clearLineType=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasLineType=function(){return null!=t.Message.getField(this,6)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.GradientLine.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.GradientLine.toObject(e,this)},proto.mediapipe.RenderAnnotation.GradientLine.toObject=function(e,n){var r,o={xStart:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,yStart:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,xEnd:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,yEnd:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r,normalized:t.Message.getBooleanFieldWithDefault(n,5,!1),color1:(r=n.getColor1())&&a.Color.toObject(e,r),color2:(r=n.getColor2())&&a.Color.toObject(e,r)};return e&&(o.$jspbMessageInstance=n),o}),proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.GradientLine;return proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readDouble();e.setXStart(n);break;case 2:n=t.readDouble(),e.setYStart(n);break;case 3:n=t.readDouble(),e.setXEnd(n);break;case 4:n=t.readDouble(),e.setYEnd(n);break;case 5:n=t.readBool(),e.setNormalized(n);break;case 6:n=new a.Color,t.readMessage(n,a.Color.deserializeBinaryFromReader),e.setColor1(n);break;case 7:n=new a.Color,t.readMessage(n,a.Color.deserializeBinaryFromReader),e.setColor2(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.GradientLine.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeDouble(1,r),null!=(r=t.Message.getField(e,2))&&n.writeDouble(2,r),null!=(r=t.Message.getField(e,3))&&n.writeDouble(3,r),null!=(r=t.Message.getField(e,4))&&n.writeDouble(4,r),null!=(r=t.Message.getField(e,5))&&n.writeBool(5,r),null!=(r=e.getColor1())&&n.writeMessage(6,r,a.Color.serializeBinaryToWriter),null!=(r=e.getColor2())&&n.writeMessage(7,r,a.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXStart=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXStart=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXStart=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYStart=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYStart=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYStart=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXEnd=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXEnd=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXEnd=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYEnd=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYEnd=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYEnd=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor1=function(){return t.Message.getWrapperField(this,a.Color,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor1=function(e){return t.Message.setWrapperField(this,6,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor1=function(){return this.setColor1(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor1=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor2=function(){return t.Message.getWrapperField(this,a.Color,7)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor2=function(e){return t.Message.setWrapperField(this,7,e)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor2=function(){return this.setColor2(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor2=function(){return null!=t.Message.getField(this,7)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Arrow.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Arrow.toObject(e,this)},proto.mediapipe.RenderAnnotation.Arrow.toObject=function(e,n){var r,a={xStart:null==(r=t.Message.getOptionalFloatingPointField(n,1))?void 0:r,yStart:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,xEnd:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,yEnd:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r,normalized:t.Message.getBooleanFieldWithDefault(n,5,!1)};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.RenderAnnotation.Arrow.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.Arrow;return proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readDouble();e.setXStart(n);break;case 2:n=t.readDouble(),e.setYStart(n);break;case 3:n=t.readDouble(),e.setXEnd(n);break;case 4:n=t.readDouble(),e.setYEnd(n);break;case 5:n=t.readBool(),e.setNormalized(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Arrow.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeDouble(1,r),null!=(r=t.Message.getField(e,2))&&n.writeDouble(2,r),null!=(r=t.Message.getField(e,3))&&n.writeDouble(3,r),null!=(r=t.Message.getField(e,4))&&n.writeDouble(4,r),null!=(r=t.Message.getField(e,5))&&n.writeBool(5,r)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXStart=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXStart=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXStart=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYStart=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYStart=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYStart=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYStart=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXEnd=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXEnd=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXEnd=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYEnd=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYEnd=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYEnd=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYEnd=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Text.prototype.toObject=function(e){return proto.mediapipe.RenderAnnotation.Text.toObject(e,this)},proto.mediapipe.RenderAnnotation.Text.toObject=function(e,n){var r,o={displayText:null==(r=t.Message.getField(n,1))?void 0:r,left:null==(r=t.Message.getOptionalFloatingPointField(n,2))?void 0:r,baseline:null==(r=t.Message.getOptionalFloatingPointField(n,3))?void 0:r,fontHeight:t.Message.getFloatingPointFieldWithDefault(n,4,8),normalized:t.Message.getBooleanFieldWithDefault(n,5,!1),fontFace:t.Message.getFieldWithDefault(n,6,0),centerHorizontally:t.Message.getBooleanFieldWithDefault(n,7,!1),centerVertically:t.Message.getBooleanFieldWithDefault(n,8,!1),outlineThickness:t.Message.getFloatingPointFieldWithDefault(n,11,0),outlineColor:(r=n.getOutlineColor())&&a.Color.toObject(e,r)};return e&&(o.$jspbMessageInstance=n),o}),proto.mediapipe.RenderAnnotation.Text.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderAnnotation.Text;return proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setDisplayText(n);break;case 2:n=t.readDouble(),e.setLeft(n);break;case 3:n=t.readDouble(),e.setBaseline(n);break;case 4:n=t.readDouble(),e.setFontHeight(n);break;case 5:n=t.readBool(),e.setNormalized(n);break;case 6:n=t.readInt32(),e.setFontFace(n);break;case 7:n=t.readBool(),e.setCenterHorizontally(n);break;case 8:n=t.readBool(),e.setCenterVertically(n);break;case 11:n=t.readDouble(),e.setOutlineThickness(n);break;case 12:n=new a.Color,t.readMessage(n,a.Color.deserializeBinaryFromReader),e.setOutlineColor(n);break;default:t.skipField()}return e},proto.mediapipe.RenderAnnotation.Text.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),null!=(r=t.Message.getField(e,2))&&n.writeDouble(2,r),null!=(r=t.Message.getField(e,3))&&n.writeDouble(3,r),null!=(r=t.Message.getField(e,4))&&n.writeDouble(4,r),null!=(r=t.Message.getField(e,5))&&n.writeBool(5,r),null!=(r=t.Message.getField(e,6))&&n.writeInt32(6,r),null!=(r=t.Message.getField(e,7))&&n.writeBool(7,r),null!=(r=t.Message.getField(e,8))&&n.writeBool(8,r),null!=(r=t.Message.getField(e,11))&&n.writeDouble(11,r),null!=(r=e.getOutlineColor())&&n.writeMessage(12,r,a.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Text.prototype.getDisplayText=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderAnnotation.Text.prototype.setDisplayText=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearDisplayText=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasDisplayText=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.Text.prototype.getLeft=function(){return t.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setLeft=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearLeft=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasLeft=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.Text.prototype.getBaseline=function(){return t.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setBaseline=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearBaseline=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasBaseline=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.Text.prototype.getFontHeight=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,8)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontHeight=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontHeight=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontHeight=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.Text.prototype.getNormalized=function(){return t.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setNormalized=function(e){return t.Message.setField(this,5,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearNormalized=function(){return t.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasNormalized=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.Text.prototype.getFontFace=function(){return t.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontFace=function(e){return t.Message.setField(this,6,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontFace=function(){return t.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontFace=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterHorizontally=function(){return t.Message.getBooleanFieldWithDefault(this,7,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterHorizontally=function(e){return t.Message.setField(this,7,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterHorizontally=function(){return t.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterHorizontally=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterVertically=function(){return t.Message.getBooleanFieldWithDefault(this,8,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterVertically=function(e){return t.Message.setField(this,8,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterVertically=function(){return t.Message.setField(this,8,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterVertically=function(){return null!=t.Message.getField(this,8)},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineThickness=function(){return t.Message.getFloatingPointFieldWithDefault(this,11,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineThickness=function(e){return t.Message.setField(this,11,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineThickness=function(){return t.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineThickness=function(){return null!=t.Message.getField(this,11)},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineColor=function(){return t.Message.getWrapperField(this,a.Color,12)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineColor=function(e){return t.Message.setWrapperField(this,12,e)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineColor=function(){return this.setOutlineColor(void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineColor=function(){return null!=t.Message.getField(this,12)},proto.mediapipe.RenderAnnotation.prototype.getRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.prototype.setRectangle=function(e){return t.Message.setOneofWrapperField(this,1,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRectangle=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderAnnotation.prototype.getFilledRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRectangle,2)},proto.mediapipe.RenderAnnotation.prototype.setFilledRectangle=function(e){return t.Message.setOneofWrapperField(this,2,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRectangle=function(){return this.setFilledRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRectangle=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderAnnotation.prototype.getOval=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,3)},proto.mediapipe.RenderAnnotation.prototype.setOval=function(e){return t.Message.setOneofWrapperField(this,3,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasOval=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderAnnotation.prototype.getFilledOval=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledOval,4)},proto.mediapipe.RenderAnnotation.prototype.setFilledOval=function(e){return t.Message.setOneofWrapperField(this,4,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearFilledOval=function(){return this.setFilledOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledOval=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.RenderAnnotation.prototype.getPoint=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Point,5)},proto.mediapipe.RenderAnnotation.prototype.setPoint=function(e){return t.Message.setOneofWrapperField(this,5,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearPoint=function(){return this.setPoint(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasPoint=function(){return null!=t.Message.getField(this,5)},proto.mediapipe.RenderAnnotation.prototype.getLine=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Line,6)},proto.mediapipe.RenderAnnotation.prototype.setLine=function(e){return t.Message.setOneofWrapperField(this,6,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearLine=function(){return this.setLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasLine=function(){return null!=t.Message.getField(this,6)},proto.mediapipe.RenderAnnotation.prototype.getArrow=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Arrow,7)},proto.mediapipe.RenderAnnotation.prototype.setArrow=function(e){return t.Message.setOneofWrapperField(this,7,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearArrow=function(){return this.setArrow(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasArrow=function(){return null!=t.Message.getField(this,7)},proto.mediapipe.RenderAnnotation.prototype.getText=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Text,8)},proto.mediapipe.RenderAnnotation.prototype.setText=function(e){return t.Message.setOneofWrapperField(this,8,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearText=function(){return this.setText(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasText=function(){return null!=t.Message.getField(this,8)},proto.mediapipe.RenderAnnotation.prototype.getRoundedRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,9)},proto.mediapipe.RenderAnnotation.prototype.setRoundedRectangle=function(e){return t.Message.setOneofWrapperField(this,9,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRoundedRectangle=function(){return null!=t.Message.getField(this,9)},proto.mediapipe.RenderAnnotation.prototype.getFilledRoundedRectangle=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,10)},proto.mediapipe.RenderAnnotation.prototype.setFilledRoundedRectangle=function(e){return t.Message.setOneofWrapperField(this,10,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRoundedRectangle=function(){return this.setFilledRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRoundedRectangle=function(){return null!=t.Message.getField(this,10)},proto.mediapipe.RenderAnnotation.prototype.getGradientLine=function(){return t.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.GradientLine,14)},proto.mediapipe.RenderAnnotation.prototype.setGradientLine=function(e){return t.Message.setOneofWrapperField(this,14,proto.mediapipe.RenderAnnotation.oneofGroups_[0],e)},proto.mediapipe.RenderAnnotation.prototype.clearGradientLine=function(){return this.setGradientLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasGradientLine=function(){return null!=t.Message.getField(this,14)},proto.mediapipe.RenderAnnotation.prototype.getThickness=function(){return t.Message.getFloatingPointFieldWithDefault(this,11,1)},proto.mediapipe.RenderAnnotation.prototype.setThickness=function(e){return t.Message.setField(this,11,e)},proto.mediapipe.RenderAnnotation.prototype.clearThickness=function(){return t.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasThickness=function(){return null!=t.Message.getField(this,11)},proto.mediapipe.RenderAnnotation.prototype.getColor=function(){return t.Message.getWrapperField(this,a.Color,12)},proto.mediapipe.RenderAnnotation.prototype.setColor=function(e){return t.Message.setWrapperField(this,12,e)},proto.mediapipe.RenderAnnotation.prototype.clearColor=function(){return this.setColor(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasColor=function(){return null!=t.Message.getField(this,12)},proto.mediapipe.RenderAnnotation.prototype.getSceneTag=function(){return t.Message.getFieldWithDefault(this,13,"")},proto.mediapipe.RenderAnnotation.prototype.setSceneTag=function(e){return t.Message.setField(this,13,e)},proto.mediapipe.RenderAnnotation.prototype.clearSceneTag=function(){return t.Message.setField(this,13,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasSceneTag=function(){return null!=t.Message.getField(this,13)},t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderViewport.prototype.toObject=function(e){return proto.mediapipe.RenderViewport.toObject(e,this)},proto.mediapipe.RenderViewport.toObject=function(e,n){var r,a={id:null==(r=t.Message.getField(n,1))?void 0:r,widthPx:null==(r=t.Message.getField(n,2))?void 0:r,heightPx:null==(r=t.Message.getField(n,3))?void 0:r,composeOnVideo:null==(r=t.Message.getBooleanField(n,4))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.RenderViewport.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.RenderViewport;return proto.mediapipe.RenderViewport.deserializeBinaryFromReader(r,n)},proto.mediapipe.RenderViewport.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setId(n);break;case 2:n=t.readInt32(),e.setWidthPx(n);break;case 3:n=t.readInt32(),e.setHeightPx(n);break;case 4:n=t.readBool(),e.setComposeOnVideo(n);break;default:t.skipField()}return e},proto.mediapipe.RenderViewport.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.RenderViewport.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.RenderViewport.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=t.Message.getField(e,1))&&n.writeString(1,r),null!=(r=t.Message.getField(e,2))&&n.writeInt32(2,r),null!=(r=t.Message.getField(e,3))&&n.writeInt32(3,r),null!=(r=t.Message.getField(e,4))&&n.writeBool(4,r)},proto.mediapipe.RenderViewport.prototype.getId=function(){return t.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderViewport.prototype.setId=function(e){return t.Message.setField(this,1,e)},proto.mediapipe.RenderViewport.prototype.clearId=function(){return t.Message.setField(this,1,void 0)},proto.mediapipe.RenderViewport.prototype.hasId=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.RenderViewport.prototype.getWidthPx=function(){return t.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderViewport.prototype.setWidthPx=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.RenderViewport.prototype.clearWidthPx=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.RenderViewport.prototype.hasWidthPx=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.RenderViewport.prototype.getHeightPx=function(){return t.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.RenderViewport.prototype.setHeightPx=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.RenderViewport.prototype.clearHeightPx=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.RenderViewport.prototype.hasHeightPx=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.RenderViewport.prototype.getComposeOnVideo=function(){return t.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.RenderViewport.prototype.setComposeOnVideo=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.RenderViewport.prototype.clearComposeOnVideo=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.RenderViewport.prototype.hasComposeOnVideo=function(){return null!=t.Message.getField(this,4)},n.object.extend(e,proto.mediapipe)}(render_data_pb);var interactive_segmenter_options={};Object.defineProperty(interactive_segmenter_options,"__esModule",{value:!0});var interactive_segmenter_result={};Object.defineProperty(interactive_segmenter_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.InteractiveSegmenter=void 0;var r=calculator_pb,a=calculator_options_pb,o=base_options_pb,i=image_segmenter_graph_options_pb,s=segmenter_options_pb,u=vision_task_runner,l=color_pb,p=render_data_pb;n(interactive_segmenter_options,e),n(interactive_segmenter_result,e);var c="image_in",d="norm_rect_in",f="roi_in",g="confidence_masks",h="category_mask",m=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new u.VisionGraphRunner(e,r),c,d,!1)).result={width:0,height:0},a.outputCategoryMask=!1,a.outputConfidenceMasks=!0,a.options=new i.ImageSegmenterGraphOptions,a.segmenterOptions=new s.SegmenterOptions,a.options.setSegmenterOptions(a.segmenterOptions),a.options.setBaseOptions(new o.BaseOptions),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){var t,r;return"outputCategoryMask"in e&&(this.outputCategoryMask=null!==(t=e.outputCategoryMask)&&void 0!==t&&t),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=null===(r=e.outputConfidenceMasks)||void 0===r||r),(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_8__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_9__.Z)(n.prototype),"applyOptions",this).call(this,e)}},{key:"segment",value:function(e,t,n,r){var a="function"!=typeof n?n:{},o="function"==typeof n?n:r;this.reset(),this.processRenderData(t,this.getSynctheticTimestamp()),this.processImageData(e,a),o(this.result)}},{key:"reset",value:function(){this.result={width:0,height:0}}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(c),t.addInputStream(f),t.addInputStream(d);var n=new a.CalculatorOptions;n.setExtension(i.ImageSegmenterGraphOptions.ext,this.options);var o=new r.CalculatorGraphConfig.Node;o.setCalculator("mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),o.addInputStream("IMAGE:"+c),o.addInputStream("ROI:"+f),o.addInputStream("NORM_RECT:"+d),o.setOptions(n),t.addNode(o),this.outputConfidenceMasks&&(t.addOutputStream(g),o.addOutputStream("CONFIDENCE_MASKS:"+g),this.graphRunner.attachImageVectorListener(g,(function(t,n){e.result.confidenceMasks=t.map((function(e){return e.data})),t.length>=0&&(e.result.width=t[0].width,e.result.height=t[0].height),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(g,(function(t){e.setLatestOutputTimestamp(t)}))),this.outputCategoryMask&&(t.addOutputStream(h),o.addOutputStream("CATEGORY_MASK:"+h),this.graphRunner.attachImageListener(h,(function(t,n){e.result.categoryMask=t.data,e.result.width=t.width,e.result.height=t.height,e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(h,(function(t){e.setLatestOutputTimestamp(t)})));var s=t.serializeBinary();this.setGraph(new Uint8Array(s),!0)}},{key:"processRenderData",value:function(e,t){var n=new p.RenderData,r=new p.RenderAnnotation,a=new l.Color;a.setR(255),r.setColor(a);var o=new p.RenderAnnotation.Point;o.setNormalized(!0),o.setX(e.keypoint.x),o.setY(e.keypoint.y),r.setPoint(o),n.addRenderAnnotations(r),this.graphRunner.addProtoToStream(n.serializeBinary(),"drishti.RenderData",f,t)}}],[{key:"createFromOptions",value:function(e,t){return u.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return u.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(e,t){return u.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetPath:t}})}}]),n}(u.VisionTaskRunner);e.InteractiveSegmenter=m}(interactive_segmenter);var object_detector={},object_detector_options_pb={};!function(e){var t=googleProtobuf,n=t,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==r&&r||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),a=calculator_pb;n.object.extend(proto,a);var o=calculator_options_pb;n.object.extend(proto,o);var i=base_options_pb;n.object.extend(proto,i),n.exportSymbol("proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions",null,r),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions=function(e){t.Message.initialize(this,e,0,-1,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_,null)},n.inherits(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,t.Message),n.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.displayName="proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions"),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_=[5,6],t.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.toObject=function(e){return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject(e,this)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject=function(e,n){var r,a={baseOptions:(r=n.getBaseOptions())&&i.BaseOptions.toObject(e,r),displayNamesLocale:t.Message.getFieldWithDefault(n,2,"en"),maxResults:t.Message.getFieldWithDefault(n,3,-1),scoreThreshold:null==(r=t.Message.getOptionalFloatingPointField(n,4))?void 0:r,categoryAllowlistList:null==(r=t.Message.getRepeatedField(n,5))?void 0:r,categoryDenylistList:null==(r=t.Message.getRepeatedField(n,6))?void 0:r};return e&&(a.$jspbMessageInstance=n),a}),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinary=function(e){var n=new t.BinaryReader(e),r=new proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader(r,n)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.BaseOptions;t.readMessage(n,i.BaseOptions.deserializeBinaryFromReader),e.setBaseOptions(n);break;case 2:n=t.readString(),e.setDisplayNamesLocale(n);break;case 3:n=t.readInt32(),e.setMaxResults(n);break;case 4:n=t.readFloat(),e.setScoreThreshold(n);break;case 5:n=t.readString(),e.addCategoryAllowlist(n);break;case 6:n=t.readString(),e.addCategoryDenylist(n);break;default:t.skipField()}return e},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.serializeBinary=function(){var e=new t.BinaryWriter;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter=function(e,n){var r=void 0;null!=(r=e.getBaseOptions())&&n.writeMessage(1,r,i.BaseOptions.serializeBinaryToWriter),null!=(r=t.Message.getField(e,2))&&n.writeString(2,r),null!=(r=t.Message.getField(e,3))&&n.writeInt32(3,r),null!=(r=t.Message.getField(e,4))&&n.writeFloat(4,r),(r=e.getCategoryAllowlistList()).length>0&&n.writeRepeatedString(5,r),(r=e.getCategoryDenylistList()).length>0&&n.writeRepeatedString(6,r)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new t.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[443442058]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getBaseOptions=function(){return t.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setBaseOptions=function(e){return t.Message.setWrapperField(this,1,e)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasBaseOptions=function(){return null!=t.Message.getField(this,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getDisplayNamesLocale=function(){return t.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setDisplayNamesLocale=function(e){return t.Message.setField(this,2,e)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearDisplayNamesLocale=function(){return t.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasDisplayNamesLocale=function(){return null!=t.Message.getField(this,2)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getMaxResults=function(){return t.Message.getFieldWithDefault(this,3,-1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setMaxResults=function(e){return t.Message.setField(this,3,e)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearMaxResults=function(){return t.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasMaxResults=function(){return null!=t.Message.getField(this,3)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getScoreThreshold=function(){return t.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setScoreThreshold=function(e){return t.Message.setField(this,4,e)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearScoreThreshold=function(){return t.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasScoreThreshold=function(){return null!=t.Message.getField(this,4)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryAllowlistList=function(){return t.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryAllowlistList=function(e){return t.Message.setField(this,5,e||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryAllowlist=function(e,n){return t.Message.addToRepeatedField(this,5,e,n)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryDenylistList=function(){return t.Message.getRepeatedField(this,6)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryDenylistList=function(e){return t.Message.setField(this,6,e||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryDenylist=function(e,n){return t.Message.addToRepeatedField(this,6,e,n)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new t.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[443442058]=new t.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,t.BinaryReader.prototype.readMessage,t.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,n.object.extend(e,proto.mediapipe.tasks.vision.object_detector.proto)}(object_detector_options_pb);var object_detector_options={};Object.defineProperty(object_detector_options,"__esModule",{value:!0});var object_detector_result={};Object.defineProperty(object_detector_result,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectDetector=void 0;var r=calculator_pb,a=calculator_options_pb,o=detection_pb,i=base_options_pb,s=object_detector_options_pb,u=detection_result,l=vision_task_runner,p="input_frame_gpu",c="norm_rect",d="detections";n(object_detector_options,e),n(object_detector_result,e);var f=function(e){(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__.Z)(n,e);var t=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__.Z)(n);function n(e,r){var a;return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__.Z)(this,n),(a=t.call(this,new l.VisionGraphRunner(e,r),p,c,!1)).result={detections:[]},a.options=new s.ObjectDetectorOptions,a.options.setBaseOptions(new i.BaseOptions),a}return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__.Z)(n,[{key:"baseOptions",get:function(){return this.options.getBaseOptions()},set:function(e){this.options.setBaseOptions(e)}},{key:"setOptions",value:function(e){return void 0!==e.displayNamesLocale?this.options.setDisplayNamesLocale(e.displayNamesLocale):"displayNamesLocale"in e&&this.options.clearDisplayNamesLocale(),void 0!==e.maxResults?this.options.setMaxResults(e.maxResults):"maxResults"in e&&this.options.clearMaxResults(),void 0!==e.scoreThreshold?this.options.setScoreThreshold(e.scoreThreshold):"scoreThreshold"in e&&this.options.clearScoreThreshold(),void 0!==e.categoryAllowlist?this.options.setCategoryAllowlistList(e.categoryAllowlist):"categoryAllowlist"in e&&this.options.clearCategoryAllowlistList(),void 0!==e.categoryDenylist?this.options.setCategoryDenylistList(e.categoryDenylist):"categoryDenylist"in e&&this.options.clearCategoryDenylistList(),this.applyOptions(e)}},{key:"detect",value:function(e,t){return this.result={detections:[]},this.processImageData(e,t),this.result}},{key:"detectForVideo",value:function(e,t,n){return this.result={detections:[]},this.processVideoData(e,n,t),this.result}},{key:"addJsObjectDetections",value:function(e){var t,n=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_4__.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=o.Detection.deserializeBinary(r);this.result.detections.push((0,u.convertFromDetectionProto)(a))}}catch(i){n.e(i)}finally{n.f()}}},{key:"refreshGraph",value:function(){var e=this,t=new r.CalculatorGraphConfig;t.addInputStream(p),t.addInputStream(c),t.addOutputStream(d);var n=new a.CalculatorOptions;n.setExtension(s.ObjectDetectorOptions.ext,this.options);var o=new r.CalculatorGraphConfig.Node;o.setCalculator("mediapipe.tasks.vision.ObjectDetectorGraph"),o.addInputStream("IMAGE:"+p),o.addInputStream("NORM_RECT:"+c),o.addOutputStream("DETECTIONS:"+d),o.setOptions(n),t.addNode(o),this.graphRunner.attachProtoVectorListener(d,(function(t,n){e.addJsObjectDetections(t),e.setLatestOutputTimestamp(n)})),this.graphRunner.attachEmptyPacketListener(d,(function(t){e.setLatestOutputTimestamp(t)}));var i=t.serializeBinary();this.setGraph(new Uint8Array(i),!0)}}],[{key:"createFromOptions",value:function(e,t){return l.VisionTaskRunner.createVisionInstance(n,e,t)}},{key:"createFromModelBuffer",value:function(e,t){return l.VisionTaskRunner.createVisionInstance(n,e,{baseOptions:{modelAssetBuffer:t}})}},{key:"createFromModelPath",value:function(){var e=(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().mark((function e(t,r){return(0,F_Programmng_React_Landing_Page_Template_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.VisionTaskRunner.createVisionInstance(n,t,{baseOptions:{modelAssetPath:r}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(l.VisionTaskRunner);e.ObjectDetector=f}(object_detector),Object.defineProperty(vision,"__esModule",{value:!0});var ObjectDetector_1=vision.ObjectDetector=InteractiveSegmenter_1=vision.InteractiveSegmenter=ImageSegmenter_1=vision.ImageSegmenter=ImageEmbedder_1=vision.ImageEmbedder=ImageClassifier_1=vision.ImageClassifier=HandLandmarker_1=vision.HandLandmarker=GestureRecognizer_1=vision.GestureRecognizer=FaceStylizer_1=vision.FaceStylizer=FaceLandmarksConnections_1=vision.FaceLandmarksConnections=FaceLandmarker_1=vision.FaceLandmarker=FaceDetector_1=vision.FaceDetector=FilesetResolver_1=vision.FilesetResolver=DrawingUtils_1=vision.DrawingUtils=void 0,fileset_resolver_1=fileset_resolver,drawing_utils_1=drawing_utils,face_detector_1=face_detector,face_landmarker_1=face_landmarker,face_stylizer_1=face_stylizer,gesture_recognizer_1=gesture_recognizer,hand_landmarker_1=hand_landmarker,image_classifier_1=image_classifier,image_embedder_1=image_embedder,image_segmenter_1=image_segmenter,interactive_segmenter_1=interactive_segmenter,object_detector_1=object_detector,DrawingUtils=drawing_utils_1.DrawingUtils,DrawingUtils_1=vision.DrawingUtils=DrawingUtils,FilesetResolver=fileset_resolver_1.FilesetResolver,FilesetResolver_1=vision.FilesetResolver=FilesetResolver,FaceDetector=face_detector_1.FaceDetector,FaceDetector_1=vision.FaceDetector=FaceDetector,FaceLandmarker=face_landmarker_1.FaceLandmarker,FaceLandmarker_1=vision.FaceLandmarker=FaceLandmarker,FaceLandmarksConnections=face_landmarker_1.FaceLandmarksConnections,FaceLandmarksConnections_1=vision.FaceLandmarksConnections=FaceLandmarksConnections,FaceStylizer=face_stylizer_1.FaceStylizer,FaceStylizer_1=vision.FaceStylizer=FaceStylizer,GestureRecognizer=gesture_recognizer_1.GestureRecognizer,GestureRecognizer_1=vision.GestureRecognizer=GestureRecognizer,HandLandmarker=hand_landmarker_1.HandLandmarker,HandLandmarker_1=vision.HandLandmarker=HandLandmarker,ImageClassifier=image_classifier_1.ImageClassifier,ImageClassifier_1=vision.ImageClassifier=ImageClassifier,ImageEmbedder=image_embedder_1.ImageEmbedder,ImageEmbedder_1=vision.ImageEmbedder=ImageEmbedder,ImageSegmenter=image_segmenter_1.ImageSegmenter,ImageSegmenter_1=vision.ImageSegmenter=ImageSegmenter,InteractiveSegmenter=interactive_segmenter_1.InteractiveSegmenter,InteractiveSegmenter_1=vision.InteractiveSegmenter=InteractiveSegmenter,ObjectDetector=object_detector_1.ObjectDetector;ObjectDetector_1=vision.ObjectDetector=ObjectDetector},578:function(e,t,n){"use strict";var r=n(568);var a=n(647),o=null,i="https://api.emailjs.com";function s(e,t,n){return void 0===n&&(n={}),new Promise((function(a,o){var i=new XMLHttpRequest;for(var s in i.addEventListener("load",(function(e){var t=new r.EmailJSResponseStatus(e.target);200===t.status||"OK"===t.text?a(t):o(t)})),i.addEventListener("error",(function(e){o(new r.EmailJSResponseStatus(e.target))})),i.open("POST",e,!0),n)i.setRequestHeader(s,n[s]);i.send(t)}))}function u(e){var t=document&&document.getElementById("g-recaptcha-response");return t&&t.value&&(e["g-recaptcha-response"]=t.value),t=null,e}function l(e,t){o=e,i=t||"https://api.emailjs.com"}function p(e,t,n,r){var a={lib_version:"2.6.4",user_id:r||o,service_id:e,template_id:t,template_params:u(n)};return s(i+"/api/v1.0/email/send",JSON.stringify(a),{"Content-type":"application/json"})}function c(e,t,n,r){var u;if("string"===typeof n&&(n=document.querySelector("#"!==(u=n)[0]&&"."!==u[0]?"#"+u:u)),!n||"FORM"!==n.nodeName)throw"Expected the HTML form element or the style selector of form";a.UI.progressState(n);var l=new FormData(n);return l.append("lib_version","2.6.4"),l.append("service_id",e),l.append("template_id",t),l.append("user_id",r||o),s(i+"/api/v1.0/email/send-form",l).then((function(e){return a.UI.successState(n),e}),(function(e){return a.UI.errorState(n),Promise.reject(e)}))}t.ZP={init:l,send:p,sendForm:c}},568:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailJSResponseStatus=void 0;var n=function(e){this.status=e.status,this.text=e.responseText};t.EmailJSResponseStatus=n},647:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UI=void 0;var n=function(){function e(){}return e.clearAll=function(e){e.classList.remove(this.PROGRESS),e.classList.remove(this.DONE),e.classList.remove(this.ERROR)},e.progressState=function(e){this.clearAll(e),e.classList.add(this.PROGRESS)},e.successState=function(e){e.classList.remove(this.PROGRESS),e.classList.add(this.DONE)},e.errorState=function(e){e.classList.remove(this.PROGRESS),e.classList.add(this.ERROR)},e.PROGRESS="emailjs-sending",e.DONE="emailjs-success",e.ERROR="emailjs-error",e}();t.UI=n},987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(S){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},o={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=u(e,(0|e)<0?-1:0,!0),i&&(o[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),i&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(e>=f)return x}else{if(e<=-g)return w;if(e+1>=g)return k}return e<0?s(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=s,n.fromBits=u;var l=Math.pow;function p(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return p(e.substring(1),t,n).neg();for(var a=s(l(n,8)),o=m,i=0;i<e.length;i+=8){var u=Math.min(8,e.length-i),c=parseInt(e.substring(i,i+u),n);if(u<8){var d=s(l(n,u));o=o.mul(d).add(s(c))}else o=(o=o.mul(a)).add(s(c))}return o.unsigned=t,o}function c(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?p(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=p,n.fromValue=c;var d=4294967296,f=d*d,g=f/2,h=i(1<<24),m=i(0);n.ZERO=m;var v=i(0,!0);n.UZERO=v;var y=i(1);n.ONE=y;var b=i(1,!0);n.UONE=b;var _=i(-1);n.NEG_ONE=_;var k=u(-1,2147483647,!1);n.MAX_VALUE=k;var x=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=x;var w=u(0,-2147483648,!1);n.MIN_VALUE=w;var O=n.prototype;O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},O.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(l(e,6),this.unsigned),o=this,i="";;){var u=o.div(a),p=(o.sub(u.mul(a)).toInt()>>>0).toString(e);if((o=u).isZero())return p+i;for(;p.length<6;)p="0"+p;i=""+p+i}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},O.isZero=function(){return 0===this.high&&0===this.low},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return 1===(1&this.low)},O.isEven=function(){return 0===(1&this.low)},O.equals=function(e){return r(e)||(e=c(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},O.eq=O.equals,O.notEquals=function(e){return!this.eq(e)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(e){return this.comp(e)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(e){return this.comp(e)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(e){return this.comp(e)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(e){return this.comp(e)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(e){if(r(e)||(e=c(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(y)},O.neg=O.negate,O.add=function(e){r(e)||(e=c(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,l=e.low>>>16,p=0,d=0,f=0,g=0;return f+=(g+=o+(65535&e.low))>>>16,d+=(f+=a+l)>>>16,p+=(d+=n+s)>>>16,p+=t+i,u((f&=65535)<<16|(g&=65535),(p&=65535)<<16|(d&=65535),this.unsigned)},O.subtract=function(e){return r(e)||(e=c(e)),this.add(e.neg())},O.sub=O.subtract,O.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=c(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(w))return e.isOdd()?w:m;if(e.eq(w))return this.isOdd()?w:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(h)&&e.lt(h))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,o=this.low>>>16,i=65535&this.low,l=e.high>>>16,p=65535&e.high,d=e.low>>>16,f=65535&e.low,g=0,v=0,y=0,b=0;return y+=(b+=i*f)>>>16,v+=(y+=o*f)>>>16,y&=65535,v+=(y+=i*d)>>>16,g+=(v+=a*f)>>>16,v&=65535,g+=(v+=o*d)>>>16,v&=65535,g+=(v+=i*p)>>>16,g+=n*f+a*d+o*p+i*l,u((y&=65535)<<16|(b&=65535),(g&=65535)<<16|(v&=65535),this.unsigned)},O.mul=O.multiply,O.divide=function(e){if(r(e)||(e=c(e)),e.isZero())throw Error("division by zero");var n,a,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return b;o=v}else{if(this.eq(w))return e.eq(y)||e.eq(_)?w:e.eq(w)?y:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:_:(a=this.sub(e.mul(n)),o=n.add(a.div(e)));if(e.eq(w))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),p=i<=48?1:l(2,i-48),d=s(n),f=d.mul(e);f.isNegative()||f.gt(a);)f=(d=s(n-=p,this.unsigned)).mul(e);d.isZero()&&(d=y),o=o.add(d),a=a.sub(f)}return o},O.div=O.divide,O.modulo=function(e){return r(e)||(e=c(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return u(~this.low,~this.high,this.unsigned)},O.and=function(e){return r(e)||(e=c(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},O.or=function(e){return r(e)||(e=c(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},O.xor=function(e){return r(e)||(e=c(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},O.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},O.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},O.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,a){for(var o,i,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in o=Object(arguments[u]))n.call(o,l)&&(s[l]=o[l]);if(t){i=t(o);for(var p=0;p<i.length;p++)r.call(o,i[p])&&(s[i[p]]=o[i[p]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),a=n(725),o=n(296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(i(227));var s=new Set,u={};function l(e,t){p(e,t),p(e+"Capture",t)}function p(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,g={},h={};function m(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(h,e)||!f.call(g,e)&&(d.test(e)?h[e]=!0:(g[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,w=60106,O=60107,S=60108,C=60114,E=60109,T=60110,R=60112,F=60113,I=60120,M=60115,A=60116,N=60121,D=60128,L=60129,B=60130,P=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),w=j("react.portal"),O=j("react.fragment"),S=j("react.strict_mode"),C=j("react.profiler"),E=j("react.provider"),T=j("react.context"),R=j("react.forward_ref"),F=j("react.suspense"),I=j("react.suspense_list"),M=j("react.memo"),A=j("react.lazy"),N=j("react.block"),j("react.scope"),D=j("react.opaque.id"),L=j("react.debug_trace_mode"),B=j("react.offscreen"),P=j("react.legacy_hidden")}var z,G="function"===typeof Symbol&&Symbol.iterator;function W(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=G&&e[G]||e["@@iterator"])?e:null}function U(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var Z=!1;function H(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s])return"\n"+a[i].replace(" at new "," at ")}while(1<=i&&0<=s);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case O:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case F:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case M:return K(e.type);case N:return K(e._render);case A:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=X(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=X(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ie(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+X(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:X(n)}}function le(e,t){var n=X(t.value),r=X(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function pe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ce={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ge,he,me=(he=function(e,t){if(e.namespaceURI!==ce.svg||"innerHTML"in e)e.innerHTML=t;else{for((ge=ge||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ge.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function _e(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function ke(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=_e(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ye).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var xe=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function Oe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ee=null,Te=null;function Re(e){if(e=na(e)){if("function"!==typeof Ce)throw Error(i(280));var t=e.stateNode;t&&(t=aa(t),Ce(e.stateNode,e.type,t))}}function Fe(e){Ee?Te?Te.push(e):Te=[e]:Ee=e}function Ie(){if(Ee){var e=Ee,t=Te;if(Te=Ee=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function Me(e,t){return e(t)}function Ae(e,t,n,r,a){return e(t,n,r,a)}function Ne(){}var De=Me,Le=!1,Be=!1;function Pe(){null===Ee&&null===Te||(Ne(),Ie())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=aa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var ze=!1;if(c)try{var Ge={};Object.defineProperty(Ge,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Ge,Ge),window.removeEventListener("test",Ge,Ge)}catch(he){ze=!1}function We(e,t,n,r,a,o,i,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(p){this.onError(p)}}var Ue=!1,Ze=null,He=!1,Ve=null,Ke={onError:function(e){Ue=!0,Ze=e}};function Xe(e,t,n,r,a,o,i,s,u){Ue=!1,Ze=null,We.apply(Ke,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(qe(e)!==e)throw Error(i(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return $e(a),e;if(o===r)return $e(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Qe(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,at=!1,ot=[],it=null,st=null,ut=null,lt=new Map,pt=new Map,ct=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function gt(e,t){switch(e){case"focusin":case"focusout":it=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pt.delete(t.pointerId)}}function ht(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e=ft(t,n,r,a,o),null!==t&&(null!==(t=na(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function mt(e){var t=ta(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=na(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){vt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=na(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==it&&vt(it)&&(it=null),null!==st&&vt(st)&&(st=null),null!==ut&&vt(ut)&&(ut=null),lt.forEach(yt),pt.forEach(yt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function kt(e){function t(t){return _t(t,e)}if(0<ot.length){_t(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==it&&_t(it,e),null!==st&&_t(st,e),null!==ut&&_t(ut,e),lt.forEach(t),pt.forEach(t),n=0;n<ct.length;n++)(r=ct[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ct.length&&null===(n=ct[0]).blockedOn;)mt(n),null===n.blockedOn&&ct.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wt={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Ot={},St={};function Ct(e){if(Ot[e])return Ot[e];if(!wt[e])return e;var t,n=wt[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Ot[e]=n[t];return e}c&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete wt.animationend.animation,delete wt.animationiteration.animation,delete wt.animationstart.animation),"TransitionEvent"in window||delete wt.transitionend.transition);var Et=Ct("animationend"),Tt=Ct("animationiteration"),Rt=Ct("animationstart"),Ft=Ct("transitionend"),It=new Map,Mt=new Map,At=["abort","abort",Et,"animationEnd",Tt,"animationIteration",Rt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ft,"transitionEnd","waiting","waiting"];function Nt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Mt.set(r,t),It.set(r,a),l(a,[r])}}(0,o.unstable_now)();var Dt=8;function Lt(e){if(0!==(1&e))return Dt=15,1;if(0!==(2&e))return Dt=14,2;if(0!==(4&e))return Dt=13,4;var t=24&e;return 0!==t?(Dt=12,t):0!==(32&e)?(Dt=11,32):0!==(t=192&e)?(Dt=10,t):0!==(256&e)?(Dt=9,256):0!==(t=3584&e)?(Dt=8,t):0!==(4096&e)?(Dt=7,4096):0!==(t=4186112&e)?(Dt=6,t):0!==(t=62914560&e)?(Dt=5,t):67108864&e?(Dt=4,67108864):0!==(134217728&e)?(Dt=3,134217728):0!==(t=805306368&e)?(Dt=2,t):0!==(1073741824&e)?(Dt=1,1073741824):(Dt=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return Dt=0;var r=0,a=0,o=e.expiredLanes,i=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,a=Dt=15;else if(0!==(o=134217727&n)){var u=o&~i;0!==u?(r=Lt(u),a=Dt):0!==(s&=o)&&(r=Lt(s),a=Dt)}else 0!==(o=n&~i)?(r=Lt(o),a=Dt):0!==s&&(r=Lt(s),a=Dt);if(0===r)return 0;if(r=n&((0>(r=31-Ut(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&i)){if(Lt(t),a<=Dt)return t;Dt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Ut(t)),r|=e[n],t&=~a;return r}function Pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=zt(24&~t))?jt(10,t):e;case 10:return 0===(e=zt(192&~t))?jt(8,t):e;case 8:return 0===(e=zt(3584&~t))&&(0===(e=zt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=zt(805306368&~t))&&(t=268435456),t}throw Error(i(358,e))}function zt(e){return e&-e}function Gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ut(t)]=n}var Ut=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Zt(e)/Ht|0)|0},Zt=Math.log,Ht=Math.LN2;var Vt=o.unstable_UserBlockingPriority,Kt=o.unstable_runWithPriority,Xt=!0;function qt(e,t,n,r){Le||Ne();var a=$t,o=Le;Le=!0;try{Ae(a,e,t,n,r)}finally{(Le=o)||Pe()}}function Yt(e,t,n,r){Kt(Vt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var a;if(Xt)if((a=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),ot.push(e);else{var o=Jt(e,t,n,r);if(null===o)a&&gt(e,r);else{if(a){if(-1<dt.indexOf(e))return e=ft(o,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return it=ht(it,e,t,n,r,a),!0;case"dragenter":return st=ht(st,e,t,n,r,a),!0;case"mouseover":return ut=ht(ut,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return lt.set(o,ht(lt.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,pt.set(o,ht(pt.get(o)||null,e,t,n,r,a)),!0}return!1}(o,e,t,n,r))return;gt(e,r)}Nr(e,t,r,null,n)}}}function Jt(e,t,n,r){var a=Se(r);if(null!==(a=ta(a))){var o=qe(a);if(null===o)a=null;else{var i=o.tag;if(13===i){if(null!==(a=Ye(o)))return a;a=null}else if(3===i){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Nr(e,t,r,a,n),null}var Qt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,a="value"in Qt?Qt.value:Qt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return tn=a.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function on(){return!1}function sn(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?an:on,this.isPropagationStopped=on,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var un,ln,pn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),fn=a({},cn,{view:0,detail:0}),gn=sn(fn),hn=a({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pn&&(pn&&"mousemove"===e.type?(un=e.screenX-pn.screenX,ln=e.screenY-pn.screenY):ln=un=0,pn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(hn),vn=sn(a({},hn,{dataTransfer:0})),yn=sn(a({},fn,{relatedTarget:0})),bn=sn(a({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=a({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=sn(_n),xn=sn(a({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},On={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Cn}var Tn=a({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?On[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=sn(Tn),Fn=sn(a({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(a({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Mn=sn(a({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=a({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=sn(An),Dn=[9,13,27,32],Ln=c&&"CompositionEvent"in window,Bn=null;c&&"documentMode"in document&&(Bn=document.documentMode);var Pn=c&&"TextEvent"in window&&!Bn,jn=c&&(!Ln||Bn&&8<Bn&&11>=Bn),zn=String.fromCharCode(32),Gn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Kn(e,t,n,r){Fe(r),0<(t=Lr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,qn=null;function Yn(e){Tr(e,0)}function $n(e){if($(ra(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(c){var er;if(c){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Qn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Xn&&(Xn.detachEvent("onpropertychange",ar),qn=Xn=null)}function ar(e){if("value"===e.propertyName&&$n(qn)){var t=[];if(Kn(t,qn,e,Se(e)),e=Yn,Le)e(t);else{Le=!0;try{Me(e,t)}finally{Le=!1,Pe()}}}}function or(e,t,n){"focusin"===e?(rr(),qn=n,(Xn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&rr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(qn)}function sr(e,t){if("click"===e)return $n(t)}function ur(e,t){if("input"===e||"change"===e)return $n(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},pr=Object.prototype.hasOwnProperty;function cr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!pr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function gr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?gr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vr=c&&"documentMode"in document&&11>=document.documentMode,yr=null,br=null,_r=null,kr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==J(r)||("selectionStart"in(r=yr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&cr(_r,r)||(_r=r,0<(r=Lr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}Nt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Nt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Nt(At,2);for(var wr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Or=0;Or<wr.length;Or++)Mt.set(wr[Or],0);p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Er(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,l){if(Xe.apply(this,arguments),Ue){if(!Ue)throw Error(i(198));var p=Ze;Ue=!1,Ze=null,He||(He=!0,Ve=p)}}(r,t,void 0,e),e.currentTarget=null}function Tr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&a.isPropagationStopped())break e;Er(a,s,l),o=u}else for(i=0;i<r.length;i++){if(u=(s=r[i]).instance,l=s.currentTarget,s=s.listener,u!==o&&a.isPropagationStopped())break e;Er(a,s,l),o=u}}}if(He)throw e=Ve,He=!1,Ve=null,e}function Rr(e,t){var n=oa(t),r=e+"__bubble";n.has(r)||(Ar(t,e,2,!1),n.add(r))}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Ir(e){e[Fr]||(e[Fr]=!0,s.forEach((function(t){Cr.has(t)||Mr(t,!1,e,null),Mr(t,!0,e,null)})))}function Mr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;a|=2,o=r}var i=oa(o),s=e+"__"+(t?"capture":"bubble");i.has(s)||(t&&(a|=4),Ar(o,e,a,t),i.add(s))}function Ar(e,t,n,r){var a=Mt.get(t);switch(void 0===a?2:a){case 0:a=qt;break;case 1:a=Yt;break;default:a=$t}n=a.bind(null,t,n,e),a=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Nr(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&((u=i.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=ta(s)))return;if(5===(u=i.tag)||6===u){r=o=i;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Be)return e(t,n);Be=!0;try{return De(e,t,n)}finally{Be=!1,Pe()}}((function(){var r=o,a=Se(n),i=[];e:{var s=It.get(e);if(void 0!==s){var u=dn,l=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":u=Rn;break;case"focusin":l="focus",u=yn;break;case"focusout":l="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Et:case Tt:case Rt:u=bn;break;case Ft:u=Mn;break;case"scroll":u=gn;break;case"wheel":u=Nn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Fn}var p=0!==(4&t),c=!p&&"scroll"===e,d=p?null!==s?s+"Capture":null:s;p=[];for(var f,g=r;null!==g;){var h=(f=g).stateNode;if(5===f.tag&&null!==h&&(f=h,null!==d&&(null!=(h=je(g,d))&&p.push(Dr(g,h,f)))),c)break;g=g.return}0<p.length&&(s=new u(s,l,null,n,a),i.push({event:s,listeners:p}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!ta(l)&&!l[Qr])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ta(l):null)&&(l!==(c=qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(p=mn,h="onMouseLeave",d="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(p=Fn,h="onPointerLeave",d="onPointerEnter",g="pointer"),c=null==u?s:ra(u),f=null==l?s:ra(l),(s=new p(h,g+"leave",u,n,a)).target=c,s.relatedTarget=f,h=null,ta(a)===r&&((p=new p(d,g+"enter",l,n,a)).target=f,p.relatedTarget=c,h=p),c=h,u&&l)e:{for(d=l,g=0,f=p=u;f;f=Br(f))g++;for(f=0,h=d;h;h=Br(h))f++;for(;0<g-f;)p=Br(p),g--;for(;0<f-g;)d=Br(d),f--;for(;g--;){if(p===d||null!==d&&p===d.alternate)break e;p=Br(p),d=Br(d)}p=null}else p=null;null!==u&&Pr(i,s,u,p,!1),null!==l&&null!==c&&Pr(i,c,l,p,!0)}if("select"===(u=(s=r?ra(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Jn;else if(Vn(s))if(Qn)m=ur;else{m=ir;var v=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=sr);switch(m&&(m=m(e,r))?Kn(i,m,n,a):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ae(s,"number",s.value)),v=r?ra(r):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(yr=v,br=r,_r=null);break;case"focusout":_r=br=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,xr(i,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(i,n,a)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Zn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Zn&&(y=nn()):(en="value"in(Qt=a)?Qt.value:Qt.textContent,Zn=!0)),0<(v=Lr(r,b)).length&&(b=new xn(b,e,null,n,a),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Pn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Gn=!0,zn);case"textInput":return(e=t.data)===zn&&Gn?null:e;default:return null}}(e,n):function(e,t){if(Zn)return"compositionend"===e||!Ln&&Wn(e,t)?(e=nn(),tn=en=Qt=null,Zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Lr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Tr(i,t)}))}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=je(e,n))&&r.unshift(Dr(e,o,a)),null!=(o=je(e,t))&&r.push(Dr(e,o,a))),e=e.return}return r}function Br(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Pr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,a?null!=(u=je(n,o))&&i.unshift(Dr(n,u,s)):a||null!=(u=je(n,o))&&i.push(Dr(n,u,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}function jr(){}var zr=null,Gr=null;function Wr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ur(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Vr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var qr=0;var Yr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Yr,Jr="__reactProps$"+Yr,Qr="__reactContainer$"+Yr,ea="__reactEvents$"+Yr;function ta(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[$r])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function na(e){return!(e=e[$r]||e[Qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ra(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function aa(e){return e[Jr]||null}function oa(e){var t=e[ea];return void 0===t&&(t=e[ea]=new Set),t}var ia=[],sa=-1;function ua(e){return{current:e}}function la(e){0>sa||(e.current=ia[sa],ia[sa]=null,sa--)}function pa(e,t){sa++,ia[sa]=e.current,e.current=t}var ca={},da=ua(ca),fa=ua(!1),ga=ca;function ha(e,t){var n=e.type.contextTypes;if(!n)return ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function va(){la(fa),la(da)}function ya(e,t,n){if(da.current!==ca)throw Error(i(168));pa(da,t),pa(fa,n)}function ba(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(i(108,K(t)||"Unknown",o));return a({},n,r)}function _a(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ca,ga=da.current,pa(da,e),pa(fa,fa.current),!0}function ka(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=ba(e,t,ga),r.__reactInternalMemoizedMergedChildContext=e,la(fa),la(da),pa(da,e)):la(fa),pa(fa,n)}var xa=null,wa=null,Oa=o.unstable_runWithPriority,Sa=o.unstable_scheduleCallback,Ca=o.unstable_cancelCallback,Ea=o.unstable_shouldYield,Ta=o.unstable_requestPaint,Ra=o.unstable_now,Fa=o.unstable_getCurrentPriorityLevel,Ia=o.unstable_ImmediatePriority,Ma=o.unstable_UserBlockingPriority,Aa=o.unstable_NormalPriority,Na=o.unstable_LowPriority,Da=o.unstable_IdlePriority,La={},Ba=void 0!==Ta?Ta:function(){},Pa=null,ja=null,za=!1,Ga=Ra(),Wa=1e4>Ga?Ra:function(){return Ra()-Ga};function Ua(){switch(Fa()){case Ia:return 99;case Ma:return 98;case Aa:return 97;case Na:return 96;case Da:return 95;default:throw Error(i(332))}}function Za(e){switch(e){case 99:return Ia;case 98:return Ma;case 97:return Aa;case 96:return Na;case 95:return Da;default:throw Error(i(332))}}function Ha(e,t){return e=Za(e),Oa(e,t)}function Va(e,t,n){return e=Za(e),Sa(e,t,n)}function Ka(){if(null!==ja){var e=ja;ja=null,Ca(e)}Xa()}function Xa(){if(!za&&null!==Pa){za=!0;var e=0;try{var t=Pa;Ha(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Pa=null}catch(n){throw null!==Pa&&(Pa=Pa.slice(e+1)),Sa(Ia,Ka),n}finally{za=!1}}}var qa=k.ReactCurrentBatchConfig;function Ya(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $a=ua(null),Ja=null,Qa=null,eo=null;function to(){eo=Qa=Ja=null}function no(e){var t=$a.current;la($a),e.type._context._currentValue=t}function ro(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ao(e,t){Ja=e,eo=Qa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Li=!0),e.firstContext=null)}function oo(e,t){if(eo!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(eo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qa){if(null===Ja)throw Error(i(308));Qa=t,Ja.dependencies={lanes:0,firstContext:t,responders:null}}else Qa=Qa.next=t;return e._currentValue}var io=!1;function so(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function po(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function co(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fo(e,t,n,r){var o=e.updateQueue;io=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var l=u,p=l.next;l.next=null,null===s?i=p:s.next=p,s=l;var c=e.alternate;if(null!==c){var d=(c=c.updateQueue).lastBaseUpdate;d!==s&&(null===d?c.firstBaseUpdate=p:d.next=p,c.lastBaseUpdate=l)}}if(null!==i){for(d=o.baseState,s=0,c=p=l=null;;){u=i.lane;var f=i.eventTime;if((r&u)===u){null!==c&&(c=c.next={eventTime:f,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var g=e,h=i;switch(u=t,f=n,h.tag){case 1:if("function"===typeof(g=h.payload)){d=g.call(f,d,u);break e}d=g;break e;case 3:g.flags=-4097&g.flags|64;case 0:if(null===(u="function"===typeof(g=h.payload)?g.call(f,d,u):g)||void 0===u)break e;d=a({},d,u);break e;case 2:io=!0}}null!==i.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[i]:u.push(i))}else f={eventTime:f,lane:u,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===c?(p=c=f,l=d):c=c.next=f,s|=u;if(null===(i=i.next)){if(null===(u=o.shared.pending))break;i=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===c&&(l=d),o.baseState=l,o.firstBaseUpdate=p,o.lastBaseUpdate=c,Gs|=s,e.lanes=s,e.memoizedState=d}}function go(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var ho=(new r.Component).refs;function mo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var vo={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=du(),a=fu(e),o=lo(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),po(e,o),gu(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=du(),a=fu(e),o=lo(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),po(e,o),gu(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=du(),r=fu(e),a=lo(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),po(e,a),gu(e,r,n)}};function yo(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(a,o))}function bo(e,t,n){var r=!1,a=ca,o=t.contextType;return"object"===typeof o&&null!==o?o=oo(o):(a=ma(t)?ga:da.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ha(e,a):ca),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function _o(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function ko(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=ho,so(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=oo(o):(o=ma(t)?ga:da.current,a.context=ha(e,o)),fo(e,n,a,r),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(mo(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&vo.enqueueReplaceState(a,a.state,null),fo(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var xo=Array.isArray;function wo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===ho&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Oo(e,t){if("textarea"!==e.type)throw Error(i(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function So(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Vu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Yu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=wo(e,t,n),r.return=e,r):((r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=wo(e,t,n),r.return=e,r)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$u(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=Xu(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ku(t.type,t.key,t.props,null,e.mode,n)).ref=wo(e,null,t),n.return=e,n;case w:return(t=$u(t,e.mode,n)).return=e,t}if(xo(t)||W(t))return(t=Xu(t,e.mode,n,null)).return=e,t;Oo(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===a?n.type===O?c(e,t,n.props.children,r,a):l(e,t,n,r):null;case w:return n.key===a?p(e,t,n,r):null}if(xo(n)||W(n))return null!==a?null:c(e,t,n,r,null);Oo(e,n)}return null}function g(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===O?c(t,e,r.props.children,a,r.key):l(t,e,r,a);case w:return p(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(xo(r)||W(r))return c(t,e=e.get(n)||null,r,a,null);Oo(t,r)}return null}function h(a,i,s,u){for(var l=null,p=null,c=i,h=i=0,m=null;null!==c&&h<s.length;h++){c.index>h?(m=c,c=null):m=c.sibling;var v=f(a,c,s[h],u);if(null===v){null===c&&(c=m);break}e&&c&&null===v.alternate&&t(a,c),i=o(v,i,h),null===p?l=v:p.sibling=v,p=v,c=m}if(h===s.length)return n(a,c),l;if(null===c){for(;h<s.length;h++)null!==(c=d(a,s[h],u))&&(i=o(c,i,h),null===p?l=c:p.sibling=c,p=c);return l}for(c=r(a,c);h<s.length;h++)null!==(m=g(c,a,h,s[h],u))&&(e&&null!==m.alternate&&c.delete(null===m.key?h:m.key),i=o(m,i,h),null===p?l=m:p.sibling=m,p=m);return e&&c.forEach((function(e){return t(a,e)})),l}function m(a,s,u,l){var p=W(u);if("function"!==typeof p)throw Error(i(150));if(null==(u=p.call(u)))throw Error(i(151));for(var c=p=null,h=s,m=s=0,v=null,y=u.next();null!==h&&!y.done;m++,y=u.next()){h.index>m?(v=h,h=null):v=h.sibling;var b=f(a,h,y.value,l);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&t(a,h),s=o(b,s,m),null===c?p=b:c.sibling=b,c=b,h=v}if(y.done)return n(a,h),p;if(null===h){for(;!y.done;m++,y=u.next())null!==(y=d(a,y.value,l))&&(s=o(y,s,m),null===c?p=y:c.sibling=y,c=y);return p}for(h=r(a,h);!y.done;m++,y=u.next())null!==(y=g(h,a,m,y.value,l))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),s=o(y,s,m),null===c?p=y:c.sibling=y,c=y);return e&&h.forEach((function(e){return t(a,e)})),p}return function(e,r,o,u){var l="object"===typeof o&&null!==o&&o.type===O&&null===o.key;l&&(o=o.props.children);var p="object"===typeof o&&null!==o;if(p)switch(o.$$typeof){case x:e:{for(p=o.key,l=r;null!==l;){if(l.key===p){if(7===l.tag){if(o.type===O){n(e,l.sibling),(r=a(l,o.props.children)).return=e,e=r;break e}}else if(l.elementType===o.type){n(e,l.sibling),(r=a(l,o.props)).ref=wo(e,l,o),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}o.type===O?((r=Xu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Ku(o.type,o.key,o.props,null,e.mode,u)).ref=wo(e,r,o),u.return=e,e=u)}return s(e);case w:e:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$u(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,o)).return=e,e=r):(n(e,r),(r=Yu(o,e.mode,u)).return=e,e=r),s(e);if(xo(o))return h(e,r,o,u);if(W(o))return m(e,r,o,u);if(p&&Oo(e,o),"undefined"===typeof o&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(i(152,K(e.type)||"Component"))}return n(e,r)}}var Co=So(!0),Eo=So(!1),To={},Ro=ua(To),Fo=ua(To),Io=ua(To);function Mo(e){if(e===To)throw Error(i(174));return e}function Ao(e,t){switch(pa(Io,t),pa(Fo,e),pa(Ro,To),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}la(Ro),pa(Ro,t)}function No(){la(Ro),la(Fo),la(Io)}function Do(e){Mo(Io.current);var t=Mo(Ro.current),n=fe(t,e.type);t!==n&&(pa(Fo,e),pa(Ro,n))}function Lo(e){Fo.current===e&&(la(Ro),la(Fo))}var Bo=ua(0);function Po(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jo=null,zo=null,Go=!1;function Wo(e,t){var n=Zu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Uo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Zo(e){if(Go){var t=zo;if(t){var n=t;if(!Uo(e,t)){if(!(t=Kr(n.nextSibling))||!Uo(e,t))return e.flags=-1025&e.flags|2,Go=!1,void(jo=e);Wo(jo,n)}jo=e,zo=Kr(t.firstChild)}else e.flags=-1025&e.flags|2,Go=!1,jo=e}}function Ho(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jo=e}function Vo(e){if(e!==jo)return!1;if(!Go)return Ho(e),Go=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ur(t,e.memoizedProps))for(t=zo;t;)Wo(e,t),t=Kr(t.nextSibling);if(Ho(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){zo=Kr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}zo=null}}else zo=jo?Kr(e.stateNode.nextSibling):null;return!0}function Ko(){zo=jo=null,Go=!1}var Xo=[];function qo(){for(var e=0;e<Xo.length;e++)Xo[e]._workInProgressVersionPrimary=null;Xo.length=0}var Yo=k.ReactCurrentDispatcher,$o=k.ReactCurrentBatchConfig,Jo=0,Qo=null,ei=null,ti=null,ni=!1,ri=!1;function ai(){throw Error(i(321))}function oi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function ii(e,t,n,r,a,o){if(Jo=o,Qo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yo.current=null===e||null===e.memoizedState?Mi:Ai,e=n(r,a),ri){o=0;do{if(ri=!1,!(25>o))throw Error(i(301));o+=1,ti=ei=null,t.updateQueue=null,Yo.current=Ni,e=n(r,a)}while(ri)}if(Yo.current=Ii,t=null!==ei&&null!==ei.next,Jo=0,ti=ei=Qo=null,ni=!1,t)throw Error(i(300));return e}function si(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ti?Qo.memoizedState=ti=e:ti=ti.next=e,ti}function ui(){if(null===ei){var e=Qo.alternate;e=null!==e?e.memoizedState:null}else e=ei.next;var t=null===ti?Qo.memoizedState:ti.next;if(null!==t)ti=t,ei=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ei=e).memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},null===ti?Qo.memoizedState=ti=e:ti=ti.next=e}return ti}function li(e,t){return"function"===typeof t?t(e):t}function pi(e){var t=ui(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ei,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var u=s=o=null,l=a;do{var p=l.lane;if((Jo&p)===p)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var c={lane:p,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=c,o=r):u=u.next=c,Qo.lanes|=p,Gs|=p}l=l.next}while(null!==l&&l!==a);null===u?o=r:u.next=s,lr(r,t.memoizedState)||(Li=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ci(e){var t=ui(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);lr(o,t.memoizedState)||(Li=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function di(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Jo&e)===e)&&(t._workInProgressVersionPrimary=r,Xo.push(t))),e)return n(t._source);throw Xo.push(t),Error(i(350))}function fi(e,t,n,r){var a=As;if(null===a)throw Error(i(349));var o=t._getVersion,s=o(t._source),u=Yo.current,l=u.useState((function(){return di(a,t,n)})),p=l[1],c=l[0];l=ti;var d=e.memoizedState,f=d.refs,g=f.getSnapshot,h=d.source;d=d.subscribe;var m=Qo;return e.memoizedState={refs:f,source:t,subscribe:r},u.useEffect((function(){f.getSnapshot=n,f.setSnapshot=p;var e=o(t._source);if(!lr(s,e)){e=n(t._source),lr(c,e)||(p(e),e=fu(m),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,i=e;0<i;){var u=31-Ut(i),l=1<<u;r[u]|=e,i&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=fu(m);a.mutableReadLanes|=r&a.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),lr(g,n)&&lr(h,t)&&lr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:li,lastRenderedState:c}).dispatch=p=Fi.bind(null,Qo,e),l.queue=e,l.baseQueue=null,c=di(a,t,n),l.memoizedState=l.baseState=c),c}function gi(e,t,n){return fi(ui(),e,t,n)}function hi(e){var t=si();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:li,lastRenderedState:e}).dispatch=Fi.bind(null,Qo,e),[t.memoizedState,e]}function mi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qo.updateQueue)?(t={lastEffect:null},Qo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function vi(e){return e={current:e},si().memoizedState=e}function yi(){return ui().memoizedState}function bi(e,t,n,r){var a=si();Qo.flags|=e,a.memoizedState=mi(1|t,n,void 0,void 0===r?null:r)}function _i(e,t,n,r){var a=ui();r=void 0===r?null:r;var o=void 0;if(null!==ei){var i=ei.memoizedState;if(o=i.destroy,null!==r&&oi(r,i.deps))return void mi(t,n,o,r)}Qo.flags|=e,a.memoizedState=mi(1|t,n,o,r)}function ki(e,t){return bi(516,4,e,t)}function xi(e,t){return _i(516,4,e,t)}function wi(e,t){return _i(4,2,e,t)}function Oi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Si(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_i(4,2,Oi.bind(null,t,e),n)}function Ci(){}function Ei(e,t){var n=ui();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ti(e,t){var n=ui();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ri(e,t){var n=Ua();Ha(98>n?98:n,(function(){e(!0)})),Ha(97<n?97:n,(function(){var n=$o.transition;$o.transition=1;try{e(!1),t()}finally{$o.transition=n}}))}function Fi(e,t,n){var r=du(),a=fu(e),o={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?o.next=o:(o.next=i.next,i.next=o),t.pending=o,i=e.alternate,e===Qo||null!==i&&i===Qo)ri=ni=!0;else{if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=i(s,n);if(o.eagerReducer=i,o.eagerState=u,lr(u,s))return}catch(l){}gu(e,a,r)}}var Ii={readContext:oo,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useOpaqueIdentifier:ai,unstable_isNewReconciler:!1},Mi={readContext:oo,useCallback:function(e,t){return si().memoizedState=[e,void 0===t?null:t],e},useContext:oo,useEffect:ki,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bi(4,2,Oi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bi(4,2,e,t)},useMemo:function(e,t){var n=si();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=si();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Fi.bind(null,Qo,e),[r.memoizedState,e]},useRef:vi,useState:hi,useDebugValue:Ci,useDeferredValue:function(e){var t=hi(e),n=t[0],r=t[1];return ki((function(){var t=$o.transition;$o.transition=1;try{r(e)}finally{$o.transition=t}}),[e]),n},useTransition:function(){var e=hi(!1),t=e[0];return vi(e=Ri.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=si();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fi(r,e,t,n)},useOpaqueIdentifier:function(){if(Go){var e=!1,t=function(e){return{$$typeof:D,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(qr++).toString(36))),Error(i(355))})),n=hi(t)[1];return 0===(2&Qo.mode)&&(Qo.flags|=516,mi(5,(function(){n("r:"+(qr++).toString(36))}),void 0,null)),t}return hi(t="r:"+(qr++).toString(36)),t},unstable_isNewReconciler:!1},Ai={readContext:oo,useCallback:Ei,useContext:oo,useEffect:xi,useImperativeHandle:Si,useLayoutEffect:wi,useMemo:Ti,useReducer:pi,useRef:yi,useState:function(){return pi(li)},useDebugValue:Ci,useDeferredValue:function(e){var t=pi(li),n=t[0],r=t[1];return xi((function(){var t=$o.transition;$o.transition=1;try{r(e)}finally{$o.transition=t}}),[e]),n},useTransition:function(){var e=pi(li)[0];return[yi().current,e]},useMutableSource:gi,useOpaqueIdentifier:function(){return pi(li)[0]},unstable_isNewReconciler:!1},Ni={readContext:oo,useCallback:Ei,useContext:oo,useEffect:xi,useImperativeHandle:Si,useLayoutEffect:wi,useMemo:Ti,useReducer:ci,useRef:yi,useState:function(){return ci(li)},useDebugValue:Ci,useDeferredValue:function(e){var t=ci(li),n=t[0],r=t[1];return xi((function(){var t=$o.transition;$o.transition=1;try{r(e)}finally{$o.transition=t}}),[e]),n},useTransition:function(){var e=ci(li)[0];return[yi().current,e]},useMutableSource:gi,useOpaqueIdentifier:function(){return ci(li)[0]},unstable_isNewReconciler:!1},Di=k.ReactCurrentOwner,Li=!1;function Bi(e,t,n,r){t.child=null===e?Eo(t,null,n,r):Co(t,e.child,n,r)}function Pi(e,t,n,r,a){n=n.render;var o=t.ref;return ao(t,a),r=ii(e,t,n,r,o,a),null===e||Li?(t.flags|=1,Bi(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,os(e,t,a))}function ji(e,t,n,r,a,o){if(null===e){var i=n.type;return"function"!==typeof i||Hu(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ku(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,zi(e,t,i,r,a,o))}return i=e.child,0===(a&o)&&(a=i.memoizedProps,(n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=Vu(i,r)).ref=t.ref,e.return=t,t.child=e)}function zi(e,t,n,r,a,o){if(null!==e&&cr(e.memoizedProps,r)&&e.ref===t.ref){if(Li=!1,0===(o&a))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Li=!0)}return Ui(e,t,n,r,o)}function Gi(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xu(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xu(t,e),null;t.memoizedState={baseLanes:0},xu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,xu(t,r);return Bi(e,t,a,n),t.child}function Wi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ui(e,t,n,r,a){var o=ma(n)?ga:da.current;return o=ha(t,o),ao(t,a),n=ii(e,t,n,r,o,a),null===e||Li?(t.flags|=1,Bi(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,os(e,t,a))}function Zi(e,t,n,r,a){if(ma(n)){var o=!0;_a(t)}else o=!1;if(ao(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bo(t,n,r),ko(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,l=n.contextType;"object"===typeof l&&null!==l?l=oo(l):l=ha(t,l=ma(n)?ga:da.current);var p=n.getDerivedStateFromProps,c="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate;c||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||u!==l)&&_o(t,i,r,l),io=!1;var d=t.memoizedState;i.state=d,fo(t,r,i,a),u=t.memoizedState,s!==r||d!==u||fa.current||io?("function"===typeof p&&(mo(t,n,p,r),u=t.memoizedState),(s=io||yo(t,n,s,r,d,u,l))?(c||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4)):("function"===typeof i.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=l,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4),r=!1)}else{i=t.stateNode,uo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Ya(t.type,s),i.props=l,c=t.pendingProps,d=i.context,"object"===typeof(u=n.contextType)&&null!==u?u=oo(u):u=ha(t,u=ma(n)?ga:da.current);var f=n.getDerivedStateFromProps;(p="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==c||d!==u)&&_o(t,i,r,u),io=!1,d=t.memoizedState,i.state=d,fo(t,r,i,a);var g=t.memoizedState;s!==c||d!==g||fa.current||io?("function"===typeof f&&(mo(t,n,f,r),g=t.memoizedState),(l=io||yo(t,n,l,r,d,g,u))?(p||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,g,u),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,g,u)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=g),i.props=r,i.state=g,i.context=u,r=l):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Hi(e,t,n,r,o,a)}function Hi(e,t,n,r,a,o){Wi(e,t);var i=0!==(64&t.flags);if(!r&&!i)return a&&ka(t,n,!1),os(e,t,o);r=t.stateNode,Di.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,s,o)):Bi(e,t,s,o),t.memoizedState=r.state,a&&ka(t,n,!0),t.child}function Vi(e){var t=e.stateNode;t.pendingContext?ya(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ya(0,t.context,!1),Ao(e,t.containerInfo)}var Ki,Xi,qi,Yi,$i={dehydrated:null,retryLane:0};function Ji(e,t,n){var r,a=t.pendingProps,o=Bo.current,i=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(i=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),pa(Bo,1&o),null===e?(void 0!==a.fallback&&Zo(t),e=a.children,o=a.fallback,i?(e=Qi(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$i,e):"number"===typeof a.unstable_expectedLoadTime?(e=Qi(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$i,t.lanes=33554432,e):((n=qu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,i?(a=ts(e,t,a.children,a.fallback,n),i=t.child,o=e.child.memoizedState,i.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},i.childLanes=e.childLanes&~n,t.memoizedState=$i,a):(n=es(e,t,a.children,n),t.memoizedState=null,n))}function Qi(e,t,n,r){var a=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=qu(t,a,0,null),n=Xu(n,a,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var a=e.child;return e=a.sibling,n=Vu(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,a){var o=t.mode,i=e.child;e=i.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=s,null!==(i=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=i,i.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Vu(i,s),null!==e?r=Vu(e,r):(r=Xu(r,o,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ro(e.return,t)}function rs(e,t,n,r,a,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a,i.lastEffect=o)}function as(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Bi(e,t,r.children,n),0!==(2&(r=Bo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pa(Bo,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Po(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rs(t,!1,a,n,o,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Po(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Gs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Vu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function is(e,t){if(!Go)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ma(t.type)&&va(),null;case 3:return No(),la(fa),la(da),qo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Vo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Xi(t),null;case 5:Lo(t);var o=Mo(Io.current);if(n=t.type,null!==e&&null!=t.stateNode)qi(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(i(166));return null}if(e=Mo(Ro.current),Vo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[$r]=t,r[Jr]=s,n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Rr(Sr[e],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":ee(r,s),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rr("invalid",r);break;case"textarea":ue(r,s),Rr("invalid",r)}for(var l in we(n,s),e=null,s)s.hasOwnProperty(l)&&(o=s[l],"children"===l?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(l)&&null!=o&&"onScroll"===l&&Rr("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),pe(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===o.nodeType?o:o.ownerDocument,e===ce.html&&(e=de(n)),e===ce.html?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[$r]=t,e[Jr]=r,Ki(e,t,!1,!1),t.stateNode=e,l=Oe(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),o=r;break;case"iframe":case"object":case"embed":Rr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Sr.length;o++)Rr(Sr[o],e);o=r;break;case"source":Rr("error",e),o=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),o=r;break;case"details":Rr("toggle",e),o=r;break;case"input":ee(e,r),o=Q(e,r),Rr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=a({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Rr("invalid",e);break;default:o=r}we(n,o);var p=o;for(s in p)if(p.hasOwnProperty(s)){var c=p[s];"style"===s?ke(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&me(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&ve(e,c):"number"===typeof c&&ve(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Rr("scroll",e):null!=c&&_(e,s,c,l))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),pe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+X(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ie(e,!!r.multiple,s,!1):null!=r.defaultValue&&ie(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=jr)}Wr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yi(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));n=Mo(Io.current),Mo(Ro.current),Vo(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return la(Bo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Vo(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Bo.current)?0===Ps&&(Ps=3):(0!==Ps&&3!==Ps||(Ps=4),null===As||0===(134217727&Gs)&&0===(134217727&Ws)||yu(As,Ds))),(r||n)&&(t.flags|=4),null);case 4:return No(),Xi(t),null===e&&Ir(t.stateNode.containerInfo),null;case 10:return no(t),null;case 19:if(la(Bo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=r.rendering))if(s)is(r,!1);else{if(0!==Ps||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Po(e))){for(t.flags|=64,is(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pa(Bo,1&Bo.current|2),t.child}e=e.sibling}null!==r.tail&&Wa()>Vs&&(t.flags|=64,s=!0,is(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Po(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),is(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Go)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Wa()-r.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=64,s=!0,is(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Wa(),n.sibling=null,t=Bo.current,pa(Bo,s?1&t|2:1&t),n):null;case 23:case 24:return wu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(i(156,t.tag))}function us(e){switch(e.tag){case 1:ma(e.type)&&va();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(No(),la(fa),la(da),qo(),0!==(64&(t=e.flags)))throw Error(i(285));return e.flags=-4097&t|64,e;case 5:return Lo(e),null;case 13:return la(Bo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return la(Bo),null;case 4:return No(),null;case 10:return no(e),null;case 23:case 24:return wu(),null;default:return null}}function ls(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a}}function ps(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ki=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xi=function(){},qi=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Mo(Ro.current);var i,s=null;switch(n){case"input":o=Q(e,o),r=Q(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=a({},o,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(c in we(n,r),n=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var l=o[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(u.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var p=r[c];if(l=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&p!==l&&(null!=p||null!=l))if("style"===c)if(l){for(i in l)!l.hasOwnProperty(i)||p&&p.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in p)p.hasOwnProperty(i)&&l[i]!==p[i]&&(n||(n={}),n[i]=p[i])}else n||(s||(s=[]),s.push(c,n)),n=p;else"dangerouslySetInnerHTML"===c?(p=p?p.__html:void 0,l=l?l.__html:void 0,null!=p&&l!==p&&(s=s||[]).push(c,p)):"children"===c?"string"!==typeof p&&"number"!==typeof p||(s=s||[]).push(c,""+p):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(u.hasOwnProperty(c)?(null!=p&&"onScroll"===c&&Rr("scroll",e),s||l===p||(s=[])):"object"===typeof p&&null!==p&&p.$$typeof===D?p.toString():(s=s||[]).push(c,p))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Yi=function(e,t,n,r){n!==r&&(t.flags|=4)};var cs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,$s=r),ps(0,t)},n}function fs(e,t,n){(n=lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return ps(0,t),r(a)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ps(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var gs="function"===typeof WeakSet?WeakSet:Set;function hs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){zu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ya(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Vr(t.stateNode.containerInfo))}throw Error(i(163))}function vs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Bu(n,e),Lu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ya(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&go(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}go(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Wr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&kt(n)))))}throw Error(i(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=_e("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(wa&&"function"===typeof wa.onCommitFiberUnmount)try{wa.onCommitFiberUnmount(xa,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Bu(t,n);else{r=t;try{a()}catch(o){zu(r,o)}}n=n.next}while(n!==e)}break;case 1:if(hs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){zu(t,o)}break;case 5:hs(t);break;case 4:Ss(e,t)}}function _s(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ks(e){return 5===e.tag||3===e.tag||4===e.tag}function xs(e){e:{for(var t=e.return;null!==t;){if(ks(t))break e;t=t.return}throw Error(i(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(i(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ks(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ws(e,n,t):Os(e,n,t)}function ws(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(ws(e,t,n),e=e.sibling;null!==e;)ws(e,t,n),e=e.sibling}function Os(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Os(e,t,n),e=e.sibling;null!==e;)Os(e,t,n),e=e.sibling}function Ss(e,t){for(var n,r,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(i(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag){e:for(var s=e,u=a,l=u;;)if(bs(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=a.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(bs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function Cs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Oe(e,a),t=Oe(e,r),a=0;a<o.length;a+=2){var s=o[a],u=o[a+1];"style"===s?ke(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ve(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ie(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(i(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,kt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=Wa(),ys(t.child,!0)),void Es(t);case 19:return void Es(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(i(163))}function Es(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new gs),t.forEach((function(t){var r=Wu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ts(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Rs=Math.ceil,Fs=k.ReactCurrentDispatcher,Is=k.ReactCurrentOwner,Ms=0,As=null,Ns=null,Ds=0,Ls=0,Bs=ua(0),Ps=0,js=null,zs=0,Gs=0,Ws=0,Us=0,Zs=null,Hs=0,Vs=1/0;function Ks(){Vs=Wa()+500}var Xs,qs=null,Ys=!1,$s=null,Js=null,Qs=!1,eu=null,tu=90,nu=[],ru=[],au=null,ou=0,iu=null,su=-1,uu=0,lu=0,pu=null,cu=!1;function du(){return 0!==(48&Ms)?Wa():-1!==su?su:su=Wa()}function fu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ua()?1:2;if(0===uu&&(uu=zs),0!==qa.transition){0!==lu&&(lu=null!==Zs?Zs.pendingLanes:0),e=uu;var t=4186112&~lu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ua(),0!==(4&Ms)&&98===e?e=jt(12,uu):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function gu(e,t,n){if(50<ou)throw ou=0,iu=null,Error(i(185));if(null===(e=hu(e,t)))return null;Wt(e,t,n),e===As&&(Ws|=t,4===Ps&&yu(e,Ds));var r=Ua();1===t?0!==(8&Ms)&&0===(48&Ms)?bu(e):(mu(e,n),0===Ms&&(Ks(),Ka())):(0===(4&Ms)||98!==r&&99!==r||(null===au?au=new Set([e]):au.add(e)),mu(e,n)),Zs=e}function hu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ut(s),l=1<<u,p=o[u];if(-1===p){if(0===(l&r)||0!==(l&a)){p=t,Lt(l);var c=Dt;o[u]=10<=c?p+250:6<=c?p+5e3:-1}}else p<=t&&(e.expiredLanes|=l);s&=~l}if(r=Bt(e,e===As?Ds:0),t=Dt,0===r)null!==n&&(n!==La&&Ca(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==La&&Ca(n)}15===t?(n=bu.bind(null,e),null===Pa?(Pa=[n],ja=Sa(Ia,Xa)):Pa.push(n),n=La):14===t?n=Va(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(i(358,e))}}(t),n=Va(n,vu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function vu(e){if(su=-1,lu=uu=0,0!==(48&Ms))throw Error(i(327));var t=e.callbackNode;if(Du()&&e.callbackNode!==t)return null;var n=Bt(e,e===As?Ds:0);if(0===n)return null;var r=n,a=Ms;Ms|=16;var o=Cu();for(As===e&&Ds===r||(Ks(),Ou(e,r));;)try{Ru();break}catch(u){Su(e,u)}if(to(),Fs.current=o,Ms=a,null!==Ns?r=0:(As=null,Ds=0,r=Ps),0!==(zs&Ws))Ou(e,0);else if(0!==r){if(2===r&&(Ms|=64,e.hydrate&&(e.hydrate=!1,Vr(e.containerInfo)),0!==(n=Pt(e))&&(r=Eu(e,n))),1===r)throw t=js,Ou(e,0),yu(e,n),mu(e,Wa()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(i(345));case 2:case 5:Mu(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Hs+500-Wa())){if(0!==Bt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){du(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Zr(Mu.bind(null,e),r);break}Mu(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-Ut(n);o=1<<s,(s=r[s])>a&&(a=s),n&=~o}if(n=a,10<(n=(120>(n=Wa()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Rs(n/1960))-n)){e.timeoutHandle=Zr(Mu.bind(null,e),n);break}Mu(e);break;default:throw Error(i(329))}}return mu(e,Wa()),e.callbackNode===t?vu.bind(null,e):null}function yu(e,t){for(t&=~Us,t&=~Ws,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Ms))throw Error(i(327));if(Du(),e===As&&0!==(e.expiredLanes&Ds)){var t=Ds,n=Eu(e,t);0!==(zs&Ws)&&(n=Eu(e,t=Bt(e,t)))}else n=Eu(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Ms|=64,e.hydrate&&(e.hydrate=!1,Vr(e.containerInfo)),0!==(t=Pt(e))&&(n=Eu(e,t))),1===n)throw n=js,Ou(e,0),yu(e,t),mu(e,Wa()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mu(e),mu(e,Wa()),null}function _u(e,t){var n=Ms;Ms|=1;try{return e(t)}finally{0===(Ms=n)&&(Ks(),Ka())}}function ku(e,t){var n=Ms;Ms&=-2,Ms|=8;try{return e(t)}finally{0===(Ms=n)&&(Ks(),Ka())}}function xu(e,t){pa(Bs,Ls),Ls|=t,zs|=t}function wu(){Ls=Bs.current,la(Bs)}function Ou(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&va();break;case 3:No(),la(fa),la(da),qo();break;case 5:Lo(r);break;case 4:No();break;case 13:case 19:la(Bo);break;case 10:no(r);break;case 23:case 24:wu()}n=n.return}As=e,Ns=Vu(e.current,null),Ds=Ls=zs=t,Ps=0,js=null,Us=Ws=Gs=0}function Su(e,t){for(;;){var n=Ns;try{if(to(),Yo.current=Ii,ni){for(var r=Qo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ni=!1}if(Jo=0,ti=ei=Qo=null,ri=!1,Is.current=null,null===n||null===n.return){Ps=1,js=t,Ns=null;break}e:{var o=e,i=n.return,s=n,u=t;if(t=Ds,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var p=s.alternate;p?(s.updateQueue=p.updateQueue,s.memoizedState=p.memoizedState,s.lanes=p.lanes):(s.updateQueue=null,s.memoizedState=null)}var c=0!==(1&Bo.current),d=i;do{var f;if(f=13===d.tag){var g=d.memoizedState;if(null!==g)f=null!==g.dehydrated;else{var h=d.memoizedProps;f=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!c)}}if(f){var m=d.updateQueue;if(null===m){var v=new Set;v.add(l),d.updateQueue=v}else m.add(l);if(0===(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=lo(-1,1);y.tag=2,po(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new cs,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var _=Gu.bind(null,o,l,s);l.then(_,_)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ps&&(Ps=2),u=ls(u,s),d=i;do{switch(d.tag){case 3:o=u,d.flags|=4096,t&=-t,d.lanes|=t,co(d,ds(0,o,t));break e;case 1:o=u;var k=d.type,x=d.stateNode;if(0===(64&d.flags)&&("function"===typeof k.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Js||!Js.has(x)))){d.flags|=4096,t&=-t,d.lanes|=t,co(d,fs(d,o,t));break e}}d=d.return}while(null!==d)}Iu(n)}catch(w){t=w,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function Cu(){var e=Fs.current;return Fs.current=Ii,null===e?Ii:e}function Eu(e,t){var n=Ms;Ms|=16;var r=Cu();for(As===e&&Ds===t||Ou(e,t);;)try{Tu();break}catch(a){Su(e,a)}if(to(),Ms=n,Fs.current=r,null!==Ns)throw Error(i(261));return As=null,Ds=0,Ps}function Tu(){for(;null!==Ns;)Fu(Ns)}function Ru(){for(;null!==Ns&&!Ea();)Fu(Ns)}function Fu(e){var t=Xs(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Iu(e):Ns=t,Is.current=null}function Iu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ls)))return void(Ns=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ls)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ns=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ps&&(Ps=5)}function Mu(e){var t=Ua();return Ha(99,Au.bind(null,e,t)),null}function Au(e,t){do{Du()}while(null!==eu);if(0!==(48&Ms))throw Error(i(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,o=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var l=31-Ut(o),p=1<<l;a[l]=0,s[l]=-1,u[l]=-1,o&=~p}if(null!==au&&0===(24&r)&&au.has(e)&&au.delete(e),e===As&&(Ns=As=null,Ds=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Ms,Ms|=32,Is.current=null,zr=Xt,mr(s=hr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(p=u.getSelection&&u.getSelection())&&0!==p.rangeCount){u=p.anchorNode,o=p.anchorOffset,l=p.focusNode,p=p.focusOffset;try{u.nodeType,l.nodeType}catch(C){u=null;break e}var c=0,d=-1,f=-1,g=0,h=0,m=s,v=null;t:for(;;){for(var y;m!==u||0!==o&&3!==m.nodeType||(d=c+o),m!==l||0!==p&&3!==m.nodeType||(f=c+p),3===m.nodeType&&(c+=m.nodeValue.length),null!==(y=m.firstChild);)v=m,m=y;for(;;){if(m===s)break t;if(v===u&&++g===o&&(d=c),v===l&&++h===p&&(f=c),null!==(y=m.nextSibling))break;v=(m=v).parentNode}m=y}u=-1===d||-1===f?null:{start:d,end:f}}else u=null;u=u||{start:0,end:0}}else u=null;Gr={focusedElem:s,selectionRange:u},Xt=!1,pu=null,cu=!1,qs=r;do{try{Nu()}catch(C){if(null===qs)throw Error(i(330));zu(qs,C),qs=qs.nextEffect}}while(null!==qs);pu=null,qs=r;do{try{for(s=e;null!==qs;){var b=qs.flags;if(16&b&&ve(qs.stateNode,""),128&b){var _=qs.alternate;if(null!==_){var k=_.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(1038&b){case 2:xs(qs),qs.flags&=-3;break;case 6:xs(qs),qs.flags&=-3,Cs(qs.alternate,qs);break;case 1024:qs.flags&=-1025;break;case 1028:qs.flags&=-1025,Cs(qs.alternate,qs);break;case 4:Cs(qs.alternate,qs);break;case 8:Ss(s,u=qs);var x=u.alternate;_s(u),null!==x&&_s(x)}qs=qs.nextEffect}}catch(C){if(null===qs)throw Error(i(330));zu(qs,C),qs=qs.nextEffect}}while(null!==qs);if(k=Gr,_=hr(),b=k.focusedElem,s=k.selectionRange,_!==b&&b&&b.ownerDocument&&gr(b.ownerDocument.documentElement,b)){null!==s&&mr(b)&&(_=s.start,void 0===(k=s.end)&&(k=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(k,b.value.length)):(k=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(k=k.getSelection(),u=b.textContent.length,x=Math.min(s.start,u),s=void 0===s.end?x:Math.min(s.end,u),!k.extend&&x>s&&(u=s,s=x,x=u),u=fr(b,x),o=fr(b,s),u&&o&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==o.node||k.focusOffset!==o.offset)&&((_=_.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),x>s?(k.addRange(_),k.extend(o.node,o.offset)):(_.setEnd(o.node,o.offset),k.addRange(_))))),_=[];for(k=b;k=k.parentNode;)1===k.nodeType&&_.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(k=_[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Xt=!!zr,Gr=zr=null,e.current=n,qs=r;do{try{for(b=e;null!==qs;){var w=qs.flags;if(36&w&&vs(b,qs.alternate,qs),128&w){_=void 0;var O=qs.ref;if(null!==O){var S=qs.stateNode;qs.tag,_=S,"function"===typeof O?O(_):O.current=_}}qs=qs.nextEffect}}catch(C){if(null===qs)throw Error(i(330));zu(qs,C),qs=qs.nextEffect}}while(null!==qs);qs=null,Ba(),Ms=a}else e.current=n;if(Qs)Qs=!1,eu=e,tu=t;else for(qs=r;null!==qs;)t=qs.nextEffect,qs.nextEffect=null,8&qs.flags&&((w=qs).sibling=null,w.stateNode=null),qs=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===iu?ou++:(ou=0,iu=e):ou=0,n=n.stateNode,wa&&"function"===typeof wa.onCommitFiberRoot)try{wa.onCommitFiberRoot(xa,n,void 0,64===(64&n.current.flags))}catch(C){}if(mu(e,Wa()),Ys)throw Ys=!1,e=$s,$s=null,e;return 0!==(8&Ms)||Ka(),null}function Nu(){for(;null!==qs;){var e=qs.alternate;cu||null===pu||(0!==(8&qs.flags)?Qe(qs,pu)&&(cu=!0):13===qs.tag&&Ts(e,qs)&&Qe(qs,pu)&&(cu=!0));var t=qs.flags;0!==(256&t)&&ms(e,qs),0===(512&t)||Qs||(Qs=!0,Va(97,(function(){return Du(),null}))),qs=qs.nextEffect}}function Du(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ha(e,Pu)}return!1}function Lu(e,t){nu.push(t,e),Qs||(Qs=!0,Va(97,(function(){return Du(),null})))}function Bu(e,t){ru.push(t,e),Qs||(Qs=!0,Va(97,(function(){return Du(),null})))}function Pu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ms))throw Error(i(331));var t=Ms;Ms|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var a=n[r],o=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===o)throw Error(i(330));zu(o,l)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){a=n[r],o=n[r+1];try{var u=a.create;a.destroy=u()}catch(l){if(null===o)throw Error(i(330));zu(o,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ms=t,Ka(),!0}function ju(e,t,n){po(e,t=ds(0,t=ls(n,t),1)),t=du(),null!==(e=hu(e,1))&&(Wt(e,1,t),mu(e,t))}function zu(e,t){if(3===e.tag)ju(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ju(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var a=fs(n,e=ls(t,e),1);if(po(n,a),a=du(),null!==(n=hu(n,1)))Wt(n,1,a),mu(n,a);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Gu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=du(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ds&n)===n&&(4===Ps||3===Ps&&(62914560&Ds)===Ds&&500>Wa()-Hs?Ou(e,0):Us|=n),mu(e,t)}function Wu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ua()?1:2:(0===uu&&(uu=zs),0===(t=zt(62914560&~uu))&&(t=4194304))),n=du(),null!==(e=hu(e,t))&&(Wt(e,t,n),mu(e,n))}function Uu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Zu(e,t,n,r){return new Uu(e,t,n,r)}function Hu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vu(e,t){var n=e.alternate;return null===n?((n=Zu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ku(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Hu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case O:return Xu(n.children,a,o,t);case L:s=8,a|=16;break;case S:s=8,a|=1;break;case C:return(e=Zu(12,n,t,8|a)).elementType=C,e.type=C,e.lanes=o,e;case F:return(e=Zu(13,n,t,a)).type=F,e.elementType=F,e.lanes=o,e;case I:return(e=Zu(19,n,t,a)).elementType=I,e.lanes=o,e;case B:return qu(n,a,o,t);case P:return(e=Zu(24,n,t,a)).elementType=P,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case T:s=9;break e;case R:s=11;break e;case M:s=14;break e;case A:s=16,r=null;break e;case N:s=22;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Zu(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Xu(e,t,n,r){return(e=Zu(7,e,r,t)).lanes=n,e}function qu(e,t,n,r){return(e=Zu(23,e,r,t)).elementType=B,e.lanes=n,e}function Yu(e,t,n){return(e=Zu(6,e,null,t)).lanes=n,e}function $u(e,t,n){return(t=Zu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Gt(0),this.expirationTimes=Gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.mutableSourceEagerHydrationData=null}function Qu(e,t,n,r){var a=t.current,o=du(),s=fu(a);e:if(n){t:{if(qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(i(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ma(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(i(171))}if(1===n.tag){var l=n.type;if(ma(l)){n=ba(n,l,u);break e}}n=u}else n=ca;return null===t.context?t.context=n:t.pendingContext=n,(t=lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),po(a,t),gu(a,s,o),s}function el(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nl(e,t){tl(e,t),(e=e.alternate)&&tl(e,t)}function rl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=Zu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,so(t),e[Qr]=n.current,Ir(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function al(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ol(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=el(i);s.call(e)}}Qu(t,i,e,a)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rl(e,0,t?{hydrate:!0}:void 0)}(n,r),i=o._internalRoot,"function"===typeof a){var u=a;a=function(){var e=el(i);u.call(e)}}ku((function(){Qu(t,i,e,a)}))}return el(i)}function il(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!al(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Xs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fa.current)Li=!0;else{if(0===(n&r)){switch(Li=!1,t.tag){case 3:Vi(t),Ko();break;case 5:Do(t);break;case 1:ma(t.type)&&_a(t);break;case 4:Ao(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;pa($a,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ji(e,t,n):(pa(Bo,1&Bo.current),null!==(t=os(e,t,n))?t.sibling:null);pa(Bo,1&Bo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return as(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),pa(Bo,Bo.current),r)break;return null;case 23:case 24:return t.lanes=0,Gi(e,t,n)}return os(e,t,n)}Li=0!==(16384&e.flags)}else Li=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ha(t,da.current),ao(t,n),a=ii(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ma(r)){var o=!0;_a(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,so(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&mo(t,r,s,e),a.updater=vo,t.stateNode=a,a._reactInternals=t,ko(t,r,e,n),t=Hi(null,t,r,!0,o,n)}else t.tag=0,Bi(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(o=a._init)(a._payload),t.type=a,o=t.tag=function(e){if("function"===typeof e)return Hu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===M)return 14}return 2}(a),e=Ya(a,e),o){case 0:t=Ui(null,t,a,e,n);break e;case 1:t=Zi(null,t,a,e,n);break e;case 11:t=Pi(null,t,a,e,n);break e;case 14:t=ji(null,t,a,Ya(a.type,e),r,n);break e}throw Error(i(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ui(e,t,r,a=t.elementType===r?a:Ya(r,a),n);case 1:return r=t.type,a=t.pendingProps,Zi(e,t,r,a=t.elementType===r?a:Ya(r,a),n);case 3:if(Vi(t),r=t.updateQueue,null===e||null===r)throw Error(i(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,uo(e,t),fo(t,r,null,n),(r=t.memoizedState.element)===a)Ko(),t=os(e,t,n);else{if((o=(a=t.stateNode).hydrate)&&(zo=Kr(t.stateNode.containerInfo.firstChild),jo=t,o=Go=!0),o){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(o=e[a])._workInProgressVersionPrimary=e[a+1],Xo.push(o);for(n=Eo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Bi(e,t,r,n),Ko();t=t.child}return t;case 5:return Do(t),null===e&&Zo(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,Ur(r,a)?s=null:null!==o&&Ur(r,o)&&(t.flags|=16),Wi(e,t),Bi(e,t,s,n),t.child;case 6:return null===e&&Zo(t),null;case 13:return Ji(e,t,n);case 4:return Ao(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Co(t,null,r,n):Bi(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Pi(e,t,r,a=t.elementType===r?a:Ya(r,a),n);case 7:return Bi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Bi(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value;var u=t.type._context;if(pa($a,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=lr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===a.children&&!fa.current){t=os(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var p=l.firstContext;null!==p;){if(p.context===r&&0!==(p.observedBits&o)){1===u.tag&&((p=lo(-1,n&-n)).tag=2,po(u,p)),u.lanes|=n,null!==(p=u.alternate)&&(p.lanes|=n),ro(u.return,n),l.lanes|=n;break}p=p.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Bi(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(o=t.pendingProps).children,ao(t,n),r=r(a=oo(a,o.unstable_observedBits)),t.flags|=1,Bi(e,t,r,n),t.child;case 14:return o=Ya(a=t.type,t.pendingProps),ji(e,t,a,o=Ya(a.type,o),r,n);case 15:return zi(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ya(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ma(r)?(e=!0,_a(t)):e=!1,ao(t,n),bo(t,r,a),ko(t,r,a,n),Hi(null,t,r,!0,e,n);case 19:return as(e,t,n);case 23:case 24:return Gi(e,t,n)}throw Error(i(156,t.tag))},rl.prototype.render=function(e){Qu(e,this._internalRoot,null,null)},rl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Qu(null,e,null,(function(){t[Qr]=null}))},et=function(e){13===e.tag&&(gu(e,4,du()),nl(e,4))},tt=function(e){13===e.tag&&(gu(e,67108864,du()),nl(e,67108864))},nt=function(e){if(13===e.tag){var t=du(),n=fu(e);gu(e,n,t),nl(e,n)}},rt=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=aa(r);if(!a)throw Error(i(90));$(r),ne(r,a)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ie(e,!!n.multiple,t,!1)}},Me=_u,Ae=function(e,t,n,r,a){var o=Ms;Ms|=4;try{return Ha(98,e.bind(null,t,n,r,a))}finally{0===(Ms=o)&&(Ks(),Ka())}},Ne=function(){0===(49&Ms)&&(function(){if(null!==au){var e=au;au=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,Wa())}))}Ka()}(),Du())},De=function(e,t){var n=Ms;Ms|=2;try{return e(t)}finally{0===(Ms=n)&&(Ks(),Ka())}};var sl={Events:[na,ra,aa,Fe,Ie,Du,{current:!1}]},ul={findFiberByHostInstance:ta,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},ll={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{xa=pl.inject(ll),wa=pl}catch(he){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl,t.createPortal=il,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw Error(i(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ms;if(0!==(48&n))return e(t);Ms|=1;try{if(e)return Ha(99,e.bind(null,t))}finally{Ms=n,Ka()}},t.hydrate=function(e,t,n){if(!al(t))throw Error(i(200));return ol(null,e,t,!0,n)},t.render=function(e,t,n){if(!al(t))throw Error(i(200));return ol(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!al(e))throw Error(i(40));return!!e._reactRootContainer&&(ku((function(){ol(null,null,e,!1,(function(){e._reactRootContainer=null,e[Qr]=null}))})),!0)},t.unstable_batchedUpdates=_u,t.unstable_createPortal=function(e,t){return il(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!al(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ol(e,t,n,!1,r)},t.version="17.0.1"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},97:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,o=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||o)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var o=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/o,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*o)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var i=this.ctx,s=this.canvas;return i&&s&&(n.mirrored&&(i.translate(s.width,0),i.scale(-1,1)),i.imageSmoothingEnabled=n.imageSmoothing,i.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(i.scale(-1,1),i.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var o={video:"undefined"===typeof a||a};n.audio&&(o.audio="undefined"===typeof r||r),e.requestUserMediaId++;var i=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(o).then((function(n){e.unmounted||i!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},o=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,i=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(i=e.id)}));var s=o(n.audioConstraints);s&&(t=s);var u=o(n.videoConstraints);u&&(i=u),r(a(t),a(i))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),u=n.style,l=void 0===u?{}:u,p=n.children,c=i(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),d=s?o(o({},l),{transform:(l.transform||"")+" scaleX(-1)"}):l,f={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",o({autoPlay:!0,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:d},c)),p&&p(f))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(791))},374:function(e,t,n){"use strict";n(725);var r=n(791),a=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;a=o("react.element"),o("react.fragment")}var i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,p=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(p=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:p,props:o,_owner:i.current}}t.jsx=l,t.jsxs=l},117:function(e,t,n){"use strict";var r=n(725),a=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var i=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,p=60116;if("function"===typeof Symbol&&Symbol.for){var c=Symbol.for;a=c("react.element"),o=c("react.portal"),t.Fragment=c("react.fragment"),t.StrictMode=c("react.strict_mode"),t.Profiler=c("react.profiler"),i=c("react.provider"),s=c("react.context"),u=c("react.forward_ref"),t.Suspense=c("react.suspense"),l=c("react.memo"),p=c("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h={};function m(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||g}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||g}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var b=y.prototype=new v;b.constructor=y,r(b,m.prototype),b.isPureReactComponent=!0;var _={current:null},k=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function w(e,t,n){var r,o={},i=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,r)&&!x.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var l=Array(u),p=0;p<u;p++)l[p]=arguments[p+2];o.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:a,type:e,key:i,ref:s,props:o,_owner:_.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return i=i(u=e),e=""===r?"."+C(u,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),E(i,t,n,"",(function(e){return e}))):null!=i&&(O(i)&&(i=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+e)),t.push(i)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var p=r+C(s=e[l],l);u+=E(s,t,n,p,i)}else if(p=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof p)for(e=p.call(e),l=0;!(s=e.next()).done;)u+=E(s=s.value,t,n,p=r+C(s,l++),i);else if("object"===s)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function T(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function R(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var F={current:null};function I(){var e=F.current;if(null===e)throw Error(f(321));return e}var M={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error(f(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var o=r({},e.props),i=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(p in t)k.call(t,p)&&!x.hasOwnProperty(p)&&(o[p]=void 0===t[p]&&void 0!==l?l[p]:t[p])}var p=arguments.length-2;if(1===p)o.children=n;else if(1<p){l=Array(p);for(var c=0;c<p;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:a,type:e.type,key:i,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=w,t.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return I().useCallback(e,t)},t.useContext=function(e,t){return I().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return I().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return I().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return I().useLayoutEffect(e,t)},t.useMemo=function(e,t){return I().useMemo(e,t)},t.useReducer=function(e,t,n){return I().useReducer(e,t,n)},t.useRef=function(e){return I().useRef(e)},t.useState=function(e){return I().useState(e)},t.version="17.0.1"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,a,o;if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,p=null,c=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(c,0))},r=function(e,t){p=setTimeout(e,t)},a=function(){clearTimeout(p)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var h=!1,m=null,v=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,k=_.port2;_.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+y;try{m(!0,e)?k.postMessage(null):(h=!1,m=null)}catch(n){throw k.postMessage(null),n}}else h=!1},n=function(e){m=e,h||(h=!0,k.postMessage(null))},r=function(e,n){v=d((function(){e(t.unstable_now())}),n)},a=function(){f(v),v=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<S(a,t)))break e;e[r]=t,e[n]=a,n=r}}function w(e){return void 0===(e=e[0])?null:e}function O(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,i=e[o],s=o+1,u=e[s];if(void 0!==i&&0>S(i,n))void 0!==u&&0>S(u,i)?(e[r]=u,e[s]=n,r=s):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],E=[],T=1,R=null,F=3,I=!1,M=!1,A=!1;function N(e){for(var t=w(E);null!==t;){if(null===t.callback)O(E);else{if(!(t.startTime<=e))break;O(E),t.sortIndex=t.expirationTime,x(C,t)}t=w(E)}}function D(e){if(A=!1,N(e),!M)if(null!==w(C))M=!0,n(L);else{var t=w(E);null!==t&&r(D,t.startTime-e)}}function L(e,n){M=!1,A&&(A=!1,a()),I=!0;var o=F;try{for(N(n),R=w(C);null!==R&&(!(R.expirationTime>n)||e&&!t.unstable_shouldYield());){var i=R.callback;if("function"===typeof i){R.callback=null,F=R.priorityLevel;var s=i(R.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?R.callback=s:R===w(C)&&O(C),N(n)}else O(C);R=w(C)}if(null!==R)var u=!0;else{var l=w(E);null!==l&&r(D,l.startTime-n),u=!1}return u}finally{R=null,F=o,I=!1}}var B=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||I||(M=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return F},t.unstable_getFirstCallbackNode=function(){return w(C)},t.unstable_next=function(e){switch(F){case 1:case 2:case 3:var t=3;break;default:t=F}var n=F;F=t;try{return e()}finally{F=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=F;F=e;try{return t()}finally{F=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:T++,callback:o,priorityLevel:e,startTime:i,expirationTime:u=i+u,sortIndex:-1},i>s?(e.sortIndex=i,x(E,e),null===w(C)&&e===w(E)&&(A?a():A=!0,r(D,i-s))):(e.sortIndex=u,x(C,e),M||I||(M=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=F;return function(){var n=F;F=t;try{return e.apply(this,arguments)}finally{F=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},699:function(e,t,n){var r=n(501),a=n(112),o=n(132),i=n(890),s=n(113),u=n(350),l=n(411);l.alea=r,l.xor128=a,l.xorwow=o,l.xorshift7=i,l.xor4096=s,l.tychei=u,e.exports=l},501:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},350:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},112:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},113:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},132:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},411:function(e,t,n){var r;!function(a,o,i){var s,u=256,l=i.pow(u,6),p=i.pow(2,52),c=2*p,d=u-1;function f(e,t,n){var r=[],d=v(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(o)]}}():e,3),r),f=new g(r),b=function(){for(var e=f.g(6),t=l,n=0;e<p;)e=(e+n)*u,t*=u,n=f.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|f.g(4)},b.quick=function(){return f.g(4)/4294967296},b.double=b,v(y(f.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&h(r,f),e.state=function(){return h(f,{})}),n?(i.random=e,t):e})(b,d,"global"in t?t.global:this==i,t.state)}function g(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<u;)i[a]=a++;for(a=0;a<u;a++)i[a]=i[o=d&o+e[a%n]+(t=i[a])],i[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,i=r.S;e--;)t=i[a=d&a+1],n=n*u+i[d&(i[a]=i[o=d&o+t])+(i[o]=t)];return r.i=a,r.j=o,n})(u)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(o){}return r.length?r:"string"==a?e:e+"\0"}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(v(i.random(),o),e.exports){e.exports=f;try{s=n(42)}catch(b){}}else void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},445:function(e,t,n){var r,a;window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),r=this;do{for(t=n.length;0<=--t&&n.item(t)!==r;);}while(t<0&&(r=r.parentElement));return r}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),a=Math.max(0,16-(r-e)),o=window.setTimeout((function(){t(r+a)}),a);return e=r+a,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),a="undefined"!=typeof n.g?n.g:"undefined"!=typeof window?window:this,r=function(){return function(e){"use strict";var t={ignore:"[data-scroll-ignore]",header:null,topOnEmptyHash:!0,speed:500,speedAsDuration:!1,durationMax:null,durationMin:null,clip:!0,offset:0,easing:"easeInOutCubic",customEasing:null,updateURL:!0,popstate:!0,emitEvents:!0},n=function(){var e={};return Array.prototype.forEach.call(arguments,(function(t){for(var n in t){if(!t.hasOwnProperty(n))return;e[n]=t[n]}})),e},r=function(e){"#"===e.charAt(0)&&(e=e.substr(1));for(var t,n=String(e),r=n.length,a=-1,o="",i=n.charCodeAt(0);++a<r;){if(0===(t=n.charCodeAt(a)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");o+=1<=t&&t<=31||127==t||0===a&&48<=t&&t<=57||1===a&&48<=t&&t<=57&&45===i?"\\"+t.toString(16)+" ":128<=t||45===t||95===t||48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122?n.charAt(a):"\\"+n.charAt(a)}return"#"+o},a=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},o=function(t){return t?(n=t,parseInt(e.getComputedStyle(n).height,10)+t.offsetTop):0;var n},i=function(t,n,r){0===t&&document.body.focus(),r||(t.focus(),document.activeElement!==t&&(t.setAttribute("tabindex","-1"),t.focus(),t.style.outline="none"),e.scrollTo(0,n))},s=function(t,n,r,a){if(n.emitEvents&&"function"==typeof e.CustomEvent){var o=new CustomEvent(t,{bubbles:!0,detail:{anchor:r,toggle:a}});document.dispatchEvent(o)}};return function(u,l){var p,c,d,f,g={cancelScroll:function(e){cancelAnimationFrame(f),f=null,e||s("scrollCancel",p)},animateScroll:function(r,u,l){g.cancelScroll();var c=n(p||t,l||{}),h="[object Number]"===Object.prototype.toString.call(r),m=h||!r.tagName?null:r;if(h||m){var v=e.pageYOffset;c.header&&!d&&(d=document.querySelector(c.header));var y,b,_,k,x,w,O,S,C=o(d),E=h?r:function(t,n,r,o){var i=0;if(t.offsetParent)for(;i+=t.offsetTop,t=t.offsetParent;);return i=Math.max(i-n-r,0),o&&(i=Math.min(i,a()-e.innerHeight)),i}(m,C,parseInt("function"==typeof c.offset?c.offset(r,u):c.offset,10),c.clip),T=E-v,R=a(),F=0,I=(y=T,_=(b=c).speedAsDuration?b.speed:Math.abs(y/1e3*b.speed),b.durationMax&&_>b.durationMax?b.durationMax:b.durationMin&&_<b.durationMin?b.durationMin:parseInt(_,10)),M=function t(n){var a,o,l;k||(k=n),F+=n-k,w=v+T*(o=x=1<(x=0===I?0:F/I)?1:x,"easeInQuad"===(a=c).easing&&(l=o*o),"easeOutQuad"===a.easing&&(l=o*(2-o)),"easeInOutQuad"===a.easing&&(l=o<.5?2*o*o:(4-2*o)*o-1),"easeInCubic"===a.easing&&(l=o*o*o),"easeOutCubic"===a.easing&&(l=--o*o*o+1),"easeInOutCubic"===a.easing&&(l=o<.5?4*o*o*o:(o-1)*(2*o-2)*(2*o-2)+1),"easeInQuart"===a.easing&&(l=o*o*o*o),"easeOutQuart"===a.easing&&(l=1- --o*o*o*o),"easeInOutQuart"===a.easing&&(l=o<.5?8*o*o*o*o:1-8*--o*o*o*o),"easeInQuint"===a.easing&&(l=o*o*o*o*o),"easeOutQuint"===a.easing&&(l=1+--o*o*o*o*o),"easeInOutQuint"===a.easing&&(l=o<.5?16*o*o*o*o*o:1+16*--o*o*o*o*o),a.customEasing&&(l=a.customEasing(o)),l||o),e.scrollTo(0,Math.floor(w)),function(t,n){var a=e.pageYOffset;if(t==n||a==n||(v<n&&e.innerHeight+a)>=R)return g.cancelScroll(!0),i(r,n,h),s("scrollStop",c,r,u),!(f=k=null)}(w,E)||(f=e.requestAnimationFrame(t),k=n)};0===e.pageYOffset&&e.scrollTo(0,0),O=r,S=c,h||history.pushState&&S.updateURL&&history.pushState({smoothScroll:JSON.stringify(S),anchor:O.id},document.title,O===document.documentElement?"#top":"#"+O.id),"matchMedia"in e&&e.matchMedia("(prefers-reduced-motion)").matches?i(r,Math.floor(E),!1):(s("scrollStart",c,r,u),g.cancelScroll(!0),e.requestAnimationFrame(M))}}},h=function(t){if(!t.defaultPrevented&&!(0!==t.button||t.metaKey||t.ctrlKey||t.shiftKey)&&"closest"in t.target&&(c=t.target.closest(u))&&"a"===c.tagName.toLowerCase()&&!t.target.closest(p.ignore)&&c.hostname===e.location.hostname&&c.pathname===e.location.pathname&&/#/.test(c.href)){var n,a;try{n=r(decodeURIComponent(c.hash))}catch(t){n=r(c.hash)}if("#"===n){if(!p.topOnEmptyHash)return;a=document.documentElement}else a=document.querySelector(n);(a=a||"#top"!==n?a:document.documentElement)&&(t.preventDefault(),function(t){if(history.replaceState&&t.updateURL&&!history.state){var n=e.location.hash;n=n||"",history.replaceState({smoothScroll:JSON.stringify(t),anchor:n||e.pageYOffset},document.title,n||e.location.href)}}(p),g.animateScroll(a,c))}},m=function(e){if(null!==history.state&&history.state.smoothScroll&&history.state.smoothScroll===JSON.stringify(p)){var t=history.state.anchor;"string"==typeof t&&t&&!(t=document.querySelector(r(history.state.anchor)))||g.animateScroll(t,null,{updateURL:!1})}};return g.destroy=function(){p&&(document.removeEventListener("click",h,!1),e.removeEventListener("popstate",m,!1),g.cancelScroll(),f=d=c=p=null)},function(){if(!("querySelector"in document&&"addEventListener"in e&&"requestAnimationFrame"in e&&"closest"in e.Element.prototype))throw"Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs.";g.destroy(),p=n(t,l||{}),d=p.header?document.querySelector(p.header):null,document.addEventListener("click",h,!1),p.updateURL&&p.popstate&&e.addEventListener("popstate",m,!1)}(),g}}(a)}.apply(t,[]),void 0===r||(e.exports=r)},410:function(){},628:function(){},601:function(){},792:function(){},977:function(){},42:function(){},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},861:function(e,t,n){"use strict";function r(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function s(e){r(i,a,o,s,u,"next",e)}function u(e){r(i,a,o,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return a}})},671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},144:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(142);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,r.Z)(a.key),a)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},762:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(181);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}},277:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(120),a=n(814),o=n(2),i=n(326);function s(e){var t=(0,a.Z)();return function(){var n,a=(0,r.Z)(e);if(t){var s=(0,r.Z)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return function(e,t){if(t&&("object"===(0,o.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}(this,n)}}},752:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(120);function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},a.apply(this,arguments)}},120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(611);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},165:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2);function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(F){p=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),s=new E(r||[]);return o(i,"_invoke",{value:w(e,n,s)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(F){return{type:"throw",arg:F}}}e.wrap=c;var f={};function g(){}function h(){}function m(){}var v={};p(v,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(T([])));b&&b!==t&&n.call(b,s)&&(v=b);var _=m.prototype=g.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(o,i,s,u){var l=d(e[o],e,i);if("throw"!==l.type){var p=l.arg,c=p.value;return c&&"object"==(0,r.Z)(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){a("next",e,s,u)}),(function(e){a("throw",e,s,u)})):t.resolve(c).then((function(e){p.value=e,s(p)}),(function(e){return a("throw",e,s,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return R()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=O(i,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var a=d(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:R}}function R(){return{value:void 0,done:!0}}return h.prototype=m,o(_,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:h,configurable:!0}),h.displayName=p(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,p(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},k(x.prototype),p(x.prototype,u,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new x(c(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(_),p(_,l,"Generator"),p(_,s,(function(){return this})),p(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}},611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},885:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(181);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(p){l=!0,a=p}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},982:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},142:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2);function a(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},2:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{browserFiles:function(){return rs},browserHTTPRequest:function(){return hs},concatenateArrayBuffers:function(){return vo},copyModel:function(){return si},decodeWeights:function(){return po},encodeWeights:function(){return uo},fromMemory:function(){return bs},fromMemorySync:function(){return _s},getLoadHandlers:function(){return Fo},getModelArtifactsForJSON:function(){return ko},getModelArtifactsForJSONSync:function(){return _o},getModelArtifactsInfoForJSON:function(){return wo},getSaveHandlers:function(){return Ro},getWeightSpecs:function(){return Oo},http:function(){return gs},isHTTPScheme:function(){return ds},listModels:function(){return ri},loadWeights:function(){return ss},moveModel:function(){return li},registerLoadRouter:function(){return To},registerSaveRouter:function(){return Eo},removeModel:function(){return oi},weightsLoaderFactory:function(){return ls},withSaveHandler:function(){return ks},withSaveHandlerSync:function(){return xs}});var t=__webpack_require__(791),n=__webpack_require__(164),r=__webpack_require__(885),a=__webpack_require__(184),o=function(e){return(0,a.jsx)("nav",{id:"menu",className:"navbar navbar-default navbar-fixed-top",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"navbar-header",children:[(0,a.jsxs)("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#bs-example-navbar-collapse-1",children:[" ",(0,a.jsx)("span",{className:"sr-only",children:"Toggle navigation"})," ",(0,a.jsx)("span",{className:"icon-bar"})," ",(0,a.jsx)("span",{className:"icon-bar"})," ",(0,a.jsx)("span",{className:"icon-bar"})," "]}),(0,a.jsx)("a",{className:"navbar-brand page-scroll",href:"#page-top",children:"SLT"})," "]}),(0,a.jsx)("div",{className:"collapse navbar-collapse",id:"bs-example-navbar-collapse-1",children:(0,a.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#features",className:"page-scroll",children:"Features"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#about",className:"page-scroll",children:"About"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#services",className:"page-scroll",children:"Services"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#portfolio",className:"page-scroll",children:"Gallery"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#testimonials",className:"page-scroll",children:"Testimonials"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#team",className:"page-scroll",children:"Team"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#contact",className:"page-scroll",children:"Contact"})})]})})]})})},i=function(e){return(0,a.jsx)("header",{id:"header",children:(0,a.jsx)("div",{className:"intro",children:(0,a.jsx)("div",{className:"overlay",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col-md-8 col-md-offset-2 intro-text",children:[(0,a.jsxs)("h1",{children:[e.data?e.data.title:"Loading",(0,a.jsx)("span",{})]}),(0,a.jsx)("p",{children:e.data?e.data.paragraph:"Loading"}),(0,a.jsx)("a",{href:"#features",className:"btn btn-custom btn-lg page-scroll",children:"Learn More"})," "]})})})})})})},s=function(e){return(0,a.jsx)("div",{id:"features",className:"text-center",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"col-md-10 col-md-offset-1 section-title",children:(0,a.jsx)("h2",{children:"Features"})}),(0,a.jsx)("div",{className:"row",children:e.data?e.data.map((function(e,t){return(0,a.jsxs)("div",{className:"col-xs-6 col-md-3",children:[" ",(0,a.jsx)("i",{className:e.icon}),(0,a.jsx)("h3",{children:e.title}),(0,a.jsx)("p",{children:e.text})]},"".concat(e.title,"-").concat(t))})):"Loading..."})]})})},u=function(e){return(0,a.jsx)("div",{id:"about",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-xs-12 col-md-6",children:[" ",(0,a.jsx)("img",{src:"img/about.jpg",className:"img-responsive",alt:""})," "]}),(0,a.jsx)("div",{className:"col-xs-12 col-md-6",children:(0,a.jsxs)("div",{className:"about-text",children:[(0,a.jsx)("h2",{children:"About Us"}),(0,a.jsx)("p",{children:e.data?e.data.paragraph:"loading..."}),(0,a.jsx)("h3",{children:"Why Choose Us?"}),(0,a.jsxs)("div",{className:"list-style",children:[(0,a.jsx)("div",{className:"col-lg-6 col-sm-6 col-xs-12",children:(0,a.jsx)("ul",{children:e.data?e.data.Why.map((function(e,t){return(0,a.jsx)("li",{children:e},"".concat(e,"-").concat(t))})):"loading"})}),(0,a.jsx)("div",{className:"col-lg-6 col-sm-6 col-xs-12",children:(0,a.jsx)("ul",{children:e.data?e.data.Why2.map((function(e,t){return(0,a.jsxs)("li",{children:[" ",e]},"".concat(e,"-").concat(t))})):"loading"})})]})]})})]})})})},l=function(e){return(0,a.jsx)("div",{id:"services",className:"text-center",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"section-title",children:[(0,a.jsx)("h2",{children:"Our Services"}),(0,a.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit duis sed dapibus leonec."})]}),(0,a.jsx)("div",{className:"row",children:e.data?e.data.map((function(e,t){return(0,a.jsxs)("div",{className:"col-md-4",children:[" ",(0,a.jsx)("i",{className:e.icon}),(0,a.jsxs)("div",{className:"service-desc",children:[(0,a.jsx)("h3",{children:e.name}),(0,a.jsx)("p",{children:e.text})]})]},"".concat(e.name,"-").concat(t))})):"loading"})]})})},p=function(e){var t=e.title,n=e.largeImage,r=e.smallImage;return(0,a.jsx)("div",{className:"portfolio-item",children:(0,a.jsxs)("div",{className:"hover-bg",children:[" ",(0,a.jsxs)("a",{href:n,title:t,"data-lightbox-gallery":"gallery1",children:[(0,a.jsx)("div",{className:"hover-text",children:(0,a.jsx)("h4",{children:t})}),(0,a.jsx)("img",{src:r,className:"img-responsive",alt:t})," "]})," "]})})},c=function(e){return(0,a.jsx)("div",{id:"portfolio",className:"text-center",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"section-title",children:(0,a.jsx)("h2",{children:"Letter Signs"})}),(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"portfolio-items",children:e.data?e.data.map((function(e,t){return(0,a.jsx)("div",{className:"col-sm-6 col-md-4 col-lg-4",children:(0,a.jsx)(p,{title:e.title,largeImage:e.largeImage,smallImage:e.smallImage})},"".concat(e.title,"-").concat(t))})):"Loading..."})})]})})},d=function(e){return(0,a.jsx)("div",{id:"testimonials",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"section-title text-center",children:(0,a.jsx)("h2",{children:"What our clients say"})}),(0,a.jsx)("div",{className:"row",children:e.data?e.data.map((function(e,t){return(0,a.jsx)("div",{className:"col-md-4",children:(0,a.jsxs)("div",{className:"testimonial",children:[(0,a.jsxs)("div",{className:"testimonial-image",children:[" ",(0,a.jsx)("img",{src:e.img,alt:""})," "]}),(0,a.jsxs)("div",{className:"testimonial-content",children:[(0,a.jsxs)("p",{children:['"',e.text,'"']}),(0,a.jsxs)("div",{className:"testimonial-meta",children:[" - ",e.name," "]})]})]})},"".concat(e.name,"-").concat(t))})):"loading"})]})})},f=function(e){return(0,a.jsx)("div",{id:"team",className:"text-center",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"col-md-8 col-md-offset-2 section-title",children:[(0,a.jsx)("h2",{children:"Meet the Team"}),(0,a.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit duis sed dapibus leonec."})]}),(0,a.jsx)("div",{id:"row",children:e.data?e.data.map((function(e,t){return(0,a.jsx)("div",{className:"col-md-3 col-sm-6 team",children:(0,a.jsxs)("div",{className:"thumbnail",children:[" ",(0,a.jsx)("img",{src:e.img,alt:"...",className:"team-img"}),(0,a.jsxs)("div",{className:"caption",children:[(0,a.jsx)("h4",{children:e.name}),(0,a.jsx)("p",{children:e.job})]})]})},"".concat(e.name,"-").concat(t))})):"loading"})]})})},g=__webpack_require__(142);function h(e,t,n){return(t=(0,g.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=__webpack_require__(578),b={name:"",email:"",message:""},_=function(e){var n=(0,t.useState)(b),o=(0,r.Z)(n,2),i=o[0],s=i.name,u=i.email,l=i.message,p=o[1],c=function(e){var t=e.target,n=t.name,r=t.value;p((function(e){return v(v({},e),{},h({},n,r))}))};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{id:"contact",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"col-md-8",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"section-title",children:[(0,a.jsx)("h2",{children:"Get In Touch"}),(0,a.jsx)("p",{children:"Please fill out the form below to send us an email and we will get back to you as soon as possible."})]}),(0,a.jsxs)("form",{name:"sentMessage",validate:!0,onSubmit:function(e){e.preventDefault(),console.log(s,u,l),y.ZP.sendForm("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",e.target,"YOUR_USER_ID").then((function(e){console.log(e.text),p(v({},b))}),(function(e){console.log(e.text)}))},children:[(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("input",{type:"text",id:"name",name:"name",className:"form-control",placeholder:"Name",required:!0,onChange:c}),(0,a.jsx)("p",{className:"help-block text-danger"})]})}),(0,a.jsx)("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"Email",required:!0,onChange:c}),(0,a.jsx)("p",{className:"help-block text-danger"})]})})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("textarea",{name:"message",id:"message",className:"form-control",rows:"4",placeholder:"Message",required:!0,onChange:c}),(0,a.jsx)("p",{className:"help-block text-danger"})]}),(0,a.jsx)("div",{id:"success"}),(0,a.jsx)("button",{type:"submit",className:"btn btn-custom btn-lg",children:"Send Message"})]})]})}),(0,a.jsx)("div",{className:"col-md-12",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"social",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:e.data?e.data.facebook:"/",children:(0,a.jsx)("i",{className:"fa fa-facebook"})})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:e.data?e.data.twitter:"/",children:(0,a.jsx)("i",{className:"fa fa-twitter"})})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:e.data?e.data.youtube:"/",children:(0,a.jsx)("i",{className:"fa fa-youtube"})})})]})})})})]})}),(0,a.jsx)("div",{id:"footer",children:(0,a.jsx)("div",{className:"container text-center",children:(0,a.jsxs)("p",{children:["\xa9 2023 Mustafa Esmaail . Design by"," ",(0,a.jsx)("a",{href:"http://www.templatewire.com",rel:"nofollow",children:"TemplateWire"})]})})})]})},k=JSON.parse('{"Header":{"title":"We are a Landing Page","paragraph":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sed commodo nibh ante facilisis bibendum."},"About":{"paragraph":"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.","Why":["Lorem ipsum dolor","Tempor incididunt","Lorem ipsum dolor","Incididunt ut labore"],"Why2":["Aliquip ex ea commodo","Lorem ipsum dolor","Exercitation ullamco","Lorem ipsum dolor"]},"Gallery":[{"title":"\u0627\u0644\u0641","largeImage":"img/portfolio/01-large.jpg","smallImage":"img/portfolio/01-small.jpg"},{"title":"\u0628\u0627\u0621","largeImage":"img/portfolio/02-large.jpg","smallImage":"img/portfolio/02-small.jpg"},{"title":"\u062a\u0627\u0621","largeImage":"img/portfolio/03-large.jpg","smallImage":"img/portfolio/03-small.jpg"},{"title":"\u062b\u0627\u0621","largeImage":"img/portfolio/04-large.jpg","smallImage":"img/portfolio/04-small.jpg"},{"title":"\u062c\u064a\u0645","largeImage":"img/portfolio/05-large.jpg","smallImage":"img/portfolio/05-small.jpg"},{"title":"\u062d\u0627\u0621","largeImage":"img/portfolio/06-large.jpg","smallImage":"img/portfolio/06-small.jpg"},{"title":"\u062e\u0627\u0621","largeImage":"img/portfolio/07-large.jpg","smallImage":"img/portfolio/07-small.jpg"},{"title":"\u062f\u0627\u0644","largeImage":"img/portfolio/08-large.jpg","smallImage":"img/portfolio/08-small.jpg"},{"title":"\u0632\u0627\u0644","largeImage":"img/portfolio/09-large.jpg","smallImage":"img/portfolio/09-small.jpg"}],"Services":[{"icon":"fa fa-wordpress","name":"Lorem ipsum dolor","text":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at."},{"icon":"fa fa-cart-arrow-down","name":"Consectetur adipiscing","text":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at."},{"icon":"fa fa-cloud-download","name":"Lorem ipsum dolor","text":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at."},{"icon":"fa fa-language","name":"Consectetur adipiscing","text":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at."},{"icon":"fa fa-plane","name":"Lorem ipsum dolor","text":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at."},{"icon":"fa fa-pie-chart","name":"Consectetur adipiscing","text":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at."}],"Testimonials":[{"img":"img/testimonials/01.jpg","text":"\\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at.\\"","name":"John Doe"},{"img":"img/testimonials/02.jpg","text":"\\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at.\\"","name":"Johnathan Doe"},{"img":"img/testimonials/03.jpg","text":"\\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at.\\"","name":"John Doe"},{"img":"img/testimonials/04.jpg","text":"\\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at.\\"","name":"Johnathan Doe"},{"img":"img/testimonials/05.jpg","text":"\\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at.\\"","name":"John Doe"},{"img":"img/testimonials/06.jpg","text":"\\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed dapibus leo nec ornare diam sedasd commodo nibh ante facilisis bibendum dolor feugiat at.\\"","name":"Johnathan Doe"}],"Team":[{"img":"img/team/01.jpg","name":"Mustafa Esmaail","job":"Computer Engineer"},{"img":"img/team/02.jpg","name":"Omar Mohamed","job":"Computer Engineer"},{"img":"img/team/03.jpg","name":"Pmar Mahmoud","job":"Computer Engineer"},{"img":"img/team/04.jpg","name":"Eslam","job":"Computer Engineer"}],"Contact":{"address":"4321 California St, San Francisco, CA 12345 ","phone":"+1 123 456 1234","email":"info@company.com","facebook":"fb.com","twitter":"twitter.com","youtube":"youtube.com"},"Features":[{"icon":"fa fa-comments-o","title":"Lorem ipsum","text":"Lorem ipsum dolor sit amet placerat facilisis felis mi in tempus eleifend pellentesque natoque etiam."},{"icon":"fa fa-bullhorn","title":"Lorem ipsum","text":"Lorem ipsum dolor sit amet placerat facilisis felis mi in tempus eleifend pellentesque natoque etiam."},{"icon":"fa fa-group","title":"Lorem ipsum","text":"Lorem ipsum dolor sit amet placerat facilisis felis mi in tempus eleifend pellentesque natoque etiam."},{"icon":"fa fa-magic","title":"Lorem ipsum","text":"Lorem ipsum dolor sit amet placerat facilisis felis mi in tempus eleifend pellentesque natoque etiam."}]}'),x=__webpack_require__(445),w=__webpack_require__.n(x),O=__webpack_require__(165),S=__webpack_require__(861),C=__webpack_require__(762),E=__webpack_require__(982),T=__webpack_require__(671),R=__webpack_require__(144),F=function(){function e(t,n){(0,T.Z)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,R.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),I=function(){function e(){(0,T.Z)(this,e)}return(0,R.Z)(e,[{key:"refCount",value:function(e){return M("refCount")}},{key:"incRef",value:function(e){return M("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return M("time")}},{key:"read",value:function(e){return M("read")}},{key:"readSync",value:function(e){return M("readSync")}},{key:"readToGPU",value:function(e,t){return M("readToGPU")}},{key:"numDataIds",value:function(){return M("numDataIds")}},{key:"disposeData",value:function(e,t){return M("disposeData")}},{key:"write",value:function(e,t,n){return M("write")}},{key:"move",value:function(e,t,n,r,a){return M("move")}},{key:"createTensorFromGPUData",value:function(e,t,n){return M("createTensorFromGPUData")}},{key:"memory",value:function(){return M("memory")}},{key:"floatPrecision",value:function(){return M("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return M("dispose")}}]),e}();function M(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function A(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,L(e,--t,n)}function N(e,t,n){return Math.max(e,Math.min(t,n))}function D(e){return e%2===0?e:e+1}function L(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function B(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function P(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";P(W(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function z(e){P(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function G(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function W(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function U(e){return e%1===0}function Z(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function H(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,o){var i=0;!function s(){if(e())a();else{i++;var u=t(i);null!=n&&i>=n?o():null!=r?r(s,u):setTimeout(s,u)}}()}))}function K(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function X(e,t){var n=t.length;return P((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),P(e.every((function(e){return U(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function q(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:X(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Y(e,t){return $(e,t)}function $(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function J(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Q(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function ee(e){return"string"===typeof e||e instanceof String}function te(e){return"number"===typeof e}function ne(e){return Array.isArray(e)?ne(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":te(e)?"float32":ee(e)?"string":"boolean"===typeof e?"bool":"float32"}function re(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ae(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function oe(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function ie(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var o=t[0]*(r?2:1),i=0;i<o;i++)a[i]=n[e+i];else for(var s=t[0],u=t.slice(1),l=u.reduce((function(e,t){return e*t}))*(r?2:1),p=0;p<s;p++)a[p]=ie(e+p*l,u,n,r);return a}function se(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return ie(0,e,t,n)}function ue(e,t){for(var n=le(e,t),r=0;r<n.length;r++)n[r]=1;return n}function le(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function pe(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return se(e,new Float32Array(n));if("int32"===t)return se(e,new Int32Array(n));if("bool"===t)return se(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function ce(e){e.forEach((function(t){P(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function de(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function fe(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function ge(e){return e&&e.then&&"function"===typeof e.then}var he="tfjsflags",me=function(){function e(t){(0,T.Z)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ve,this.populateURLFlags()}return(0,R.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(ye().getBool("IS_TEST")||ye().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];ye().getBool("IS_TEST")||ye().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(ge(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getString",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(he in t)t[he].split(",").forEach((function(t){var n=t.split(":"),a=(0,r.Z)(n,2),o=a[0],i=a[1];e.urlFlags[o]=function(e,t){var n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,i)}))}}}]),e}();function ve(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function ye(){return _e}var be,_e=null;function ke(){if(null==be){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof __webpack_require__.g)e=__webpack_require__.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}be=e}return be}function xe(e,t){var n=function(){var e=ke();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var we="Abs",Oe="Acos",Se="Acosh",Ce="Add",Ee="AddN",Te="All",Re="Any",Fe="ArgMax",Ie="ArgMin",Me="Asin",Ae="Asinh",Ne="Atan",De="Atanh",Le="Atan2",Be="AvgPool",Pe="AvgPoolGrad",je="AvgPool3D",ze="AvgPool3DGrad",Ge="BatchMatMul",We="BatchToSpaceND",Ue="Bincount",Ze="BroadcastArgs",He="Cast",Ve="Ceil",Ke="ClipByValue",Xe="Complex",qe="ComplexAbs",Ye="Concat",$e="Conv2D",Je="Conv2DBackpropFilter",Qe="Conv2DBackpropInput",et="Conv3D",tt="Conv3DBackpropFilterV2",nt="Conv3DBackpropInputV2",rt="Cos",at="Cosh",ot="Cumprod",it="Cumsum",st="CropAndResize",ut="DenseBincount",lt="DepthToSpace",pt="DepthwiseConv2dNative",ct="DepthwiseConv2dNativeBackpropFilter",dt="DepthwiseConv2dNativeBackpropInput",ft="Diag",gt="Dilation2D",ht="Dilation2DBackpropInput",mt="Dilation2DBackpropFilter",vt="RealDiv",yt="Einsum",bt="Elu",_t="EluGrad",kt="Erf",xt="Equal",wt="Exp",Ot="ExpandDims",St="Expm1",Ct="FFT",Et="Fill",Tt="FlipLeftRight",Rt="Floor",Ft="FloorDiv",It="FusedBatchNorm",Mt="GatherV2",At="GatherNd",Nt="Greater",Dt="GreaterEqual",Lt="Identity",Bt="IFFT",Pt="Imag",jt="IsFinite",zt="IsInf",Gt="IsNan",Wt="LeakyRelu",Ut="Less",Zt="LessEqual",Ht="LinSpace",Vt="Log",Kt="Log1p",Xt="LogicalAnd",qt="LogicalNot",Yt="LogicalOr",$t="LRN",Jt="LRNGrad",Qt="Max",en="Maximum",tn="MaxPool",nn="MaxPoolGrad",rn="MaxPool3D",an="MaxPool3DGrad",on="MaxPoolWithArgmax",sn="Mean",un="Min",ln="Minimum",pn="MirrorPad",cn="Mod",dn="Multinomial",fn="Multiply",gn="Neg",hn="NotEqual",mn="NonMaxSuppressionV3",vn="NonMaxSuppressionV4",yn="NonMaxSuppressionV5",bn="OnesLike",_n="OneHot",kn="Pack",xn="PadV2",wn="Pow",On="Prelu",Sn="Prod",Cn="RaggedGather",En="RaggedRange",Tn="RaggedTensorToTensor",Rn="Range",Fn="Real",In="Reciprocal",Mn="Relu",An="Reshape",Nn="ResizeNearestNeighbor",Dn="ResizeNearestNeighborGrad",Ln="ResizeBilinear",Bn="ResizeBilinearGrad",Pn="Relu6",jn="Reverse",zn="Round",Gn="Rsqrt",Wn="ScatterNd",Un="TensorScatterUpdate",Zn="SearchSorted",Hn="Select",Vn="Selu",Kn="Slice",Xn="Sin",qn="Sinh",Yn="Sign",$n="Sigmoid",Jn="Softplus",Qn="Sqrt",er="Sum",tr="SpaceToBatchND",nr="SplitV",rr="Softmax",ar="SparseFillEmptyRows",or="SparseReshape",ir="SparseSegmentMean",sr="SparseSegmentSum",ur="SparseToDense",lr="SquaredDifference",pr="Square",cr="StaticRegexReplace",dr="StridedSlice",fr="StringNGrams",gr="StringSplit",hr="StringToHashBucketFast",mr="Sub",vr="Tan",yr="Tanh",br="Tile",_r="TopK",kr="Transform",xr="Transpose",wr="Unique",Or="Unpack",Sr="UnsortedSegmentSum",Cr="ZerosLike",Er="Step",Tr="RotateWithOffset",Rr="_FusedMatMul",Fr="FusedConv2D",Ir="FusedDepthwiseConv2D";function Mr(){var e;ye().getBool("IS_TEST")||ye().getBool("PROD")||(e=console).warn.apply(e,arguments)}var Ar=xe("kernelRegistry",(function(){return new Map})),Nr=xe("gradRegistry",(function(){return new Map}));function Dr(e,t){var n=zr(e,t);return Ar.get(n)}function Lr(e){return Nr.get(e)}function Br(e){for(var t=Ar.entries(),n=[];;){var a=t.next(),o=a.done,i=a.value;if(o)break;var s=(0,r.Z)(i,2),u=s[0],l=s[1],p=u.split("_");(0,r.Z)(p,1)[0]===e&&n.push(l)}return n}function Pr(e){var t=e.kernelName,n=e.backendName,r=zr(t,n);Ar.has(r)&&Mr("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Ar.set(r,e)}function jr(e){var t=e.kernelName;Nr.has(t)&&ye().getBool("DEBUG")&&Mr("Overriding the gradient for '".concat(t,"'")),Nr.set(t,e)}function zr(e,t){return"".concat(t,"_").concat(e)}function Gr(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var Wr=__webpack_require__(987),Ur=__webpack_require__.n(Wr)()||Wr;function Zr(e){return Ur.fromString(e,!0,16)}var Hr=Zr("c3a5c85c97cb3127"),Vr=Zr("b492b66fbe98f273"),Kr=Zr("9ae16a3b2f90404f");function Xr(e){return e.xor(e.shru(47))}function qr(e,t,n){var r=e.slice(t,t+n);return Ur.fromBytes(Array.from(r),!0,!0)}function Yr(e,t){return qr(e,t,8)}function $r(e,t){return qr(e,t,4)}function Jr(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Qr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zr("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function ea(e,t,n,r){return function(e,t,n,r,a,o){a=a.add(e),o=Jr(o.add(a).add(r),21);var i=a;return a=(a=a.add(t)).add(n),o=o.add(Jr(a,44)),[a.add(r),o.add(i)]}(Yr(e,t),Yr(e,t+8),Yr(e,t+16),Yr(e,t+24),n,r)}function ta(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Ur.fromNumber(81,!0);if(t<=32)return t<=16?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=Kr.add(2*t),r=Yr(e,0).add(Kr),a=Yr(e,t-8);return Qr(Jr(a,37).mul(n).add(r),Jr(r,25).add(a).mul(n),n)}if(t>=4){var o=Kr.add(2*t);return Qr($r(e,0).shl(3).add(t),$r(e,t-4),o)}if(t>0){var i=e[0]+(e[t>>1]<<8),s=t+(e[t-1]<<2);return Xr(Kr.mul(i).xor(Hr.mul(s))).mul(Kr)}return Kr}(e,t):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Kr.add(2*t),r=Yr(e,0).mul(Vr),a=Yr(e,8),o=Yr(e,t-8).mul(n),i=Yr(e,t-16).mul(Kr);return Qr(Jr(r.add(a),43).add(Jr(o,30)).add(i),r.add(Jr(a.add(Kr),18)).add(o),n)}(e,t);if(t<=64)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Kr.add(2*t),r=Yr(e,0).mul(Kr),a=Yr(e,8),o=Yr(e,t-8).mul(n),i=Yr(e,t-16).mul(Kr),s=Jr(r.add(a),43).add(Jr(o,30)).add(i),u=Qr(s,r.add(Jr(a.add(Kr),18)).add(o),n),l=Yr(e,16).mul(n),p=Yr(e,24),c=s.add(Yr(e,t-32)).mul(n),d=u.add(Yr(e,t-24)).mul(n);return Qr(Jr(l.add(p),43).add(Jr(c,30)).add(d),l.add(Jr(p.add(r),18)).add(c),n)}(e,t);var r=n,a=n.mul(Vr).add(113),o=Xr(a.mul(Kr).add(113)).mul(Kr),i=[Ur.UZERO,Ur.UZERO],s=[Ur.UZERO,Ur.UZERO];r=r.mul(Kr).add(Yr(e,0));var u=0,l=64*(t-1>>6),p=l+(t-1&63)-63;do{r=Jr(r.add(a).add(i[0]).add(Yr(e,u+8)),37).mul(Vr),a=Jr(a.add(i[1]).add(Yr(e,u+48)),42).mul(Vr),r=r.xor(s[1]),a=a.add(i[0]).add(Yr(e,u+40)),o=Jr(o.add(s[0]),33).mul(Vr),i=ea(e,u,i[1].mul(Vr),r.add(s[0])),s=ea(e,u+32,o.add(s[1]),a.add(Yr(e,u+16)));var c=[r,o];o=c[0],r=c[1],u+=64}while(u!==l);var d=Vr.add(o.and(255).shl(1));u=p,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),r=Jr(r.add(a).add(i[0]).add(Yr(e,u+8)),37).mul(d),a=Jr(a.add(i[1]).add(Yr(e,u+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(i[0].mul(9).add(Yr(e,u+40))),o=Jr(o.add(s[0]),33).mul(d),i=ea(e,u,i[1].mul(d),r.add(s[0])),s=ea(e,u+32,o.add(s[1]),a.add(Yr(e,u+16)));var f=[r,o];return o=f[0],r=f[1],Qr(Qr(i[0],s[0],d).add(Xr(a).mul(Hr)).add(o),Qr(i[1],s[1],d).add(r),d)}function na(e,t){return"string"===t?oa(e):ra([e],t)}function ra(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ua(e)),ye().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function aa(){return ye().platform.now()}function oa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",ye().platform.encode(e,t)}function ia(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",ye().platform.decode(e,t)}function sa(e){return null!=ye().platform.isTypedArray?ye().platform.isTypedArray(e):Gr(e)}function ua(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||ge(e)||null==e||sa(e)&&n)t.push(e);else if(Array.isArray(e)||sa(e))for(var r=0;r<e.length;++r)ua(e[r],t,n);else{for(var a=-1,o=0,i=Object.keys(e);o<i.length;o++){var s=i[o];/^([1-9]+[0-9]*|0)$/.test(s)&&(a=Math.max(a,Number(s)))}for(var u=0;u<=a;u++)ua(e[u],t,n)}return t}var la=function(){function e(t,n){(0,T.Z)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new pa)}return(0,R.Z)(e,[{key:"profileKernel",value:function(e,t,n){var r,a,o=function(){r=n()},i=aa();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();var s,u=(0,C.Z)(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(c){u.e(c)}finally{u.f()}a=Promise.resolve({kernelMs:aa()-i})}if(ye().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(){var t=r[p];t.data().then((function(n){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(n,t.dtype,e)}))},p=0;p<r.length;p++)l();return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();var pa=function(){function e(){(0,T.Z)(this,e)}return(0,R.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"===typeof r?H("".concat(r,"ms"),9):r.error,s=H(e,25),u=t.rank,l=t.size,p=H(t.shape.toString(),14),c="";for(var d in a){var f=a[d];if(null!=f){var g=f.shape||t.shape,h=g.length;c+="".concat(d,": ").concat(h,"D ").concat(h>0?g:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(p,"\t%c").concat(l,"\t%c").concat(c,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();var ca=__webpack_require__(136),da=__webpack_require__(277),fa=20,ga=3,ha=7;function ma(e,t,n,r){var a=oe(t),o=function(e,t,n,r){var a=G(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?_a(e):e;if(s>1)for(var l=0;l<a/o;l++)for(var p=l*o,c=0;c<o;c++)i[c]=Math.max(i[c],va(u[p+c],0,n).length);return i}(e,t,n,a),i=t.length,s=ba(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function va(e,t,n){return H(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(ha))," + ")+"".concat(parseFloat(e[1].toFixed(ha)),"j"):ee(e)?"'".concat(e,"'"):"bool"===n?ya(e):parseFloat(e.toFixed(ha)).toString(),t)}function ya(e){return 0===e?"false":"true"}function ba(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[va(_a(e)[0],0,n)]:"bool"===n?[ya(e[0])]:[e[0].toString()];if(1===u){if(s>fa){var l=ga*i,p=Array.from(e.slice(0,l)),c=Array.from(e.slice((s-ga)*i,s*i));return"complex64"===n&&(p=_a(p),c=_a(c)),["["+p.map((function(e,t){return va(e,a[t],n)})).join(", ")+", ..., "+c.map((function(e,t){return va(e,a[s-ga+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?_a(e):Array.from(e)).map((function(e,t){return va(e,a[t],n)})).join(", ")+"]"]}var d=t.slice(1),f=r.slice(1),g=r[0]*i,h=[];if(s>fa){for(var m=0;m<ga;m++){var v=m*g,y=v+g;h.push.apply(h,(0,E.Z)(ba(e.slice(v,y),d,n,f,a,!1)))}h.push("...");for(var b=s-ga;b<s;b++){var _=b*g,k=_+g;h.push.apply(h,(0,E.Z)(ba(e.slice(_,k),d,n,f,a,b===s-1)))}}else for(var x=0;x<s;x++){var w=x*g,O=w+g;h.push.apply(h,(0,E.Z)(ba(e.slice(w,O),d,n,f,a,x===s-1)))}var S=2===u?",":"";h[0]="["+(s>0?h[0]+S:"");for(var C=1;C<h.length-1;C++)h[C]=" "+h[C]+S;for(var T=",\n",R=2;R<u;R++)T+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(o?"":T),h}function _a(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var ka=function(){function e(t,n,r){var a=this;if((0,T.Z)(this,e),this.dtype=n,this.shape=t.slice(),this.size=G(t),null!=r){var o=r.length;P(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||$(n,this.size),this.strides=oe(t)}return(0,R.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),P(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return xa().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),xa=null,wa=null;var Oa=function(){function e(t,n,r,a){(0,T.Z)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=G(t),this.strides=oe(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,R.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",wa.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return wa.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",se(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return se(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=xa().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return ia(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),xa().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=xa().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return ia(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,xa().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(xa().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return wa.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),wa.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ma(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),wa.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),xa().makeVariable(this,e,t,n)}}]),e}();function Sa(){return xe("Tensor",(function(){return Oa}))}Object.defineProperty(Oa,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),Sa();var Ca,Ea,Ta,Ra,Fa,Ia=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r,a,o){var i;return(0,T.Z)(this,n),(i=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,i.name=a,i}return(0,R.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!W(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));xa().disposeTensor(this),this.dataId=e.dataId,xa().incRef(this,null)}},{key:"dispose",value:function(){xa().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Oa);Object.defineProperty(Ia,Symbol.hasInstance,{value:function(e){return e instanceof Oa&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Ca||(Ca={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Ea||(Ea={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Ta||(Ta={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Ra||(Ra={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Fa||(Fa={}));var Ma={float32:Ra,int32:Ea,bool:Ta,complex64:Fa};function Aa(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Ma[e][t]}function Na(e){return Aa(e,"int32")}function Da(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function La(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function Ba(e,t){if(e.dtype===t.dtype)return[e,t];var n=Aa(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Pa(e,t){return t.some((function(t){return t.id===e.id}))}function ja(e){var t=[];return za(e,t,new Set),t}function za(e,t,n){if(null!=e)if(e instanceof Oa)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var o in a){var i=a[o];n.has(i)||(n.add(i),za(i,t,n))}}}function Ga(e){return null!=e.kernelName}var Wa=function(){function e(){(0,T.Z)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,R.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),Ua=function(){function e(t){(0,T.Z)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Wa}return(0,R.Z)(e,[{key:"ready",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Mr("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new la(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Br(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Br(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof I||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,Mr("Initialization of backend ".concat(e," failed")),Mr(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(i){return Mr("Initialization of backend ".concat(e," failed")),Mr(i.stack||i.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=Va.runKernel(Lt,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return Va.runKernel(He,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=Dr(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var l=Ga(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Ga(e)){var p=e.kernelName,c=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var f=Dr(p,this.backendName);P(null!=f,(function(){return"Cannot find registered kernel '".concat(p,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=f.kernelFunc({inputs:c,attrs:d,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(p,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(i){var s=a.getTensorsForGradient(p,c,n);o=a.saveTensorsForBackwardMode(s)}return n}}else{var g=e.forwardFunc,h=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return g(a.backend,h)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t),t}}var m,v=e.inputs,y=e.attrs,b=Ga(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(m=a.profiler.profileKernel(l,v,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(m),t=m.outputs):t=n()})),i&&this.addTapeNode(l,v,t,b,o,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(v).map((function(e){return null!=v[e]?v[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Lr(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(P(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return i[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&ee(e[0])&&(a=e.map((function(e){return oa(e)})));var o=r.write(a,t,n),i=new Oa(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var s=this.state.tensorInfo.get(o),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,o=new Oa(r,a,n,this.nextTensorId());return this.trackTensor(o,t),o}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new Ia(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Q(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Ia||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Q(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a,o,i;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,E.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=(0,C.Z)(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((o=a.n()).done){e.next=24;break}return i=o.value,e.next=18,i.kernelTimeMs;case 18:return i.kernelTimeMs=e.sent,e.next=21,i.extraInfo;case 21:i.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Lr(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=le(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=ja(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(P(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));P(o instanceof Oa,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var s=e[i],u=s.inputs;for(var l in u){for(var p=u[l],c=!1,d=0;d<t.length;d++)if(r[p.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),c=!0,a[s.id]=!0;break}if(c)break}}var f={};f[n.id]=!0;for(var g={},h=e.length-1;h>=0;h--)for(var m=e[h],v=m.inputs,y=0;y<m.outputs.length;y++)if(f[m.outputs[y].id]){for(var b in v)f[v[b].id]=!0,g[m.id]=!0;break}for(var _=[],k=0;k<e.length;k++){var x=e[k];if(a[x.id]&&g[x.id]){var w={};for(var O in x.inputs){var S=x.inputs[O];r[S.id]&&(w[O]=S)}var C=Object.assign({},x);C.inputs=w,C.outputs=x.outputs,_.push(C)}}return _}(this.state.activeTape,t,o);if(!a&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?function(e){var t=ue(G(e),"float32");return Va.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,r){for(var a=function(){var a=t[o],i=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));var s=a.gradient(i),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var o=n((function(){return s[t]()}));if("float32"!==o.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(o.dtype,"'"));var i=a.inputs[t];if(!W(o.shape,i.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(o.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=o;else{var u=e[i.id];e[i.id]=r(u,o),u.dispose()}};for(var l in a.inputs)u(l)},o=t.length-1;o>=0;o--)a()}(e,i,(function(e){return r.tidy(e)}),Ka);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=(0,C.Z)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:o,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return P(re(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;P(r.every((function(e){return e instanceof Oa})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};r.forEach((function(e,t){i[t]=e}));return t.runKernelFunc({forwardFunc:function(t,n){return P((o=e.apply(void 0,[].concat(r,[n]))).value instanceof Oa,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),P(re(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},backwardsFunc:function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];P(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),P(a.every((function(e){return e instanceof Oa})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i},inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=aa(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=aa()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Wa,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function Za(){var e=ke();if(null==e._tfengine){var t=new me(e);e._tfengine=new Ua(t)}return function(e){_e=e}(e._tfengine.ENV),xa=function(){return e._tfengine},e._tfengine}Ua.nextTensorId=0,Ua.nextVariableId=0;var Ha,Va=Za();function Ka(e,t){var n={a:e,b:t};return Va.runKernel(Ce,n)}function Xa(e){if(void 0!==Ha)return Ha;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function qa(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var Ya=ye();function $a(e,t){var n=e;if(sa(e))return"string"===t?[]:[e.length];if(Da(e)){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}if(La(e))return[e.buffer.size/(null==t?4:Q(t))];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||sa(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&ye().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Ja(e,a,[]),a}function Ja(e,t,n){if(n=n||[],Array.isArray(e)||sa(e)){P(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),P(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)Ja(e[a],r,n.concat(a))}else P(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function Qa(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function eo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Oa)return Qa(r,e.dtype,t,n),e;var a=ne(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Qa(r,a,t,n),null==e||!sa(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(o,"'"))}var i=$a(e,a);sa(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?ra(e,a):ua(e,[],!0);return Va.makeTensor(s,i,a)}function to(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((function(e,a){return eo(e,"".concat(t,"[").concat(a,"]"),n,r)}))}Ya.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Ya.registerFlag("IS_BROWSER",(function(){return qa()})),Ya.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),Ya.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Ya.registerFlag("IS_SAFARI",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)})),Ya.registerFlag("PROD",(function(){return!1})),Ya.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Ya.getBool("DEBUG")})),Ya.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Ya.registerFlag("IS_TEST",(function(){return!1})),Ya.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return Ya.getBool("DEBUG")})),Ya.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),Ya.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),Ya.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));function no(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){Va.startScope(n);try{var e=r.apply(void 0,arguments);return ge(e)&&console.error("Cannot return a Promise inside of tidy."),Va.endScope(e),e}catch(t){throw Va.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var ro=no({complex_:function(e,t){var n=eo(e,"real","complex"),r=eo(t,"imag","complex");j(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return Va.runKernel(Xe,a)}});function ao(e,t,n,r){if(null==r)r=ne(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(La(e)||Da(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return Va.backend.createTensorFromGPUData(e,t||n,r)}if(!sa(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){ce(t);var a=G(t),o=G(n);P(a===o,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(o)}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==G(t.slice(i));P(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return sa(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?ra(e,r):ua(e,[],!0),Va.makeTensor(e,t,r)}function oo(e,t,n){return ao(e,t,$a(e,n),n)}var io={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},so=4;function uo(e,t){return lo.apply(this,arguments)}function lo(){return lo=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o,i,s,u;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],o=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),i=(0,O.Z)().mark((function e(){var i,u,l,p;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o[s],"float32"===(u=Array.isArray(t)?t[s].tensor:t[i]).dtype||"int32"===u.dtype||"bool"===u.dtype||"string"===u.dtype||"complex64"===u.dtype){e.next=4;break}throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(u.dtype));case 4:l={name:i,shape:u.shape,dtype:u.dtype},"string"===u.dtype?(p=new Promise(function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a,o,i,s,l;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+so*n.length,a=new Uint8Array(r),o=0,i=0;i<n.length;i++)s=n[i],l=new Uint8Array(new Uint32Array([s.length]).buffer),a.set(l,o),o+=so,a.set(s,o),o+=s.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.push(p)):a.push(u.data()),null!=n&&(l.group=n),r.push(l);case 8:case"end":return e.stop()}}),e)})),s=0;case 5:if(!(s<o.length)){e.next=10;break}return e.delegateYield(i(),"t0",7);case 7:++s,e.next=5;break;case 10:return e.next=12,Promise.all(a);case 12:return u=e.sent,e.abrupt("return",{data:co(u),specs:r});case 14:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}function po(e,t){var n,r,a={},o=0,i=(0,C.Z)(t);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=s.name,l=s.dtype,p=s.shape,c=G(p),d=void 0;if("quantization"in s){var f=s.quantization;if("uint8"===f.dtype||"uint16"===f.dtype){if(!("min"in f)||!("scale"in f))throw new Error("Weight ".concat(s.name," with quantization ").concat(f.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==f.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(f.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==l)throw new Error("Weight ".concat(s.name," is quantized with ").concat(f.dtype," ")+"which only supports weights of type float32 not ".concat(l,"."))}var g=io[f.dtype],h=e.slice(o,o+c*g),m="uint8"===f.dtype?new Uint8Array(h):new Uint16Array(h);if("float32"===l)if("uint8"===f.dtype||"uint16"===f.dtype){d=new Float32Array(m.length);for(var v=0;v<m.length;v++){var y=m[v];d[v]=y*f.scale+f.min}}else{if("float16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," ")+"for weight type float32.");void 0===n&&(n=So()),d=n(m)}else{if("int32"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));if("uint8"!==f.dtype&&"uint16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," ")+"for weight type int32.");d=new Int32Array(m.length);for(var b=0;b<m.length;b++){var _=m[b];d[b]=Math.round(_*f.scale+f.min)}}o+=c*g}else if("string"===l){var k=G(s.shape);d=[];for(var x=0;x<k;x++){var w=new Uint32Array(e.slice(o,o+so))[0];o+=so;var O=new Uint8Array(e.slice(o,o+w));d.push(O),o+=w}}else{var S=io[l],E=e.slice(o,o+c*S);if("float32"===l)d=new Float32Array(E);else if("int32"===l)d=new Int32Array(E);else if("bool"===l)d=new Uint8Array(E);else{if("complex64"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));d=new Float32Array(E);for(var T=new Float32Array(d.length/2),R=new Float32Array(d.length/2),F=0;F<T.length;F++)T[F]=d[2*F],R[F]=d[2*F+1];var I=oo(T,p,"float32"),M=oo(R,p,"float32");a[u]=ro(I,M),I.dispose(),M.dispose()}o+=c*S}"complex64"!==l&&(a[u]=oo(d,p,l))}}catch(A){i.e(A)}finally{i.f()}return a}function co(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var fo="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function go(e){return fo?Buffer.byteLength(e):new Blob([e]).size}function ho(e){if(fo)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function mo(e){if(fo){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function vo(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function yo(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function bo(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function _o(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}function ko(e,t){return xo.apply(this,arguments)}function xo(){return xo=(0,S.Z)((0,O.Z)().mark((function e(t,n){var a,o,i,s;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.weightsManifest){e.next=7;break}return e.next=3,n(t.weightsManifest);case 3:i=e.sent,s=(0,r.Z)(i,2),a=s[0],o=s[1];case 7:return e.abrupt("return",_o(t,a,o));case 8:case"end":return e.stop()}}),e)}))),xo.apply(this,arguments)}function wo(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:go(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:go(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Oo(e){var t,n=[],r=(0,C.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,(0,E.Z)(a.weights))}}catch(o){r.e(o)}finally{r.f()}return n}function So(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),o=new Uint32Array(a),i=0;i<r.length;i++){var s=r[i],u=e[n[s>>10]+(1023&s)]+t[s>>10];o[i]=u}return new Float32Array(a)}}var Co=function(){function e(){(0,T.Z)(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,R.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),Eo=function(e){return Co.registerSaveRouter(e)},To=function(e){return Co.registerLoadRouter(e)},Ro=function(e){return Co.getSaveHandlers(e)},Fo=function(e,t){return Co.getLoadHandlers(e,t)},Io="tensorflowjs",Mo="models_store",Ao="model_info_store";function No(){if(!ye().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Do(e){var t=e.result;t.createObjectStore(Mo,{keyPath:"modelPath"}),t.createObjectStore(Ao,{keyPath:"modelPath"})}var Lo=function(){function e(t){if((0,T.Z)(this,e),this.indexedDB=No(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,R.Z)(e,[{key:"save",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(Io,1);a.onupgradeneeded=function(){return Do(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction(Mo,"readonly"),s=i.objectStore(Mo).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,l,p=wo(t),c=o.transaction(Ao,"readwrite"),d=c.objectStore(Ao);try{u=d.put({modelPath:n.modelPath,modelArtifactsInfo:p})}catch(f){return r(f)}u.onsuccess=function(){var a,i=(l=o.transaction(Mo,"readwrite")).objectStore(Mo);try{a=i.put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:p})}catch(f){return r(f)}a.onsuccess=function(){return e({modelArtifactsInfo:p})},a.onerror=function(e){var t=(d=c.objectStore(Ao)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},u.onerror=function(e){return o.close(),r(u.error)},c.oncomplete=function(){null==l?o.close():l.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();Lo.URL_SCHEME="indexeddb://";var Bo=function(e){return ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Lo.URL_SCHEME)?(t=e.slice(Lo.URL_SCHEME.length),new Lo(t)):null;var t};Co.registerSaveRouter(Bo),Co.registerLoadRouter(Bo);var Po=function(){function e(){(0,T.Z)(this,e),this.indexedDB=No()}return(0,R.Z)(e,[{key:"listModels",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(Io,1);r.onupgradeneeded=function(){return Do(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(Ao,"readonly"),o=a.objectStore(Ao).getAll();o.onsuccess=function(){var t,n={},r=(0,C.Z)(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(i){r.e(i)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(Lo.URL_SCHEME)?r.slice(Lo.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(Io,1);a.onupgradeneeded=function(){return Do(a)},a.onsuccess=function(){var n,o=a.result,i=o.transaction(Ao,"readwrite"),s=i.objectStore(Ao),u=s.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),i=function(){var a=(n=o.transaction(Mo,"readwrite")).objectStore(Mo).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},i.oncomplete=function(){null==n?o.close():n.oncomplete=function(){return o.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),jo="/",zo="tensorflowjs_models",Go="info",Wo="model_topology",Uo="weight_specs",Zo="weight_data",Ho="model_metadata";function Vo(e){return{info:[zo,e,Go].join(jo),topology:[zo,e,Wo].join(jo),weightSpecs:[zo,e,Uo].join(jo),weightData:[zo,e,Zo].join(jo),modelMetadata:[zo,e,Ho].join(jo)}}function Ko(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function Xo(e){var t=e.split(jo);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(jo)}var qo=function(){function e(t){if((0,T.Z)(this,e),!ye().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Vo(this.modelPath)}return(0,R.Z)(e,[{key:"save",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a,o;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=wo(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,ho(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),Ko(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r,a,o,i,s;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer),null!=i.initializerSignature&&(n.initializerSignature=i.initializerSignature),null!=i.trainingConfig&&(n.trainingConfig=i.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=mo(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();qo.URL_SCHEME="localstorage://";var Yo=function(e){return ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(qo.URL_SCHEME)?(t=e.slice(qo.URL_SCHEME.length),new qo(t)):null;var t};Co.registerSaveRouter(Yo),Co.registerLoadRouter(Yo);var $o=function(){function e(){(0,T.Z)(this,e),P(ye().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),P("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,R.Z)(e,[{key:"listModels",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r,a,o,i;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=zo+jo,r=jo+Go,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(i=Xo(o),t[i]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(qo.URL_SCHEME)?a.slice(qo.URL_SCHEME.length):a,n=Vo(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),Ko(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Jo="://",Qo=function(){function e(){(0,T.Z)(this,e),this.managers={}}return(0,R.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){P(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Jo)&&(t=t.slice(0,t.indexOf(Jo))),P(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();P(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function ei(e){if(-1===e.indexOf(Jo))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Qo.getSchemes().join(",")));return{scheme:e.split(Jo)[0],path:e.split(Jo)[1]}}function ti(e,t){return ni.apply(this,arguments)}function ni(){return ni=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o,i,s,u,l,p,c,d,f=arguments;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]&&f[2],P(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),P((a=Co.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),P(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),o=a[0],P((i=Co.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),P(i.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=i[0],u=ei(t).scheme,l=ei(t).path,p=u===ei(t).scheme,e.next=15,o.load();case 15:if(c=e.sent,!r||!p){e.next=19;break}return e.next=19,Qo.getManager(u).removeModel(l);case 19:return e.next=21,s.save(c);case 21:if(d=e.sent,!r||p){e.next=25;break}return e.next=25,Qo.getManager(u).removeModel(l);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(){return ai.apply(this,arguments)}function ai(){return(ai=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r,a,o,i,s;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Qo.getSchemes(),n={},r=(0,C.Z)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return o=a.value,e.next=9,Qo.getManager(o).listModels();case 9:for(s in i=e.sent)n[o+Jo+s]=i[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function oi(e){return ii.apply(this,arguments)}function ii(){return(ii=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ei(t),r=Qo.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function si(e,t){return ui.apply(this,arguments)}function ui(){return(ui=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",ti(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function li(e,t){return pi.apply(this,arguments)}function pi(){return(pi=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",ti(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ci=function(){function e(){(0,T.Z)(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return(0,R.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;"undefined"!==typeof window&&ye().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}},{key:"isTypedArray",value:function(e){return Gr(e)}}]),e}();if(ye().get("IS_BROWSER")){ye().setPlatform("browser",new ci);try{Qo.registerManager(qo.URL_SCHEME,new $o)}catch(yB){}try{Qo.registerManager(Lo.URL_SCHEME,new Po)}catch(yB){}}var di,fi=function(){return __webpack_require__(410)};var gi=function(){function e(){(0,T.Z)(this,e),this.util=__webpack_require__(628),this.textEncoder=new this.util.TextEncoder}return(0,R.Z)(e,[{key:"fetch",value:function(e,t){return null!=ye().global.fetch?ye().global.fetch(e,t):(null==di&&(di=fi()),di(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}},{key:"isTypedArray",value:function(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}]),e}();function hi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",ce(e),new ka(e,t,n)}ye().get("IS_NODE")&&!ye().get("IS_BROWSER")&&ye().setPlatform("node",new gi);var mi=no({cast_:function(e,t){var n=eo(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return Va.runKernel(He,r,a)}});var vi=no({clone_:function(e){var t={x:eo(e,"x","clone","string_or_numeric")};return Va.runKernel(Lt,t)}});Za();var yi={buffer:hi,cast:mi,clone:vi,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};function bi(){return Va}function _i(){return Va.memory()}function ki(e,t){return Va.tidy(e,t)}function xi(e){ja(e).forEach((function(e){return e.dispose()}))}function wi(e){return Va.keep(e)}function Oi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Va.registerBackend(e,t,n)}wa=yi;var Si=no({add_:function(e,t){var n=eo(e,"a","add"),a=eo(t,"b","add"),o=Ba(n,a),i=(0,r.Z)(o,2),s={a:n=i[0],b:a=i[1]};return Va.runKernel(Ce,s)}});var Ci=no({floorDiv_:function(e,t){var n=eo(e,"a","floorDiv"),a=eo(t,"b","floorDiv"),o=Ba(n,a),i=(0,r.Z)(o,2),s={a:n=i[0],b:a=i[1]};return Va.runKernel(Ft,s)}});var Ei=no({div_:function(e,t){var n=eo(e,"a","div"),a=eo(t,"b","div"),o=Ba(n,a),i=(0,r.Z)(o,2);if(n=i[0],a=i[1],"int32"===n.dtype&&"int32"===a.dtype)return Ci(n,a);var s={a:n,b:a};return Va.runKernel(vt,s,{})}});var Ti=no({mul_:function(e,t){var n=eo(e,"a","mul"),a=eo(t,"b","mul"),o=Ba(n,a),i=(0,r.Z)(o,2),s={a:n=i[0],b:a=i[1]};return Va.runKernel(fn,s)}});var Ri=no({sqrt_:function(e){var t={x:eo(e,"x","sqrt","float32")};return Va.runKernel(Qn,t)}});var Fi=no({square_:function(e){var t=eo(e,"x","square");return Va.runKernel("Square",{x:t},{})}});var Ii=no({zerosLike_:function(e){var t={x:eo(e,"x","zerosLike")};return Va.runKernel(Cr,t)}});function Mi(e){return Va.customGrad(e)}function Ai(e,t){if((sa(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&sa(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ao(e,[],[],t)}var Ni=function(){function e(){(0,T.Z)(this,e)}return(0,R.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Di=function(){function e(){(0,T.Z)(this,e),this.classNameMap={}}return(0,R.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Li(e){P(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),P("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),P(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Di.register(e)}var Bi=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,o=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(i)}else this.applyGradients(o);return xi(o),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){P(re(e),(function(){return"The f passed in variableGrads(f) must be a function"})),P(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Ia})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Va.registeredVariables)t.push(Va.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,o=t.length;t=t.filter((function(e){return e.trainable})),P(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(o," variables is ")+"trainable."}));var i=Va.gradients(e,t,null,!0),s=i.value,u=i.grads;P(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),P(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&xi(this.iterations_)}},{key:"saveIterations",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:Ai(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ni);Object.defineProperty(Bi,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Pi=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,T.Z)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==o&&(a.epsilon=Va.backend.epsilon()),a}return(0,R.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Va.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:ki((function(){return Ii(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:ki((function(){return Ii(a).variable(false)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;ki((function(){var e=Si(Ti(i,t.rho),Ti(Fi(o),1-t.rho)),n=Ti(Ei(Ri(Si(s,t.epsilon)),Ri(Si(i,t.epsilon))),o),r=Si(Ti(s,t.rho),Ti(Fi(n),1-t.rho));i.assign(e),s.assign(r);var u=Si(Ti(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(xi(this.accumulatedGrads.map((function(e){return e.variable}))),xi(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,E.Z)(this.accumulatedGrads),(0,E.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adadelta"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(Bi);function ji(e,t,n){ce(e);var r={shape:e,value:t,dtype:n=n||ne(t)};return Va.runKernel(Et,{},r)}var zi=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return(0,T.Z)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,R.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Va.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:ki((function(){return ji(a.shape,t.initialAccumulatorValue).variable(false)}))}}var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable;ki((function(){var e=Si(i,Fi(o));i.assign(e);var n=Si(Ti(Ei(o,Ri(Si(e,Va.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&xi(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"className",get:function(){return"Adagrad"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(Bi);var Gi=no({pow_:function(e,t){var n=eo(e,"base","pow"),a=eo(t,"exp","pow"),o=Ba(n,a),i=(0,r.Z)(o,2),s={a:n=i[0],b:a=i[1]};return Va.runKernel(wn,s)}});var Wi=no({sub_:function(e,t){var n=eo(e,"a","sub"),a=eo(t,"b","sub"),o=Ba(n,a),i=(0,r.Z)(o,2),s={a:n=i[0],b:a=i[1]};return Va.runKernel(mr,s)}}),Ui=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,T.Z)(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],ki((function(){o.accBeta1=Ai(r).variable(),o.accBeta2=Ai(a).variable()})),null==i&&(o.epsilon=Va.backend.epsilon()),o}return(0,R.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);ki((function(){var r=Wi(1,t.accBeta1),a=Wi(1,t.accBeta2);n.forEach((function(n,o){var i=Va.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:ki((function(){return Ii(i).variable(false)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:"".concat(n,"/v"),variable:ki((function(){return Ii(i).variable(false)}))});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,l=t.accumulatedSecondMoment[o].variable,p=Si(Ti(u,t.beta1),Ti(s,1-t.beta1)),c=Si(Ti(l,t.beta2),Ti(Fi(s),1-t.beta2)),d=Ei(p,r),f=Ei(c,a);u.assign(p),l.assign(c);var g=Si(Ti(Ei(d,Si(Ri(f),t.epsilon)),-t.learningRate),i);i.assign(g)}})),t.accBeta1.assign(Ti(t.accBeta1,t.beta1)),t.accBeta2.assign(Ti(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&xi(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&xi(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,E.Z)(this.accumulatedFirstMoment),(0,E.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,ki((function(){r.accBeta1.assign(Gi(r.beta1,r.iterations_+1)),r.accBeta2.assign(Gi(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adam"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(Bi);var Zi=no({abs_:function(e){var t=eo(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return Va.runKernel(qe,n)}var r={x:t};return Va.runKernel(we,r)}});function Hi(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function Vi(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function Ki(e,t){for(var n=Math.max(e.length,t.length),r=new Array(n),a=0;a<n;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)r[n-a-1]=i;else if(1===i)r[n-a-1]=o;else{if(o!==i){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}r[n-a-1]=o}}return r}var Xi=no({maximum_:function(e,t){var n=eo(e,"a","maximum"),a=eo(t,"b","maximum"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1],"bool"===n.dtype&&(n=mi(n,"int32"),a=mi(a,"int32")),Ki(n.shape,a.shape);var s={a:n,b:a};return Va.runKernel(en,s)}}),qi=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,T.Z)(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.decay=s,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],ki((function(){o.iteration=Ai(0).variable(),o.accBeta1=Ai(r).variable()})),null==i&&(o.epsilon=Va.backend.epsilon()),o}return(0,R.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);ki((function(){var r=Wi(1,t.accBeta1),a=Ei(-t.learningRate,Si(Ti(t.iteration,t.decay),1));n.forEach((function(n,o){var i=Va.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:Ii(i).variable(false)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:"".concat(n,"/v"),variable:Ii(i).variable(false)});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,l=t.accumulatedWeightedInfNorm[o].variable,p=Si(Ti(u,t.beta1),Ti(s,1-t.beta1)),c=Ti(l,t.beta2),d=Zi(s),f=Xi(c,d);u.assign(p),l.assign(f);var g=Si(Ti(Ei(a,r),Ei(p,Si(f,t.epsilon))),i);i.assign(g)}})),t.iteration.assign(Si(t.iteration,1)),t.accBeta1.assign(Ti(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&xi(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&xi(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"className",get:function(){return"Adamax"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(Bi),Yi=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,R.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=Va.registeredVariables[n];ki((function(){var e=Si(Ti(t.c,a),o);o.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=wi(Ai(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"className",get:function(){return"SGD"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(Bi),$i=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,T.Z)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=Ai(a.momentum),a}return(0,R.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Va.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:ki((function(){return Ii(a).variable(false)}))}}var o=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&ki((function(){var e,n=Si(Ti(t.m,o),i);e=t.useNesterov?Si(Ti(t.c,Si(i,Ti(n,t.m))),a):Si(Ti(t.c,n),a),o.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&xi(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"className",get:function(){return"Momentum"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Yi),Ji=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,T.Z)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=o,r.epsilon=i,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==i&&(r.epsilon=Va.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,R.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Va.registeredVariables[n],o=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:ki((function(){return Ii(a).variable(o)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:ki((function(){return Ii(a).variable(o)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:ki((function(){return Ii(a).variable(o)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;ki((function(){var e=Si(Ti(s,t.decay),Ti(Fi(i),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,o=Si(Ti(n,t.decay),Ti(i,1-t.decay)),l=Ei(Ti(i,t.learningRate),Ri(Wi(e,Si(Fi(o),t.epsilon)))),p=Si(Ti(u,t.momentum),l);s.assign(e),n.assign(o),u.assign(p);var c=Wi(a,p);a.assign(c)}else{var d=Si(Ti(s,t.decay),Ti(Fi(i),1-t.decay)),f=Si(Ti(u,t.momentum),Ei(Ti(i,t.learningRate),Ri(Si(d,t.epsilon))));s.assign(d),u.assign(f);var g=Wi(a,f);a.assign(g)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&xi(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&xi(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&xi(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,E.Z)(this.accumulatedMeanSquares),(0,E.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,E.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"className",get:function(){return"RMSProp"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(Bi),Qi=[Pi,zi,Ui,qi,$i,Ji,Yi];function es(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var ts=function(){function e(t){if((0,T.Z)(this,e),!ye().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,R.Z)(e,[{key:"save",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a,o,i,s;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=bo(t,r),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,i.href=o,e.next=15,es((function(){return i.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,es((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:wo(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ts.URL_SCHEME="downloads://";var ns=function(){function e(t){if((0,T.Z)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,R.Z)(e,[{key:"load",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),o=a.modelTopology;if(null!=o)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var i=ko(a,(function(e){return t.loadWeights(e)}));e(i)}else e({modelTopology:o});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],o=(0,C.Z)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push.apply(r,(0,E.Z)(i.weights)),a.push.apply(a,(0,E.Z)(i.paths))}}catch(yB){o.e(yB)}finally{o.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,vo(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return yo(e.name)})),o={},i=(0,C.Z)(e);try{for(i.s();!(t=i.n()).done;){t.value.paths.forEach((function(e){var t=yo(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));o[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(yB){i.e(yB)}finally{i.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return o}}]),e}();function rs(e){return new ns(e)}function as(e,t,n,r){!function(e){P(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){P(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),P(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),P(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}function os(e,t){return is.apply(this,arguments)}function is(){return(is=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o,i,s,u,l,p,c;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?ye().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),o=0,i=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,as(a,n.onProgress,o,i);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),l=.5,p=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,as(u,n.onProgress,l,p);case 26:e.t1=e.sent;case 27:return c=e.t1,e.abrupt("return",c);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ss(e){return us.apply(this,arguments)}function us(){return us=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a,o,i=arguments;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,o=ls((function(e){return os(e,{requestInit:a})})),e.abrupt("return",o(t,n,r));case 6:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}function ls(e){return function(){var t=(0,S.Z)((0,O.Z)().mark((function t(n){var r,a,o,i,s,u,l,p,c,d,f,g,h=arguments;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:"",a=h.length>2?h[2]:void 0,o=n.map((function(){return!1})),i={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,l=io[r]*G(e.shape),p=function(){o[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(p(),s[n]=!0)})):p(),u.push(e.name),n+=l}))})),s.every((function(e){return e}))){t.next=10;break}throw l=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(l.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return p=o.reduce((function(e,t,n){return t&&e.push(n),e}),[]),c=[],p.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;c.push(t)}))})),t.next=15,e(c);case 15:return d=t.sent,f={},g=0,p.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[g+a].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),u=0,l=0;l<t;l++){var p=new Uint8Array(d[g+l]);s.set(p,u),u+=p.byteLength}i[e].forEach((function(e){var t=po(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)f[n]=t[n]})),g+=t})),t.abrupt("return",f);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}Co.registerSaveRouter((function(e){return ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ts.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new ts(e)}(e.slice(ts.URL_SCHEME.length)):null}));var ps=function(){function e(t,n){if((0,T.Z)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(P("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=ye().platform.fetch,P(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&P(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,R.Z)(e,[{key:"save",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a,o;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=bo(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(o=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:wo(t),responses:[o]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(o.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r,a,o,i=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,o=n.weightsManifest,null!=a||null!=o){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",ko(n,(function(e){return i.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,a,o,i,s,u,l,p,c,d,f,g,h,m,v,y;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,a=cs(n),o=(0,r.Z)(a,2),i=o[0],s=o[1],u=this.weightPathPrefix||i,l=Oo(t),p=[],c=[],d=(0,C.Z)(t);try{for(d.s();!(f=d.n()).done;){g=f.value,h=(0,C.Z)(g.paths);try{for(h.s();!(m=h.n()).done;)v=m.value,null!=this.weightUrlConverter?c.push(this.weightUrlConverter(v)):p.push(u+v+s)}catch(yB){h.e(yB)}finally{h.f()}}}catch(yB){d.e(yB)}finally{d.f()}if(!this.weightUrlConverter){e.next=17;break}return e.t0=p.push,e.t1=p,e.t2=E.Z,e.next=14,Promise.all(c);case 14:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 17:return e.next=19,os(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 19:return y=e.sent,e.abrupt("return",[l,vo(y)]);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function cs(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function ds(e){return null!=e.match(ps.URL_SCHEME_REGEX)}ps.URL_SCHEME_REGEX=/^https?:\/\//;var fs=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return ds(e)})):ds(e))?gs(e,t):null};function gs(e,t){return new ps(e,t)}function hs(e,t){return gs(e,t)}Co.registerSaveRouter(fs),Co.registerLoadRouter(fs);var ms=function(){function e(t){(0,T.Z)(this,e),this.modelArtifacts=t}return(0,R.Z)(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),vs=function(){function e(t){(0,T.Z)(this,e),this.saveHandler=t}return(0,R.Z)(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),ys=(0,R.Z)((function e(t){(0,T.Z)(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function bs(e,t,n,r){var a=arguments;return new ys(_s.apply(void 0,(0,E.Z)(a)))}function _s(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new ms(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ms({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ms({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function ks(e){return new vs(e)}function xs(e){return new vs(e)}var ws=-2,Os=-1;function Ss(e,t,n){var r=e.shape.length;P(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),P(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){P(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},o=0;o<r;++o)a(o)}function Cs(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Es(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function Ts(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Rs(e,t,n){var r,a,o=e.shape.length;return(r="number"===typeof t?[t].concat((0,E.Z)(new Array(o-1).fill(0))):t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice()).forEach((function(e){P(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o).fill(-1):"number"===typeof n?[n].concat((0,E.Z)(new Array(o-1).fill(-1))):n.length<o?n.concat(new Array(o-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(P(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Fs(e,t,n,r,a,o,i,s,u){var l;if(null==r?(l=new Array(t.length)).fill(1):l=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var p=!1,c={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u},d=0;d<c.dims;d++)p&&0!==(1<<d&s)&&c.numAddAxisAfterEllipsis++,1<<d&i&&(p=!0);p||(c.ellipsisMask|=1<<c.dims,c.dims++);var f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(ws),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(Os),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(c,f);for(var g=!0,h=!0,m=!0,v=[],y=[],b=0;b<e.length;++b){if(0===f.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var _=!!(f.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var x=[f.beginMask&1<<b,f.endMask&1<<b],w=[f.strides[b]>0?0:-1,f.strides[b]>0?k:k-1];if(_&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===f.strides[b];var O=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(_){var S=f.begin[b]<0?k+f.begin[b]:f.begin[b];if(f.begin[b]=S,f.end[b]=f.begin[b]+1,S<0||S>=k)throw Error("slice index ".concat(f.begin[b]," of dimension ").concat(b," out of bounds."))}else f.begin[b]=Is(f.begin[b],0,f.strides[b],k,x,w),f.end[b]=Is(f.end[b],1,f.strides[b],k,x,w);var C=1===f.strides[b]&&0===f.begin[b]&&f.end[b]===k;g=g&&C,h=h&&(0===b&&1===f.strides[b]||C)}else g=g&&1===f.strides[b]&&O,h=h&&(0===b&&1===f.strides[b]||O);var E=void 0,T=!1;if(f.beginValid&&f.endValid?(E=f.end[b]-f.begin[b],T=!0):_?(E=1,T=!0):O&&k>=0&&(E=f.strides[b]<0?-k:k,T=!0),T){var R=void 0;R=0===E||E<0!==f.strides[b]<0?0:Math.trunc(E/f.strides[b])+(E%f.strides[b]!==0?1:0),v.push(R)}else v.push(-1)}else v.push(_?1:-1)}for(var F=0;F<f.finalShapeGatherIndices.length;++F){var I=f.finalShapeGatherIndices[F];I>=0?y.push(v[I]):I===ws&&y.push(1)}var M=y.filter((function(e,t){return f.finalShapeGatherIndices[t]!==ws}));return{finalShapeSparse:M,finalShape:y,isIdentity:g,sliceDim0:h,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function Is(e,t,n,r,a,o){if(a[t])return n>0?o[t]:o[t+1&1];var i=e<0?r+e:e;return i<o[0]?o[0]:i>o[1]?o[1]:i}var Ms=no({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:eo(e,"x","all","bool")},a={axis:t,keepDims:n};return Va.runKernel(Te,r,a)}});var As=no({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:eo(e,"x","any","bool")},a={axis:t,keepDims:n};return Va.runKernel(Re,r,a)}});var Ns=no({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:eo(e,"x","argMax")},r={axis:t};return Va.runKernel(Fe,n,r)}});function Ds(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,i=e[3];return Ps(e,[].concat((0,E.Z)(t),[i]),n,o,r,null,null,Xs(a))}function Ls(e,t,n,a,o,i){var s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=Gs(t),p=(0,r.Z)(l,2),c=p[0],d=p[1];if("channelsLast"===u)s=[c,d,e[3],e[3]];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));s=[c,d,e[1],e[1]]}return Ps(e,s,n,a,o,i,!1,u)}function Bs(e,t,n,a,o,i){var s,u,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",p=Ws(t),c=(0,r.Z)(p,3),d=c[0],f=c[1],g=c[2];if("NDHWC"===l)u="channelsLast",s=[d,f,g,e[4],e[4]];else{if("NCDHW"!==l)throw new Error("Unknown dataFormat ".concat(l));u="channelsFirst",s=[d,f,g,e[1],e[1]]}return js(e,s,n,a,o,!1,u,i)}function Ps(e,t,n,a,o,i){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",l=-1,p=-1,c=-1,d=-1;if("channelsLast"===u){var f=(0,r.Z)(e,4);l=f[0],p=f[1],c=f[2],d=f[3]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var g=(0,r.Z)(e,4);l=g[0],d=g[1],p=g[2],c=g[3]}var h,m=(0,r.Z)(t,4),v=m[0],y=m[1],b=m[3],_=Gs(n),k=(0,r.Z)(_,2),x=k[0],w=k[1],O=Gs(a),S=(0,r.Z)(O,2),C=S[0],E=S[1],T=Us(v,C),R=Us(y,E),F=function(e,t,n,r,a,o,i,s,u){var l,p,c;if("number"===typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,a){null==r&&(r=zs(e,t,n));var o=e[0],i=e[1],s=Zs((o-t+2*r)/n+1,a),u=Zs((i-t+2*r)/n+1,a);return[s,u]}([t,n],o,r,e,s);p=d[0],c=d[1]}else if("same"===e){p=Math.ceil(t/r),c=Math.ceil(n/a);var f=Math.max(0,(p-1)*r+o-t),g=Math.max(0,(c-1)*a+i-n),h=Math.floor(f/2),m=f-h,v=Math.floor(g/2);l={top:h,bottom:m,left:v,right:g-v,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},p=Math.ceil((t-o+1)/r),c=Math.ceil((n-i+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],_="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];l={top:y,bottom:b,left:_,right:k,type:0===y&&0===b&&0===_&&0===k?"VALID":"EXPLICIT"},p=Zs((t-o+y+b)/r+1,s),c=Zs((n-i+_+k)/a+1,s)}return{padInfo:l,outHeight:p,outWidth:c}}(o,p,c,x,w,T,R,i,u),I=F.padInfo,M=F.outHeight,A=F.outWidth,N=s?b*d:b;return"channelsFirst"===u?h=[l,N,M,A]:"channelsLast"===u&&(h=[l,M,A,N]),{batchSize:l,dataFormat:u,inHeight:p,inWidth:c,inChannels:d,outHeight:M,outWidth:A,outChannels:N,padInfo:I,strideHeight:x,strideWidth:w,filterHeight:v,filterWidth:y,effectiveFilterHeight:T,effectiveFilterWidth:R,dilationHeight:C,dilationWidth:E,inShape:e,outShape:h,filterShape:t}}function js(e,t,n,a,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=arguments.length>7?arguments[7]:void 0,l=-1,p=-1,c=-1,d=-1,f=-1;if("channelsLast"===s){var g=(0,r.Z)(e,5);l=g[0],p=g[1],c=g[2],d=g[3],f=g[4]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var h=(0,r.Z)(e,5);l=h[0],f=h[1],p=h[2],c=h[3],d=h[4]}var m,v=(0,r.Z)(t,5),y=v[0],b=v[1],_=v[2],k=v[4],x=Ws(n),w=(0,r.Z)(x,3),O=w[0],S=w[1],C=w[2],E=Ws(a),T=(0,r.Z)(E,3),R=T[0],F=T[1],I=T[2],M=Us(y,R),A=Us(b,F),N=Us(_,I),D=function(e,t,n,r,a,o,i,s,u,l,p){var c,d,f,g;"valid"===e&&(e=0);if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a,o){null==a&&(a=zs(e,t[0],r[0]));for(var i=[0,0,0,n],s=0;s<3;s++)e[s]+2*a>=t[s]&&(i[s]=Zs((e[s]-t[s]+2*a)/r[s]+1,o));return i}([t,n,r,1],[s,u,l],1,[a,o,i],e,p);d=h[0],f=h[1],g=h[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));var m=((d=Math.ceil(t/a))-1)*a+s-t,v=((f=Math.ceil(n/o))-1)*o+u-n,y=((g=Math.ceil(r/i))-1)*i+l-r,b=Math.floor(m/2),_=m-b,k=Math.floor(v/2),x=v-k,w=Math.floor(y/2);c={top:k,bottom:x,left:w,right:y-w,front:b,back:_,type:"SAME"}}return{padInfo:c,outDepth:d,outHeight:f,outWidth:g}}(o,p,c,d,O,S,C,M,A,N,u),L=D.padInfo,B=D.outDepth,P=D.outHeight,j=D.outWidth,z=i?k*f:k;return"channelsFirst"===s?m=[l,z,B,P,j]:"channelsLast"===s&&(m=[l,B,P,j,z]),{batchSize:l,dataFormat:s,inDepth:p,inHeight:c,inWidth:d,inChannels:f,outDepth:B,outHeight:P,outWidth:j,outChannels:z,padInfo:L,strideDepth:O,strideHeight:S,strideWidth:C,filterDepth:y,filterHeight:b,filterWidth:_,effectiveFilterDepth:M,effectiveFilterHeight:A,effectiveFilterWidth:N,dilationDepth:R,dilationHeight:F,dilationWidth:I,inShape:e,outShape:m,filterShape:t}}function zs(e,t,n){var r=Us(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function Gs(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Ws(e){return"number"===typeof e?[e,e,e]:e}function Us(e,t){return t<=1?e:e+(e-1)*(t-1)}function Zs(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Hs(e){var t=Gs(e),n=(0,r.Z)(t,3),a=n[0],o=n[1],i=n[2];return 1===a&&1===o&&1===i}function Vs(e,t){return Hs(e)||Hs(t)}function Ks(e){return Gs(e).every((function(e){return e>0}))}function Xs(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function qs(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)P(U(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){P(U(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var Ys=no({reshape_:function(e,t){var n={x:eo(e,"x","reshape","string_or_numeric")},r={shape:t};return Va.runKernel(An,n,r)}});var $s=no({avgPool_:function(e,t,n,r,a){var o=eo(e,"x","avgPool","float32");P(Vs(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var i=o,s=!1;3===o.rank&&(s=!0,i=Ys(o,[1,o.shape[0],o.shape[1],o.shape[2]])),P(4===i.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,".")})),qs("avgPool",r,a);var u={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},p=Va.runKernel(Be,u,l);return p=mi(p,o.dtype),s?Ys(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Js=no({avgPool3d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=eo(e,"x","avgPool3d","float32"),s=i,u=!1;4===i.rank&&(u=!0,s=Ys(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),P(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),P("NDHWC"===o,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)})),P("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(function(){return"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")})),qs("avgPool3d",r,a);var l={x:s},p={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},c=Va.runKernel(je,l,p);return c=mi(c,s.dtype),u?Ys(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}});var Qs=no({batchNorm_:function(e,t,n,r,a,o){null==o&&(o=.001);var i,s,u=eo(e,"x","batchNorm"),l=eo(t,"mean","batchNorm"),p=eo(n,"variance","batchNorm");null!=a&&(i=eo(a,"scale","batchNorm")),null!=r&&(s=eo(r,"offset","batchNorm")),P(l.rank===p.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),P(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),P(null==i||l.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c={x:function(e){return 0===e.rank||1===e.rank?Ys(e,[1,1,1,e.size]):2===e.rank?Ys(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Ys(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),scale:i,offset:s,mean:l,variance:p},d={varianceEpsilon:o},f=Va.runKernel(It,c,d);return Ys(f,u.shape)}});var eu=no({batchNorm2d_:function(e,t,n,r,a,o){var i,s,u=eo(e,"x","batchNorm"),l=eo(t,"mean","batchNorm"),p=eo(n,"variance","batchNorm");return null!=a&&(i=eo(a,"scale","batchNorm")),null!=r&&(s=eo(r,"offset","batchNorm")),P(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),P(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(l.rank,".")})),P(2===p.rank||1===p.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(p.rank,".")})),null!=i&&P(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&P(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),Qs(u,l,p,s,i,o)}});var tu=no({batchNorm3d_:function(e,t,n,r,a,o){var i,s,u=eo(e,"x","batchNorm"),l=eo(t,"mean","batchNorm"),p=eo(n,"variance","batchNorm");return null!=a&&(i=eo(a,"scale","batchNorm")),null!=r&&(s=eo(r,"offset","batchNorm")),P(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),P(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(l.rank,".")})),P(3===p.rank||1===p.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(p.rank,".")})),null!=i&&P(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&P(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),Qs(u,l,p,s,i,o)}});var nu=no({batchNorm4d_:function(e,t,n,r,a,o){var i,s,u=eo(e,"x","batchNorm"),l=eo(t,"mean","batchNorm"),p=eo(n,"variance","batchNorm");return null!=a&&(i=eo(a,"scale","batchNorm")),null!=r&&(s=eo(r,"offset","batchNorm")),P(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),P(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(l.rank,".")})),P(4===p.rank||1===p.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(p.rank,".")})),null!=i&&P(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&P(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),Qs(u,l,p,s,i,o)}});var ru=no({broadcastTo_:function(e,t){var n=eo(e,"broadcastTo","x"),r=n.shape;if(ce(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Ys(n,a)}for(var o=n.shape,i=Array.from(t),s=t.length-1;s>=0;s--)if(o[s]===t[s])i[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return vi(n);var u={x:n},l={reps:i};return Va.runKernel(br,u,l)}});var au=no({clipByValue_:function(e,t,n){var r=eo(e,"x","clipByValue");if(P(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),t===n)return ji(r.shape,t,r.dtype);var a={x:r},o={clipValueMin:t,clipValueMax:n};return Va.runKernel(Ke,a,o)}});var ou=no({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;P(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=to(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return vi(n[0]);var r=n,a={axis:t};return Va.runKernel(Ye,r,a)}});var iu=no({concat1d_:function(e){return ou(e,0)}});var su=no({concat2d_:function(e,t){return ou(e,t)}});var uu=no({concat3d_:function(e,t){return ou(e,t)}});var lu=no({concat4d_:function(e,t){return ou(e,t)}});var pu=no({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=eo(e,"x","conv2d","float32"),u=eo(t,"filter","conv2d","float32"),l=s,p=!1;3===s.rank&&(p=!0,l=Ys(s,[1,s.shape[0],s.shape[1],s.shape[2]])),P(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")})),P(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),qs("conv2d",r,i);var c="NHWC"===a?l.shape[3]:l.shape[1];P(c===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(c,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),P(Vs(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")})),P(Ks(o),(function(){return"Error in conv2D: Dilated rates should be larger than 0."})),P(Ks(n),(function(){return"Error in conv2D: Strides should be larger than 0."}));var d={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},g=Va.runKernel($e,d,f);return p?Ys(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});var cu=no({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0,s=eo(e,"x","conv1d"),u=eo(t,"filter","conv1d"),l=s,p=!1;2===s.rank&&(p=!0,l=Ys(s,[1,s.shape[0],s.shape[1]])),P(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")})),P(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),qs("conv1d",r,i),P(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),P(Vs(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'")})),P(Ks(o),(function(){return"Error in conv1D: Dilated rates should be larger than 0."})),P(Ks(n),(function(){return"Error in conv1D: Stride should be larger than 0."})),P("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var c=Ys(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=Ys(l,[l.shape[0],1,l.shape[1],l.shape[2]]),f=pu(d,c,[1,n],r,"NHWC",[1,o],i);return Ys(f,p?[f.shape[2],f.shape[3]]:[f.shape[0],f.shape[2],f.shape[3]])}});var du=no({conv2DBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;P(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=Ys(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),P(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),P(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),P(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var p="NHWC"===o?s[3]:s[1],c="NHWC"===o?u.shape[3]:u.shape[1];P(p===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(p,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),P(c===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),qs("conv2dDerInput",a,i);var d={dy:u,filter:n},f={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,inputShape:s},g=Va.runKernel(Qe,d,f);return l?Ys(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});var fu=no({conv2dTranspose_:function(e,t,n,r,a,o){var i=eo(e,"x","conv2dTranspose"),s=eo(t,"filter","conv2dTranspose");return du(n,i,s,r,a,"NHWC",o)}});var gu=no({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],i=eo(e,"x","conv3d"),s=eo(t,"filter","conv3d"),u=i,l=!1;4===i.rank&&(l=!0,u=Ys(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),P(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),P(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),P(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),P(Vs(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")})),P("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")})),P(Ks(o),(function(){return"Error in conv3D: Dilated rates should be larger than 0."})),P(Ks(n),(function(){return"Error in conv3D: Strides should be larger than 0."}));var p={x:u,filter:s},c={strides:n,pad:r,dataFormat:a,dilations:o},d=Va.runKernel(et,p,c);return l?Ys(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var hu=no({conv3DBackpropInput_:function(e,t,n,r,a){P(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var o=e,i=t,s=!1;4===t.rank&&(s=!0,i=Ys(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);var u=o[4],l=i.shape[4];P(5===o.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(o.length,".")})),P(5===i.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank)})),P(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),P(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),P(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var p={dy:i,filter:n},c={pad:a,strides:r,inputShape:o},d=Va.runKernel(nt,p,c);return s?Ys(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var mu=no({conv3dTranspose_:function(e,t,n,r,a){var o=eo(e,"x","conv3dTranspose"),i=eo(t,"filter","conv3dTranspose");return hu(n,o,i,r,a)}});var vu=no({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=eo(e,"x","denseBincount"),o=eo(t,"weights","denseBincount");P("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),P(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),P(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),P(o.size===a.size||0===o.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(o.shape,".")}));var i={x:a,weights:o},s={size:n,binaryOutput:r};return Va.runKernel(ut,i,s)}});var yu=no({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=eo(e,"x","depthwiseConv2d","float32"),u=eo(t,"filter","depthwiseConv2d","float32"),l=s,p=!1;3===s.rank&&(p=!0,l=Ys(s,[1,s.shape[0],s.shape[1],s.shape[2]])),P(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),P(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}));var c="NHWC"===a?l.shape[3]:l.shape[1];P(c===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(c,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),qs("depthwiseConv2d",r,i);var d={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},g=Va.runKernel(pt,d,f);return p?Ys(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});var bu=no({elu_:function(e){var t={x:eo(e,"x","elu","float32")};return Va.runKernel(bt,t)}});var _u=no({equal_:function(e,t){var n=eo(e,"a","equal","string_or_numeric"),a=eo(t,"b","equal","string_or_numeric"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1],Ki(n.shape,a.shape);var s={a:n,b:a};return Va.runKernel(xt,s)}});var ku=no({exp_:function(e){var t={x:eo(e,"x","exp")};return Va.runKernel(wt,t)}});var xu=no({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=eo(e,"x","expandDims","string_or_numeric");P(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return Va.runKernel(Ot,r,a)}});var wu=no({tile_:function(e,t){var n=eo(e,"x","tile","string_or_numeric");P(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return Va.runKernel(br,r,a)}});var Ou=no({eye_:function(e,t,n){null==t&&(t=e);for(var r=hi([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t,o=0;o<a;++o)r.set(1,o,o);var i=Ys(r.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return wu(xu(i,0),[n[0],1,1]);if(2===n.length)return wu(xu(xu(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return wu(xu(xu(xu(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var Su=no({floor_:function(e){var t={x:eo(e,"x","floor","float32")};return Va.runKernel(Rt,t)}});var Cu=no({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={x:eo(e,"x","gather"),indices:eo(t,"indices","gather","int32")},o={axis:n,batchDims:r};return Va.runKernel(Mt,a,o)}});var Eu=no({greater_:function(e,t){var n=eo(e,"a","greater","string_or_numeric"),a=eo(t,"b","greater","string_or_numeric"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1],Ki(n.shape,a.shape);var s={a:n,b:a};return Va.runKernel(Nt,s)}});var Tu=no({greaterEqual_:function(e,t){var n=eo(e,"a","greaterEqual","string_or_numeric"),a=eo(t,"b","greaterEqual","string_or_numeric"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1],Ki(n.shape,a.shape);var s={a:n,b:a};return Va.runKernel(Dt,s)}});var Ru=no({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:eo(e,"x","leakyRelu")},r={alpha:t};return Va.runKernel(Wt,n,r)}});var Fu=no({log_:function(e){var t={x:eo(e,"x","log","float32")};return Va.runKernel(Vt,t)}});var Iu=no({log1p_:function(e){var t={x:eo(e,"x","log1p")};return Va.runKernel(Kt,t)}});var Mu=no({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:eo(e,"x","max")},a={reductionIndices:t,keepDims:n};return Va.runKernel(Qt,r,a)}});var Au=no({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=eo(e,"x","sum");"bool"===r.dtype&&(r=mi(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return Va.runKernel(er,a,o)}});var Nu=no({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=eo(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var a=Mi((function(e,n){var a=Mu(e,t,!0),o=Wi(e,a),i=Wi(mi(o,"float32"),Fu(Au(ku(o),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var a=(0,r.Z)(n,1)[0],o=ku(a);return Wi(e,Ti(Au(e,t,!0),o))}}}));return a(n)}});var Du=no({logicalAnd_:function(e,t){var n=eo(e,"a","logicalAnd","bool"),r=eo(t,"b","logicalAnd","bool");Ki(n.shape,r.shape);var a={a:n,b:r};return Va.runKernel(Xt,a)}});var Lu=no({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=eo(e,"a","matMul"),i=eo(t,"b","matMul"),s=Ba(o,i),u=(0,r.Z)(s,2),l={a:o=u[0],b:i=u[1]},p={transposeA:n,transposeB:a};return Va.runKernel(Ge,l,p)}});var Bu=no({maxPool_:function(e,t,n,r,a){var o=eo(e,"x","maxPool"),i=o,s=!1;3===o.rank&&(s=!0,i=Ys(o,[1,o.shape[0],o.shape[1],o.shape[2]])),P(4===i.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,".")})),P(Vs(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),qs("maxPool",r,a);var u={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},p=Va.runKernel(tn,u,l);return s?Ys(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Pu=no({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=eo(e,"x","maxPool3d"),s=i,u=!1;4===i.rank&&(u=!0,s=Ys(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),P(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),P("NDHWC"===o,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)})),qs("maxPool3d",r,a);var l={x:s},p={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},c=Va.runKernel(rn,l,p);return u?Ys(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}});var ju=no({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:eo(e,"x","mean")},a={axis:t,keepDims:n};return Va.runKernel(sn,r,a)}});var zu=no({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:eo(e,"x","min")},a={axis:t,keepDims:n};return Va.runKernel(un,r,a)}});var Gu=no({minimum_:function(e,t){var n=eo(e,"a","minimum"),a=eo(t,"b","minimum"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1],"bool"===n.dtype&&(n=mi(n,"int32"),a=mi(a,"int32")),Ki(n.shape,a.shape);var s={a:n,b:a};return Va.runKernel(ln,s)}});function Wu(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Uu(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var o=t.map((function(t){return e[t]}));return[n,o]}function Zu(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}(e,t.map((function(e){return 1})),t)}function Hu(e,t,n){P(Wu(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Vu(e,t){if(Wu(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Ku(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Xu(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var qu=no({moments_:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=X(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=eo(e,"x","moments")).shape),r=ju(e,n,t),a=r.shape;t||(a=Zu(r.shape,n));var o=Fi(Wi(mi(e,"float32"),Ys(r,a)));return{mean:r,variance:ju(o,n,t)}}});var Yu=no({neg_:function(e){var t={x:eo(e,"x","neg")};return Va.runKernel(gn,t)}});var $u=no({notEqual_:function(e,t){var n=eo(e,"a","notEqual","string_or_numeric"),a=eo(t,"b","notEqual","string_or_numeric"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1],Ki(n.shape,a.shape);var s={a:n,b:a};return Va.runKernel(hn,s)}});var Ju=no({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var o={indices:eo(e,"indices","oneHot","int32")},i={dtype:a,depth:t,onValue:n,offValue:r};return Va.runKernel(_n,o,i)}});function Qu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(ce(e),"complex64"===t){var n=Qu(e,"float32"),r=Qu(e,"float32");return ro(n,r)}var a=le(G(e),t);return Va.makeTensor(a,e,t)}function el(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(ce(e),"complex64"===t){var n=el(e,"float32"),r=Qu(e,"float32");return ro(n,r)}var a=ue(G(e),t);return Va.makeTensor(a,e,t)}var tl=no({onesLike_:function(e){var t={x:eo(e,"x","onesLike")};return Va.runKernel(bn,t)}});var nl=no({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=eo(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},o={x:r};return Va.runKernel(xn,o,a)}});var rl=no({prelu_:function(e,t){var n={x:eo(e,"x","prelu"),alpha:eo(t,"alpha","prelu")};return Va.runKernel(On,n)}}),al=__webpack_require__(699),ol=function(){function e(t,n,r,a,o){(0,T.Z)(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=al.alea(i.toString())}return(0,R.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),il=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if((0,T.Z)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==o&&(o=Math.random()),"number"===typeof o&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=al.alea(o)}return(0,R.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var sl=no({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(ce(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var o=new ol(t,n,r,!1,a),i=hi(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var ul=no({randomUniform_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;ce(e);for(var o=hi(e,r),i=new il(t,n,null,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});function ll(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return Va.runKernel(Rn,{},a)}var pl=no({relu_:function(e){var t={x:eo(e,"x","relu")};return Va.runKernel(Mn,t)}});var cl=no({reverse_:function(e,t){var n={x:eo(e,"x","reverse")},r={dims:t};return Va.runKernel(jn,n,r)}});var dl=no({selu_:function(e){var t={x:eo(e,"x","selu")};return Va.runKernel(Vn,t)}});var fl=no({separableConv2d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=eo(e,"x","separableConv2d"),u=eo(t,"depthwiseFilter","separableConv2d"),l=eo(n,"pointwiseFilter","separableConv2d"),p=s,c=!1;if(3===s.rank&&(c=!0,p=Ys(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(4===p.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(p.rank,".")})),P(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),P(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),P(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")})),P(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")}));var d=u.shape[2],f=u.shape[3];P(l.shape[2]===d*f,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*f,", ")+"but got ".concat(l.shape[2],".")}));var g=yu(p,u,r,a,i,o),h=pu(g,l,1,"valid",i);return c?Ys(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var gl=no({sigmoid_:function(e){var t={x:eo(e,"x","sigmoid","float32")};return Va.runKernel($n,t)}});var hl=no({slice_:function(e,t,n){var r=eo(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},o={begin:t,size:n};return Va.runKernel(Kn,a,o)}});var ml=no({slice1d_:function(e,t,n){var r=eo(e,"x","slice1d");return P(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),hl(r,[t],[n])}});var vl=no({slice2d_:function(e,t,n){var r=eo(e,"x","slice2d");return P(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),hl(r,t,n)}});var yl=no({slice3d_:function(e,t,n){var r=eo(e,"x","slice3d");return P(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),hl(r,t,n)}});var bl=no({slice4d_:function(e,t,n){var r=eo(e,"x","slice4d");return P(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),hl(r,t,n)}});var _l=no({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=eo(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return Va.runKernel(rr,r,a)}});var kl=no({softplus_:function(e){var t={x:eo(e,"x","softplus")};return Va.runKernel(Jn,t)}});var xl=no({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:eo(e,"x","split")},a={numOrSizeSplits:t,axis:n};return Va.runKernel(nr,r,a)}});var wl=no({squeeze_:function(e,t){var n=eo(e,"x","squeeze","string_or_numeric");return Ys(n,q(n.shape,t).newShape)}});var Ol=no({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=to(e,"tensors","stack","string_or_numeric");P(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&P(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return Va.runKernel(kn,r,a)}});var Sl=no({tanh_:function(e){var t={x:eo(e,"x","tanh","float32")};return Va.runKernel(yr,t)}});function Cl(e,t){z(e);var n=$a(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ao(e,null,n,t)}var El=no({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(ce(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var o=new ol(t,n,r,!0,a),i=hi(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var Tl=no({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=eo(e,"x","unstack","string_or_numeric");P(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return Va.runKernel(Or,r,a)}});var Rl=no({where_:function(e,t,n){var r=eo(t,"a","where"),a=eo(n,"b","where"),o=eo(e,"condition","where","bool"),i=Ki(Ki(o.shape,r.shape),a.shape),s={condition:ru(o,i),t:ru(r,i),e:ru(a,i)};return Va.runKernel(Hn,s)}});var Fl=no({imag_:function(e){var t={input:eo(e,"input","imag")};return Va.runKernel(Pt,t)}});var Il=no({real_:function(e){var t={input:eo(e,"input","real")};return Va.runKernel(Fn,t)}});var Ml=no({transpose_:function(e,t,n){var r=eo(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),P(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){P(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},o={perm:t};return"complex64"===r.dtype?ki((function(){var e=Il(r),t=Fl(r);return e=Va.runKernel(xr,{x:e},o),t=Va.runKernel(xr,{x:t},o),n&&(t=Yu(t)),ro(e,t)})):Va.runKernel(xr,a,o)}});var Al=no({dropout_:function(e,t,n,r){var a=eo(e,"x","dropout");if(P("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),P(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Oa?a.clone():a;var o=function(e,t){if(null==t)return e.shape.slice();if(W(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),i=1-t,s=Ei(Su(Si(ul(o,0,1,"float32",r),i)),i);return Ti(a,s)}});var Nl=no({fft_:function(e){P("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Va.runKernel(Ct,t)}});var Dl=no({rfft_:function(e,t){P("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=hl(e,o,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=ou([e,Qu(s)],e.shape.length-1),r=t}else n=e;var u=Ii(n),l=Ys(ro(n,u),[a,r]),p=Nl(l),c=Math.floor(r/2)+1,d=Il(p),f=Fl(p),g=xl(d,[c,r-c],d.shape.length-1),h=xl(f,[c,r-c],f.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=c,Ys(ro(g[0],h[0]),m)}});var Ll=no({ifft_:function(e){P("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Va.runKernel(Bt,t)}});var Bl=no({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Ys(e,[r,n]);t=Ll(a)}else{var o=[r,2*(n-1)],i=Ys(Il(e),[r,n]),s=Ys(Fl(e),[r,n]),u=cl(hl(i,[0,1],[r,n-2]),1),l=Ti(cl(hl(s,[0,1],[r,n-2]),1),Ai(-1)),p=ou([i,u],1),c=ou([s,l],1),d=Ys(ro(p,c),[o[0],o[1]]);t=Ll(d)}if(t=Il(t),3===e.rank&&0!==e.shape[0]){var f=t,g=e.shape[0];t=Ys(t,[g,t.shape[0]/g,t.shape[1]]),f.dispose()}return t}});var Pl=no({conv2DBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Ys(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Ys(t,[1,t.shape[0],t.shape[1],t.shape[2]])),P(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),P(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),P(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var l="NHWC"===o?s.shape[3]:s.shape[1],p="NHWC"===o?u.shape[3]:u.shape[1];P(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],".")})),P(p===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(p,") must ")+"match output depth for filter (".concat(n[3],").")})),qs("conv2dDerFilter",a,i);var c={x:s,dy:u},d={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,filterShape:n};return Va.runKernel(Je,c,d)}});var jl=no({relu6_:function(e){var t={x:eo(e,"x","relu6")};return Va.runKernel(Pn,t)}});var zl=no({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:eo(e,"x","step")},r={alpha:t};return Va.runKernel(Er,n,r)}});function Gl(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Ti(e,zl(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Wl(e,t){var n=t,r=Vi(e.shape,t.shape);return r.length>0&&(n=Au(n,r)),Ys(n,e.shape)}function Ul(e,t,n,r){if("linear"===t)return e;if("relu"===t)return pl(e);if("elu"===t)return bu(e);if("relu6"===t)return jl(e);if("prelu"===t)return rl(e,n);if("leakyrelu"===t)return Ru(e,r);if("sigmoid"===t)return gl(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Zl=function(e,t){return!(e>0)||"linear"===t};var Hl=no({fusedConv2d_:function(e){var t=e.x,n=e.filter,a=e.strides,o=e.pad,i=e.dataFormat,s=void 0===i?"NHWC":i,u=e.dilations,l=void 0===u?[1,1]:u,p=e.dimRoundingMode,c=e.bias,d=e.activation,f=void 0===d?"linear":d,g=e.preluActivationWeights,h=e.leakyreluAlpha;if(f=f||"linear",!1===Zl(Va.state.gradientDepth,f)){P("NHWC"===s,(function(){return"Error in fused conv2d: got dataFormat of ".concat(s," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var m=pu(t,n,a,o,s,l,p);return null!=c&&(m=Si(m,c)),Ul(m,f,g,h)}var v=eo(t,"x","conv2d","float32"),y=eo(n,"filter","conv2d","float32"),b=v,_=!1;3===v.rank&&(_=!0,b=Ys(v,[1,v.shape[0],v.shape[1],v.shape[2]])),P(4===b.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(b.rank,".")})),P(4===y.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(y.rank,".")})),qs("fused conv2d",o,p);var k="NHWC"===s?b.shape[3]:b.shape[1];P(y.shape[2]===k,(function(){return"Error in conv2d: depth of input (".concat(k,") must match ")+"input depth for filter ".concat(y.shape[2],".")})),P(Vs(a,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(l,"'")}));var x,w,O=Ps(b.shape,y.shape,a,l,o,p);if(null!=c){var S=Ba(x=eo(c,"bias","fused conv2d"),v),C=(0,r.Z)(S,1);x=C[0],"NHWC"===s?Ki(O.outShape,x.shape):(P(x.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(x.shape.length,".")})),P(0===x.shape.length||x.shape[0]===O.outChannels||1===x.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(x.shape,") is not ")+"compatible with the number of output channels "+"(".concat(O.outChannels,")")})))}if(null!=g){var E=g.shape;if(P(E.length<=1||3===E.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(E.length,".")})),1===E.length)P(1===E[0]||E[0]===O.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(E,") is not compatible with the number of output ")+"channels (".concat(O.outChannels,").")}));else if(3===E.length)try{Ki(E,O.outShape)}catch(N){var T="Error in fused conv2d: PReLU activation weights (".concat(E,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(O.outShape,").");throw Error(T)}w=eo(g,"prelu weights","fused conv2d")}var R=function(e,t){P("NHWC"===s,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(s," but only NHWC is currently supported.")}));var n=(0,r.Z)(t,4),i=n[0],u=n[1],p=n[2],c=n[3],d=Gl(e,p,f);P(Hs(l),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(l,"'")}));var g=[du(u.shape,d,i,a,o),Pl(u,d,i.shape,a,o)];if(null!=c){var h=Wl(c,d);g.push(h)}return g},F={x:b,filter:y,bias:x,preluActivationWeights:w},I={strides:a,pad:o,dataFormat:s,dilations:l,dimRoundingMode:p,activation:f,leakyreluAlpha:h};if(null==c){var M=Mi((function(e,t,n){var r=Va.runKernel(Fr,F,I);return n([t,e,r]),_&&(r=Ys(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:R}}));return M(b,y)}var A=Mi((function(e,t,n,r){var a=Va.runKernel(Fr,F,I);return r([t,e,a,n]),_&&(a=Ys(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:R}}));return A(b,y,x)}});var Vl=no({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Ys(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Ys(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={x:s,dy:u},p={strides:r,pad:a,dimRoundingMode:i,dilations:o,filterShape:n};return Va.runKernel(ct,l,p)}});var Kl=no({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=Ys(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={dy:s,filter:n},p={strides:r,pad:a,dimRoundingMode:i,dilations:o,inputShape:e},c=Va.runKernel(dt,l,p);return u?Ys(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Xl=no({fusedMatMul_:function(e){var t=e.a,n=e.b,a=e.transposeA,o=void 0!==a&&a,i=e.transposeB,s=void 0!==i&&i,u=e.bias,l=e.activation,p=void 0===l?"linear":l,c=e.preluActivationWeights,d=e.leakyreluAlpha,f=void 0===d?.2:d;if(!1===Zl(Va.state.gradientDepth,p)){var g=Lu(t,n,o,s);return null!=u&&(g=Si(g,u)),Ul(g,p,c,f)}var h=eo(t,"a","fused matMul"),m=eo(n,"b","fused matMul"),v=Ba(h,m),y=(0,r.Z)(v,2);h=y[0],m=y[1];var b=o?h.shape[h.rank-2]:h.shape[h.rank-1],_=s?m.shape[m.rank-1]:m.shape[m.rank-2],k=o?h.shape[h.rank-1]:h.shape[h.rank-2],x=s?m.shape[m.rank-2]:m.shape[m.rank-1],w=h.shape.slice(0,-2),O=m.shape.slice(0,-2),S=G(w),C=G(O);P(b===_,(function(){return"Error in fused matMul: inner shapes (".concat(b,") and (")+"".concat(_,") of Tensors with shapes ").concat(h.shape," and ")+"".concat(m.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));var E,T,R=Ki(h.shape.slice(0,-2),m.shape.slice(0,-2)).concat([k,x]),F=Ys(h,o?[S,b,k]:[S,k,b]),I=Ys(m,s?[C,x,_]:[C,_,x]);if(null!=u){var M=Ba(E=eo(u,"bias","fused matMul"),h);E=(0,r.Z)(M,1)[0],Ki(R,E.shape)}null!=c&&(T=eo(c,"prelu weights","fused matMul"));var A=function(e,t){var n,a,i=(0,r.Z)(t,4),l=i[0],c=i[1],d=i[2],f=i[3],g=Gl(Ys(e,d.shape),d,p);return o||s?!o&&s?(n=Lu(g,c,!1,!1),a=Lu(g,l,!0,!1)):o&&!s?(n=Lu(c,g,!1,!0),a=Lu(l,g,!1,!1)):(n=Lu(c,g,!0,!0),a=Lu(g,l,!0,!0)):(n=Lu(g,c,!1,!0),a=Lu(l,g,!0,!1)),null!=u?[n,a,Wl(f,g)]:[n,a]},N={a:F,b:I,bias:E,preluActivationWeights:T},D={transposeA:o,transposeB:s,activation:p,leakyreluAlpha:f};if(null==u){var L=Mi((function(e,t,n){var r=Va.runKernel(Rr,N,D);return n([e,t,r]),{value:Ys(r,R),gradFunc:A}}));return L(F,I)}var B=Mi((function(e,t,n,r){var a=Va.runKernel(Rr,N,D);return r([e,t,a,n]),{value:Ys(a,R),gradFunc:A}}));return B(F,I,E)}});function ql(e,t,n){if(z(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=$a(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ao(e,t,r,n)}var Yl=no({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=eo(e,"image","cropAndResize"),s=eo(t,"boxes","cropAndResize","float32"),u=eo(n,"boxInd","cropAndResize","int32"),l=s.shape[0];P(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),P(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,".")})),P(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,".")})),P(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),P(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),P("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var p={image:i,boxes:s,boxInd:u},c={method:a,extrapolationValue:o,cropSize:r};return Va.runKernel(st,p,c)}});var $l=no({flipLeftRight_:function(e){var t=eo(e,"image","flipLeftRight","float32");P(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return Va.runKernel(Tt,n,{})}});var Jl=no({grayscaleToRGB_:function(e){var t=eo(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];P(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),P(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,wu(t,a)}});var Ql=no({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=eo(e,"image","rotateWithOffset","float32");P(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var o={image:a},i={radians:t,fillValue:n,center:r};return Va.runKernel(Tr,o,i)}});function ep(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var i=e.shape[0];return n=Math.min(n,i),P(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),P(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),P(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),P(1===t.rank,(function(){return"scores must be a 1D tensor"})),P(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0])})),P(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(o,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var tp=no({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=eo(e,"boxes","nonMaxSuppression","float32"),i=eo(t,"scores","nonMaxSuppression","float32"),s=ep(o,i,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return Va.runKernel(mn,{boxes:o,scores:i},u)}});function np(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,o=0,i=!1;for(;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}(e,t,n||rp)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function rp(e,t){return e>t?1:e<t?-1:0}function ap(e,t,n,r,a){return sp(e,t,n,r,a,0)}function op(e,t,n,r,a,o){return sp(e,t,n,r,a,0,!1,o,!0)}function ip(e,t,n,r,a,o){return sp(e,t,n,r,a,o,!0)}function sp(e,t,n,r,a,o){for(var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=[],p=0;p<t.length;p++)t[p]>a&&l.push({score:t[p],boxIndex:p,suppressBeginIndex:0});l.sort(pp);for(var c=o>0?-.5/o:0,d=[],f=[];d.length<n&&l.length>0;){var g=l.pop(),h=g.score,m=g.boxIndex,v=g.suppressBeginIndex;if(h<a)break;for(var y=!1,b=d.length-1;b>=v;--b){var _=up(e,m,d[b]);if(_>=r){y=!0;break}if(g.score=g.score*lp(r,c,_),g.score<=a)break}g.suppressBeginIndex=d.length,y||(g.score===h?(d.push(m),f.push(g.score)):g.score>a&&np(l,g,pp))}var k=d.length,x=n-k;s&&x>0&&(d.push.apply(d,(0,E.Z)(new Array(x).fill(0))),f.push.apply(f,(0,E.Z)(new Array(x).fill(0))));var w={selectedIndices:d};return i&&(w.selectedScores=f),u&&(w.validOutputs=k),w}function up(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),p=Math.min(a[1],a[3]),c=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),f=(s-o)*(u-i),g=(c-l)*(d-p);if(f<=0||g<=0)return 0;var h=Math.max(o,l),m=Math.max(i,p),v=Math.min(s,c),y=Math.min(u,d),b=Math.max(v-h,0)*Math.max(y-m,0);return b/(f+g-b)}function lp(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function pp(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function cp(){return cp=(0,S.Z)((0,O.Z)().mark((function e(t,n,r){var a,o,i,s,u,l,p,c,d,f,g=arguments;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>3&&void 0!==g[3]?g[3]:.5,o=g.length>4&&void 0!==g[4]?g[4]:Number.NEGATIVE_INFINITY,i=eo(t,"boxes","nonMaxSuppressionAsync"),s=eo(n,"scores","nonMaxSuppressionAsync"),u=ep(i,s,r,a,o),r=u.maxOutputSize,a=u.iouThreshold,o=u.scoreThreshold,e.next=10,Promise.all([i.data(),s.data()]);case 10:return l=e.sent,p=l[0],c=l[1],d=ap(p,c,r,a,o),f=d.selectedIndices,i!==t&&i.dispose(),s!==n&&s.dispose(),e.abrupt("return",Cl(f,"int32"));case 17:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}var dp=function(e,t,n){return cp.apply(this,arguments)};var fp=no({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=eo(e,"boxes","nonMaxSuppression"),s=eo(t,"scores","nonMaxSuppression"),u=ep(i,s,n,r,a,o),l={boxes:i,scores:s},p={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},c=Va.runKernel(yn,l,p);return{selectedIndices:c[0],selectedScores:c[1]}}});function gp(){return gp=(0,S.Z)((0,O.Z)().mark((function e(t,n,r){var a,o,i,s,u,l,p,c,d,f,g,h,m=arguments;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,o=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,i=m.length>5&&void 0!==m[5]?m[5]:0,s=eo(t,"boxes","nonMaxSuppressionAsync"),u=eo(n,"scores","nonMaxSuppressionAsync"),l=ep(s,u,r,a,o,i),r=l.maxOutputSize,a=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return p=e.sent,c=p[0],d=p[1],f=ip(c,d,r,a,o,i),g=f.selectedIndices,h=f.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:Cl(g,"int32"),selectedScores:Cl(h)});case 19:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}var hp=function(e,t,n){return gp.apply(this,arguments)};var mp=no({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=eo(e,"boxes","nonMaxSuppression"),s=eo(t,"scores","nonMaxSuppression"),u=ep(i,s,n,r,a,null),l={boxes:i,scores:s},p={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:o},c=Va.runKernel(vn,l,p);return{selectedIndices:c[0],validOutputs:c[1]}}});function vp(){return vp=(0,S.Z)((0,O.Z)().mark((function e(t,n,a){var o,i,s,u,l,p,c,d,f,g,h,m,v,y,b,_,k=arguments;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=k.length>3&&void 0!==k[3]?k[3]:.5,i=k.length>4&&void 0!==k[4]?k[4]:Number.NEGATIVE_INFINITY,s=k.length>5&&void 0!==k[5]&&k[5],u=eo(t,"boxes","nonMaxSuppressionAsync"),l=eo(n,"scores","nonMaxSuppressionAsync"),p=ep(u,l,a,o,i,null),c=p.maxOutputSize,d=p.iouThreshold,f=p.scoreThreshold,e.next=11,Promise.all([u.data(),l.data()]);case 11:return g=e.sent,h=(0,r.Z)(g,2),m=h[0],v=h[1],y=op(m,v,c,d,f,s),b=y.selectedIndices,_=y.validOutputs,u!==t&&u.dispose(),l!==n&&l.dispose(),e.abrupt("return",{selectedIndices:Cl(b,"int32"),validOutputs:Ai(_,"int32")});case 19:case"end":return e.stop()}}),e)}))),vp.apply(this,arguments)}var yp=function(e,t,n){return vp.apply(this,arguments)};var bp=no({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=eo(e,"images","resizeBilinear");P(3===o.rank||4===o.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(o.rank,".")})),P(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),P(!1===a||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=o,s=!1;3===o.rank&&(s=!0,i=Ys(o,[1,o.shape[0],o.shape[1],o.shape[2]])),(0,r.Z)(t,0);var u={images:i},l={alignCorners:n,halfPixelCenters:a,size:t},p=Va.runKernel(Ln,u,l);return s?Ys(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var _p=no({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=eo(e,"images","resizeNearestNeighbor");P(3===o.rank||4===o.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(o.rank,".")})),P(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),P("float32"===o.dtype||"int32"===o.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),P(!1===a||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=o,s=!1;3===o.rank&&(s=!0,i=Ys(o,[1,o.shape[0],o.shape[1],o.shape[2]])),(0,r.Z)(t,0);var u={images:i},l={alignCorners:n,halfPixelCenters:a,size:t},p=Va.runKernel(Nn,u,l);return s?Ys(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var kp=no({bincount_:function(e,t,n){var r=eo(e,"x","bincount"),a=eo(t,"weights","bincount");P("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),P(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),P(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var o={x:r,weights:a},i={size:n};return Va.runKernel(Ue,o,i)}});var xp=no({lessEqual_:function(e,t){var n=eo(e,"a","lessEqual","string_or_numeric"),a=eo(t,"b","lessEqual","string_or_numeric"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1],Ki(n.shape,a.shape);var s={a:n,b:a};return Va.runKernel(Zt,s)}});var wp=no({round_:function(e){var t={x:eo(e,"x","round")};return Va.runKernel(zn,t)}});var Op=no({threshold_:function(e){var t,n,a,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,l=eo(e,"image","threshold"),p=l.shape[0]*l.shape[1],c=Ti(Cl([u]),255);if(P(3===l.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(l.rank,".")})),P(3===l.shape[2]||1===l.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(l.shape[2],".")})),P("int32"===l.dtype||"float32"===l.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(l.dtype,".")})),P("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===l.shape[2]){var d=xl(l,[1,1,1],-1),f=(0,r.Z)(d,3);t=f[0],n=f[1],a=f[2];var g=Ti(t,.2989),h=Ti(n,.587),m=Ti(a,.114);o=Si(Si(g,h),m)}else o=e;"otsu"===i&&(c=function(e,t){for(var n,r,a,o,i,s,u=Cl([-1]),l=Cl([0]),p=Cl([0]),c=0;c<e.size-1;c++){n=hl(e,0,c+1),r=hl(e,c+1),i=Ei(Au(n),t),s=Ei(Au(r),t);var d=Au(Ti(n,ll(0,n.size)));a=Ei(d,Au(n));var f=ji(r.shape,n.size),g=Si(ll(0,r.size),f),h=Ti(r,g);o=Ei(Au(h),Au(r));var m=Wi(a,o),v=Wi(a,o),y=Ti(i,s);p=Ti(Ti(y,m),v);var b=Eu(p,l);l=Rl(b,p,l),u=Rl(b,Cl([c]),u)}return u}(kp(mi(wp(o),"int32"),oo([]),256),p));var v=s?xp(o,c):Eu(o,c);return mi(Ti(v,255),"int32")}});var Sp=no({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,i=eo(e,"image","transform","float32"),s=eo(t,"transforms","transform","float32");P(4===i.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),P(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),P(null==o||2===o.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,".")}));var u={image:i,transforms:s},l={interpolation:n,fillMode:r,fillValue:a,outputShape:o};return Va.runKernel(kr,u,l)}});var Cp=no({less_:function(e,t){var n=eo(e,"a","less","string_or_numeric"),a=eo(t,"b","less","string_or_numeric"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1],Ki(n.shape,a.shape);var s={a:n,b:a};return Va.runKernel(Ut,s)}});var Ep=no({bandPart_:function(e,t,n){var a=eo(e,"a","bandPart");P(a.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(a.rank,".")}));var o,i,s=a.shape,u=a.shape.slice(-2),l=(0,r.Z)(u,2),p=l[0],c=l[1];"number"===typeof t?(P(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),P(t<=p,(function(){return"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(p,").")})),o=eo(t<0?p:t,"numLower","bandPart")):(P("int32"===t.dtype,(function(){return"bandPart(): numLower's dtype must be an int32."})),o=Rl(Cp(t,0),p,Gu(t,p))),"number"===typeof n?(P(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")})),P(n<=c,(function(){return"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(c,").")})),i=eo(n<0?c:n,"numUpper","bandPart")):(P("int32"===n.dtype,(function(){return"bandPart(): numUpper's dtype must be an int32."})),i=Rl(Cp(n,0),c,Gu(n,c)));var d=Ys(ll(0,p,1,"int32"),[-1,1]),f=ll(0,c,1,"int32"),g=Wi(d,f),h=Du(xp(g,o),Tu(g,Yu(i))),m=Qu([p,c],a.dtype);return Ys(Ol(Tl(Ys(a,[-1,p,c])).map((function(e){return Rl(h,e,m)}))),s)}});function Tp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Zi(e);if(1!==e.rank&&null===n)return Tp(Ys(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Au(Zi(e),n);if(t===1/0)return Mu(Zi(e),n);if(t===-1/0)return zu(Zi(e),n);if("euclidean"===t||2===t)return Ri(Au(Gi(Zi(e),Ai(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Mu(Au(Zi(e),n[0]),n[1]-1);if(t===1/0)return Mu(Au(Zi(e),n[1]),n[0]);if(t===-1/0)return zu(Au(Zi(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Ri(Au(Fi(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Rp=no({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Tp(e=eo(e,"x","norm"),t,n),o=a.shape;if(r){var i=X(n,e.shape);o=Zu(a.shape,i)}return Ys(a,o)}});var Fp=no({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,P(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){P(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}else t=!0,e=xl(e,e.shape[0],0).map((function(e){return wl(e,[0])}));P(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var o=[],i=e,s=function(e){o.push(Va.tidy((function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=Ti(Au(Ti(o[n],t)),o[n]);t=Wi(t,r)}return Ei(t,Rp(t,"euclidean"))})))},u=0;u<e.length;++u)s(u);return t?Ol(o,0):o}});function Ip(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Va.tidy((function(){P(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],a=e.shape[1],o=Ou(n),i=vi(e),s=ql([[1]],[1,1]),u=vi(s),l=n>=a?a:n,p=function(e){var t=i,l=u,p=o,c=Va.tidy((function(){var t=hl(i,[e,e],[n-e,1]),r=Rp(t),l=hl(i,[e,e],[1,1]),p=Rl(Eu(l,0),ql([[-1]]),ql([[1]])),c=Wi(l,Ti(p,r)),d=Ei(t,c);u=1===d.shape[0]?vi(s):ou([s,hl(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var f=Yu(Ei(Lu(p,c),r)),g=hl(i,[e,0],[n-e,a]),h=Ti(f,u),m=Ml(u);if(0===e)i=Wi(g,Lu(h,Lu(m,g)));else{var v=Wi(g,Lu(h,Lu(m,g)));i=ou([hl(i,[0,0],[e,a]),v],0)}var y=Ml(h),b=hl(o,[0,e],[n,o.shape[1]-e]);if(0===e)o=Wi(b,Lu(Lu(b,u),y));else{var _=Wi(b,Lu(Lu(b,u),y));o=ou([hl(o,[0,0],[n,e]),_],1)}return[u,i,o]})),d=(0,r.Z)(c,3);u=d[0],i=d[1],o=d[2],xi([t,l,p])},c=0;c<l;++c)p(c);return!t&&n>a&&(o=hl(o,[0,0],[n,a]),i=hl(i,[0,0],[a,a])),[o,i]}))}var Mp,Ap=no({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(P(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Ip(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),a=Tl(Ys(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];return a.forEach((function(e){var n=Ip(e,t),a=(0,r.Z)(n,2),s=a[0],u=a[1];o.push(s),i.push(u)})),[Ys(Ol(o,0),e.shape),Ys(Ol(i,0),e.shape)]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Mp||(Mp={}));var Np=no({squaredDifference_:function(e,t){var n=eo(e,"a","squaredDifference"),a=eo(t,"b","squaredDifference"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1],Ki(n.shape,a.shape);var s={a:n,b:a};return Va.runKernel(lr,s,{})}});var Dp=no({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=eo(e,"x","logSumExp"),a=X(t,r.shape),o=Mu(r,a,!0),i=Wi(r,o),s=ku(i),u=Au(s,a),l=Fu(u),p=Si(Ys(o,l.shape),l);if(n){var c=Zu(p.shape,a);return Ys(p,c)}return p}});var Lp,Bp={flipLeftRight:$l,grayscaleToRGB:Jl,resizeNearestNeighbor:_p,resizeBilinear:bp,rotateWithOffset:Ql,cropAndResize:Yl,nonMaxSuppression:tp,nonMaxSuppressionAsync:dp,nonMaxSuppressionWithScore:fp,nonMaxSuppressionWithScoreAsync:hp,nonMaxSuppressionPadded:mp,nonMaxSuppressionPaddedAsync:yp,threshold:Op,transform:Sp},Pp={bandPart:Ep,gramSchmidt:Fp,qr:Ap},jp=function(){function e(){(0,T.Z)(this,e)}return(0,R.Z)(e,null,[{key:"sgd",value:function(e){return new Yi(e)}},{key:"momentum",value:function(e,t){return new $i(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}},{key:"rmsprop",value:function(e){return new Ji(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"adam",value:function(){return new Ui(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"adadelta",value:function(){return new Pi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"adamax",value:function(){return new qi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}},{key:"adagrad",value:function(e){return new zi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}}]),e}(),zp=jp,Gp="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function Wp(){return new Promise((function(e){return Gp((function(){return e()}))}))}function Up(e,t){var n=e[0].length;e.forEach((function(e,t){P(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),P(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)P(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Zp(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(Lp||(Lp={}));var Hp=30;function Vp(e){return e<=Hp?e:ae(e,Math.floor(Math.sqrt(e)))}function Kp(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Xp(e,t,n){var r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])(r=r.concat(t.slice(0))).push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);for(var a=t.length,o=0;o<a;++o)r=r.concat([e[o+1]/t[o],t[o]]);r=r.concat(e.slice(a+1))}return r}function qp(e,t){var n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(var r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{for(var a=[],o=[],i=1;i<e;++i)i>=2*t+1||i%2===1?o.push(i):a.push(i);n.push.apply(n,a),n.push(0),n.push.apply(n,o)}return n}function Yp(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function $p(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Jp(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function Qp(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===G(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,s=0;s<a.length-1;++s)i*=a[s];var u=e.shape,l=a.slice();l.pop();for(var p=1,c=o;c<n;++c)p*=u[c],l.push(u[c]);var d=[].concat((0,E.Z)(oe(e.shape).map((function(e){return e/p}))),[1]).slice(0,o);return[l,i,p,d]}function ec(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,s=a;s<o;++s)i*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:G(t.shape)/u,sliceSize:i,strides:[].concat((0,E.Z)(oe(n.slice(0,a))),[1]),outputSize:G(n)}}var tc=1.7580993408473768,nc=1.0507009873554805,rc=.3275911,ac=.254829592,oc=-.284496736,ic=1.421413741,sc=-1.453152027,uc=1.061405429;function lc(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function pc(e,t){return{real:e[2*t],imag:e[2*t+1]}}function cc(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function dc(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var fc="->",gc=/->/g,hc=",",mc="...";function vc(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(gc,"").length)/fc.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(fc,'").'));var a=e.split(fc),o=(0,r.Z)(a,2),i=o[0],s=o[1];P(-1===i.indexOf(mc),(function(){return'The ellipsis notation ("'.concat(mc,'") is not supported yet.')}));var u=i.split(hc),l=u.length;if(t!==l)throw new Error("Expected ".concat(l," input tensors, received ").concat(t));if(l>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var p=[],c=function(){var e=s[d];if(!u.some((function(t){return-1!==t.indexOf(e)})))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===p.indexOf(e)&&p.push(e)},d=0;d<s.length;++d)c();for(var f=0;f<i.length;++f){var g=i[f];-1===p.indexOf(g)&&g!==hc&&p.push(g)}for(var h=new Array(u.length),m=0;m<l;++m){if(new Set(u[m].split("")).size!==u[m].length)throw new Error("Found duplicate axes in input component ".concat(u[m],". ")+"Support for duplicate axes in input is not implemented yet.");h[m]=[];for(var v=0;v<u[m].length;++v)h[m].push(p.indexOf(u[m][v]))}for(var y=p.length,b=[],_=s.length;_<y;++_)b.push(_);return{allDims:p,summedDims:b,idDims:h}}function yc(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],o=0;o<e;++o)-1===n[o]&&a.push(o);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function bc(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,o=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:P(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},i=0;i<t[e].length;++i)o(i)},o=0;o<n.length;++o)a(o)}function _c(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var o=0;o<n;++o)a.push([]);for(var i=[],s=0;s<r.length;++s){var u,l=xc(t,r[s]),p=(0,C.Z)(l);try{for(p.s();!(u=p.n()).done;){var c=u.value;-1===i.indexOf(c)&&(a[s].push(c),i.push(c))}}catch(yB){p.e(yB)}finally{p.f()}}return{path:r,steps:a}}function kc(e){return e.every((function(e,t){return e===t}))}function xc(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function wc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)P(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);P(a<=1,(function(){return"There should be only one negative value in split array."}));var o=t.indexOf(-1);if(-1!==o){var i=t.reduce((function(e,t){return t>0?e+t:e}));t[o]=e.shape[n]-i}P(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function Oc(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Sc(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Cc(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Ec(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var s=e.shape[n],u=[],l=1,p=1,c=1,d=0;d<r;++d)u.push(e.shape[d]),l*=e.shape[d];for(var f=r;f<n;f++)u.push(e.shape[f]),p*=e.shape[f];for(var g=r;g<a;g++)u.push(t.shape[g]);for(var h=n+1;h<o;h++)u.push(e.shape[h]),c*=e.shape[h];return{batchSize:l,sliceSize:c,outerSize:p,dimSize:s,outputShape:u}}function Tc(e){try{return e.map((function(e){return ia(e)}))}catch(yB){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(yB))}}function Rc(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=hi(e,"int32"),o=hi([n.length,e.length],"int32"),i=0;i<n.length;i++){var s=a.indexToLoc(n[i]),u=i*e.length;o.values.set(s,u)}return o.toTensor()}!function(){var e,t=(0,C.Z)(Qi);try{for(t.s();!(e=t.n()).done;){Li(e.value)}}catch(yB){t.e(yB)}finally{t.f()}}();var Fc={kernelName:we,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(e,zl(mi(n,"float32"),-1))}}}},Ic={kernelName:Oe,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){var t=Fi(mi(n,"float32")),r=Ri(Wi(Ai(1),t));return Yu(Ei(e,r))}}}},Mc={kernelName:Se,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){var t=Ri(Wi(Fi(mi(n,"float32")),1));return Ei(e,t)}}}},Ac={kernelName:Ce,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],i=Ki(a.shape,o.shape);return{a:function(){var t=e,n=Vi(a.shape,i);return n.length>0&&(t=Au(t,n)),Ys(t,a.shape)},b:function(){var t=e,n=Vi(o.shape,i);return n.length>0&&(t=Au(t,n)),Ys(t,o.shape)}}}},Nc={kernelName:Ee,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},Dc={kernelName:Fe,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ii(n)}}}},Lc={kernelName:Ie,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ii(n)}}}},Bc={kernelName:Me,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ei(e,Ri(Wi(Ai(1),Fi(mi(n,"float32")))))}}}},Pc={kernelName:Ae,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){var t=Ri(Si(Ai(1),Fi(mi(n,"float32"))));return Ei(e,t)}}}},jc={kernelName:Le,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],i=Ki(a.shape,o.shape);return{a:function(){var t=Si(Fi(a),Fi(o)),n=Ti(e,Ei(o,t)),r=Vi(a.shape,i);return r.length>0&&(n=Au(n,r)),Ys(n,a.shape)},b:function(){var t=Si(Fi(a),Fi(o)),n=Yu(Ti(e,Ei(a,t))),r=Vi(o.shape,i);return r.length>0&&(n=Au(n,r)),Ys(n,o.shape)}}}},zc={kernelName:Ne,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ei(e,Si(Fi(mi(n,"float32")),1))}}}},Gc={kernelName:De,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ei(e,Wi(Ai(1),Fi(mi(n,"float32"))))}}}};var Wc=no({avgPool3dGrad_:function(e,t,n,r,a,o){var i=eo(e,"dy","avgPool3dGrad"),s=eo(t,"input","avgPool3dGrad"),u=i,l=s,p=!1;4===s.rank&&(p=!0,u=Ys(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),l=Ys(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),P(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),P(5===l.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,".")})),qs("avgPool3dGrad",a,o);var c={dy:u,input:l},d={filterSize:n,strides:r,pad:a,dimRoundingMode:o},f=Va.runKernel(ze,c,d);return p?Ys(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),Uc={kernelName:je,inputsToSave:["x"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=n.filterSize,i=n.strides,s=n.pad,u=n.dimRoundingMode;return{x:function(){return Wc(e,a,o,i,s,u)}}}};var Zc=no({avgPoolGrad_:function(e,t,n,r,a){var o=eo(e,"dy","avgPoolGrad"),i=eo(t,"input","avgPoolGrad");P(i.rank===o.rank,(function(){return"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(o.rank,")")}));var s=i,u=o,l=!1;3===i.rank&&(l=!0,s=Ys(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=Ys(o,[1,o.shape[0],o.shape[1],o.shape[2]])),P(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),P(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var p={dy:u,input:s},c={filterSize:n,strides:r,pad:a},d=Va.runKernel(Pe,p,c);return l?Ys(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Hc={kernelName:Be,inputsToSave:["x"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=n.filterSize,i=n.strides,s=n.pad;return{x:function(){return Zc(e,a,o,i,s)}}}},Vc={kernelName:Ge,inputsToSave:["a","b"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,2),o=a[0],i=a[1],s=n.transposeA,u=n.transposeB;return s||u?!s&&u?{a:function(){return Lu(e,i,!1,!1)},b:function(){return Lu(e,o,!0,!1)}}:s&&!u?{a:function(){return Lu(i,e,!1,!0)},b:function(){return Lu(o,e,!1,!1)}}:{a:function(){return Lu(i,e,!0,!0)},b:function(){return Lu(e,o,!0,!0)}}:{a:function(){return Lu(e,i,!1,!0)},b:function(){return Lu(o,e,!0,!1)}}}};var Kc=no({spaceToBatchND_:function(e,t,n){var r=eo(e,"x","spaceToBatchND");P(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),P(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),P(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},o={blockShape:t,paddings:n};return Va.runKernel(tr,a,o)}}),Xc={kernelName:We,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Kc(e,r,a)}}}},qc={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,o=r.shape,i=Array.from(o),s=a.length-1;s>=0;s--)if(a[s]===o[s])i[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(o,"]."));for(var u=[],l=0;l<i.length;l++)i[l]>1&&u.push(l);return{x:function(){return Au(e,u,!0)}}}},Yc={kernelName:He,gradFunc:function(e){return{x:function(){return e.clone()}}}},$c={kernelName:Ve,gradFunc:function(e){return{x:function(){return Ii(e)}}}},Jc={kernelName:Ke,inputsToSave:["x"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=n.clipValueMin,i=n.clipValueMax;return{x:function(){return Rl(Du(Tu(a,o),xp(a,i)),e,Ii(e))}}}},Qc={kernelName:qe,inputsToSave:["x"],gradFunc:Fc.gradFunc},ed={kernelName:Ye,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=X(n.axis,t[0].shape)[0],o=r.map((function(e){return e[a]}));return xl(e,o,a).map((function(e){return function(){return e}}))}},td={kernelName:$e,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,2),o=a[0],i=a[1],s=n.dilations,u=n.strides,l=n.pad,p=n.dataFormat;return P(Hs(s),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(s,"'")})),{x:function(){return du(o.shape,e,i,u,l,p)},filter:function(){return Pl(o,e,i.shape,u,l,p)}}}},nd={kernelName:Qe,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,2),o=a[0],i=a[1],s=n.strides,u=n.pad,l=n.dataFormat,p=n.dimRoundingMode;return{dy:function(){return pu(e,i,s,u,l,1,p)},filter:function(){return Pl(e,o,i.shape,s,u,l,p)}}}};var rd=no({conv3DBackpropFilter_:function(e,t,n,r,a){var o=e;4===e.rank&&(o=Ys(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var i=t;4===i.rank&&(i=Ys(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),P(5===o.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(o.shape,".")})),P(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,".")})),P(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),P(o.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(o.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),P(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:o,dy:i},u={strides:r,pad:a,filterShape:n};return Va.runKernel(tt,s,u)}}),ad={kernelName:et,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var a=n.dilations,o=n.strides,i=n.pad;P(Hs(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(a,"'")}));var s=(0,r.Z)(t,2),u=s[0],l=s[1];return{x:function(){return hu(u.shape,e,l,o,i)},filter:function(){return rd(u,e,l.shape,o,i)}}}};var od=no({sin_:function(e){var t={x:eo(e,"x","sin","float32")};return Va.runKernel(Xn,t)}}),id={kernelName:rt,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(Yu(od(mi(n,"float32"))),e)}}}};var sd=no({sinh_:function(e){var t={x:eo(e,"x","sinh")};return Va.runKernel(qn,t)}}),ud={kernelName:at,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(sd(mi(n,"float32")),e)}}}};var ld=no({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:eo(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return Va.runKernel(it,a,o)}}),pd={kernelName:it,inputsToSave:["x"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=n.axis,i=n.exclusive,s=n.reverse;return{x:function(){var t=Vu([o],a.rank),n=ld(e,o,i,!s);return null!=t&&(n=Ml(n,t)),n}}}},cd={kernelName:pt,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var a=n.dilations,o=n.strides,i=n.pad,s=n.dimRoundingMode,u=null==a?[1,1]:a;P(Hs(u),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var l=(0,r.Z)(t,2),p=l[0],c=l[1];return P(4===p.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(p.rank,".")})),P(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")})),P(p.shape[3]===c.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(p.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")})),P(Vs(o,u),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(o," and dilations ")+"'".concat(u,"'.")})),qs("depthwiseConv2d",i,s),{x:function(){return Kl(p.shape,e,c,o,i,u,s)},filter:function(){return Vl(p,e,c.shape,o,i,u,s)}}}},dd={kernelName:gt,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,2),o=a[0],i=a[1],s={x:o,filter:i,dy:e},u={x:o,filter:i,dy:e};return{x:function(){return Va.runKernel(ht,s,n)},filter:function(){return Va.runKernel(mt,u,n)}}}},fd={kernelName:bt,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,r.Z)(t,1)[0]};return{x:function(){return Va.runKernel(_t,n)}}}},gd={kernelName:kt,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0],a=Ti(ku(Yu(Fi(n))),2/Math.sqrt(Math.PI));return{x:function(){return Ti(e,a)}}}},hd={kernelName:wt,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(e,n)}}}},md={kernelName:Ot,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{input:function(){return Ys(e,n.shape)}}}},vd={kernelName:St,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(e,ku(n))}}}},yd={kernelName:Rt,gradFunc:function(e){return{x:function(){return Ii(e)}}}},bd={kernelName:Ft,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],i=Ki(a.shape,o.shape);return{a:function(){var t=Ei(e,mi(o,"float32")),n=Vi(a.shape,i);return n.length>0?Ys(Au(t,n),a.shape):t},b:function(){var t=Ti(e,mi(a,"float32")),n=Vi(o.shape,i);n.length>0&&(t=Ys(Au(t,n),o.shape));var r=Fi(o);return Yu(Ei(t,mi(r,"float32")))}}}};var _d=no({rsqrt_:function(e){var t={x:eo(e,"x","rsqrt","float32")};return Va.runKernel(Gn,t)}}),kd={kernelName:It,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var a=n.varianceEpsilon,o=(0,r.Z)(t,4),i=o[0],s=o[1],u=o[2],l=o[3],p=null==l?Ai(1):l,c=Vi(s.shape,i.shape),d=[];if(1===s.rank){for(var f=0;f<i.shape.length-1;++f)d.push(i.shape[f]);d.push(1)}var g=Wi(i,s),h=Ti(e,p),m=_d(Si(u,Ai(a))),v=Ti(Ti(Ti(m,m),m),Ai(-.5));return{x:function(){return 1===s.rank?Ys(Ti(Ti(e,wu(Ys(m,[1,1,1,s.shape[0]]),d)),p),i.shape):Ys(Ti(Ti(e,m),p),i.shape)},mean:function(){var e=Ti(Ti(m,Ai(-1)),h);return 1===s.rank&&(e=Au(e,c)),Ys(e,s.shape)},variance:function(){var e=Ti(Ti(v,g),h);return 1===s.rank&&(e=Au(e,c)),Ys(e,s.shape)},scale:function(){var t=Ti(g,m),n=Ti(e,t);return 1===s.rank&&(n=Au(n,c)),Ys(n,s.shape)},offset:function(){var t=e;return 1===s.rank&&(t=Au(t,c)),Ys(t,s.shape)}}}};var xd=no({unsortedSegmentSum_:function(e,t,n){var r=eo(e,"x","unsortedSegmentSum"),a=eo(t,"segmentIds","unsortedSegmentSum","int32");P(U(n),(function(){return"numSegments must be of dtype int"}));var o={x:r,segmentIds:a},i={numSegments:n};return Va.runKernel(Sr,o,i)}}),wd={kernelName:Mt,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,2),o=a[0],i=a[1],s=n.axis,u=X(s,o.shape)[0];return{x:function(){var t=o.shape,n=i.size,r=t.slice(0,u),a=r.length,l=t.slice(s,t.length).slice(1),p=l.length,c=Od(0,a),d=Od(a+1,a+1+p),f=Sd([r,[n],l]),g=Ys(e,f),h=Ys(i,[n]),m=Sd([[a],c,d]),v=Ml(g,m),y=xd(v,h,o.shape[u]),b=Ku(m);return y=Ml(y,b)},indices:function(){return i}}}};function Od(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Sd(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Cd={kernelName:Dt,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1];return{a:function(){return Ii(a)},b:function(){return Ii(o)}}}},Ed={kernelName:Lt,gradFunc:function(e){return{x:function(){return mi(e,"float32")}}}},Td={kernelName:jt,gradFunc:function(e){return{x:function(){return Ii(e)}}}},Rd={kernelName:zt,gradFunc:function(e){return{x:function(){return Ii(e)}}}},Fd={kernelName:Gt,gradFunc:function(e){return{x:function(){return Ii(e)}}}},Id={kernelName:Wt,inputsToSave:["x"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=n.alpha,i=Eu(a,0);return{x:function(){return Rl(i,e,Ti(e,o))}}}},Md={kernelName:Kt,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ei(e,Si(n,1))}}}},Ad={kernelName:Vt,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ei(e,mi(n,"float32"))}}}},Nd={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=n.axis;return{logits:function(){var t=ku(a);return Wi(e,Ti(Au(e,o,!0),t))}}}};var Dd=no({localResponseNormalizationBackprop_:function(e,t,n){var r={x:e,y:t,dy:n},a={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return Va.runKernel(Jt,r,a)}}),Ld={kernelName:$t,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var a=(0,r.Z)(t,2),o=a[0],i=a[1],s=n.depthRadius,u=n.bias,l=n.alpha,p=n.beta;return{x:function(){return Dd(o,i,e,s,u,l,p)}}}};function Bd(e,t,n,r){return t.rank<n.rank&&(t=Ys(t,Zu(t.shape,r))),e.rank<n.rank&&(e=Ys(e,Zu(e.shape,r))),{x:function(){return Ti(e,mi(_u(n,t),e.dtype))}}}var Pd={kernelName:Qt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],o=Bd(e,t[1],a,X(r,a.shape));return{x:function(){return o.x()}}}},jd={kernelName:en,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1];return{a:function(){return Ti(e,mi(Tu(a,o),"float32"))},b:function(){return Ti(e,mi(Cp(a,o),"float32"))}}}};var zd=no({maxPool3dGrad_:function(e,t,n,r,a,o,i){var s=eo(e,"dy","maxPool3dGrad"),u=eo(t,"input","maxPool3dGrad"),l=eo(n,"output","maxPool3dGrad"),p=s,c=u,d=l,f=!1;4===u.rank&&(f=!0,p=Ys(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=Ys(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=Ys(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),P(5===p.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(p.rank,".")})),P(5===c.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),P(5===d.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")})),qs("maxPool3dGrad",o,i);var g={dy:p,input:c,output:d},h={filterSize:r,strides:a,pad:o,dimRoundingMode:i},m=Va.runKernel(an,g,h);return f?Ys(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),Gd={kernelName:rn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var a=(0,r.Z)(t,2),o=a[0],i=a[1],s=n.filterSize,u=n.strides,l=n.pad,p=n.dimRoundingMode;return{x:function(){return zd(e,o,i,s,u,l,p)}}}};var Wd=no({maxPoolGrad_:function(e,t,n,r,a,o,i){var s=eo(e,"dy","maxPoolGrad"),u=eo(t,"input","maxPoolGrad"),l=eo(n,"output","maxPoolGrad");P(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),P(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),P(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),qs("maxPoolGrad",o,i);var p={dy:s,input:u,output:l},c={filterSize:r,strides:a,pad:o,dimRoundingMode:i};return Va.runKernel(nn,p,c)}}),Ud={kernelName:tn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var a=(0,r.Z)(t,2),o=a[0],i=a[1],s=n.filterSize,u=n.strides,l=n.pad;return{x:function(){return Wd(e,o,i,s,u,l)}}}},Zd={kernelName:sn,inputsToSave:["x"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=X(n.axis,a.shape),i=G(Uu(a.shape,o)[1]);return{x:function(){var t=a.shape.slice();o.forEach((function(e){t[e]=1}));var n=Ys(e,t);return Ei(Ti(n,el(a.shape,"float32")),i)}}}},Hd={kernelName:un,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var a=n.axis,o=(0,r.Z)(t,2),i=o[0],s=Bd(e,o[1],i,X(a,i.shape));return{x:function(){return s.x()}}}},Vd={kernelName:ln,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1];return{a:function(){return Ti(e,mi(xp(a,o),"float32"))},b:function(){return Ti(e,mi(Eu(a,o),"float32"))}}}},Kd={kernelName:pn,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return hl(e,a,r.shape)}}}},Xd={kernelName:cn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],i=Ki(a.shape,o.shape);return{a:function(){var t=Vi(a.shape,i);return t.length>0?Ys(Au(e,t),a.shape):e},b:function(){var t=Ti(e,Yu(Su(Ei(a,o)))),n=Vi(o.shape,i);return n.length>0?Ys(Au(t,n),o.shape):t}}}},qd={kernelName:fn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],i=Ki(a.shape,o.shape);return{a:function(){var t=Ti(e,mi(o,"float32")),n=Vi(a.shape,i);return n.length>0?Ys(Au(t,n),a.shape):t},b:function(){var t=Ti(e,mi(a,"float32")),n=Vi(o.shape,i);return n.length>0?Ys(Au(t,n),o.shape):t}}}},Yd={kernelName:gn,gradFunc:function(e){return{x:function(){return Yu(e)}}}},$d={kernelName:_n,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Qu(n.shape,"float32")}}}},Jd={kernelName:bn,gradFunc:function(e){return{x:function(){return Ii(e)}}}},Qd={kernelName:kn,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Tl(e,r).map((function(e){return function(){return e}}))}},ef={kernelName:xn,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return hl(e,a,r.shape)}}}},tf={kernelName:wn,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,r.Z)(t,3),a=n[0],o=n[1],i=n[2],s=a,u=o,l=Ki(s.shape,u.shape);return{a:function(){var t=mi(u,"float32"),n=Ti(e,Ti(t,Gi(s,Wi(t,Ai(1))))),r=Vi(s.shape,l);return r.length>0&&(n=Au(n,r)),Ys(n,s.shape)},b:function(){var t=Eu(s,0),n=Rl(t,Fu(s),Ii(s)),r=Ti(e,Ti(i,n)),a=Vi(u.shape,l);return a.length>0&&(r=Au(r,a)),Ys(r,u.shape)}}}},nf={kernelName:On,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],i=Eu(a,0);return{x:function(){return Rl(i,e,Ti(e,o))},alpha:function(){var t=Rl(i,Ii(e),Ti(e,a)),n=Vi(o.shape,e.shape);return n.length>0&&(t=Au(t,n)),Ys(t,o.shape)}}}};var rf=no({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:eo(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:r};return Va.runKernel(ot,a,o)}});function af(e,t,n){var r=e.shape.length,a=r-n.length,o=Vu(n,r),i=e;null!=o&&(i=Ml(e,o));var s=i.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var l=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=Ys(t,r),o=rf(e,n,!0,!1),i=rf(e,n,!0,!0),s=Ti(o,i);return Ti(a,s)}(i.reshape(s),t,a);if(l=l.reshape(i.shape),null!=o){var p=Ku(o);l=Ml(l,p)}return l}var of={kernelName:Sn,inputsToSave:["x"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=n.axis,i=[];return i=void 0===o||null===o?a.shape.map((function(e,t){return t})):"number"===typeof o?[o]:o,{x:function(){return af(a,e,i)}}}},sf={kernelName:vt,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],i=Ki(a.shape,o.shape);return{a:function(){var t=Ei(e,mi(o,"float32")),n=Vi(a.shape,i);return n.length>0?Ys(Au(t,n),a.shape):t},b:function(){var t=Ti(e,mi(a,"float32")),n=Vi(o.shape,i);n.length>0&&(t=Ys(Au(t,n),o.shape));var r=Fi(o);return Yu(Ei(t,mi(r,"float32")))}}}},uf={kernelName:In,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ei(e,Yu(Fi(n)))}}}},lf={kernelName:Pn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0],a=Ti(xp(n,6),zl(n));return{x:function(){return Ti(e,mi(a,"float32"))}}}},pf={kernelName:Mn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(e,mi(zl(n),"float32"))}}}},cf={kernelName:An,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ys(e,n.shape)}}}},df={kernelName:Ln,inputsToSave:["images"],gradFunc:function(e,t,n){var a={dy:e,images:(0,r.Z)(t,1)[0]};return{images:function(){return Va.runKernel(Bn,a,n)}}}},ff={kernelName:Nn,inputsToSave:["images"],gradFunc:function(e,t,n){var a={dy:e,images:(0,r.Z)(t,1)[0]};return{images:function(){return Va.runKernel(Dn,a,n)}}}},gf={kernelName:jn,gradFunc:function(e,t,n){var r=X(n.dims,e.shape);return{x:function(){return cl(e,r)}}}},hf={kernelName:zn,gradFunc:function(e){return{x:function(){return Ii(e)}}}},mf={kernelName:Gn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Yu(Ei(e,Ti(Gi(n,1.5),2)))}}}};var vf=no({logicalNot_:function(e){var t={x:eo(e,"x","logicalNot","bool")};return Va.runKernel(qt,t)}}),yf={kernelName:Hn,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{condition:function(){return mi(Ii(n),"float32")},t:function(){return Ti(e,mi(n,e.dtype))},e:function(){return Ti(e,mi(vf(n),e.dtype))}}}},bf={kernelName:Vn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){var t=Eu(n,Ai(0)),r=Ai(tc),a=Ai(nc),o=Ti(e,a),i=Ti(Ti(e,r),ku(mi(n,"float32")));return Rl(t,o,i)}}}},_f={kernelName:$n,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(e,Ti(n,Wi(Ai(1),n)))}}}},kf={kernelName:Yn,gradFunc:function(e){return{x:function(){return Ii(e)}}}};var xf=no({cos_:function(e){var t={x:eo(e,"x","cos","float32")};return Va.runKernel(rt,t)}}),wf={kernelName:Xn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(xf(mi(n,"float32")),e)}}}};var Of=no({cosh_:function(e){var t={x:eo(e,"x","cosh","float32")};return Va.runKernel(at,t)}}),Sf={kernelName:qn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(Of(mi(n,"float32")),e)}}}},Cf={kernelName:Kn,inputsToSave:["x"],gradFunc:function(e,t,n){for(var a=(0,r.Z)(t,1)[0],o=n.begin,i=n.size,s=a.shape,u=Rs(a,o,i),l=(0,r.Z)(u,2),p=l[0],c=l[1],d=[],f=0;f<e.rank;f++)d.push([p[f],s[f]-p[f]-c[f]]);return{x:function(){return nl(e,d)}}}},Ef={kernelName:rr,outputsToSave:[!0],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=n.dim,i=Ti(e,a);return{logits:function(){return Wi(i,Ti(Au(i,[o],true),a))}}}},Tf={kernelName:Jn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(e,gl(n))}}}};var Rf=no({batchToSpaceND_:function(e,t,n){var r=eo(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));P(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),P(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),P(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var o={x:r},i={blockShape:t,crops:n};return Va.runKernel(We,o,i)}}),Ff={kernelName:tr,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return Rf(e,r,a)}}}},If={kernelName:nr,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return ou(e,r)}}}},Mf={kernelName:br,inputsToSave:["x"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=n.reps;return{x:function(){var t=Ii(a);if(1===a.rank)for(var n=0;n<o[0];++n)t=Si(t,hl(e,[n*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(var r=0;r<o[0];++r)for(var i=0;i<o[1];++i)t=Si(t,hl(e,[r*a.shape[0],i*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(var s=0;s<o[0];++s)for(var u=0;u<o[1];++u)for(var l=0;l<o[2];++l)t=Si(t,hl(e,[s*a.shape[0],u*a.shape[1],l*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(a.rank," tensors yet."));for(var p=0;p<o[0];++p)for(var c=0;c<o[1];++c)for(var d=0;d<o[2];++d)for(var f=0;f<o[3];++f)t=Si(t,hl(e,[p*a.shape[0],c*a.shape[1],d*a.shape[2],f*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return t}}}};for(var Af=0,Nf=[Fc,Ic,Mc,Ac,Nc,Dc,Lc,Bc,Pc,jc,zc,Gc,Uc,Hc,Vc,Xc,qc,Yc,$c,Jc,Qc,ed,nd,td,ad,id,ud,pd,cd,dd,sf,fd,gd,hd,md,vd,bd,yd,kd,wd,Cd,Ed,Td,Rd,Fd,Id,Md,Ad,Nd,Ld,Pd,Pd,jd,Gd,Ud,Zd,Hd,Vd,Kd,Xd,qd,Yd,$d,Jd,Qd,ef,ef,tf,nf,of,uf,lf,pf,cf,df,ff,gf,hf,mf,yf,bf,_f,kf,wf,Sf,Cf,Ef,Tf,Ff,Ff,If,If,{kernelName:Qn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ei(e,Ti(Ri(mi(n,"float32")),2))}}}},{kernelName:lr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],i=Ai(2);return{a:function(){return Ti(e,Ti(i,Wi(a,o)))},b:function(){return Ti(e,Ti(i,Wi(o,a)))}}}},{kernelName:pr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(e,Ti(mi(n,"float32"),2))}}}},{kernelName:Er,gradFunc:function(e){return{x:function(){return Ii(e)}}}},{kernelName:mr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1],i=Ki(a.shape,o.shape);return{a:function(){var t=e,n=Vi(a.shape,i);return n.length>0&&(t=Au(t,n)),Ys(t,a.shape)},b:function(){var t=e,n=Vi(o.shape,i);return n.length>0&&(t=Au(t,n)),Ys(Yu(t),o.shape)}}}},{kernelName:er,inputsToSave:["x"],gradFunc:function(e,t,n){var a=(0,r.Z)(t,1)[0],o=a.shape.slice();X(n.axis,a.shape).forEach((function(e){o[e]=1}));var i=Ys(e,o),s=Ti(i,el(a.shape,"float32"));return{x:function(){return s}}}},{kernelName:vr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ei(e,Fi(xf(n)))}}}},{kernelName:yr,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return Ti(Wi(Ai(1),Fi(n)),e)}}}},Mf,{kernelName:xr,gradFunc:function(e,t,n){var r=Ku(n.perm);return{x:function(){return Ml(e,r)}}}},{kernelName:Or,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Ol(e,r)}}}},{kernelName:Sr,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,r.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=Xi(t,Ii(t)),r=Cu(e,n),a=Tu(t,Ai(0,"int32")),o=r.rank-a.rank,i=0;i<o;++i)a=xu(a,i+1);a=Du(a,el(r.shape,"bool"));var s=Ii(r);return Rl(a,r,s)}(e,n)}}}},{kernelName:Cr,gradFunc:function(e){return{x:function(){return Ii(e)}}}}];Af<Nf.length;Af++){jr(Nf[Af])}Sa().prototype.abs=function(){return this.throwIfDisposed(),Zi(this)};var Df=no({acos_:function(e){var t={x:eo(e,"x","acos")};return Va.runKernel(Oe,t)}});Sa().prototype.acos=function(){return this.throwIfDisposed(),Df(this)};var Lf=no({acosh_:function(e){var t={x:eo(e,"x","acosh")};return Va.runKernel(Se,t)}});Sa().prototype.acosh=function(){return this.throwIfDisposed(),Lf(this)},Sa().prototype.add=function(e){return this.throwIfDisposed(),Si(this,e)},Sa().prototype.all=function(e,t){return this.throwIfDisposed(),Ms(this,e,t)},Sa().prototype.any=function(e,t){return this.throwIfDisposed(),As(this,e,t)},Sa().prototype.argMax=function(e){return this.throwIfDisposed(),Ns(this,e)};var Bf=no({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:eo(e,"x","argMin")},r={axis:t};return Va.runKernel(Ie,n,r)}});Sa().prototype.argMin=function(e){return this.throwIfDisposed(),Bf(this,e)},Sa().prototype.asScalar=function(){return this.throwIfDisposed(),P(1===this.size,(function(){return"The array must have only 1 element."})),Ys(this,[])},Sa().prototype.asType=function(e){return this.throwIfDisposed(),mi(this,e)},Sa().prototype.as1D=function(){return this.throwIfDisposed(),Ys(this,[this.size])},Sa().prototype.as2D=function(e,t){return this.throwIfDisposed(),Ys(this,[e,t])},Sa().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Ys(this,[e,t,n])},Sa().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Ys(this,[e,t,n,r])},Sa().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Ys(this,[e,t,n,r,a])};var Pf=no({asin_:function(e){var t={x:eo(e,"x","asin")};return Va.runKernel(Me,t)}});Sa().prototype.asin=function(){return this.throwIfDisposed(),Pf(this)};var jf=no({asinh_:function(e){var t={x:eo(e,"x","asinh")};return Va.runKernel(Ae,t)}});Sa().prototype.asinh=function(){return this.throwIfDisposed(),jf(this)};var zf=no({atan_:function(e){var t={x:eo(e,"x","atan")};return Va.runKernel(Ne,t)}});Sa().prototype.atan=function(){return this.throwIfDisposed(),zf(this)};var Gf=no({atan2_:function(e,t){var n=eo(e,"a","atan2"),a=eo(t,"b","atan2"),o=Ba(n,a),i=(0,r.Z)(o,2),s={a:n=i[0],b:a=i[1]};return Va.runKernel(Le,s)}});Sa().prototype.atan2=function(e){return this.throwIfDisposed(),Gf(this,e)};var Wf=no({atanh_:function(e){var t={x:eo(e,"x","atanh")};return Va.runKernel(De,t)}});Sa().prototype.atanh=function(){return this.throwIfDisposed(),Wf(this)},Sa().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),$s(this,e,t,n,r)},Sa().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Rf(this,e,t)},Sa().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Qs(this,e,t,n,r,a)},Sa().prototype.broadcastTo=function(e){return this.throwIfDisposed(),ru(this,e)},Sa().prototype.cast=function(e){return this.throwIfDisposed(),mi(this,e)};var Uf=no({ceil_:function(e){var t={x:eo(e,"x","ceil","float32")};return Va.runKernel(Ve,t)}});Sa().prototype.ceil=function(){return this.throwIfDisposed(),Uf(this)},Sa().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),au(this,e,t)},Sa().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Oa&&(e=[e]),ou([this].concat((0,E.Z)(e)),t)},Sa().prototype.conv1d=function(e,t,n,r,a,o){return this.throwIfDisposed(),cu(this,e,t,n,r,a,o)},Sa().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),fu(this,e,t,n,r,a)},Sa().prototype.conv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),pu(this,e,t,n,r,a,o)},Sa().prototype.cos=function(){return this.throwIfDisposed(),xf(this)},Sa().prototype.cosh=function(){return this.throwIfDisposed(),Of(this)},Sa().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),rf(this,e,t,n)},Sa().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),ld(this,e,t,n)};var Zf=no({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=eo(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];P(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),P(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),P(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),P(i%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return Va.runKernel(lt,s,u)}});Sa().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Zf(this,e,t)},Sa().prototype.depthwiseConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),yu(this,e,t,n,r,a,o)};var Hf=no({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=eo(e,"x","dilation2d"),s=eo(t,"filter","dilation2d");P(3===i.rank||4===i.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,".")})),P(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),P("NHWC"===o,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(o)}));var u=i,l=!1;3===i.rank&&(u=Ys(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=!0),P(u.shape[3]===s.shape[2],(function(){return"Error in dilation2d:  input and filter must have the same depth: ".concat(u.shape[3]," vs ").concat(s.shape[2])}));var p={x:u,filter:s},c={strides:n,pad:r,dilations:a},d=Va.runKernel(gt,p,c);return l?Ys(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});Sa().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Hf(this,e,t,n,r,a)};var Vf=no({divNoNan_:function(e,t){var n=eo(e,"a","div"),a=eo(t,"b","div"),o=Ba(n,a),i=(0,r.Z)(o,2);n=i[0],a=i[1];var s=Ei(n,a),u=Ii(s),l=_u(a,u);return Rl(l,u,s)}});Sa().prototype.divNoNan=function(e){return this.throwIfDisposed(),Vf(this,e)},Sa().prototype.div=function(e){return this.throwIfDisposed(),Ei(this,e)};var Kf=no({dot_:function(e,t){var n=eo(e,"t1","dot"),r=eo(t,"t2","dot");P((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(P(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(o,".")})),1===n.rank&&1===r.rank){var i=Ys(n,[1,-1]),s=Ys(r,[-1,1]),u=Lu(i,s);return Ys(u,[])}if(1===n.rank&&2===r.rank){var l=Ys(n,[1,-1]),p=Ys(r,[r.shape[0],r.shape[1]]),c=Lu(l,p);return Ys(c,[c.size])}if(2===n.rank&&1===r.rank){var d=Ys(r,[-1,1]),f=Lu(n,d);return Ys(f,[f.size])}var g=Ys(r,[r.shape[0],r.shape[1]]);return Lu(n,g)}});Sa().prototype.dot=function(e){return this.throwIfDisposed(),Kf(this,e)},Sa().prototype.elu=function(){return this.throwIfDisposed(),bu(this)},Sa().prototype.equal=function(e){return this.throwIfDisposed(),_u(this,e)};var Xf=no({erf_:function(e){var t=eo(e,"x","erf");P("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=mi(t,"float32"));var n={x:t};return Va.runKernel(kt,n)}});Sa().prototype.erf=function(){return this.throwIfDisposed(),Xf(this)};var qf=no({euclideanNorm_:function(e){return Rp(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});Sa().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),qf(this,e,t)},Sa().prototype.exp=function(){return this.throwIfDisposed(),ku(this)},Sa().prototype.expandDims=function(e){return this.throwIfDisposed(),xu(this,e)};var Yf=no({expm1_:function(e){var t={x:eo(e,"x","expm1")};return Va.runKernel(St,t)}});Sa().prototype.expm1=function(){return this.throwIfDisposed(),Yf(this)},Sa().prototype.fft=function(){return this.throwIfDisposed(),Nl(this)},Sa().prototype.flatten=function(){return this.throwIfDisposed(),Ys(this,[this.size])},Sa().prototype.floor=function(){return this.throwIfDisposed(),Su(this)},Sa().prototype.floorDiv=function(e){return this.throwIfDisposed(),Ci(this,e)},Sa().prototype.gather=function(e,t,n){return this.throwIfDisposed(),Cu(this,e,t,n)},Sa().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Tu(this,e)},Sa().prototype.greater=function(e){return this.throwIfDisposed(),Eu(this,e)},Sa().prototype.ifft=function(){return this.throwIfDisposed(),Ll(this)},Sa().prototype.irfft=function(){return this.throwIfDisposed(),Bl(this)};var $f=no({isFinite_:function(e){var t={x:eo(e,"x","isFinite")};return Va.runKernel(jt,t)}});Sa().prototype.isFinite=function(){return this.throwIfDisposed(),$f(this)};var Jf=no({isInf_:function(e){var t={x:eo(e,"x","isInf")};return Va.runKernel(zt,t)}});Sa().prototype.isInf=function(){return this.throwIfDisposed(),Jf(this)};var Qf=no({isNaN_:function(e){var t={x:eo(e,"x","isNaN")};return Va.runKernel(Gt,t)}});Sa().prototype.isNaN=function(){return this.throwIfDisposed(),Qf(this)},Sa().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Ru(this,e)},Sa().prototype.lessEqual=function(e){return this.throwIfDisposed(),xp(this,e)},Sa().prototype.less=function(e){return this.throwIfDisposed(),Cp(this,e)};var eg=no({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=eo(e,"x","localResponseNormalization");P(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,".")})),P(U(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var i=o,s=!1;3===o.rank&&(s=!0,i=Ys(o,[1,o.shape[0],o.shape[1],o.shape[2]]));var u={x:i},l={depthRadius:t,bias:n,alpha:r,beta:a},p=Va.runKernel($t,u,l);return s?Ys(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});Sa().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),eg(this,e,t,n,r)};var tg=no({logSigmoid_:function(e){var t=eo(e,"x","logSigmoid");return Mi((function(e){return{value:Yu(kl(Yu(e))),gradFunc:function(t){return Ti(t,gl(Yu(e)))}}}))(t)}});Sa().prototype.logSigmoid=function(){return this.throwIfDisposed(),tg(this)},Sa().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Nu(this,e)},Sa().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Dp(this,e,t)},Sa().prototype.log=function(){return this.throwIfDisposed(),Fu(this)},Sa().prototype.log1p=function(){return this.throwIfDisposed(),Iu(this)},Sa().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Du(this,e)},Sa().prototype.logicalNot=function(){return this.throwIfDisposed(),vf(this)};var ng=no({logicalOr_:function(e,t){var n=eo(e,"a","logicalOr","bool"),r=eo(t,"b","logicalOr","bool");Ki(n.shape,r.shape);var a={a:n,b:r};return Va.runKernel(Yt,a)}});Sa().prototype.logicalOr=function(e){return this.throwIfDisposed(),ng(this,e)};var rg=no({logicalXor_:function(e,t){var n=eo(e,"a","logicalXor","bool"),r=eo(t,"b","logicalXor","bool");return Ki(n.shape,r.shape),Du(ng(e,t),vf(Du(e,t)))}});Sa().prototype.logicalXor=function(e){return this.throwIfDisposed(),rg(this,e)},Sa().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Lu(this,e,t,n)},Sa().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Bu(this,e,t,n,r)},Sa().prototype.max=function(e,t){return this.throwIfDisposed(),Mu(this,e,t)},Sa().prototype.maximum=function(e){return this.throwIfDisposed(),Xi(this,e)},Sa().prototype.mean=function(e,t){return this.throwIfDisposed(),ju(this,e,t)},Sa().prototype.min=function(e,t){return this.throwIfDisposed(),zu(this,e,t)},Sa().prototype.minimum=function(e){return this.throwIfDisposed(),Gu(this,e)};var ag=no({mirrorPad_:function(e,t,n){P("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=eo(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");P(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,o=function(e){P(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),P(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},i=0;i<r.rank;i++)o(i);var s={paddings:t,mode:n},u={x:r};return Va.runKernel(pn,u,s)}});Sa().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),ag(this,e,t)};var og=no({mod_:function(e,t){var n=eo(e,"a","mod"),a=eo(t,"b","mod"),o=Ba(n,a),i=(0,r.Z)(o,2),s={a:n=i[0],b:a=i[1]};return Va.runKernel(cn,s)}});Sa().prototype.mod=function(e){return this.throwIfDisposed(),og(this,e)},Sa().prototype.mul=function(e){return this.throwIfDisposed(),Ti(this,e)},Sa().prototype.neg=function(){return this.throwIfDisposed(),Yu(this)},Sa().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Rp(this,e,t,n)},Sa().prototype.notEqual=function(e){return this.throwIfDisposed(),$u(this,e)},Sa().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Ju(this,e,t,n)},Sa().prototype.onesLike=function(){return this.throwIfDisposed(),tl(this)},Sa().prototype.pad=function(e,t){return this.throwIfDisposed(),nl(this,e,t)};var ig=no({pool_:function(e,t,n,a,o,i,s){null==o&&(o=[1,1]),null==i&&(i=1),0===a&&(a="valid");var u=eo(e,"x","maxPool"),l=u,p=!1;3===u.rank&&(p=!0,l=Ys(u,[1,u.shape[0],u.shape[1],u.shape[2]])),P(Vs(i,o),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(o,"'")}));var c,d=Ls(l.shape,t,i,o,a),f=[d.dilationHeight,d.dilationWidth];c="same"===a?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})),r=n.map((function(e){return e-1})),a=r.map((function(e){return Math.floor(e/2)})),o=r.map((function(e,t){return e-a[t]}));return r.map((function(e,t){return[a[t],o[t]]}))}([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var g=1===f[0]&&1===f[1],h=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),o=e.concat(r,a),i=t.map((function(e,t){return(e-o[t]%e)%e})),s=a.map((function(e,t){return e+i[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),l=t.map((function(e,t){return[0,i[t]]}));return[u,l]}([d.inHeight,d.inWidth],f,c),m=(0,r.Z)(h,2),v=m[0],y=m[1],b=g?a:"valid",_=g?l:Kc(l,f,v),k=("avg"===n?function(){return $s(_,t,i,b,s)}:function(){return Bu(_,t,i,b,s)})(),x=g?k:Rf(k,f,y);return p?Ys(x,[x.shape[1],x.shape[2],x.shape[3]]):x}});Sa().prototype.pool=function(e,t,n,r,a,o){return this.throwIfDisposed(),ig(this,e,t,n,r,a,o)},Sa().prototype.pow=function(e){return this.throwIfDisposed(),Gi(this,e)},Sa().prototype.prelu=function(e){return this.throwIfDisposed(),rl(this,e)};var sg=no({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=eo(e,"x","prod");"bool"===r.dtype&&(r=mi(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return Va.runKernel(Sn,a,o)}});Sa().prototype.prod=function(e,t){return this.throwIfDisposed(),sg(this,e,t)};var ug=no({reciprocal_:function(e){var t={x:eo(e,"x","reciprocal")};return Va.runKernel(In,t)}});Sa().prototype.reciprocal=function(){return this.throwIfDisposed(),ug(this)},Sa().prototype.relu=function(){return this.throwIfDisposed(),pl(this)},Sa().prototype.relu6=function(){return this.throwIfDisposed(),jl(this)},Sa().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Ys(this,e.shape)},Sa().prototype.reshape=function(e){return this.throwIfDisposed(),Ys(this,e)},Sa().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),bp(this,e,t,n)},Sa().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),_p(this,e,t,n)},Sa().prototype.reverse=function(e){return this.throwIfDisposed(),cl(this,e)},Sa().prototype.rfft=function(){return this.throwIfDisposed(),Dl(this)},Sa().prototype.round=function(){return this.throwIfDisposed(),wp(this)},Sa().prototype.rsqrt=function(){return this.throwIfDisposed(),_d(this)},Sa().prototype.selu=function(){return this.throwIfDisposed(),dl(this)},Sa().prototype.separableConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),fl(this,e,t,n,r,a,o)},Sa().prototype.sigmoid=function(){return this.throwIfDisposed(),gl(this)};var lg=no({sign_:function(e){var t={x:eo(e,"x","sign")};return Va.runKernel(Yn,t)}});Sa().prototype.sign=function(){return this.throwIfDisposed(),lg(this)},Sa().prototype.sin=function(){return this.throwIfDisposed(),od(this)},Sa().prototype.sinh=function(){return this.throwIfDisposed(),sd(this)},Sa().prototype.slice=function(e,t){return this.throwIfDisposed(),hl(this,e,t)},Sa().prototype.softmax=function(e){return this.throwIfDisposed(),_l(this,e)},Sa().prototype.softplus=function(){return this.throwIfDisposed(),kl(this)},Sa().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Kc(this,e,t)},Sa().prototype.split=function(e,t){return this.throwIfDisposed(),xl(this,e,t)},Sa().prototype.sqrt=function(){return this.throwIfDisposed(),Ri(this)},Sa().prototype.square=function(){return this.throwIfDisposed(),Fi(this)},Sa().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Np(this,e)},Sa().prototype.squeeze=function(e){return this.throwIfDisposed(),wl(this,e)},Sa().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof Oa?[this,e]:[this].concat((0,E.Z)(e));return Ol(n,t)},Sa().prototype.step=function(e){return this.throwIfDisposed(),zl(this,e)};var pg=no({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l={x:eo(e,"x","stridedSlice","string_or_numeric")},p={begin:t,end:n,strides:r,beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u};return Va.runKernel(dr,l,p)}});Sa().prototype.stridedSlice=function(e,t,n,r,a,o,i,s){return this.throwIfDisposed(),pg(this,e,t,n,r,a,o,i,s)},Sa().prototype.sub=function(e){return this.throwIfDisposed(),Wi(this,e)},Sa().prototype.sum=function(e,t){return this.throwIfDisposed(),Au(this,e,t)};var cg=no({tan_:function(e){var t={x:eo(e,"x","tan","float32")};return Va.runKernel(vr,t)}});Sa().prototype.tan=function(){return this.throwIfDisposed(),cg(this)},Sa().prototype.tanh=function(){return this.throwIfDisposed(),Sl(this)},Sa().prototype.tile=function(e){return this.throwIfDisposed(),wu(this,e)},Sa().prototype.toBool=function(){return this.throwIfDisposed(),mi(this,"bool")},Sa().prototype.toFloat=function(){return this.throwIfDisposed(),mi(this,"float32")},Sa().prototype.toInt=function(){return this.throwIfDisposed(),mi(this,"int32")};var dg=no({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=eo(e,"x","topk");if(0===a.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=a.shape[a.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(o,") ")+"but got ".concat(t));var i={x:a},s={k:t,sorted:n},u=Va.runKernel(_r,i,s),l=(0,r.Z)(u,2);return{values:l[0],indices:l[1]}}});Sa().prototype.topk=function(e,t){return this.throwIfDisposed(),dg(this,e,t)},Sa().prototype.transpose=function(e){return this.throwIfDisposed(),Ml(this,e)};var fg=no({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=eo(e,"x","unique","string_or_numeric");P(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var a={x:n},o={axis:t},i=Va.runKernel(wr,a,o),s=(0,r.Z)(i,2);return{values:s[0],indices:s[1]}}});Sa().prototype.unique=function(e){return this.throwIfDisposed(),fg(this,e)},Sa().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),xd(this,e,t)},Sa().prototype.unstack=function(e){return this.throwIfDisposed(),Tl(this,e)},Sa().prototype.where=function(e,t){return this.throwIfDisposed(),Rl(e,this,t)},Sa().prototype.zerosLike=function(){return this.throwIfDisposed(),Ii(this)};var gg=__webpack_require__(326),hg=__webpack_require__(120),mg=__webpack_require__(611);var vg=__webpack_require__(814);function yg(e,t,n){return yg=(0,vg.Z)()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,mg.Z)(a,n.prototype),a},yg.apply(null,arguments)}function bg(e){var t="function"===typeof Map?new Map:void 0;return bg=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return yg(e,arguments,(0,hg.Z)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,mg.Z)(n,e)},bg(e)}var _g=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,gg.Z)(r),n.prototype),r}return(0,R.Z)(n)}(bg(Error)),kg=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,gg.Z)(r),n.prototype),r}return(0,R.Z)(n)}(bg(Error)),xg=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,gg.Z)(r),n.prototype),r}return(0,R.Z)(n)}(bg(Error)),wg=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,gg.Z)(r),n.prototype),r}return(0,R.Z)(n)}(bg(Error)),Og=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,gg.Z)(r),n.prototype),r}return(0,R.Z)(n)}(bg(Error)),Sg=(Error,function(){function e(t){(0,T.Z)(this,e),this.maxEntries=t||100,this.cache=new Map}return(0,R.Z)(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function Cg(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function Eg(e,t){if(!e)throw new Og(t)}function Tg(e,t){var n,r=0,a=(0,C.Z)(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(yB){a.e(yB)}finally{a.f()}return r}function Rg(e){return 1===e.length?e[0]:e}function Fg(e){return Array.isArray(e)?e:[e]}function Ig(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Mg(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var Ag={};function Ng(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Dg(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return Dg(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?Dg(a):e[r]=a.value)}}function Lg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,s=e;if(s in n)i=n[s];else if(s in Ag)i=Ag[s];else if(null==(i=t[s]))throw new xg("Unknown ".concat(a,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var u=e;if(null==u.className||null==u.config)throw new xg("".concat(a,": Improper config format: ")+"".concat(JSON.stringify(u),".\n")+"'className' and 'config' must set.");var l,p,c=u.className;if(c in n){var d=(0,r.Z)(n[c],2);l=d[0],p=d[1]}else if(c in Ag){var f=(0,r.Z)(Ag.className,2);l=f[0],p=f[1]}else if(c in t){var g=(0,r.Z)(t[c],2);l=g[0],p=g[1]}if(null==l)throw new xg("Unknown ".concat(a,": ").concat(c,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(a," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(a," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=p){for(var h={},m=0,v=Object.keys(Ag);m<v.length;m++){var y=v[m];h[y]=Ag[y]}for(var b=0,_=Object.keys(n);b<_.length;b++){var k=_[b];h[k]=n[k]}u.config.customObjects=h;for(var x=Object.assign({},Ag),w=0,O=Object.keys(n);w<O.length;w++){var S=O[w];Ag[S]=n[S]}Dg(u.config);var C=p(l,u.config,n,o);return Ag=Object.assign({},x),C}for(var E=Object.assign({},Ag),T=0,R=Object.keys(n);T<R.length;T++){var F=R[T];Ag[F]=n[F]}var I=new l(u.config);return Ag=Object.assign({},E),I}function Bg(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function Pg(e){if(null==e)return e;var t,n=[],r=(0,C.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(yB){r.e(yB)}finally{r.f()}return n}function jg(e){if(null==e)throw new xg("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function zg(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new xg("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function Gg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return Eg(n>=0),Eg(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function Wg(e,t){Array.isArray(e)?(P(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return Wg(e,"element ".concat(n+1," of ").concat(t))}))):P(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(Ug(e),".")}))}function Ug(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return Ug(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function Zg(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var Hg=0;function Vg(){return Hg++}var Kg={};function Xg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in Kg||(Kg[e]=0),Kg[e]+=1,e+Kg[e].toString()}var qg=["channelsFirst","channelsLast"],Yg=["nearest","bilinear"],$g=["valid","same","causal"],Jg=["max","avg"],Qg=["sum","mul","concat","ave"],eh=new Map;function th(e){zg(qg,"DataFormat",e)}function nh(e){zg($g,"PaddingMode",e)}function rh(e){zg(Jg,"PoolMode",e)}var ah=[],oh="/";function ih(e,t){ah.push(e);try{var n=t();return ah.pop(),n}catch(r){throw ah.pop(),r}}function sh(e){if(!ch(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===ah.length?"":ah.join(oh)+oh)+e}function uh(e){if(!ch(e))throw new Error("Not a valid tensor name: '"+e+"'");eh.has(e)||eh.set(e,0);var t=eh.get(e);if(eh.set(e,eh.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return eh.set(n,1),n}return e}var lh,ph=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function ch(e){return!!e.match(ph)}function dh(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function fh(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function gh(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function hh(e,t){if(t<e)throw new xg("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function mh(){return null==lh&&(lh=Va.backend.epsilon()),lh}function vh(e,t){return mi(e,t)}function yh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Ys(e,n)}function bh(e,t,n){return ki((function(){switch(e.rank){case 1:return ml(e,t,n);case 2:return vl(e,[t,0],[n,e.shape[1]]);case 3:return yl(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return bl(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return hl(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return hl(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new xg("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function _h(e,t,n){return ki((function(){switch(e.rank){case 1:return ml(e,t,n);case 2:return vl(e,[0,t],[e.shape[0],n]);case 3:return yl(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return bl(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new xg("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function kh(e,t,n,r){return ki((function(){switch(e.rank){case 1:return ml(e,t,n);case 2:switch(r){case 1:return bh(e,t,n);case 2:return _h(e,t,n);default:throw new xg("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return bh(e,t,n);case 2:return yl(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return _h(e,t,n);default:throw new xg("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return bh(e,t,n);case 2:return bl(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return bl(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return _h(e,t,n);default:throw new xg("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new xg("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function xh(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),ou(e,n)}function wh(e,t){switch(e.rank){case 1:return iu([e,t]);case 2:return su([e,t],0);case 3:return uu([e,t],0);case 4:return lu([e,t],0);default:throw new xg("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function Oh(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new xg("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return wu(e,t)}function Sh(e){return sl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function Ch(e,t,n,r){if(e.rank<2||t.rank<2)throw new wg("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new wg("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return Xl({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Rh(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),o=a.pop();e=Ys(e,[-1,o]);var i=t.shape.slice(),s=i.pop(),u=i.pop(),l=[].concat((0,E.Z)(i),[s]),p=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=Ys(Ml(t,p),[u,-1]);var c=[].concat((0,E.Z)(a),(0,E.Z)(l));return Ys(Xl({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Rh(e.rank,r,"channelsLast"):null,activation:n}),c)}function Eh(e,t,n){return ki((function(){return t=Array.isArray(t)?Cl(t,"int32"):mi(t,"int32"),Cu(e,t,n)}))}function Th(e){return Ti(e,e)}function Rh(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new xg("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?Ys(t,[1,r[0],1,1,1]):Ys(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Ys(t,[1,1,1,1,r[0]]):Ys(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Ys(t,[1,r[0],1,1]):Ys(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Ys(t,[1,1,1,r[0]]):Ys(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Ys(t,[1,r[0],1]):Ys(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Ys(t,[1,1,r[0]]):Ys(t,[1].concat(r))}else if(e<3)return t;throw new xg("Unsupported input rank by biasAdd: ".concat(t.rank))}function Fh(e,t,n){return ki((function(){return null==n&&(n="channelsLast"),th(n),Si(e,Rh(e.rank,t,n))}))}function Ih(e,t,n,r){return ki((function(){return Al(e,t,n,r)}))}function Mh(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}var Ah=["fanIn","fanOut","fanAvg"],Nh=["normal","uniform","truncatedNormal"];var Dh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(Ni),Lh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e,t){return Qu(e,t)}}]),n}(Dh);Lh.className="Zeros",Li(Lh);var Bh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e,t){return el(e,t)}}]),n}(Dh);Bh.className="Ones",Li(Bh);var Ph=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),r=t.call(this),"object"!==typeof e)throw new xg("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new xg("config must have value set but got ".concat(e));return r.value=e.value,r}return(0,R.Z)(n,[{key:"apply",value:function(e,t){var n=this;return ki((function(){return Ti(Ai(n.value),el(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(Dh);Ph.className="Constant",Li(Ph);var jh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return(0,R.Z)(n,[{key:"apply",value:function(e,t){return ul(e,this.minval,this.maxval,t,this.seed)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(Dh);jh.className="RandomUniform",Li(jh);var zh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,R.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new wg("randomNormal does not support dType ".concat(t,"."));return Sh(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Dh);zh.className="RandomNormal",Li(zh);var Gh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,R.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new wg("truncatedNormal does not support dType ".concat(t,"."));return El(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Dh);Gh.className="TruncatedNormal",Li(Gh);var Wh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return(0,R.Z)(n,[{key:"apply",value:function(e,t){var n=this;return ki((function(){if(2!==e.length||e[0]!==e[1])throw new xg("Identity matrix initializer can only be used for 2D square matrices.");return Ti(n.gain,Ou(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(Dh);Wh.className="Identity",Li(Wh);var Uh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r,a;if((0,T.Z)(this,n),r=t.call(this),e.scale<0)throw new xg("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,zg(Ah,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){zg(Nh,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return(0,R.Z)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(th(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=dh(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var o=dh(e,0,e.length-2);t=e[e.length-2]*o,n=e[e.length-1]*o}}else{var i=dh(e);t=Math.sqrt(i),n=Math.sqrt(i)}return[t,n]}(e),r=n[0],a=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,a):o/=Math.max(1,(r+a)/2),"normal"===this.distribution){var i=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new wg("".concat(this.getClassName()," does not support dType ").concat(t,"."));return El(e,0,i,t,this.seed)}var s=Math.sqrt(3*o);return ul(e,-s,s,t,this.seed)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(Dh);Uh.className="VarianceScaling",Li(Uh);var Zh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return(0,R.Z)(n,[{key:"getClassName",value:function(){return Uh.className}}]),n}(Uh);Zh.className="GlorotUniform",Li(Zh);var Hh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return(0,R.Z)(n,[{key:"getClassName",value:function(){return Uh.className}}]),n}(Uh);Hh.className="GlorotNormal",Li(Hh);var Vh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,R.Z)(n,[{key:"getClassName",value:function(){return Uh.className}}]),n}(Uh);Vh.className="HeNormal",Li(Vh);var Kh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,R.Z)(n,[{key:"getClassName",value:function(){return Uh.className}}]),n}(Uh);Kh.className="HeUniform",Li(Kh);var Xh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,R.Z)(n,[{key:"getClassName",value:function(){return Uh.className}}]),n}(Uh);Xh.className="LeCunNormal",Li(Xh);var qh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,R.Z)(n,[{key:"getClassName",value:function(){return Uh.className}}]),n}(Uh);qh.className="LeCunUniform",Li(qh);var Yh=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.ELEMENTS_WARN_SLOW=2e3,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,r}return(0,R.Z)(n,[{key:"apply",value:function(e,t){var n=this;return ki((function(){if(e.length<2)throw new wg("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));var r=G(e.slice(0,-1)),a=e[e.length-1],o=r*a;o>n.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(n.ELEMENTS_WARN_SLOW," (").concat(o,") elements: ")+"Slowness may result.");var i=Sh([Math.max(a,r),Math.min(a,r)],0,1,t,n.seed),s=Pp.qr(i,!1),u=s[0],l=s[1].flatten().stridedSlice([0],[Math.min(a,r)*Math.min(a,r)],[Math.min(a,r)+1]);return u=Ti(u,l.sign()),r<a&&(u=u.transpose()),Ti(Ai(n.gain),u.reshape(e))}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(Dh);Yh.className="Orthogonal",Li(Yh);var $h={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Jh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Lg(e,Di.getMap().classNameMap,t,"initializer")}function Qh(e){return Ng(e)}function em(e){if("string"===typeof e){var t=e in $h?$h[e]:e;if("GlorotNormal"===t)return new Hh;if("GlorotUniform"===t)return new Zh;if("HeNormal"===t)return new Vh;if("HeUniform"===t)return new Kh;if("LeCunNormal"===t)return new Xh;if("LeCunUniform"===t)return new qh;var n={};return n.className=t,n.config={},Jh(n)}return e instanceof Dh?e:Jh(e)}function tm(e){return Array.isArray(e)&&Array.isArray(e[0])}function nm(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function rm(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new xg("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function am(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new xg("Expected exactly 1 Shape; got ".concat(e.length))}return e}function om(e){var t,n=0,r=(0,C.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(yB){r.e(yB)}finally{r.f()}return n}var im="Variable",sm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:im,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,T.Z)(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=Vg(),r=null==r?im:r,this.originalName=sh(r),this.name=uh(this.originalName),this.trainable_=a,this.constraint=o,this.val=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Va.makeVariable(e,t,n,r)}(t,this.trainable_,this.name,this.dtype)}return(0,R.Z)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function um(e){return e.map((function(e){return e.read()}))}function lm(e){e.forEach((function(e){e[0].write(e[1])}))}var pm=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),cm=(0,R.Z)((function e(t,n,r,a,o,i,s){(0,T.Z)(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=o,this.outputTensorIndex=s,this.id=Vg(),null!=i&&(this.originalName=sh(i),this.name=uh(this.originalName)),this.rank=n.length})),dm=0,fm=function(){function e(t,n){(0,T.Z)(this,e),this.callArgs=n,this.id=dm++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=(0,C.Z)(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var o=r.value;null!=o&&o.outboundNodes.push(this)}}catch(yB){a.e(yB)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return(0,R.Z)(e,[{key:"getConfig",value:function(){var e,t=[],n=(0,C.Z)(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(yB){n.e(yB)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),gm=0,hm=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,T.Z)(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=gm++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var o=e.getClassName();a=Ig(o)+"_"+Xg(o)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var i;if(null!=r.batchInputShape)i=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),i=[s].concat(r.inputShape)}e.batchInputShape=i;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return(0,R.Z)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new kg("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new xg("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return Rg(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return Rg(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new _g("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new _g("Layer ".concat(this.name)+" is not connected, no input to return.");return Rg(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new _g("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new _g("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Rg(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=Fg(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=Fg(this.inputSpec);if(e.length!==t.length)throw new xg("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var o=r.rank;if(null!=a.ndim&&o!==a.ndim)throw new xg("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(o));if(null!=a.maxNDim&&o>a.maxNDim)throw new xg("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(o));if(null!=a.minNDim&&o<a.minNDim)throw new xg("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(o,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new xg("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var i=r.shape;for(var s in a.axes){var u=Number(s),l=a.axes[s],p=u>=0?i[u]:i[i.length+u];if(null!=l&&-1===[l,null].indexOf(p))throw new xg("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(l," but got shape ").concat(i,"."))}}if(null!=a.shape)for(var c=0;c<a.shape.length;++c){var d=a.shape[c],f=r.shape[c];if(null!=d&&null!=f&&d!==f)throw new xg("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=Fg(e),o=!0,i=(0,C.Z)(a);try{for(i.s();!(r=i.n()).done;){if(!(r.value instanceof cm)){o=!1;break}}}catch(yB){i.e(yB)}finally{i.f()}var s,u=!0,l=(0,C.Z)(a);try{for(l.s();!(s=l.n()).done;){if(s.value instanceof cm){u=!1;break}}}catch(yB){l.e(yB)}finally{l.f()}if(o===u)throw new xg("Arguments to apply() must be all SymbolicTensors or all Tensors");return ih(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,o=[],i=(0,C.Z)(Fg(e));try{for(i.s();!(r=i.n()).done;){var s=r.value;o.push(s.shape)}}catch(yB){i.e(yB)}finally{i.f()}n.build(Rg(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var l,p=n.call(e,t),c=Fg(p),d=[],f=(0,C.Z)(c);try{for(f.s();!(l=f.n()).done;){var g=l.value;-1!==a.indexOf(g)&&(g=g.clone()),d.push(g)}}catch(yB){f.e(yB)}finally{f.f()}if(p=Rg(d),null!=n.activityRegularizer)throw new wg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}var h,m=function(e){e=Fg(e);var t,n=[],r=(0,C.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(yB){r.e(yB)}finally{r.f()}return Rg(n)}(e),v=n.computeOutputShape(m),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?m[0]:m),h=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(r,a){return new cm(y,r,n,Fg(e),t,n.name,a)})):new cm(y,v,n,Fg(e),t,n.name),n.addInboundNode(e,h,null,null,m,v,t),n._refCount++,null!=n.activityRegularizer)throw new wg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return h}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new _g("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=(0,C.Z)(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(yB){n.e(yB)}finally{n.f()}if(1===t.length){var o=this.inboundNodes[0].outputShapes;return Array.isArray(o)&&Array.isArray(o[0])&&1===o.length?o[0]:o}throw new _g("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new kg("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return om(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){return um(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;ki((function(){var n=t.weights;if(n.length!==e.length)throw new xg('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=um(n),o=0;o<a.length;++o){var i=a[o],s=n[o],u=e[o];if(!W(i.shape,u.shape))throw new xg("Layer weight shape ".concat(i.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}lm(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,o,i,s){if(-1!==this._addedWeightNames.indexOf(e))throw new xg("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():em("zeros"));var u=r.apply(t,n),l=new sm(u,n,e,o,i);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(l.read())})),null==o&&(o=!0),o?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=Fg(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,E.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=Fg(e);t=Fg(t),n=Fg(n),r=Fg(r),a=nm(a),o=nm(o);var u,l=[],p=[],c=[],d=(0,C.Z)(s);try{for(d.s();!(u=d.n()).done;){var f=u.value;l.push(f.sourceLayer),p.push(f.nodeIndex),c.push(f.tensorIndex)}}catch(yB){d.e(yB)}finally{d.f()}new fm({outboundLayer:this,inboundLayers:l,nodeIndices:p,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:o},i);for(var g=0;g<t.length;g++)t[g].sourceLayer=this,t[g].nodeIndex=this.inboundNodes.length-1,t[g].tensorIndex=g}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(Ni);function mm(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],o=0;o<r.inboundLayers.length;o++){var i,s=mm(r.inputTensors[o],r.inboundLayers[o],r.nodeIndices[o]),u=(0,C.Z)(s);try{for(u.s();!(i=u.n()).done;){var l=i.value;-1===a.indexOf(l)&&a.push(l)}}catch(yB){u.e(yB)}finally{u.f()}}return a}var vm=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:Xg("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new xg("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new xg("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new xg("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var o=e.dtype||"float32";r.batchInputShape=a,r.dtype=o,r.inputSpec=[{shape:a}];var i=new cm(r.dtype,r.batchInputShape,(0,gg.Z)(r),[],{},r.name);return i.nodeIndex=0,i.tensorIndex=0,new fm({outboundLayer:(0,gg.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return(0,R.Z)(n,[{key:"apply",value:function(e,t){throw new xg("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(hm);vm.className="InputLayer",Li(vm);var ym=function(){function e(t){if((0,T.Z)(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=(0,C.Z)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.add(o.key,o.value)}}catch(yB){a.e(yB)}finally{a.f()}}}return(0,R.Z)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new xg("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return mi(t,e.dtype)}catch(yB){throw new xg("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof cm){if(null==this.id2Value[e.id])throw new xg("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new xg("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof cm){if(null==this.id2Value[e.id])throw new xg("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new xg("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&xi(this.id2Mask)}}]),e}(),bm=new Sg,_m=new Sg;function km(e,t,n,r){var a,o=null!=n&&n.training,i=Array.isArray(e),s=i?e:[e],u=s.map((function(e){return e.name})),l=[],p=t.names(),c=(0,C.Z)(u);try{for(c.s();!(a=c.n()).done;){var d=a.value;-1!==p.indexOf(d)?l.push(t.getValue(d)):l.push(null)}}catch(yB){c.e(yB)}finally{c.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var f,g=u.join(",")+"|"+t.names().sort().join(","),h=bm.get(g);if(null==h){var m=function(e,t){P(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=wm(e[0],t);n=a.sorted,r=a.recipientMap}else{var o,i=new Set,s=(0,C.Z)(e);try{for(s.s();!(o=s.n()).done;){var u,l=wm(o.value,t),p=l.sorted,c=l.recipientMap,d=(0,C.Z)(p);try{for(d.s();!(u=d.n()).done;){var f=u.value;i.has(f.name)||(n.push(f),i.add(f.name))}}catch(yB){d.e(yB)}finally{d.f()}var g=function(e){null==r[e]&&(r[e]=new Set),c[e].forEach((function(t){return r[e].add(t)}))};for(var h in c)g(h)}}catch(yB){s.e(yB)}finally{s.f()}}return{sorted:n,recipientCounts:xm(r)}}(s,t);h=m.sorted,f=m.recipientCounts,bm.put(g,h),_m.put(g,f)}f={},o||Object.assign(f,_m.get(g));for(var v=new ym(t),y=0;y<h.length;++y){if(null!=r){var b=_i().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var _=h[y],k=_.sourceLayer;if(!(k instanceof vm)){var x,w=[],O=[],S=[],E=!1,T=(0,C.Z)(_.inputs);try{for(T.s();!(x=T.n()).done;){var R=x.value,F=v.getValue(R),I=v.getMask(R);w.push(F),O.push(I),null!=I&&(E=!0),o||(f[R.name]--,0!==f[R.name]||t.hasKey(R)||-1!==u.indexOf(R.name)||F.isDisposed||!0===R.sourceLayer.stateful||S.push(F))}}catch(yB){T.e(yB)}finally{T.f()}E&&((n=n||{}).mask=O[0]);var M=Fg(k.apply(w,n)),A=null;k.supportsMasking&&(A=k.computeMask(w,O));for(var N=Om(_),D=Array.isArray(N)?N:[N],L=0;L<D.length;++L){v.hasKey(D[L])||v.add(D[L],M[L],Array.isArray(A)?A[0]:A);var B=u.indexOf(D[L].name);-1!==B&&(l[B]=M[L])}o||xi(S)}}return v.disposeMasks(),i?l:l[0]}function xm(e){var t={};for(var n in e)t[n]=e[n].size;return t}function wm(e,t){var n,r=new Set,a=[],o={},i=(0,C.Z)(t.names());try{for(i.s();!(n=i.n()).done;){var s=n.value;r.add(s)}}catch(yB){i.e(yB)}finally{i.f()}var u=[],l=[];for(u.push(e);u.length>0;){var p=u[u.length-1];if(r.has(p.name))u.pop();else{var c=l[l.length-1]===u.length-1;if(0===p.inputs.length||c)u.pop(),a.push(p),r.add(p.name),c&&l.pop();else{l.push(u.length-1);var d,f=(0,C.Z)(p.inputs);try{for(f.s();!(d=f.n()).done;){var g=d.value;null==o[g.name]&&(o[g.name]=new Set),o[g.name].add(p.name),r.has(g.name)||u.push(g)}}catch(yB){f.e(yB)}finally{f.f()}}}}return{sorted:a,recipientMap:o}}function Om(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,o=(0,C.Z)(e.sourceLayer.inboundNodes[r].outputTensors);try{for(o.s();!(a=o.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(yB){o.e(yB)}finally{o.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function Sm(e,t){return ki((function(){return Ri(Au(Ti(e,e),t,!0))}))}ye().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=bm&&bm.setMaxEntries(e),null!=_m&&_m.setMaxEntries(e)}));var Cm=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(Ni),Em=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,R.Z)(n,[{key:"apply",value:function(e){var t=this;return ki((function(){var n=Sm(e,t.axis),r=au(n,0,t.maxValue);return Ti(e,Ei(r,Si(mh(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(Cm);Em.className="MaxNorm",Li(Em);var Tm=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,R.Z)(n,[{key:"apply",value:function(e){var t=this;return ki((function(){return Ei(e,Si(mh(),Sm(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(Cm);Tm.className="UnitNorm",Li(Tm);var Rm=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return pl(e)}}]),n}(Cm);Rm.className="NonNeg",Li(Rm);var Fm=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,R.Z)(n,[{key:"apply",value:function(e){var t=this;return ki((function(){var n=Sm(e,t.axis),r=Si(Ti(t.rate,au(n,t.minValue,t.maxValue)),Ti(1-t.rate,n));return Ti(e,Ei(r,Si(mh(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(Cm);Fm.className="MinMaxNorm",Li(Fm);var Im,Mm={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Am(e){return Ng(e)}function Nm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Lg(e,Di.getMap().classNameMap,t,"constraint")}function Dm(e){return null==e?null:"string"===typeof e?Nm({className:e in Mm?Mm[e]:e,config:{}}):e instanceof Cm?e:Nm(e)}function Lm(e){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a,o,i,s,u,l;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(o in n=[],r=[],a=[],t)"number"!==typeof(i=t[o])&&(s=i,n.push(s.data()),r.push(o),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,l=0;l<u.length;++l)t[r[l]]=u[l][0];xi(a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pm(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(Im||(Im={}));var jm=function(){function e(){(0,T.Z)(this,e),this.validationData=null}return(0,R.Z)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),zm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(0,T.Z)(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return(0,R.Z)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=(0,C.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(yB){n.e(yB)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=(0,C.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(yB){n.e(yB)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,C.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,C.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,C.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,C.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,C.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,C.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Gm=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.call(this)}return(0,R.Z)(n,[{key:"onEpochBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o,i=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=(0,O.Z)().mark((function e(t){var a,o,s;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"number"===typeof(a=n[t])?(i.totals.hasOwnProperty(t)||(i.totals[t]=0),i.totals[t]=i.totals[t]+a*r):(t in i.totals?o=i.totals[t]:i.totals[t]=0,s=ki((function(){return Si(i.totals[t],Ti(a,r))})),i.totals[t]=s,null!=o&&o.dispose());case 2:case"end":return e.stop()}}),e)})),e.t0=(0,O.Z)().keys(n);case 5:if((e.t1=e.t0()).done){e.next=10;break}return o=e.t1.value,e.delegateYield(a(o),"t2",8);case 8:e.next=5;break;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o,i=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=20;break}r=(0,C.Z)(this.params.metrics),e.prev=2,o=(0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,null!=i.totals[t]){e.next=3;break}return e.abrupt("return","continue");case 3:"number"===typeof i.totals[t]?n[t]=i.totals[t]/i.seen:ki((function(){var e=Ti(Ei(1,i.seen),i.totals[t]);n[t]=e,i.totals[t].dispose(),wi(n[t])}));case 4:case"end":return e.stop()}}),e)})),r.s();case 5:if((a=r.n()).done){e.next=12;break}return e.delegateYield(o(),"t0",7);case 7:if("continue"!==e.t0){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(jm),Wm=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"onTrainBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r,a,o,i,s,u,l;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(o=this.history[a],i=0;i<o.length;++i)"number"!==typeof o[i]&&(s=o[i],t.push(s.data()),n.push(a),r.push(i));return e.next=6,Promise.all(t);case 6:for(u=e.sent,l=0;l<u.length;++l)this.history[n[l]][r[l]].dispose(),this.history[n[l]][r[l]]=u[l][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(jm),Um=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;if((0,T.Z)(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||Wp,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return te(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():aa();return function(){var o=null!=n?n():aa();return o-a<t?r:(a=o,r=e.apply(void 0,arguments))}}(a.maybeWait.bind((0,gg.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return(0,R.Z)(n,[{key:"maybeWait",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n,r){var a;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,Lm(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,Lm(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,Lm(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,Lm(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,Lm(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):te(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,Lm(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,Lm(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(jm);function Zm(e,t){return null==e&&(e={}),e instanceof jm?[e]:Array.isArray(e)&&e[0]instanceof jm?e:Fg(e).map((function(e){return new Um(e,t)}))}var Hm=function(){function e(){(0,T.Z)(this,e)}return(0,R.Z)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){P(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new xg("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,E.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function Vm(e,t,n,r,a,o,i,s,u){var l=new Wm,p=[new Gm].concat((0,E.Z)(Hm.createCallbacks(t)));null!=e&&p.push.apply(p,(0,E.Z)(e)),p.push(l);var c=new zm(p);return c.setParams({epochs:n,initialEpoch:r,samples:a,steps:o,batchSize:i,verbose:t,doValidation:s,metrics:u}),{callbackList:c,history:l}}Hm.constructors={};var Km=__webpack_require__(752);function Xm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Lg(e,Di.getMap().classNameMap,t,"layer",n)}function qm(e,t){return ki((function(){"float32"!==e.dtype&&(e=mi(e,"float32"));var n=Au(Th(e),t,!0),r=ji(n.shape,mh()),a=Ri(Xi(n,r));return Ei(e,a)}))}function Ym(e,t){return ki((function(){return ju(Th(Wi(t,e)),-1)}))}function $m(e,t){return ki((function(){return ju(Zi(Wi(t,e)),-1)}))}function Jm(e,t){return ki((function(){var n=Wi(e,t),r=au(Zi(e),mh(),Number.MAX_VALUE),a=Zi(Ei(n,r));return Ti(100,ju(a,-1))}))}function Qm(e,t){return ki((function(){var n=au(t,mh(),Number.MAX_VALUE),r=Fu(Si(1,n)),a=au(e,mh(),Number.MAX_VALUE),o=Fu(Si(1,a));return ju(Th(Wi(r,o)),-1)}))}function ev(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ki((function(){if(n)t=_l(t);else{var r=Au(t,t.shape.length-1,!0);t=Ei(t,r)}return t=au(t,mh(),1-mh()),Yu(Au(Ti(mi(e,"float32"),Fu(t)),t.shape.length-1))}))}function tv(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ki((function(){var r=mi(Su(function(e){var t=[dh(e.shape)];return Ys(e,t)}(e)),"int32"),a=(t=au(t,mh(),1-mh())).shape;return ev(Ys(Ju(r,a[a.length-1]),a),t,n)}))}function nv(e,t){return ki((function(){var n;return n=au(t,mh(),1-mh()),n=Fu(Ei(n,Wi(1,n))),ju(function(e,t){if(!W(e.shape,t.shape))throw new xg("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return ki((function(){var n=pl(t),r=Yu(Zi(t));return Si(Wi(n,Ti(t,e)),Iu(ku(r)))}))}(e,n),-1)}))}function rv(e,t){return ki((function(){var n=au(e,mh(),1),r=au(t,mh(),1);return Au(Ti(e,Fu(Ei(n,r))),-1)}))}function av(e,t){return ki((function(){var n=qm(e,-1),r=qm(t,-1),a=Ti(n,r);return Yu(Au(a,-1))}))}var ov={meanSquaredError:Ym,meanAbsoluteError:$m,meanAbsolutePercentageError:Jm,meanSquaredLogarithmicError:Qm,squaredHinge:function(e,t){return ki((function(){var n=Xi(0,Wi(1,Ti(e,t)));return ju(Th(n),-1)}))},hinge:function(e,t){return ki((function(){var n=Xi(0,Wi(1,Ti(e,t)));return ju(n,-1)}))},categoricalHinge:function(e,t){return ki((function(){var n=Au(Ti(e,t),-1),r=Mu(Ti(Wi(1,e),t),-1);return Xi(0,Si(1,Wi(r,n)))}))},logcosh:function(e,t){return ki((function(){var n=Math.log(2),r=Wi(t,e),a=Wi(Si(r,kl(Ti(-2,r))),n);return ju(a,-1)}))},categoricalCrossentropy:ev,sparseCategoricalCrossentropy:tv,binaryCrossentropy:nv,kullbackLeiblerDivergence:rv,poisson:function(e,t){return ki((function(){var n=Fu(Si(mh(),t));return ju(Wi(t,Ti(e,n)),-1)}))},cosineProximity:av};function iv(e){if("string"===typeof e){if(e in ov)return ov[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new xg(t)}return e}function sv(e,t){return ki((function(){var n=Ti(.5,tl(t)),r=vh(Eu(t,n),e.dtype);return ju(_u(e,r),-1)}))}function uv(e,t){return ki((function(){return vh(_u(Ns(e,-1),Ns(t,-1)),"float32")}))}function lv(e,t){return ki((function(){return mi(Au(Du(_u(e,1),_u(t,1))),"float32")}))}function pv(e,t){return nv(e,t)}function cv(e,t){return e.rank===t.rank&&(e=wl(e,[e.rank-1])),(t=Ns(t,-1)).dtype!==e.dtype&&(t=mi(t,e.dtype)),mi(_u(e,t),"float32")}var dv=ev,fv=tv,gv={binaryAccuracy:sv,categoricalAccuracy:uv,precision:function(e,t){return ki((function(){var n=lv(e,t),r=function(e,t){return ki((function(){return mi(Au(Du(_u(e,0),_u(t,1))),"float32")}))}(e,t),a=Si(n,r);return mi(Rl(Eu(a,0),Ei(n,a),0),"float32")}))},categoricalCrossentropy:dv,sparseCategoricalCrossentropy:fv,mse:Ym,MSE:Ym,mae:$m,MAE:$m,mape:Jm,MAPE:Jm,cosine:av};function hv(e){if(Eg(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(ov);n<r.length;n++){var a=r[n];if(ov[a]===e){t=a;break}}if(void 0!==t)return t;for(var o=0,i=Object.keys(gv);o<i.length;o++){var s=i[o];if(gv[s]===e){t=s;break}}return void 0!==t?t:e.name}var mv=1048576;function vv(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!yv(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>mv&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(mv,"."))}}function yv(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!yv(e[r]))return!1}return!0}if(Array.isArray(e)){var a,o=(0,C.Z)(e);try{for(o.s();!(a=o.n()).done;){if(!yv(a.value))return!1}}catch(yB){o.e(yB)}finally{o.f()}return!0}return!1}var i=typeof e;return"string"===i||"number"===i||"boolean"===i}function bv(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,o=function(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var o=0,i=n;o<i.length;o++){var s=i[o];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,E.Z)(s))}if(t){var u,l=(0,C.Z)(e.layers);try{for(l.s();!(u=l.n()).done;){var p,c=u.value,d=!1,f=(0,C.Z)(c.inboundNodes);try{for(f.s();!(p=f.n()).done;){var g=p.value;if(-1!==r.indexOf(g)){if(d){t=!1;break}d=!0}}}catch(yB){f.e(yB)}finally{f.f()}if(!t)break}}catch(yB){l.e(yB)}finally{l.f()}}return t}(e),i=["Layer (type)","Input Shape","Output shape","Param #"];if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!o)for(var s in i.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,(0,E.Z)(e.nodesByDepth[s]))}a("_".repeat(t)),_v(i,n,a),a("=".repeat(t));for(var l=e.layers,p=0;p<l.length;++p)o?kv(l[p],n,a):xv(l[p],n,r,a),a((p===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var c=function(e){var t;t=null!=e.collectedTrainableWeights?om(e.collectedTrainableWeights):om(e.trainableWeights);return t}(e),d=om(e.nonTrainableWeights);a("Total params: ".concat(c+d)),a("Trainable params: ".concat(c)),a("Non-trainable params: ".concat(d)),a("_".repeat(t))}function _v(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function kv(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(yB){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(yB){r="multiple"}var o=e.name,i=e.getClassName();_v(["".concat(o," (").concat(i,")"),a,r,e.countParams().toString()],t,n)}function xv(e,t,n,r){var a,o;try{o=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(yB){o="multiple"}try{a=JSON.stringify(e.outputShape)}catch(yB){a="multiple"}var i,s=[],u=(0,C.Z)(e.inboundNodes);try{for(u.s();!(i=u.n()).done;){var l=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(l)))for(var p=0;p<l.inboundLayers.length;++p){var c=l.inboundLayers[p].name,d=l.nodeIndices[p],f=l.tensorIndices[p];s.push("".concat(c,"[").concat(d,"][").concat(f,"]"))}}}catch(yB){u.e(yB)}finally{u.f()}var g=e.name,h=e.getClassName(),m=0===s.length?"":s[0];_v(["".concat(g," (").concat(h,")"),o,a,e.countParams().toString(),m],t,r);for(var v=1;v<s.length;++v)_v(["","","","",s[v]],t,r)}function wv(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function Ov(e,t){if(null===e)return null;if("string"===typeof e)return Mg(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];wv(t,a,o)?n.push(o):n.push(Ov(o,t))}return n}for(var i={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],p=e[l];if("name"===l&&"string"===typeof p)i[l]=p;else{var c=Mg(l);i[c]=Ov(p,c)}}return i}function Sv(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return Ig(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];wv(t,a,o)?n.push(o):n.push(Sv(o,t))}return n}for(var i={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],p=e[l],c=Ig(l);i[c]="name"!==l&&"className"!==l||"string"!==typeof p?Sv(p,l):p}return i}var Cv="4.4.0",Ev=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=Xg(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],Pg(r.inputs).length!==r.inputs.length)throw new xg("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));Pg(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var o,i=(0,C.Z)(r.outputs);try{for(i.s();!(o=i.n()).done;){var s=o.value,u=s.sourceLayer,l=s.nodeIndex,p=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(l),r.outputLayersTensorIndices.push(p)}}catch(yB){i.e(yB)}finally{i.f()}var c,d=(0,C.Z)(r.inputs);try{for(d.s();!(c=d.n()).done;){var f=c.value,g=f.sourceLayer,h=f.nodeIndex,m=f.tensorIndex;Eg(0===h,"input layer has >1 nodes"),Eg(0===m,"input layer has >1 tensors"),r.inputLayers.push(g),r.inputLayersNodeIndices.push(h),r.inputLayersTensorIndices.push(m)}}catch(yB){d.e(yB)}finally{d.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var v=0;v<r.inputLayers.length;v++){var y=r.inputLayers[v];if(!(y instanceof vm))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(v," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,_=(0,C.Z)(r.outputLayers);try{for(_.s();!(b=_.n()).done;){var k=b.value;r.outputNames.push(k.name)}}catch(yB){_.e(yB)}finally{_.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var x,w={},O={},S={},E={},R={},F=[],I=function e(t,a,o,i,s,u){null!=i&&null!=s&&null!=u||(i=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var l=i.inboundNodes[s];if(-1!==o.indexOf(l))throw new kg("The tensor ".concat(t.name,' at layer "').concat(i.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(l)){r.containerNodes.add(n.nodeKey(i,s)),i.id in R||(R[i.id]=Object.keys(R).length),-1===o.indexOf(l)&&o.push(l);for(var p=l.inboundLayers.length,c=0;c<p;c++){e(l.inputTensors[c],a,o,l.inboundLayers[c],l.nodeIndices[c],l.tensorIndices[c])}for(a.push(l);o.indexOf(l)>=0;)o.splice(o.indexOf(l),1);F.push(l)}},M=[],A=[],N=(0,C.Z)(r.outputs);try{for(N.s();!(x=N.n()).done;){I(x.value,M,A)}}catch(yB){N.e(yB)}finally{N.f()}var D,L=F.slice().reverse(),B=(0,C.Z)(L);try{for(B.s();!(D=B.n()).done;){var P=D.value;O[P.id]=P,P.id in w||(w[P.id]=0);var j=w[P.id],z=null==S[P.outboundLayer.id]?0:S[P.outboundLayer.id];j=Math.max(j,z),S[P.outboundLayer.id]=j,E[P.outboundLayer.id]=P.outboundLayer,w[P.id]=j;for(var G=0;G<P.inboundLayers.length;G++){var W=P.inboundLayers[G],U=P.nodeIndices[G],Z=W.inboundNodes[U],H=null==w[Z.id]?0:w[Z.id];w[Z.id]=Math.max(j+1,H),O[Z.id]=Z}}}catch(yB){B.e(yB)}finally{B.f()}var V={};for(var K in w){var X=w[K];X in V||(V[X]=[]),V[X].push(O[K])}var q={};for(var Y in S){var $=S[Y];$ in q||(q[$]=[]),q[$].push(E[Y])}var J=Object.keys(q).map((function(e){return parseInt(e,10)})).sort(Bg);r.layers=[];var Q,ee=(0,C.Z)(J);try{for(ee.s();!(Q=ee.n()).done;){var te=q[Q.value];te.sort((function(e,t){var n=R[e.id],r=R[t.id];return n<r?-1:n>r?1:0}));var ne,re=(0,C.Z)(te);try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;ae instanceof n&&r.internalContainerRefs.push(ae),r.layers.push(ae)}}catch(yB){re.e(yB)}finally{re.f()}}}catch(yB){ee.e(yB)}finally{ee.f()}r.layersByDepth=q,J=Object.keys(V).map((function(e){return parseInt(e,10)})).sort(Bg);var oe,ie=r.inputs.slice(),se=[],ue=(0,C.Z)(J);try{for(ue.s();!(oe=ue.n()).done;){var le,pe=oe.value,ce=(0,C.Z)(V[pe]);try{for(ce.s();!(le=ce.n()).done;){var de=le.value,fe=de.outboundLayer;if(null!=fe){var ge,he=(0,C.Z)(de.inputTensors);try{for(he.s();!(ge=he.n()).done;){var me=ge.value;if(-1===ie.indexOf(me))throw new kg("Graph disconnected: cannot obtain value for tensor ".concat(me)+' at layer "'.concat(fe.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(se))}}catch(yB){he.e(yB)}finally{he.f()}var ve,ye=(0,C.Z)(de.outputTensors);try{for(ye.s();!(ve=ye.n()).done;){var be=ve.value;ie.push(be)}}catch(yB){ye.e(yB)}finally{ye.f()}se.push(fe.name)}}}catch(yB){ce.e(yB)}finally{ce.f()}}}catch(yB){ue.e(yB)}finally{ue.f()}r.nodesByDepth=V;var _e,ke=r.layers.map((function(e){return e.name})),xe=(0,C.Z)(ke);try{var we=function(){var e=_e.value,t=ke.filter((function(t){return t===e})).length;if(1!==t)throw new kg('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(ke))};for(xe.s();!(_e=xe.n()).done;)we()}catch(yB){xe.e(yB)}finally{xe.f()}return r.outboundNodes=[],r.inboundNodes=[],new fm({outboundLayer:(0,gg.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return(0,R.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=(0,C.Z)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(yB){n.e(yB)}finally{n.f()}var a,o=(0,C.Z)(this.internalContainerRefs);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.numDisposedVariables+=i.dispose().numDisposedVariables}}catch(yB){o.e(yB)}finally{o.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new xg("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=(0,C.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(yB){n.e(yB)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,C.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,E.Z)(r.nonTrainableWeights))}}catch(yB){n.e(yB)}finally{n.f()}if(!this.trainable){var a,o=[],i=(0,C.Z)(this.layers);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push.apply(o,(0,E.Z)(s.trainableWeights))}}catch(yB){i.e(yB)}finally{i.f()}return o.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,o=(0,C.Z)(this.layers);try{for(o.s();!(t=o.n()).done;){var i,s=t.value,u=(0,C.Z)(s.weights);try{for(u.s();!(i=u.n()).done;){var l=i.value;if(null!=r[l.originalName])throw new xg("Duplicate weight name: ".concat(l.originalName));r[l.originalName]=l,a++}}catch(yB){u.e(yB)}finally{u.f()}}}catch(yB){o.e(yB)}finally{o.f()}var p=[];for(var c in e){var d=c;if(null==r[c]){var f=c.split("/");d=f.slice(0,-2).concat([f[f.length-1]]).join("/")}if(null!=r[d])p.push([r[d],e[c]]);else if(n)throw new xg("Provided weight data has no target variable: ".concat(c));delete r[d]}if(n){var g=[];for(var h in r)g.push(h);if(g.length>0)throw new xg("".concat(g.length," of ").concat(a," weights are not set: ")+"".concat(g))}lm(p)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(Cv),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Sv(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return ki((function(){e=Fg(e);for(var r=new ym,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return km(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return ki((function(){var r;return e=Fg(e),r=null==t?Cg(null,e.length):Fg(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=nm(e);if(t.length!==this.inputLayers.length)throw new xg("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],o=t[r];n[a.name+"_0_0"]=o}var i=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Bg);if(i.length>1){var s,u=(0,C.Z)(i);try{for(u.s();!(s=u.n()).done;){var l,p=s.value,c=this.nodesByDepth[p],d=(0,C.Z)(c);try{for(d.s();!(l=d.n()).done;){var f=l.value,g=f.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(g.id)){for(var h=[],m=0;m<f.inboundLayers.length;m++){var v=f.inboundLayers[m],y=f.nodeIndices[m],b=f.tensorIndices[m],_=n["".concat(v.name,"_").concat(y,"_").concat(b)];h.push(_)}for(var k=nm(g.computeOutputShape(Rg(h))),x=g.inboundNodes.indexOf(f),w=0;w<k.length;w++){n["".concat(g.name,"_").concat(x,"_").concat(w)]=k[w]}}}}catch(yB){d.e(yB)}finally{d.f()}}}catch(yB){u.e(yB)}finally{u.f()}}for(var O=[],S=[],E=0;E<this.outputLayers.length;E++){var T=this.outputLayers[E],R=this.outputLayersNodeIndices[E],F=this.outputLayersTensorIndices[E],I="".concat(T.name,"_").concat(R,"_").concat(F);S.push(I)}for(var M=0;M<S.length;M++){var A=S[M];Eg(A in n),O.push(n[A])}return Rg(O)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=Cg(null,e.length));for(var n={},a=0;a<this.inputs.length;++a){var o=this.inputs[a],i=e[a],s=t[a];n[o.id]=[i,s]}var u,l=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Bg),p=(0,C.Z)(l);try{for(p.s();!(u=p.n()).done;){var c,d=u.value,f=this.nodesByDepth[d],g=(0,C.Z)(f);try{for(g.s();!(c=g.n()).done;){var h,m=c.value,v=m.outboundLayer,y=m.inputTensors,b=m.outputTensors,_=new Array,k=(0,C.Z)(y);try{for(k.s();!(h=k.n()).done;){var x=h.value;x.id in n&&_.push(n[x.id])}}catch(yB){k.e(yB)}finally{k.f()}if(_.length===y.length){var w={},O=void 0,S=void 0,E=void 0,T=void 0;if(null!=m.callArgs&&(w=m.callArgs),1===_.length){var R=(0,r.Z)(_[0],2),F=R[0],I=R[1];null==w.mask&&(w.mask=I),E=Fg(v.call(F,w)),T=Fg(v.computeMask(F,I)),O=[F],S=[I]}else O=_.map((function(e){return e[0]})),S=_.map((function(e){return e[1]})),null==w.mask&&(w.mask=S),E=Fg(v.call(O,w)),T=Fg(v.computeMask(O,S));if(v.activityRegularizer)throw new wg("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var M=0;M<b.length;++M){var A=b[M],N=E[M],D=T[M];n[A.id]=[N,D]}}}}catch(yB){g.e(yB)}finally{g.f()}}}catch(yB){p.e(yB)}finally{p.f()}var L,B=[],P=[],j=[],z=(0,C.Z)(this.outputs);try{for(z.s();!(L=z.n()).done;){var G=L.value;Eg(G.id in n,"Could not compute output ".concat(G.name," : ").concat(G.id));var W=(0,r.Z)(n[G.id],2),U=W[0],Z=W[1];j.push(U.shape),B.push(U),P.push(Z)}}catch(yB){z.e(yB)}finally{z.f()}return[B,P,j]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},o=(0,C.Z)(this.layers);try{for(o.s();!(r=o.n()).done;){var i=r.value;t=i instanceof n?1:0;for(var s=0;s<i.inboundNodes.length;s++){var u=n.nodeKey(i,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(yB){o.e(yB)}finally{o.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new xg("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new xg("Provide either a layer name or layer index");var n,r=(0,C.Z)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(yB){r.e(yB)}finally{r.f()}throw new xg("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return ki((function(){var t,r=[],a=(0,C.Z)(e.layers);try{for(a.s();!(t=a.n()).done;)for(var o=t.value,i=0;i<o.inboundNodes.length;++i){var s=n.nodeKey(o,i);e.containerNodes.has(s)&&r.push.apply(r,(0,E.Z)(o.calculateLosses()))}}catch(yB){a.e(yB)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],o=(0,C.Z)(this.layers);try{for(o.s();!(e=o.n()).done;){for(var i=e.value,s=i.getClassName(),u=i.getConfig(),l=[],p=0;p<i.inboundNodes.length;p++){var c=i.inboundNodes[p],d=n.nodeKey(i,p),f={};if(this.containerNodes.has(d)){if(c.callArgs)try{JSON.stringify(c.callArgs),f=c.callArgs}catch(yB){console.warn("Layer ".concat(i.name," was passed ")+"non-serializable keyword arguments: "+"".concat(c.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),f={}}if(c.inboundLayers.length>0){for(var g=[],h=0;h<c.inboundLayers.length;h++){var m=c.inboundLayers[h],v=c.nodeIndices[h],y=c.tensorIndices[h],b=r[n.nodeKey(m,v)];null==b&&(b=0),g.push([m.name,b,y,f])}l.push(g)}}}var _={};_.name=i.name,_.className=s,_.config=u,_.inboundNodes=l,a.push(_)}}catch(yB){o.e(yB)}finally{o.f()}t.layers=a;for(var k=[],x=0;x<this.inputLayers.length;x++){var w=this.inputLayers[x],O=this.inputLayersNodeIndices[x],S=n.nodeKey(w,O);if(this.containerNodes.has(S)){var E=r[S];null!==E&&void 0!==E||(E=0);var T=this.inputLayersTensorIndices[x];k.push([w.name,E,T])}}t.inputLayers=k;for(var R=[],F=0;F<this.outputLayers.length;F++){var I=this.outputLayers[F],M=this.outputLayersNodeIndices[F],A=n.nodeKey(I,M);if(this.containerNodes.has(A)){var N=r[A];null!==N&&void 0!==N||(N=0);var D=this.outputLayersTensorIndices[F];R.push([I.name,N,D])}}return t.outputLayers=R,t}},{key:"stateful",get:function(){if(this._stateful)throw new xg("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=(0,C.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(yB){t.e(yB)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;ki((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function o(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function i(e,t){var n,a,i=[],s=(0,C.Z)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u[0],p=u[1],c=u[2];if(n=null==u[3]?{}:u[3],!(l in r))return void o(e,t);var d=r[l];if(d.inboundNodes.length<=p)return void o(e,t);var f=d.inboundNodes[p];i.push(f.outputTensors[c])}}catch(yB){s.e(yB)}finally{s.f()}i.length>0&&e.apply(Rg(i),n)}function s(e){var a=e.name,i=Xm(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[a]=i,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new xg("Corrupted configuration, expected array for nodeData: ".concat(e));o(i,e)}))}var u,l=t.name,p=t.layers,c=(0,C.Z)(p);try{for(c.s();!(u=c.n()).done;){s(u.value)}}catch(yB){c.e(yB)}finally{c.f()}for(;!jg(a);){var d,f=(0,C.Z)(p);try{for(f.s();!(d=f.n()).done;){var g=d.value,h=r[g.name];if(h.name in a){var m=a[h.name];delete a[h.name];var v,y=(0,C.Z)(m);try{for(y.s();!(v=y.n()).done;){i(h,v.value)}}catch(yB){y.e(yB)}finally{y.f()}}}}catch(yB){f.e(yB)}finally{f.f()}}var b,_=[],k=[],x=t.inputLayers,w=(0,C.Z)(x);try{for(w.s();!(b=w.n()).done;){var O=b.value,S=O[0],E=O[1],T=O[2];Eg(S in r);var R=r[S].inboundNodes[E].outputTensors;_.push(R[T])}}catch(yB){w.e(yB)}finally{w.f()}var F,I=t.outputLayers,M=(0,C.Z)(I);try{for(M.s();!(F=M.n()).done;){var A=F.value,N=A[0],D=A[1],L=A[2];Eg(N in r);var B=r[N].inboundNodes[D].outputTensors;k.push(B[L])}}catch(yB){M.e(yB)}finally{M.f()}return new e({inputs:_,outputs:k,name:l})}}]),n}(hm);function Tv(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function Rv(e,t){return Tv(e,t,"classWeight")}function Fv(e,t,n,r){return Iv.apply(this,arguments)}function Iv(){return(Iv=(0,S.Z)((0,O.Z)().mark((function e(t,n,r,a){var o,i,s;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return o=ki((function(){if(1===t.shape.length)return vi(t);if(2===t.shape.length){if(t.shape[1]>1){return Ns(t,1)}if(1===t.shape[1])return Ys(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,o.data();case 7:return e.t1=e.sent,i=e.t0.from.call(e.t0,e.t1),xi(o),s=[],i.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",Cl(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mv(e,t){return Ti(e,t)}var Av=32;function Nv(e,t){var n,r,a=t;n=a.xs,r=a.ys,P(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var o=Dv("input",e.inputNames,n),i=Dv("output",e.outputNames,r),s=o[0].shape[0];P(o.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),P(i.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){P(o[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},l=0;l<o.length;l++)u(l);for(var p=function(t){P(i[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)p(c);return{xs:o,ys:i}}function Dv(e,t,n){if(n instanceof Oa)return[n];if(Array.isArray(n))return P(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],o=(0,C.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(null==n[i])throw new xg("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(i,"'."));a.push(n[i])}}catch(yB){o.e(yB)}finally{o.f()}return a}function Lv(e){if(3===e.length)throw new wg("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function Bv(e,t,n){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,S.Z)((0,O.Z)().mark((function e(t,n,r){var a,o,i,s,u,l,p,c,d,f,g,h,m,v,y,b,_,k,x,w,S,C,E,T,R,F,I,M,A,N,D,L,B;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,P(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),P(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),P(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),P(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),P(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(o=null!=r.validationData)&&(zv(r.validationData)?P(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=Lv(r.validationData),i=u.xs,s=u.ys)),l=t.makeTrainFunction(),p=t.getDedupedMetricsNames(),c=o?p.slice().concat(p.map((function(e){return"val_"+e}))):p.slice(),d=Zm(r.callbacks,r.yieldEvery),f=null==r.verbose?1:r.verbose,g=Vm(d,f,r.epochs,null,null,jv(n,r),null,o,c),h=g.callbackList,m=g.history,h.setModel(t),t.history=m,e.next=22,h.onTrainBegin();case 22:return t.stopTraining_=!1,v=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(v<r.epochs)){e.next=98;break}return b={},e.next=31,h.onEpochBegin(v);case 31:if(_=0,k=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(_<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(x=e.sent,!a||!x.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(_," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==x.value){e.next=73;break}return w=Nv(t,x.value),S=w.xs,C=w.ys,(E={}).batch=k,E.size=S[0].shape[0],e.next=51,h.onBatchBegin(k,E);case 51:if(T=[],null==r.classWeight){e.next=64;break}R=Rv(r.classWeight,t.outputNames),F=0;case 55:if(!(F<R.length)){e.next=64;break}return e.t0=T,e.next=59,Fv(C[F],null,R[F]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++F,e.next=55;break;case 64:for(I=S.concat(C).concat(T),M=l(I),xi(I),A=0;A<p.length;++A)N=p[A],D=M[A],E[N]=D,wi(D);return e.next=70,h.onBatchEnd(k,E);case 70:Pm(E),k++,_++;case 73:if(!(a?_>=r.batchesPerEpoch:x.done)){e.next=87;break}if(!o){e.next=86;break}if(L=void 0,!zv(r.validationData)){e.next=84;break}return e.t2=Fg,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,L=(0,e.t2)(e.t3),e.next=85;break;case 84:L=Fg(t.evaluate(i,s,{batchSize:null==r.validationBatchSize?Av:r.validationBatchSize,verbose:0}));case 85:for(B=0;B<t.metricsNames.length;++B)b["val_".concat(t.metricsNames[B])]=L[B];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,h.onEpochEnd(v,b);case 93:if(v++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,h.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),Pv.apply(this,arguments)}function jv(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function zv(e){return"function"===typeof e.iterator}function Gv(e,t,n){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,S.Z)((0,O.Z)().mark((function e(t,n,r){var a,o,i,s,u,l,p,c,d;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,o=t.testFunction,i=[],!(r.verbose>0)){e.next=6;break}throw new wg("Verbose mode is not implemented yet.");case 6:if(P(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),"function"!==typeof n.next){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,l=0,p=(0,O.Z)().mark((function e(){var n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,i=ki((function(){if(n.value){var e=Nv(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),p=ki((function(){return o(s)}));if(xi(s),0===l)for(var c=0;c<p.length;++c)i.push(Ai(0));for(var d=s[0].shape[0],f=function(e){var t=p[e],n=i[e];i[e]=ki((function(){return Si(i[e],Ti(d,t))})),l>0&&xi(n)},g=0;g<p.length;++g)f(g);xi(p),u+=d,++l}return i})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(l<r.batches)){e.next=25;break}return e.delegateYield(p(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(c=0;c<i.length;++c)d=i[c],i[c]=Ei(i[c],u),xi(d);return e.abrupt("return",Rg(i));case 27:case"end":return e.stop()}}),e)}))),Wv.apply(this,arguments)}function Uv(e){P(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function Zv(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return bh(e,t,n-t)})):bh(e,t,n-t)}function Hv(e,t){return ki((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return Hv(e,t)})):Eh(e,"int32"===t.dtype?t:mi(t,"int32"))}))}function Vv(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function Kv(e){var t=[];e instanceof Oa&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(yh(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Xv(e,t){if(null!=e){var n=[];if(t instanceof Oa)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var o=[];if(e instanceof Oa)-1===n.indexOf(e.id)&&o.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&o.push(e)}));else if(null!=e)for(var i in e){var s=e[i];-1===n.indexOf(s.id)&&o.push(s)}o.forEach((function(e){e.isDisposed||e.dispose()}))}}function qv(e){return Array.isArray(e)}function Yv(e){return!function(e){return e instanceof Oa}(e)&&!qv(e)}function $v(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var i=!1;if(qv(e)&&e.length>0)i=!0;else if(Yv(e)){for(var s in e)if(e.hasOwnProperty(s)){i=!0;break}}else i=!0;if(i)throw new xg("Error when checking model ".concat(o," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(Yv(e)){r=[];var u,l=(0,C.Z)(t);try{for(l.s();!(u=l.n()).done;){var p=u.value;if(null==e[p])throw new xg('No data provided for "'.concat(p,'". Need data for each key in: ')+"".concat(t));r.push(e[p])}}catch(yB){l.e(yB)}finally{l.f()}}else if(qv(e)){if(e.length!==t.length)throw new xg("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new xg("The model ".concat(o," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=Kv(r),null!=n)for(var c=0;c<t.length;++c)if(null!=n[c]){var d=r[c];if(d.shape.length!==n[c].length)throw new xg("Error when checking ".concat(o,": expected ").concat(t[c]," ")+"to have ".concat(n[c].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var f=0;f<n[c].length;++f)if(0!==f||a){var g=d.shape[f],h=n[c][f];if(null!=h&&h>=0&&g!==h)throw new xg("".concat(o," expected a batch of elements where each ")+"example has shape [".concat(n[c].slice(1,n[c].length),"] ")+"(i.e.,tensor shape [*,".concat(n[c].slice(1,n[c].length),"])")+" but the ".concat(o," received an input with ").concat(d.shape[0])+" examples, each with shape [".concat(d.shape.slice(1,d.shape.length),"]")+" (tensor shape [".concat(d.shape,"])"))}}return r}function Jv(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new xg("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new xg("The model expects ".concat(t.length," ").concat(o," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var i=0;i<t.length;++i)if(null!=n[i]){var s=r[i];if(s.shape.length!==n[i].length)throw new xg("Error when checking ".concat(o,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[i].length;++u)if(0!==u||a){var l=s.shape[u],p=n[i][u];if(null!=p&&p!==l)throw new xg("Error when checking ".concat(o,": expected ")+"".concat(t[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var Qv=function(t){(0,ca.Z)(a,t);var n=(0,da.Z)(a);function a(e){var t;return(0,T.Z)(this,a),(t=n.call(this,e)).isTraining=!1,t}return(0,R.Z)(a,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new xg("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");bv(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return zp.adagrad(.01)},Adadelta:function(){return zp.adadelta(1,.95,mh())},Adam:function(){return zp.adam(.001,.9,.999,mh())},Adamax:function(){return zp.adamax(.002,.9,.999,mh(),0)},RMSProp:function(){return zp.rmsprop(.001,.9,0,mh())},SGD:function(){return zp.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new xg("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Bi))throw new xg("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new xg("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return iv(e)}))}else{var a=iv(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var o in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(o))throw new xg('Unknown entry in loss dictionary: "'.concat(o,'". ')+"Only expected the following keys: ".concat(this.outputNames));var i,s=(0,C.Z)(this.outputNames);try{for(s.s();!(i=s.n()).done;){var u=i.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(iv(e.loss[u]))}}catch(yB){s.e(yB)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var l=0;l<this.outputs.length;++l){var p=this.internalOutputShapes[l],c=this.outputNames[l];this.feedOutputNames.push(c),this.feedOutputShapes.push(p),this.feedLossFns.push(this.lossFunctions[l])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ih("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var f=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],o=(0,C.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(yB){o.e(yB)}finally{o.f()}return a}(e.metrics,this.outputNames);ih("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var r,a,o,i,s=(0,C.Z)(n);try{var u=function(){var n,s=i.value;if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var u,l=t.internalOutputShapes[e];1===l[l.length-1]||t.lossFunctions[e]===nv?-1!==["accuracy","acc"].indexOf(s)?a=sv:-1!==["crossentropy","ce"].indexOf(s)&&(a=pv):t.lossFunctions[e]===tv?-1!==["accuracy","acc"].indexOf(s)?a=cv:-1!==["crossentropy","ce"].indexOf(s)&&(a=fv):-1!==["accuracy","acc"].indexOf(s)?a=uv:-1!==["crossentropy","ce"].indexOf(s)&&(a=dv),-1!==["accuracy","acc"].indexOf(s)?u="acc":-1!==["crossentropy","ce"].indexOf(s)&&(u="ce"),o=a,r=""+u}else{var p=function(e){if("string"===typeof e&&e in gv)return gv[e];if("string"!==typeof e&&null!=e)return e;throw new xg("Unknown metric ".concat(e))}(s);o=p,r=""+hv(s)}ih(r,(function(){n=o})),function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])}(e,r,n)};for(s.s();!(i=s.n()).done;)u()}catch(yB){s.e(yB)}finally{s.f()}}(f[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;Uv(r);var a=this.standardizeUserDataXY(e,t,!0,r);try{var o=a[0].concat(a[1]);this.makeTestFunction();var i=this.testFunction;return Rg(this.testLoop(i,o,r,n.verbose,n.steps))}finally{Xv(a[0],e),Xv(a[1],t)}}},{key:"evaluateDataset",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",Gv(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new xg("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new xg("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new xg("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),o=new ym;if(e instanceof Oa&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new xg("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var i=0;i<this.inputs.length;++i)o.add(this.inputs[i],e[i])}else{var s,u=(0,C.Z)(this.inputs);try{for(u.s();!(s=u.n()).done;){var l=s.value,p=e[l.name];if(null==p)throw new xg("No value is provided for the model's input ".concat(l.name));o.add(l,p)}}catch(yB){u.e(yB)}finally{u.f()}}var c=km(a,o);return n?c:c[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=Cg(null,e.length),r=e.length,a=(0,C.Z)(this.layers);try{for(a.s();!(t=a.n()).done;){for(var o=t.value,i=Array.isArray(o.output)?o.output:[o.output],s=i.map((function(e){return e.name})),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(-1!==l&&(n[u]=i[l],r--),0===r)break}if(0===r)break}}catch(yB){a.e(yB)}finally{a.f()}if(r>0){var p=[];throw n.forEach((function(t,n){null==t&&p.push(e[n])})),new xg("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(p)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ki((function(){var a=t.checkNumSamples(e);if(r)throw new wg("Verbose predictLoop() is not implemented yet.");for(var o=Vv(a,n),i=t.outputs.map((function(e){return[]})),s=function(n){ki((function(){var r=o[n][0],a=o[n][1],i=Zv(e,r,a),s=[];if(Array.isArray(i))for(var u=0;u<i.length;++u)s.push({key:t.inputs[u],value:i[u]});else s.push({key:t.inputs[0],value:i});var l=new ym(s);return km(t.outputs,l)})).forEach((function(e,t){return i[t].push(e)}))},u=0;u<o.length;++u)s(u);return Rg(i.map((function(e){return ou(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Kv(e);Jv(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return Uv(r),this.predictLoop(n,r)}finally{Xv(n,e)}}},{key:"predictOnBatch",value:function(e){Jv(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new kg("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var o=this.feedOutputShapes[a];this.feedLossFns[a]===tv?r.push(o.slice(0,o.length-1).concat([1])):r.push(o)}if(function(e,t,n){var r=Pg(e.map((function(e){return e.shape[0]})));r.sort();var a=Pg(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new xg("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new xg("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!W(r,a))throw new xg("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}(e=$v(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=$v(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){for(var r=[Ym,nv,ev],a=0;a<e.length;++a){var o=e[a],i=t[a],s=n[a];if(null!=i){if(i===ev&&1===o.shape[o.shape.length-1])throw new xg("You are passing a target array of shape ".concat(o.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(i))for(var u=o.shape.slice(1),l=s.slice(1),p=0;p<u.length;++p){var c=u[p],d=l[p];if(null!=d&&c!==d)throw new xg("A target Tensor with shape ".concat(o.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new xg("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n,a,o){var i,s,u,l,p,c,d,f,g,h=arguments;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(h.length>4&&void 0!==h[4])||h[4],s=h.length>5?h[5]:void 0,u=this.standardizeUserDataXY(t,n,i,s),l=(0,r.Z)(u,2),p=l[0],c=l[1],null==a){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==o){e.next=19;break}f=Rv(o,this.outputNames),d=[],g=0;case 10:if(!(g<f.length)){e.next=19;break}return e.t0=d,e.next=14,Fv(c[g],null,f[g]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++g,e.next=10;break;case 19:return e.abrupt("return",[p,c,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return ki((function(){var i=r.checkNumSamples(t,n,o,"steps"),s=[];if(a>0)throw new wg("Verbose mode is not implemented yet.");if(null!=o)throw new wg("steps mode in testLoop() is not implemented yet");for(var u=Vv(i,n),l=Cl(hh(0,i)),p=0;p<u.length;++p){var c=u[p][0],d=u[p][1],f=bh(l,c,d-c),g=Hv(t,f),h=e(g);if(0===p)for(var m=0;m<h.length;++m)s.push(Ai(0));for(var v=0;v<h.length;++v){var y=h[v];s[v]=Si(s[v],Ti(d-c,y))}}for(var b=0;b<s.length;++b)s[b]=Ei(s[b],i);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(Tg(e,r)>1){var o=Tg(e.slice(0,n),r);a+="_".concat(o)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),i=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,l=new ym(t),p=km(e.outputs,l,{training:!0}),c=0;c<e.lossFunctions.length;++c){var d=(0,e.lossFunctions[c])(a[c],p[c]);null!=o[c]&&(d=Mv(d,o[c]));var f=ju(d);n.push(f),u=0===c?d:Si(u,d)}for(var g=0;g<e.metricsTensors.length;++g){var h=void 0;if(e.outputs.length>1&&g<e.outputs.length)h=n[g];else{var m=e.metricsTensors[g][0],v=e.metricsTensors[g][1];h=ju(m(a[v],p[v]))}wi(h),i.push(h)}return u=ju(u),e.calculateLosses().forEach((function(e){u=Si(u,e)})),u}),!0,s)].concat(i)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return ki((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),o=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=[],s=0;s<e.inputs.length;++s)i.push({key:e.inputs[s],value:a[s]});for(var u=new ym(i),l=km(e.outputs,u),p=0;p<e.lossFunctions.length;++p){var c=e.lossFunctions[p],d=ju(c(o[p],l[p]));n=0===p?d:Si(n,d),r.push(n)}for(var f=0;f<e.metricsTensors.length;++f){var g=e.metricsTensors[f][0],h=e.metricsTensors[f][1],m=ju(g(o[h],l[h]));r.push(m)}return r}))}}},{key:"fit",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o,i,s,u,l,p,c,d,f,g,h,m,v,y,b,_,k,x,w,S,C,E,T=arguments;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=T.length>2&&void 0!==T[2]?T[2]:{},!this.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return this.isTraining=!0,e.prev=4,Uv(f=null==r.batchSize?32:r.batchSize),!1,e.next=10,this.standardizeUserData(t,n,r.sampleWeight,r.classWeight,false,f);case 10:if(g=e.sent,a=g[0],o=g[1],d=g[2],h=!1,!(null!=r.validationData&&r.validationData.length>0)){e.next=36;break}if(h=!0,2!==r.validationData.length){e.next=22;break}u=r.validationData[0],l=r.validationData[1],e.next=27;break;case 22:if(3!==r.validationData.length){e.next=26;break}throw new wg("validationData including sample weights is not supported yet.");case 26:throw new xg("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(r.validationData," is invalid."));case 27:return!0,e.next=30,this.standardizeUserData(u,l,null,null,true,f);case 30:v=e.sent,p=v[0],c=v[1],m=p.concat(c),e.next=37;break;case 36:null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(h=!0,y=Math.floor(a[0].shape[0]*(1-r.validationSplit)),b=a[0].shape[0],p=Zv(a,y,b),i=a,a=Zv(a,0,y),c=Zv(o,y,b),s=o,o=Zv(o,0,y),m=p.concat(c)):null!=r.validationSteps&&(h=!0);case 37:return _=a.concat(o).concat(d),this.checkTrainableWeightsConsistency(),k=this.makeTrainFunction(),x=this.getDedupedMetricsNames(),h?(this.makeTestFunction(),w=this.testFunction,S=x.slice().concat(x.map((function(e){return"val_"+e})))):(w=null,m=[],S=x.slice()),C=Zm(r.callbacks,r.yieldEvery),e.next=45,this.fitLoop(k,_,x,f,r.epochs,r.verbose,C,w,m,r.shuffle,S,r.initialEpoch,null,null);case 45:return E=e.sent,e.abrupt("return",E);case 47:return e.prev=47,this.isTraining=!1,Xv(a,t),Xv(o,n),Xv(i,t),Xv(s,n),Xv(p,u),Xv(c,l),null!=d&&xi(d),e.finish(47);case 57:case"end":return e.stop()}}),e,this,[[4,,47,57]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitLoop",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n,r,a,o,i,s,u,l,p,c,d,f,g){var h,m,v,y,b,_,k,x,w=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a&&(a=32),null==o&&(o=1),null==p&&(p=!0),null==d&&(d=0),h=!1,null!=u&&null!=l&&(h=!0),null==g){e.next=10;break}if(h=!0,null!=f){e.next=10;break}throw new xg("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(m=this.checkNumSamples(n,a,f,"steps_per_epoch"))&&(v=hh(0,m)),null==i&&(i=1),y=Vm(s,i,o,d,m,f,a,h,c),b=y.callbackList,_=y.history,b.setModel(this),this.history=_,e.next=18,b.onTrainBegin();case 18:this.stopTraining_=!1,k=(0,O.Z)().mark((function e(){var o,i,s,c,d;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.onEpochBegin(x);case 2:if(o={},null==f){e.next=7;break}throw new wg("stepsPerEpoch mode is not implemented yet.");case 7:if("batch"!==p){e.next=11;break}throw new wg("batch shuffling is not implemneted yet");case 11:p&&A(v);case 12:i=Cl(v),s=Vv(m,a),c=(0,O.Z)().mark((function e(p){var c;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},e.next=3,b.onBatchBegin(p,c);case 3:return ki((function(){var e=s[p][0],d=s[p][1],f=bh(i,e,d-e);c.batch=p,c.size=d-e;for(var g=Hv(n,f),m=t(g),v=0;v<r.length;++v){var y=r[v],b=m[v];c[y]=b,wi(b)}if(p===s.length-1&&h)for(var _=w.testLoop(u,l,a),k=0;k<r.length;++k){var x=r[k],O=_[k];wi(O),o["val_"+x]=O}})),e.next=6,b.onBatchEnd(p,c);case 6:if(Pm(c),!w.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),d=0;case 16:if(!(d<s.length)){e.next=24;break}return e.delegateYield(c(d),"t0",18);case 18:if("break"!==e.t0){e.next=21;break}return e.abrupt("break",24);case 21:++d,e.next=16;break;case 24:i.dispose();case 25:return e.next=27,b.onEpochEnd(x,o);case 27:if(!w.stopTraining_){e.next=29;break}return e.abrupt("return","break");case 29:case"end":return e.stop()}}),e)})),x=d;case 21:if(!(x<o)){e.next=29;break}return e.delegateYield(k(),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++x,e.next=21;break;case 29:return e.next=31,b.onTrainEnd();case 31:return e.next=33,this.history.syncData();case 33:return e.abrupt("return",this.history);case 34:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,o,i,s,u,l,p,c,d,f,g){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bv(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a,o,i,s,u,l,p,c,d;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],o=r[1],i=this.makeTrainFunction(),s=i(a.concat(o)),u=[],l=(0,C.Z)(s),e.prev=9,l.s();case 11:if((p=l.n()).done){e.next=19;break}return c=p.value,e.next=15,c.data();case 15:d=e.sent,u.push(d[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:return xi(s),Xv(r[0],t),Xv(r[1],n),e.abrupt("return",Rg(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:a[o]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=(0,Km.Z)((0,hg.Z)(a.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=_i().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-_i().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=Ig(this.loss);else if(Array.isArray(this.loss)){var t,n=(0,C.Z)(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(yB){n.e(yB)}finally{n.f()}e=this.loss.map((function(e){return Ig(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,o=0,i=r;o<i.length;o++){var s=i[o];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=Ig(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[Ig(hv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return Ig(hv(e))}));var e={};for(var t in this.metrics)e[t]=Ig(hv(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=Xm(Ov(e.optimizer_config));if("string"===typeof e.loss)t=Mg(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return Mg(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=Mg(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return Mg(e)}));else if(null!=e.metrics)for(var o in n={},e.metrics)n[o]=Mg(e.metrics[o]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var t=(0,S.Z)((0,O.Z)().mark((function t(n,r){var a,o,i,s,u,l,p,c,d;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=9;break}if(0!==(a=Ro(n)).length){t.next=6;break}throw new xg("Cannot find any save handlers for URL '".concat(n,"'"));case 6:if(!(a.length>1)){t.next=8;break}throw new xg("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(n,"'"));case 8:n=a[0];case 9:if(null!=n.save){t.next=11;break}throw new xg("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return t.next=13,uo(this.getNamedWeights(r));case 13:if(o=t.sent,!1,null,i=this.toJSON(null,false),s={modelTopology:i,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(Cv),convertedBy:null},!(null!=r&&r.includeOptimizer)||null==this.optimizer){t.next=34;break}return s.trainingConfig=this.getTrainingConfig(),l="optimizer",t.t0=e,t.next=25,this.optimizer.getWeights();case 25:return t.t1=t.sent,t.t2=l,t.next=29,t.t0.encodeWeights.call(t.t0,t.t1,t.t2);case 29:p=t.sent,c=p.data,d=p.specs,(u=o.specs).push.apply(u,(0,E.Z)(d)),o.data=vo([o.data,c]);case 34:return null!=this.userDefinedMetadata&&(!0,vv(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=o.data,s.weightSpecs=o.specs,t.abrupt("return",n.save(s));case 38:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){vv(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),a}(Ev);Qv.className="Model",Li(Qv);var ey=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n)}(Qv);function ty(e,t){return ny.apply(this,arguments)}function ny(){return(ny=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!==typeof t){e.next=10;break}if(0!==(r=Fo(t,n)).length){e.next=7;break}r.push(hs(t,n)),e.next=9;break;case 7:if(!(r.length>1)){e.next=9;break}throw new xg("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 9:t=r[0];case 10:return e.abrupt("return",ry(t,void 0,n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ry(e,t,n){return ay.apply(this,arguments)}function ay(){return ay=(0,S.Z)((0,O.Z)().mark((function e(t,n,r){var a,o,i,s,u,l,p,c,d;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=3;break}throw new xg("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(a=e.sent,null!=(o=a.modelTopology).model_config&&(o=o.model_config),i=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&i,u=Xm(Ov(o),n,s),null!=(l=a.trainingConfig)&&u.loadTrainingConfig(l),null!=a.userDefinedMetadata&&u.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=24;break}if(null!=a.weightSpecs){e.next=17;break}throw new xg("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(p=oy(a.weightData,a.weightSpecs),c=p.modelWeights,d=p.optimizerWeights,u.loadWeights(c,i),!(null!=u.optimizer&&d.length>0)){e.next=22;break}return e.next=22,u.optimizer.setWeights(d);case 22:xi(c),xi(d.map((function(e){return e.tensor})));case 24:return e.abrupt("return",u);case 25:case"end":return e.stop()}}),e)}))),ay.apply(this,arguments)}function oy(e,t){var n=po(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}ey.className="Functional",Li(ey);var iy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:Xg("sequential_"),null!=e.layers){var a,o=(0,C.Z)(e.layers);try{for(o.s();!(a=o.n()).done;){var i=a.value;r.add(i)}}catch(yB){o.e(yB)}finally{o.f()}}return r}return(0,R.Z)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new xg("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof Qv;if(r){if(1!==(t=e).outputs.length)throw new xg("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new xg("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new xg("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new xg("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new vm({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new xg("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new xg("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=mm(this.outputs[0])}this.inboundNodes=[],new fm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Cg(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(am(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Qv({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),(0,Km.Z)((0,hg.Z)(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),(0,Km.Z)((0,hg.Z)(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new kg("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new kg("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){var r,a=arguments;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new kg("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new kg("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new xg("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new xg("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=(0,C.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(yB){n.e(yB)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new xg("Legacy serialization format not supported yet.");r=t}else P(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,o=t;var i=new e(o);if(!(i instanceof n))throw new wg("Sequential.fromConfig called on non-Sequential input: ".concat(i));var s,u=(0,C.Z)(r);try{for(u.s();!(s=u.n()).done;){var l=s.value,p=Xm(l,undefined,a);a&&p.setFastWeightInitDuringBuild(!0),i.add(p)}}catch(yB){u.e(yB)}finally{u.f()}return i}}]),n}(Qv);iy.className="Sequential",Li(iy);var sy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(Ni),uy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new wg("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return bu(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}]),n}(sy);uy.className="elu",Li(uy);var ly=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return dl(e)}}]),n}(sy);ly.className="selu",Li(ly);var py=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return pl(e)}}]),n}(sy);py.className="relu",Li(py);var cy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return ki((function(){return Gu(6,pl(e))}))}}]),n}(sy);cy.className="relu6",Li(cy);var dy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return e}}]),n}(sy);dy.className="linear",Li(dy);var fy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return gl(e)}}]),n}(sy);fy.className="sigmoid",Li(fy);var gy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return function(e){return ki((function(){var t=Si(.5,Ti(.2,e));return au(t,0,1)}))}(e)}}]),n}(sy);gy.className="hardSigmoid",Li(gy);var hy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return kl(e)}}]),n}(sy);hy.className="softplus",Li(hy);var my=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return function(e){return ki((function(){return Ei(e,Si(Zi(e),1))}))}(e)}}]),n}(sy);my.className="softsign",Li(my);var vy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return Sl(e)}}]),n}(sy);vy.className="tanh",Li(vy);var yy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return _l(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(sy);yy.className="softmax",Li(yy);var by=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return Nu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(sy);by.className="logSoftmax",Li(by);var _y=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ki((function(){return Ti(gl(Ti(e,t)),e)}))}}]),n}(sy);_y.className="swish",Li(_y);var ky=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e){return ki((function(){return Ti(e,Sl(kl(e)))}))}}]),n}(sy);function xy(e){return e.getClassName()}function wy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Lg(e,Di.getMap().classNameMap,t,"activation")}function Oy(e){if(null==e){var t={className:"linear",config:{}};return wy(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},wy(n)}return e instanceof sy?e:wy(e)}function Sy(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}ky.className="mish",Li(ky);var Cy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n)}(Ni),Ey=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this),Sy(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,R.Z)(n,[{key:"apply",value:function(e){var t=this;return ki((function(){var n=Qu([1]);return t.hasL1&&(n=Si(n,Au(Ti(t.l1,Zi(e))))),t.hasL2&&(n=Si(n,Au(Ti(t.l2,Th(e))))),Ys(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(Cy);Ey.className="L1L2",Li(Ey);var Ty={l1l2:"L1L2"};function Ry(e){return Ng(e)}function Fy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Lg(e,Di.getMap().classNameMap,t,"regularizer")}function Iy(e){return null==e?null:"string"===typeof e?Fy({className:e in Ty?Ty[e]:e,config:{}}):e instanceof Cy?e:Fy(e)}var My=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return(0,R.Z)(n,[{key:"call",value:function(e,t){e=rm(e);var n=pl(e);return null!=this.maxValue&&(n=au(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);My.className="ReLU",Li(My);var Ay=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,R.Z)(n,[{key:"call",value:function(e,t){var n=rm(e);return Ru(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Ay.className="LeakyReLU",Li(Ay);var Ny=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=em(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=Iy(e.alphaRegularizer),r.alphaConstraint=Dm(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new xg("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return(0,R.Z)(n,[{key:"build",value:function(e){var t=(e=am(e)).slice(1);if(null!=this.sharedAxes){var n,r=(0,C.Z)(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(yB){r.e(yB)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var o=1;o<e.length;++o)a[o]=e[o];this.inputSpec=[new pm({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=rm(e),rl(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:Qh(this.alphaInitializer),alphaRegularizer:Ry(this.alphaRegularizer),alphaConstraint:Am(this.alphaConstraint),sharedAxes:this.sharedAxes},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Ny.className="PReLU",Li(Ny);var Dy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new wg("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,R.Z)(n,[{key:"call",value:function(e,t){var n=rm(e);return bu(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Dy.className="ELU",Li(Dy);var Ly=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return(0,R.Z)(n,[{key:"call",value:function(e,t){var n=rm(e);return Ti(n,mi(Eu(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Ly.className="ThresholdedReLU",Li(Ly);var By=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new yy).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return(0,R.Z)(n,[{key:"call",value:function(e,t){var n=rm(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);function Py(e,t,n){if("number"===typeof e)return Cg(e,t);if(e.length!==t)throw new xg("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((o=a)!==parseInt(o.toString(),10))throw new xg("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var o}function jy(e,t,n,r){var a;return null==e?e:(a="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r))}function zy(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+gh([n-t,0]);else{if("same"!==r)throw new xg("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function Gy(e,t){return ki((function(){return th(t),"channelsFirst"===t?Ml(e,[0,2,3,1]):e}))}function Wy(e,t){return ki((function(){return th(t),"channelsFirst"===t?Ml(e,[0,2,3,4,1]):e}))}function Uy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return ki((function(){if(null==o&&(o="channelsLast"),th(o),3!==e.shape.length)throw new xg("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new xg("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new xg("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===o&&(e=Ml(e,[0,2,1])),"causal"===a)throw new wg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=cu(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(s=Fh(s,n)),s}))}function Zy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return ki((function(){if(null==o&&(o="channelsLast"),th(o),3!==e.rank&&4!==e.rank)throw new xg("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new xg("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=Gy(e,o);if("causal"===a)throw new wg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Hl({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(u=Ml(u,[0,3,1,2])),u}))}function Hy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return ki((function(){if(null==o&&(o="channelsLast"),th(o),4!==e.rank&&5!==e.rank)throw new xg("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new xg("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=Wy(e,o);if("causal"===a)throw new wg("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=gu(s,t,r,"same"===a?"same":"valid","NDHWC",i),null!=n&&(s=Fh(s,n)),"channelsFirst"===o&&(s=Ml(s,[0,4,1,2,3])),s}))}By.className="Softmax",Li(By);var Vy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;if((0,T.Z)(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,Wg(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new wg("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=Py(r.kernelSize,e,"kernelSize"),a.strides=Py(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,nh(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,th(a.dataFormat),a.activation=Oy(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=em(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=Dm(r.biasConstraint),a.biasRegularizer=Iy(r.biasRegularizer),a.activityRegularizer=Iy(r.activityRegularizer),a.dilationRate=Py(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new xg("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new xg("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new xg("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return(0,R.Z)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:xy(this.activation),useBias:this.useBias,biasInitializer:Qh(this.biasInitializer),biasRegularizer:Ry(this.biasRegularizer),activityRegularizer:Ry(this.activityRegularizer),biasConstraint:Am(this.biasConstraint)},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(Eg("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!Gg(e.kernelSize,"number",1,3))throw new xg("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(hm),Ky=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,Wg(a.filters,"filters"),a.kernelInitializer=em(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=Dm(r.kernelConstraint),a.kernelRegularizer=Iy(r.kernelRegularizer),a}return(0,R.Z)(n,[{key:"build",value:function(e){e=am(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new xg("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:h({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){var t;e=rm(e);var r=null==n.bias?null:n.bias.read(),a=Zg(n.activation.getClassName());if(null!=a&&2===n.rank)t=Zy(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=Uy(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=Zy(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new wg("convolutions greater than 3D are not implemented yet.");t=Hy(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=am(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=jy(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var o=[e[0]];return"channelsLast"===this.dataFormat?(o=o.concat(t)).push(this.filters):(o.push(this.filters),o=o.concat(t)),o}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:Qh(this.kernelInitializer),kernelRegularizer:Ry(this.kernelRegularizer),kernelConstraint:Am(this.kernelConstraint)},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new xg("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(Vy),Xy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return(0,R.Z)(n,[{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!Gg(e.kernelSize,"number",1,2))throw new xg("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Ky);Xy.className="Conv2D",Li(Xy);var qy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return(0,R.Z)(n,[{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new xg("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Ky);qy.className="Conv3D",Li(qy);var Yy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),(r=t.call(this,e)).inputSpec=[new pm({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new xg("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,R.Z)(n,[{key:"build",value:function(e){if(4!==(e=am(e)).length)throw new xg("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new xg("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new pm({ndim:4,axes:h({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){var t=rm(e);if(4!==t.shape.length)throw new xg("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o=t.shape,i=o[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=o[r],u=o[a],l=n.kernelSize[0],p=n.kernelSize[1],c=n.strides[0],d=n.strides[1],f=[i,zy(s,c,l,n.padding),zy(u,d,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Ml(t,[0,2,3,1]));var g=fu(t,n.kernel.read(),f,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(g=Ml(g,[0,3,1,2])),null!=n.bias&&(g=Fh(g,n.bias.read(),n.dataFormat)),null!=n.activation&&(g=n.activation.apply(g)),g}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=am(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var o=this.kernelSize[0],i=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=zy(a[n],s,o,this.padding),a[r]=zy(a[r],u,i,this.padding),a}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(Xy);Yy.className="Conv2DTranspose",Li(Yy);var $y=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),(r=t.call(this,e)).inputSpec=[new pm({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new xg("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,R.Z)(n,[{key:"build",value:function(e){if(5!==(e=am(e)).length)throw new xg("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new xg("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new pm({ndim:5,axes:h({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){var t=rm(e);if(5!==t.shape.length)throw new xg("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o,i=t.shape,s=i[0];"channelsFirst"===n.dataFormat?(o=2,r=3,a=4):(o=1,r=2,a=3);var u=i[o],l=i[r],p=i[a],c=n.kernelSize[0],d=n.kernelSize[1],f=n.kernelSize[2],g=n.strides[0],h=n.strides[1],m=n.strides[2],v=[s,zy(u,g,c,n.padding),zy(l,h,d,n.padding),zy(p,m,f,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Ml(t,[0,2,3,4,1]));var y=mu(t,n.kernel.read(),v,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=Ml(y,[0,4,1,2,3])),null!==n.bias&&(y=Fh(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,o=(e=am(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var i=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],l=this.strides[0],p=this.strides[1],c=this.strides[2];return o[t]=this.filters,o[n]=zy(o[n],l,i,this.padding),o[r]=zy(o[r],p,s,this.padding),o[a]=zy(o[a],c,u,this.padding),o}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(qy);$y.className="Conv3DTranspose",Li($y);var Jy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;if((0,T.Z)(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new xg("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new xg("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new xg("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=em(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=Iy(r.depthwiseRegularizer),a.depthwiseConstraint=Dm(r.depthwiseConstraint),a.pointwiseInitializer=em(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=Iy(r.pointwiseRegularizer),a.pointwiseConstraint=Dm(r.pointwiseConstraint),a}return(0,R.Z)(n,[{key:"build",value:function(e){if((e=am(e)).length<this.rank+2)throw new xg("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new xg("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],o=0;o<this.rank;++o)a.push(1);a.push(n*this.depthMultiplier,this.filters);var i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new pm({ndim:this.rank+2,axes:h({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){var t;if(e=rm(e),1===n.rank)throw new wg("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=Ml(e,[0,2,3,1])),t=fl(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=Fh(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=Ml(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Qh(this.depthwiseInitializer),e.pointwiseInitializer=Qh(this.pointwiseInitializer),e.depthwiseRegularizer=Ry(this.depthwiseRegularizer),e.pointwiseRegularizer=Ry(this.pointwiseRegularizer),e.depthwiseConstraint=Am(this.depthwiseConstraint),e.pointwiseConstraint=Am(this.pointwiseConstraint),e}}]),n}(Ky);Jy.className="SeparableConv";var Qy=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,2,e)}return(0,R.Z)(n)}(Jy);Qy.className="SeparableConv2D",Li(Qy);var eb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return(0,R.Z)(n,[{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!Gg(e.kernelSize,"number",1,1))throw new xg("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Ky);eb.className="Conv1D",Li(eb);var tb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return ki((function(){if(e=rm(e),"channelsLast"===n.dataFormat){var t=kh(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return kh(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=kh(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return kh(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);tb.className="Cropping2D",Li(tb);var nb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r,a;return(0,T.Z)(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,th(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,zg(Yg,"InterpolationFormat",a),r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return ki((function(){var t=rm(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=Ml(t,[0,2,3,1]);var a=n.size[0]*r[2],o=n.size[1]*r[3],i="nearest"===n.interpolation?Bp.resizeNearestNeighbor(t,[a,o]):Bp.resizeBilinear(t,[a,o]);return Ml(i,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?Bp.resizeNearestNeighbor(t,[s,u]):Bp.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);nb.className="UpSampling2D",Li(nb);var rb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=em(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=Dm(e.depthwiseConstraint),r.depthwiseRegularizer=Iy(e.depthwiseRegularizer),r}return(0,R.Z)(n,[{key:"build",value:function(e){if((e=am(e)).length<4)throw new xg("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new xg("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return ki((function(){null==a&&(a="channelsLast"),th(a);var i=Gy(e,a);if(4!==e.rank)throw new xg("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new xg("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return i=yu(i,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===a&&(i=Ml(i,[0,3,1,2])),i}))}(e=rm(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=Fh(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=am(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=jy(t,this.kernelSize[0],this.padding,this.strides[0]),o=jy(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,o]:[e[0],a,o,r]}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Qh(this.depthwiseInitializer),e.depthwiseRegularizer=Ry(this.depthwiseRegularizer),e.depthwiseConstraint=Am(this.depthwiseRegularizer),e}}]),n}(Vy);function ab(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new xg("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function ob(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return ki((function(){var u=t.shape.length;if(u<3)throw new xg("Input should be at least 3D, but is ".concat(u,"D."));var l=[1,0].concat(hh(2,u));if(t=Ml(t,l),null!=o)throw new wg("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=mi(mi(a,"bool"),"float32")).rank===u-1&&(a=xu(a,-1)),a=Ml(a,l)),r&&(t=cl(t,0),null!=a&&(a=cl(a,0)));var p,c,d=[],f=n,g=t.shape[0],h=Tl(t);null!=a&&(c=Tl(a));for(var m,v=function(t){var n=h[t],r=ki((function(){return e(n,f)}));if(null==a)p=r[0],f=r[1];else{var o=ki((function(){var e=c[t],n=Wi(tl(e),e);return{output:Si(Ti(r[0],e),Ti(f[0],n)),newStates:f.map((function(t,a){return Si(Ti(r[1][a],e),Ti(t,n))}))}}));p=o.output,f=o.newStates}s&&d.push(p)},y=0;y<g;++y)v(y);if(s){m=Ol(d,1)}return[p,m,f]}))}rb.className="DepthwiseConv2D",Li(rb);var ib=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r,a;if((0,T.Z)(this,n),r=t.call(this,e),null==e.cell)throw new xg("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new gb({cells:e.cell}):e.cell).stateSize)throw new xg("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new pm({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,R.Z)(n,[{key:"getStates",value:function(){return null==this.states_?hh(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){tm(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,o=[],i=(0,C.Z)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push([e[0],s])}}catch(yB){i.e(yB)}finally{i.f()}return[n].concat(o)}return n}},{key:"computeMask",value:function(e,t){var n=this;return ki((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new wg("Constants support is not implemented in RNN yet.");tm(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new pm({shape:[t,null].concat((0,E.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!W(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new xg("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new pm({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ki((function(){if(!t.stateful)throw new _g("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new xg("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Qu([r,e])})):t.states_=[Qu([r,t.cell.stateSize])];else if(null==e)xi(t.states_),null!=t.keptStates&&(xi(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Qu([r,e])})):t.states_[0]=Qu([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new xg("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):xi(t.states_);for(var a=0;a<t.states_.length;++a){var o=e[a],i=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,i];if(!W(o.shape,s))throw new xg("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(o.shape));t.states_[a]=o}}t.states_=t.states_.map((function(e){return wi(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var o=ab(e,r,a,this.numConstants);e=o.inputs,r=o.initialState,a=o.constants;var i=[],s=[];if(null!=r){t.initialState=r,i=i.concat(r),this.stateSpec=[];var u,l=(0,C.Z)(r);try{for(l.s();!(u=l.n()).done;){var p=u.value;this.stateSpec.push(new pm({shape:p.shape}))}}catch(yB){l.e(yB)}finally{l.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,i=i.concat(a),this.numConstants=a.length),i[0]instanceof cm){var c=[e].concat(i),d=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=d;var g=(0,Km.Z)((0,hg.Z)(n.prototype),"apply",this).call(this,c,t);return this.inputSpec=f,g}return(0,Km.Z)((0,hg.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return ki((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,o=null==t?null:t.initialState;e=rm(e),null==o&&(o=n.stateful?n.states_:n.getInitialState(e));var i=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(o.length!==i)throw new xg("RNN Layer has ".concat(i," state(s) but was passed ")+"".concat(o.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=ob((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,o,n.goBackwards,r,null,n.unroll,n.returnSequences),l=u[0],p=u[1],c=u[2];n.stateful&&n.resetStates(c,a);var d=n.returnSequences?p:l;return n.returnState?[d].concat(c):d}))}},{key:"getInitialState",value:function(e){var t=this;return ki((function(){var n=Qu(e.shape);return n=yh(n=Au(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?Oh(n,[1,e]):n})):t.cell.stateSize>1?[Oh(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){(0,Km.Z)((0,hg.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Xm(t.cell,n);return new e(Object.assign(t,{cell:r}))}}]),n}(hm);ib.className="RNN",Li(ib);var sb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n)}(hm),ub=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Wg(r.units,"units"),r.activation=Oy(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=em(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=em(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=em(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Iy(e.kernelRegularizer),r.recurrentRegularizer=Iy(e.recurrentRegularizer),r.biasRegularizer=Iy(e.biasRegularizer),r.kernelConstraint=Dm(e.kernelConstraint),r.recurrentConstraint=Dm(e.recurrentConstraint),r.biasConstraint=Dm(e.biasConstraint),r.dropout=fh([1,gh([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=fh([1,gh([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,R.Z)(n,[{key:"build",value:function(e){e=am(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){if(2!==e.length)throw new xg("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,o=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=hb({ones:function(){return tl(e)},rate:n.dropout,training:o,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=hb({ones:function(){return tl(r)},rate:n.recurrentDropout,training:o,dropoutFunc:n.dropoutFunc}));var i=n.dropoutMask,s=n.recurrentDropoutMask;a=Ch(null!=i?Ti(e,i):e,n.kernel.read()),null!=n.bias&&(a=Fh(a,n.bias.read())),null!=s&&(r=Ti(r,s));var u=Si(a,Ch(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:xy(this.activation),useBias:this.useBias,kernelInitializer:Qh(this.kernelInitializer),recurrentInitializer:Qh(this.recurrentInitializer),biasInitializer:Qh(this.biasInitializer),kernelRegularizer:Ry(this.kernelRegularizer),recurrentRegularizer:Ry(this.recurrentRegularizer),biasRegularizer:Ry(this.biasRegularizer),activityRegularizer:Ry(this.activityRegularizer),kernelConstraint:Am(this.kernelConstraint),recurrentConstraint:Am(this.recurrentConstraint),biasConstraint:Am(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}]),n}(sb);ub.className="SimpleRNNCell",Li(ub);var lb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),e.cell=new ub(e),t.call(this,e)}return(0,R.Z)(n,[{key:"call",value:function(e,t){var r=this;return ki((function(){null!=r.cell.dropoutMask&&(xi(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(xi(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return(0,Km.Z)((0,hg.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(ib);lb.className="SimpleRNN",Li(lb);var pb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new xg("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,Wg(r.units,"units"),r.activation=Oy(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Oy(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=em(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=em(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=em(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Iy(e.kernelRegularizer),r.recurrentRegularizer=Iy(e.recurrentRegularizer),r.biasRegularizer=Iy(e.biasRegularizer),r.kernelConstraint=Dm(e.kernelConstraint),r.recurrentConstraint=Dm(e.recurrentConstraint),r.biasConstraint=Dm(e.biasConstraint),r.dropout=fh([1,gh([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=fh([1,gh([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,R.Z)(n,[{key:"build",value:function(e){var t=(e=am(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){if(2!==e.length)throw new xg("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=null!=t.training&&t.training,o=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=hb({ones:function(){return tl(e)},rate:n.dropout,training:a,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=hb({ones:function(){return tl(o)},rate:n.recurrentDropout,training:a,count:3,dropoutFunc:n.dropoutFunc}));var i,s,u,l=n.dropoutMask,p=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Ti(e,l[0]));var c=Ch(e,n.kernel.read());n.useBias&&(c=Fh(c,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(o=Ti(o,p[0]));var d=n.recurrentKernel.read(),f=xl(d,[2*n.units,n.units],d.rank-1),g=(0,r.Z)(f,2),h=g[0],m=g[1],v=Ch(o,h),y=xl(c,3,c.rank-1),b=(0,r.Z)(y,3),_=b[0],k=b[1],x=b[2],w=xl(v,2,v.rank-1),O=(0,r.Z)(w,2),S=O[0],C=O[1];i=n.recurrentActivation.apply(Si(_,S)),s=n.recurrentActivation.apply(Si(k,C));var E=Ch(Ti(s,o),m);u=n.activation.apply(Si(x,E));var T=Si(Ti(i,o),Ti(Si(1,Yu(i)),u));return[T,T]}))}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:xy(this.activation),recurrentActivation:xy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Qh(this.kernelInitializer),recurrentInitializer:Qh(this.recurrentInitializer),biasInitializer:Qh(this.biasInitializer),kernelRegularizer:Ry(this.kernelRegularizer),recurrentRegularizer:Ry(this.recurrentRegularizer),biasRegularizer:Ry(this.biasRegularizer),activityRegularizer:Ry(this.activityRegularizer),kernelConstraint:Am(this.kernelConstraint),recurrentConstraint:Am(this.recurrentConstraint),biasConstraint:Am(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}]),n}(sb);pb.className="GRUCell",Li(pb);var cb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new pb(e),t.call(this,e)}return(0,R.Z)(n,[{key:"call",value:function(e,t){var r=this;return ki((function(){null!=r.cell.dropoutMask&&(xi(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(xi(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return(0,Km.Z)((0,hg.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(ib);cb.className="GRU",Li(cb);var db=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Wg(r.units,"units"),r.activation=Oy(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=Oy(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=em(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=em(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=em(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=Iy(e.kernelRegularizer),r.recurrentRegularizer=Iy(e.recurrentRegularizer),r.biasRegularizer=Iy(e.biasRegularizer),r.kernelConstraint=Dm(e.kernelConstraint),r.recurrentConstraint=Dm(e.recurrentConstraint),r.biasConstraint=Dm(e.biasConstraint),r.dropout=fh([1,gh([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=fh([1,gh([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,R.Z)(n,[{key:"build",value:function(e){var t,n,r=(e=am(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,o=this.units;n=new(t=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e,t){var n=a.apply([o]),r=(new Bh).apply([o]),i=a.apply([2*o]);return wh(wh(n,r),i)}}]),n}(Dh),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){var a=null!=t.training&&t.training;if(3!==e.length)throw new xg("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var o=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=hb({ones:function(){return tl(e)},rate:n.dropout,training:a,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=hb({ones:function(){return tl(o)},rate:n.recurrentDropout,training:a,count:4,dropoutFunc:n.dropoutFunc}));var s,u,l,p,c=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Ti(e,c[0]));var f=Ch(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(o=Ti(o,d[0])),f=Si(f,Ch(o,n.recurrentKernel.read())),n.useBias&&(f=Fh(f,n.bias.read()));var g=xl(f,4,f.rank-1),h=(0,r.Z)(g,4),m=h[0],v=h[1],y=h[2],b=h[3];s=n.recurrentActivation.apply(m),u=n.recurrentActivation.apply(v),l=Si(Ti(u,i),Ti(s,n.activation.apply(y))),p=n.recurrentActivation.apply(b);var _=Ti(p,n.activation.apply(l));return[_,_,l]}))}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:xy(this.activation),recurrentActivation:xy(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Qh(this.kernelInitializer),recurrentInitializer:Qh(this.recurrentInitializer),biasInitializer:Qh(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ry(this.kernelRegularizer),recurrentRegularizer:Ry(this.recurrentRegularizer),biasRegularizer:Ry(this.biasRegularizer),activityRegularizer:Ry(this.activityRegularizer),kernelConstraint:Am(this.kernelConstraint),recurrentConstraint:Am(this.recurrentConstraint),biasConstraint:Am(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}]),n}(sb);db.className="LSTMCell",Li(db);var fb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new db(e),t.call(this,e)}return(0,R.Z)(n,[{key:"call",value:function(e,t){var r=this;return ki((function(){null!=r.cell.dropoutMask&&(xi(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(xi(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return(0,Km.Z)((0,hg.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(ib);fb.className="LSTM",Li(fb);var gb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).cells=e.cells,r}return(0,R.Z)(n,[{key:"stateSize",get:function(){var e,t=[],n=(0,C.Z)(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,E.Z)(r.stateSize)):t.push(r.stateSize)}}catch(yB){n.e(yB)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return ki((function(){var r,a=e.slice(1),o=[],i=(0,C.Z)(n.cells.slice().reverse());try{for(i.s();!(r=i.n()).done;){var s=r.value;Array.isArray(s.stateSize)?o.push(a.splice(0,s.stateSize.length)):o.push(a.splice(0,1))}}catch(yB){i.e(yB)}finally{i.f()}o.reverse();for(var u,l=[],p=0;p<n.cells.length;++p){var c=n.cells[p];a=o[p],u=0===p?[e[0]].concat(a):[u[0]].concat(a),u=c.call(u,t),l.push(u.slice(1))}a=[];var d,f=(0,C.Z)(l.slice().reverse());try{for(f.s();!(d=f.n()).done;){var g,h=d.value;(g=a).push.apply(g,(0,E.Z)(h))}}catch(yB){f.e(yB)}finally{f.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;tm(e)&&(e=e[0]),this.cells.forEach((function(n,r){ih("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign(Object.assign({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=(0,C.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,E.Z)(r.trainableWeights))}}catch(yB){n.e(yB)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,C.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,E.Z)(r.nonTrainableWeights))}}catch(yB){n.e(yB)}finally{n.f()}if(!this.trainable){var a,o=[],i=(0,C.Z)(this.cells);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push.apply(o,(0,E.Z)(s.trainableWeights))}}catch(yB){i.e(yB)}finally{i.f()}return o.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=(0,C.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,E.Z)(r.weights))}}catch(yB){n.e(yB)}finally{n.f()}return um(t)}},{key:"setWeights",value:function(e){var t,n=[],r=(0,C.Z)(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,o=a.weights.length,i=e.splice(o),s=0;s<a.weights.length;++s)n.push([a.weights[s],i[s]])}catch(yB){r.e(yB)}finally{r.f()}lm(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=(0,C.Z)(t.cells);try{for(o.s();!(n=o.n()).done;){var i=n.value;a.push(Xm(i,r))}}catch(yB){o.e(yB)}finally{o.f()}return new e({cells:a})}}]),n}(sb);function hb(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,o=e.count,i=void 0===o?1:o,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):Ih(t(),n)},l=function(){return Mh(u,t,a)};return!i||i<=1?wi(l().clone()):Array(i).fill(void 0).map(l).map((function(e){return wi(e.clone())}))}gb.className="StackedRNNCells",Li(gb);var mb=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},vb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),e.unroll)throw new wg("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new wg("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new pm({ndim:5})],r}return(0,R.Z)(n,[{key:"call",value:function(e,t){var r=this;return ki((function(){if(null!=r.cell.dropoutMask&&(xi(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(xi(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new xg("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return(0,Km.Z)((0,hg.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,E.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,E.Z)(Array(2).fill([e[0]].concat((0,E.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return ki((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),o=Qu([a[0]].concat((0,E.Z)(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(o):[o]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ki((function(){if(!t.stateful)throw new _g("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),o=[a[0]].concat((0,E.Z)(a.slice(2)));if(null==r[0])throw new xg("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Qu(o)})):t.states_=[Qu(o)];else if(null==e)xi(t.states_),null!=t.keptStates&&(xi(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Qu(o)})):t.states_[0]=Qu(o);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new xg("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):xi(t.states_);for(var i=0;i<t.states_.length;++i){var s=e[i],u=o;if(!W(s.shape,u))throw new xg("State ".concat(i," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[i]=s}}t.states_=t.states_.map((function(e){return wi(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,o=t.padding,i=t.strides,s=t.dilationRate,u="channelsFirst"===n,l=e[u?3:2],p=e[u?4:3],c=jy(l,a[0],o,i[0],s[0]),d=jy(p,a[1],o,i[1],s[1]);return[].concat((0,E.Z)(e.slice(0,2)),(0,E.Z)(u?[r,c,d]:[c,d,r]))}}]),n}(ib);vb.className="ConvRNN2D";var yb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;(0,T.Z)(this,n);var a=e.filters,o=e.kernelSize,i=e.strides,s=e.padding,u=e.dataFormat,l=e.dilationRate;return(r=t.call(this,Object.assign(Object.assign({},e),{units:a}))).filters=a,Wg(r.filters,"filters"),r.kernelSize=Py(o,2,"kernelSize"),r.kernelSize.forEach((function(e){return Wg(e,"kernelSize")})),r.strides=Py(i||1,2,"strides"),r.strides.forEach((function(e){return Wg(e,"strides")})),r.padding=s||"valid",nh(r.padding),r.dataFormat=u||"channelsLast",th(r.dataFormat),r.dilationRate=Py(l||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return Wg(e,"dilationRate")})),r}return(0,R.Z)(n,[{key:"build",value:function(e){var t;e=am(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new xg("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var i;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;i=new(t=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"apply",value:function(e,t){return xh([s.apply([u]),el([u]),s.apply([2*u])])}}]),n}(Dh),t.className="CustomInit",t)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,i,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){if(3!==e.length)throw new xg("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=t.training||!1,o=e[0],i=e[1],s=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=hb({ones:function(){return tl(o)},rate:n.dropout,training:a,count:4,dropoutFunc:n.dropoutFunc}));var u=n.dropoutMask,l=function(e,t,n){return t&&t[n]?Ti(t[n],e):e},p=l(o,u,0),c=l(o,u,1),d=l(o,u,2),f=l(o,u,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=hb({ones:function(){return tl(i)},rate:n.recurrentDropout,training:a,count:4,dropoutFunc:n.dropoutFunc}));var g=n.recurrentDropoutMask,h=l(i,g,0),m=l(i,g,1),v=l(i,g,2),y=l(i,g,3),b=xl(n.kernel.read(),4,3),_=(0,r.Z)(b,4),k=_[0],x=_[1],w=_[2],O=_[3],S=n.useBias?xl(n.bias.read(),4):[null,null,null,null],C=(0,r.Z)(S,4),E=C[0],T=C[1],R=C[2],F=C[3];p=n.inputConv(p,k,E,n.padding),c=n.inputConv(c,x,T,n.padding),d=n.inputConv(d,w,R,n.padding),f=n.inputConv(f,O,F,n.padding);var I=xl(n.recurrentKernel.read(),4,3),M=(0,r.Z)(I,4),A=M[0],N=M[1],D=M[2],L=M[3];h=n.recurrentConv(h,A),m=n.recurrentConv(m,N),v=n.recurrentConv(v,D),y=n.recurrentConv(y,L);var B=n.recurrentActivation.apply(Si(p,h)),P=n.recurrentActivation.apply(Si(c,m)),j=Si(Ti(P,s),Ti(B,n.activation.apply(Si(d,v)))),z=Ti(n.recurrentActivation.apply(Si(f,y)),n.activation.apply(j));return[z,z,j]}))}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t=(e.units,mb(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=pu(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Fh(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return pu(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(db);yb.className="ConvLSTM2DCell",Li(yb);var bb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){(0,T.Z)(this,n);var r=new yb(e);return t.call(this,Object.assign(Object.assign({},e),{cell:r}))}return(0,R.Z)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(vb);bb.className="ConvLSTM2D",Li(bb);var _b=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return(0,R.Z)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t);var r=rm(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,o=n.getNoiseShape(r);return Mh((function(){return Ih(r,n.rate,o,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return(0,Km.Z)((0,hg.Z)(n.prototype),"dispose",this).call(this)}}]),n}(hm);_b.className="Dropout",Li(_b);var kb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return(0,R.Z)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(_b);kb.className="SpatialDropout1D",Li(kb);var xb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,Wg(r.units,"units"),r.activation=Oy(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=em(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=em(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=Dm(e.kernelConstraint),r.biasConstraint=Dm(e.biasConstraint),r.kernelRegularizer=Iy(e.kernelRegularizer),r.biasRegularizer=Iy(e.biasRegularizer),r.activityRegularizer=Iy(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return(0,R.Z)(n,[{key:"build",value:function(e){var t=(e=am(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:h({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=am(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t);var r,a=rm(e),o=Zg(n.activation.getClassName());return null!=o?r=Ch(a,n.kernel.read(),o,n.bias?n.bias.read():null):(r=Ch(a,n.kernel.read()),null!=n.bias&&(r=Fh(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:xy(this.activation),useBias:this.useBias,kernelInitializer:Qh(this.kernelInitializer),biasInitializer:Qh(this.biasInitializer),kernelRegularizer:Ry(this.kernelRegularizer),biasRegularizer:Ry(this.biasRegularizer),activityRegularizer:Ry(this.activityRegularizer),kernelConstraint:Am(this.kernelConstraint),biasConstraint:Am(this.biasConstraint)},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);xb.className="Dense",Li(xb);var wb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){e=am(e);var t,n=(0,C.Z)(e.slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new xg('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(yB){n.e(yB)}finally{n.f()}return[e[0],dh(e,1)]}},{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t);var r=rm(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],o=2;o<r.rank;++o)a.push(o);a.push(1),r=Ml(r,a)}return function(e){if(e.rank<=1)throw new xg("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],dh(e.shape,1)];return Ys(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);wb.className="Flatten",Li(wb);var Ob=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=Oy(e.activation),r}return(0,R.Z)(n,[{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t);var r=rm(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:xy(this.activation)},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Ob.className="Activation",Li(Ob);var Sb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return ki((function(){return e=rm(e),t=e,r=n.n,ki((function(){if(2!==t.shape.length)throw new xg("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return Oh(yh(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Sb.className="RepeatVector",Li(Sb);var Cb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;(0,T.Z)(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,R.Z)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,o=null,i=0;i<r.length;++i){var s=r[i];if(this.isUnknown(s)){if(null!==o)throw new xg("Can only specifiy one unknown dimension.");o=i}else a*=s}var u=dh(e);if(null!==o){if(0===a||u%a!==0)throw new xg(n);r[o]=u/a}else if(u!==a)throw new xg(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t);var r=rm(e),a=r.shape,o=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return Ys(r,o)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Cb.className="Reshape",Li(Cb);var Eb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=hh(1,e.dims.length+1);if(!W(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new pm({ndim:r.dims.length+1})],r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=am(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return Ml(rm(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Eb.className="Permute",Li(Eb);var Tb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=rm(e);return As($u(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t);var r=rm(e),a=As($u(r,n.maskValue),-1,!0);return Ti(r,mi(a,r.dtype))}))}}]),n}(hm);Tb.className="Masking",Li(Tb);var Rb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(Fg(e.inputLength))}return r.inputDim=e.inputDim,Wg(r.inputDim,"inputDim"),r.outputDim=e.outputDim,Wg(r.outputDim,"outputDim"),r.embeddingsInitializer=em(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=Iy(e.embeddingsRegularizer),r.activityRegularizer=Iy(e.activityRegularizer),r.embeddingsConstraint=Dm(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return(0,R.Z)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return ki((function(){return n.maskZero?(e=rm(e),$u(e,Ii(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=am(e),null==this.inputLength)return[].concat((0,E.Z)(e),[this.outputDim]);var t=Fg(this.inputLength);if(t.length!==e.length-1)throw new xg('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],o=e[r+1];if(null!=a&&null!=o&&a!==o)throw new xg('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=o),n++}return[e[0]].concat((0,E.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t);var r=rm(e);"int32"!==r.dtype&&(r=vh(r,"int32"));var a=Eh(n.embeddings.read(),Ys(r,[r.size]));return Ys(a,am(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Qh(this.embeddingsInitializer),embeddingsRegularizer:Ry(this.embeddingsRegularizer),activityRegularizer:Ry(this.activityRegularizer),embeddingsConstraint:Am(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Rb.className="Embedding",Li(Rb);var Fb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return(0,R.Z)(n,[{key:"mergeFunction",value:function(e){throw new wg}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],o=t[r];if(null==a||null==o||a<0||o<0)n.push(null);else if(1===a)n.push(o);else if(1===o)n.push(a);else{if(a!==o)throw new xg("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[am(e)]),e.length<2)throw new xg("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=(0,C.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(yB){r.e(yB)}finally{r.f()}if((n=Pg(n)).length>1)throw new xg("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var o=null==e[0]?null:e[0].slice(1),i=1;i<e.length;++i){var s=null==e[i]?null:e[i].slice(1);o=this.computeElementwiseOpOutputShape(o,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===Pg(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,o=gh(r),i=(0,C.Z)(e);try{for(i.s();!(a=i.n()).done;){for(var s=a.value,u=s.rank,l=0;l<o-u;++l)s=yh(s,1);t.push(s)}}catch(yB){i.e(yB)}finally{i.f()}return n.mergeFunction(t)}var p,c=!1,d=(0,C.Z)(e);try{for(d.s();!(p=d.n()).done;){var f=p.value,g=f.rank;if(null==g){var h=f.shape,m=h[0],v=h.slice(1).concat([m]),y=Ys(f,[m].concat(dh(h.slice(1))));y=Ml(y,[1,0]),y=Ys(y,v),t.push(y),c=!0}else if(g>1){var b=hh(1,g).concat([0]);t.push(Ml(f,b)),c=!0}else t.push(f)}}catch(yB){d.e(yB)}finally{d.f()}var _=n.mergeFunction(t),k=_.rank;if(c)if(null==k){var x=_.shape,w=x[x.length-1],O=[w].concat(x.slice(0,x.length-1));_=Ys(Ml(Ys(_,[-1,w]),[1,0]),O)}else if(k>1){var S=[k-1].concat(hh(0,k-1));_=Ml(_,S)}return _}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,o=[],i=(0,C.Z)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;null!=s&&null!==s[0]&&o.push(s[0])}}catch(yB){i.e(yB)}finally{i.f()}return t=1===(o=Pg(o)).length?o.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return ki((function(){if(null==t)return null;if(!Array.isArray(t))throw new xg("`mask` should be an Array");if(!Array.isArray(e))throw new xg("`inputs` should be an Array");if(t.length!==e.length)throw new xg("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:xu(e,0)})))[0],r=1;r<t.length-1;++r)n=Du(n,t[r]);return n}))}}]),n}(hm),Ib=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"mergeFunction",value:function(e){return ki((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Si(t,e[n]);return t}))}}]),n}(Fb);Ib.className="Add",Li(Ib);var Mb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"mergeFunction",value:function(e){return ki((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Ti(t,e[n]);return t}))}}]),n}(Fb);Mb.className="Multiply",Li(Mb);var Ab=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"mergeFunction",value:function(e){return ki((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Si(t,e[n]);return Ti(1/e.length,t)}))}}]),n}(Fb);Ab.className="Average",Li(Ab);var Nb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"mergeFunction",value:function(e){return ki((function(){for(var t=e[0],n=1;n<e.length;++n)t=Xi(t,e[n]);return t}))}}]),n}(Fb);Nb.className="Maximum",Li(Nb);var Db=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"mergeFunction",value:function(e){return ki((function(){for(var t=e[0],n=1;n<e.length;++n)t=Gu(t,e[n]);return t}))}}]),n}(Fb);Db.className="Minimum",Li(Db);var Lb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,R.Z)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new xg("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=(0,C.Z)(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(yB){r.e(yB)}finally{r.f()}if(!n){for(var a=[],o=0;o<e.length;++o){var i=e[o].slice();i.splice(this.axis,1);var s,u=!1,l=(0,C.Z)(a);try{for(l.s();!(s=l.n()).done;){if(W(s.value,i)){u=!0;break}}}catch(yB){l.e(yB)}finally{l.f()}u||a.push(i)}if(a.length>1)throw new xg("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return ki((function(){return xh(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new xg("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,o=(0,C.Z)(n.slice(1));try{for(o.s();!(t=o.n()).done;){var i=t.value;if(null==r[a]||null==i[a]){r[a]=null;break}r[a]+=i[a]}}catch(yB){o.e(yB)}finally{o.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new xg("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new xg("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new xg("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return ki((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],o=0;o<e.length;++o)null==t[o]?a.push(mi(tl(e[o]),"bool")):t[o].rank<e[o].rank?a.push(xu(t[o],-1)):a.push(t[o]);var i=ou(a,n.axis);return Ms(i,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Fb);function Bb(e,t){for(;e<0;)e+=t;return e}Lb.className="Concatenate",Li(Lb);var Pb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,R.Z)(n,[{key:"build",value:function(e){P(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new wg("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new xg("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new xg("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return Bb(t,e[n].shape.length)})):[Bb(this.axes,n.shape.length),Bb(this.axes,r.shape.length)],this.normalize&&(n=qm(n,t[0]),r=qm(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new wg("batchDot is not implemented for tensors of 4D or higher rank yet");if(P(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),P(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new wg("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var o=n;return ki((function(){var n,i;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=Ys(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var l=[],p=0;p<n;++p)l.push(1);e=Ys(e,e.shape.concat(l))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=o[0]===o[1]?Au(Ti(e,t),o[0]):Au(Ti(Ml(e,[1,0]),t),o[1]);else{var c=o[0]!==e.shape.length-1,d=o[1]===t.shape.length-1;i=Lu(e,t,c,d)}if(n>0){for(var f,g=[],h=f=r>a?r+a-3:r-1;h<f+n;++h)g.push(h);i=wl(i,g)}return 1===i.shape.length&&(i=xu(i,1)),i}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[Bb(this.axes,e.length),Bb(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){P(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new wg("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Fb);Pb.className="Dot",Li(Pb);var jb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t);var r=rm(e);return Mh((function(){return Si(Sh(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(hm);jb.className="GaussianNoise",Li(jb);var zb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t);var r=rm(e);if(n.rate>0&&n.rate<1){return Mh((function(){var e=Math.sqrt(n.rate/(1-n.rate));return Ti(r,Sh(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(hm);zb.className="GaussianDropout",Li(zb);var Gb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return(0,R.Z)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||rm(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return ki((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return Mh((function(){var t=rm(e),a=-1.7580993408473766,o=Tu(ul(r),n.rate);o=vh(o,"float32");var i=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-i*a*n.rate,u=Si(Ti(t,o),Ti(Si(o,-1),a));return Si(Ti(u,i),s)}),(function(){return rm(e)}),t.training||!1)}return e}))}}]),n}(hm);function Wb(e,t,n,r,a){var o,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=eu(e,t,n,r,a,i);else if(3===e.rank)o=tu(e,t,n,r,a,i);else{if(4!==e.rank)throw new wg("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=nu(e,t,n,r,a,i)}return o}function Ub(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return W(r.slice().sort(),hh(0,e.rank-1))?function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return ki((function(){var o=qu(e,r),i=o.mean,s=o.variance;return[Wb(e,i,s,n,t,a),i,s]}))}(e,t,n,r,a):function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return ki((function(){var o,i=qu(e,r),s=i.mean,u=i.variance,l=[],p=(0,C.Z)(hh(0,e.rank));try{for(p.s();!(o=p.n()).done;){var c=o.value;-1!==r.indexOf(c)?l.push(1):l.push(e.shape[c])}}catch(yB){p.e(yB)}finally{p.f()}var d=Ys(s,l),f=Ys(u,l),g=null==t?null:Ys(t,l),h=null==n?null:Ys(n,l);return[Wb(e,d,f,h,g,a),s,u]}))}(e,t,n,r,a)}Gb.className="AlphaDropout",Li(Gb);var Zb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=em(e.betaInitializer||"zeros"),r.gammaInitializer=em(e.gammaInitializer||"ones"),r.movingMeanInitializer=em(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=em(e.movingVarianceInitializer||"ones"),r.betaConstraint=Dm(e.betaConstraint),r.gammaConstraint=Dm(e.gammaConstraint),r.betaRegularizer=Iy(e.betaRegularizer),r.gammaRegularizer=Iy(e.gammaRegularizer),r}return(0,R.Z)(n,[{key:"build",value:function(e){e=am(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new xg("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new pm({ndim:e.length,axes:h({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return ki((function(){var a=null!=t.training&&t.training,o=rm(e),i=o.shape,s=i.length,u=hh(0,s),l=n.axis>=0?n.axis:n.axis+s;u.splice(l,1);var p=Cg(1,s);p[l]=i[l];var c=u.slice();c.sort();var d=!W(c,hh(0,s).slice(0,s-1));if(!a)return function(){if(d){var e=Ys(n.movingMean.read(),p),t=Ys(n.movingVariance.read(),p),r=n.center?Ys(n.beta.read(),p):null,a=n.scale?Ys(n.gamma.read(),p):null;return Wb(o,e,t,r,a,n.epsilon)}return Wb(o,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var f=Ub(o,n.gamma.read(),n.beta.read(),u,n.epsilon),g=(0,r.Z)(f,3),h=g[0],m=g[1],v=g[2],y=function(e,t,n){ki((function(){var r=1-n,a=e.read(),o=Ti(Wi(a,t),r);e.write(Wi(a,o))}))};return y(n.movingMean,m,n.momentum),y(n.movingVariance,v,n.momentum),h}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Qh(this.betaInitializer),gammaInitializer:Qh(this.gammaInitializer),movingMeanInitializer:Qh(this.movingMeanInitializer),movingVarianceInitializer:Qh(this.movingVarianceInitializer),betaRegularizer:Ry(this.betaRegularizer),gammaRegularizer:Ry(this.gammaRegularizer),betaConstraint:Am(this.betaConstraint),gammaConstraint:Am(this.gammaConstraint)},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Zb.className="BatchNormalization",Li(Zb);var Hb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,o=(0,C.Z)(r.axis);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(!Number.isInteger(i))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(yB){o.e(yB)}finally{o.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=em(e.betaInitializer||"zeros"),r.gammaInitializer=em(e.gammaInitializer||"ones"),r.betaRegularizer=Iy(e.betaRegularizer),r.gammaRegularizer=Iy(e.gammaRegularizer),r.supportsMasking=!0,r}return(0,R.Z)(n,[{key:"build",value:function(e){var t=(e=am(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=(0,C.Z)(this.axis);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o<0||o>=t)throw new Error("Invalid axis: ".concat(o))}}catch(yB){a.e(yB)}finally{a.f()}if(this.axis.length!==Pg(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var i=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=rm(e),a=r.shape,o=a.length;return ki((function(){var e,t=qu(r,n.axis,!0),i=t.mean,s=t.variance,u=Cg(1,o),l=(0,C.Z)(n.axis);try{for(l.s();!(e=l.n()).done;){var p=e.value;u[p]=a[p]}}catch(yB){l.e(yB)}finally{l.f()}for(var c=function(e){return null!=e&&e.shape.length!==o?Ys(e,u):e},d=n.scale?c(n.gamma.read()):null,f=n.center?c(n.beta.read()):null,g=[],h=[],m=0;m<o;++m)-1!==n.axis.indexOf(m)?(g.push(a[m]),h.push(1)):(g.push(1),h.push(a[m]));return i=wu(i,g),s=wu(s,g),null!=d&&(d=wu(d,h)),null!=f&&(f=wu(f,h)),Wb(r,i,s,f,d,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Qh(this.betaInitializer),gammaInitializer:Qh(this.gammaInitializer),betaRegularizer:Ry(this.betaRegularizer),gammaRegularizer:Ry(this.gammaRegularizer)},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);Hb.className="LayerNormalization",Li(Hb);var Vb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new xg("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,o;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new xg("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new xg("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));o=e.padding[1]}r.padding=[a,o]}return r.inputSpec=[new pm({ndim:4})],r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=am(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return ki((function(){return t=rm(e),r=n.padding,a=n.dataFormat,ki((function(){if(4!==t.rank)throw new xg("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new xg("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new xg("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],nl(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);function Kb(e,t,n,r,a,o){return ki((function(){var i;th(a),rh(o),nh(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=Gy(e,a);var s="same"===r?"same":"valid";return i="max"===o?Bu(e,t,n,s):$s(e,t,n,s),"channelsFirst"===a&&(i=Ml(i,[0,3,1,2])),i}))}function Xb(e,t,n,r,a,o){return ki((function(){var i;th(a),rh(o),nh(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=Wy(e,a);var s="same"===r?"same":"valid";return i="max"===o?Pu(e,t,n,s):Js(e,t,n,s),"channelsFirst"===a&&(i=Ml(i,[0,4,1,2,3])),i}))}Vb.className="ZeroPadding2D",Li(Vb);var qb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new xg("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(Wg(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new xg("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return Wg(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,nh(r.padding),r.inputSpec=[new pm({ndim:3})],r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){var t=jy((e=am(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return ki((function(){n.invokeCallHook(e,t),e=yh(rm(e),2);var r=n.poolingFunction(rm(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return wl(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm),Yb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return th(a),nh(r),Kb(e,t,n,r,a,"max")}}]),n}(qb);Yb.className="MaxPooling1D",Li(Yb);var $b=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return th(a),nh(r),Kb(e,t,n,r,a,"avg")}}]),n}(qb);$b.className="AveragePooling1D",Li($b);var Jb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new xg("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return Wg(r.poolSize,"poolSize"),Wg(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,th(r.dataFormat),nh(r.padding),r.inputSpec=[new pm({ndim:4})],r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){e=am(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=jy(t,this.poolSize[0],this.padding,this.strides[0]),n=jy(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return ki((function(){return n.invokeCallHook(e,t),n.poolingFunction(rm(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm),Qb=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return th(a),nh(r),Kb(e,t,n,r,a,"max")}}]),n}(Jb);Qb.className="MaxPooling2D",Li(Qb);var e_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return th(a),nh(r),Kb(e,t,n,r,a,"avg")}}]),n}(Jb);e_.className="AveragePooling2D",Li(e_);var t_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new xg("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return Wg(r.poolSize,"poolSize"),Wg(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,th(r.dataFormat),nh(r.padding),r.inputSpec=[new pm({ndim:5})],r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){e=am(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=jy(t,this.poolSize[0],this.padding,this.strides[0]),n=jy(n,this.poolSize[1],this.padding,this.strides[1]),r=jy(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return ki((function(){return n.invokeCallHook(e,t),n.poolingFunction(rm(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm),n_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return th(a),nh(r),Xb(e,t,n,r,a,"max")}}]),n}(t_);n_.className="MaxPooling3D",Li(n_);var r_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e)}return(0,R.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return th(a),nh(r),Xb(e,t,n,r,a,"avg")}}]),n}(t_);r_.className="AveragePooling3D",Li(r_);var a_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).inputSpec=[new pm({ndim:3})],r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new wg}}]),n}(hm),o_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e||{})}return(0,R.Z)(n,[{key:"call",value:function(e,t){return ki((function(){var t=rm(e);return ju(t,1)}))}}]),n}(a_);o_.className="GlobalAveragePooling1D",Li(o_);var i_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){return(0,T.Z)(this,n),t.call(this,e||{})}return(0,R.Z)(n,[{key:"call",value:function(e,t){return ki((function(){var t=rm(e);return Mu(t,1)}))}}]),n}(a_);i_.className="GlobalMaxPooling1D",Li(i_);var s_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,th(r.dataFormat),r.inputSpec=[new pm({ndim:4})],r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new wg}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm),u_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"call",value:function(e,t){var n=this;return ki((function(){var t=rm(e);return"channelsLast"===n.dataFormat?ju(t,[1,2]):ju(t,[2,3])}))}}]),n}(s_);u_.className="GlobalAveragePooling2D",Li(u_);var l_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.apply(this,arguments)}return(0,R.Z)(n,[{key:"call",value:function(e,t){var n=this;return ki((function(){var t=rm(e);return"channelsLast"===n.dataFormat?Mu(t,[1,2]):Mu(t,[2,3])}))}}]),n}(s_);l_.className="GlobalMaxPooling2D",Li(l_);var p_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).layer=e.layer,r}return(0,R.Z)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){(0,Km.Z)((0,hg.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Xm(t.layer,n);delete t.layer;var a={layer:r};return Object.assign(a,t),new e(a)}}]),n}(hm),c_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return(0,R.Z)(n,[{key:"build",value:function(e){if((e=am(e)).length<3)throw new xg("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),(0,Km.Z)((0,hg.Z)(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=am(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return ki((function(){return ob((function(e,r){return[rm(n.layer.call(e,t)),[]]}),e=rm(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(p_);c_.className="TimeDistributed",Li(c_);var d_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;(0,T.Z)(this,n),r=t.call(this,e);var a=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=a,r.forwardLayer=Xm(o),a.goBackwards=!0!==a.goBackwards;var i,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=Xm(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,i=r.mergeMode,zg(Qg,"BidirectionalMergeMode",i),e.weights)throw new wg("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return(0,R.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):Rg(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var o=ab(e,r,a,this.numConstants);if(e=o.inputs,r=o.initialState,a=o.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return(0,Km.Z)((0,hg.Z)(n.prototype),"apply",this).call(this,e,t);var i=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new xg("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,i.push.apply(i,(0,E.Z)(r));var l=r.map((function(e){return new pm({shape:e.shape})}));this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,(0,E.Z)(l))}if(null!=a)throw new wg("Support for constants in Bidirectional layers is not implemented yet.");for(var p=i[0]instanceof cm,c=0,d=i;c<d.length;c++){if(d[c]instanceof cm!==p)throw new xg("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(p){var f=[e].concat(i),g=this.inputSpec.concat(s),h=this.inputSpec;this.inputSpec=g;var m=(0,Km.Z)((0,hg.Z)(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=h,m}return(0,Km.Z)((0,hg.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return ki((function(){var r,a,o,i,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=cl(a,1)),"concat"===n.mergeMode?i=xh([r,a]):"sum"===n.mergeMode?i=Si(r,a):"ave"===n.mergeMode?i=Ti(.5,Si(r,a)):"mul"===n.mergeMode?i=Ti(r,a):null==n.mergeMode&&(i=[r,a]),n.returnState?null==n.mergeMode?i.concat(o):[i].concat(o):i}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;ih(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),ih(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){(0,Km.Z)((0,hg.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=Xm(t.layer);if(delete t.layer,null!=t.numConstants)throw new wg("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(p_);d_.className="Bidirectional",Li(d_);var f_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).scale=e.scale,e.offset?r.offset=e.offset:r.offset=0,r}return(0,R.Z)(n,[{key:"getConfig",value:function(){var e={scale:this.scale,offset:this.offset},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return ki((function(){return"float32"!==(e=rm(e)).dtype&&(e=vh(e,"float32")),Si(Ti(e,n.scale),n.offset)}))}}]),n}(hm);f_.className="Rescaling",Li(f_);var g_=Bp.resizeBilinear,h_=Bp.cropAndResize,m_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,r}return(0,R.Z)(n,[{key:"centerCrop",value:function(e,t,n,r,a,o,i,s){return ki((function(){var u,l=!1,p=[t/o,n/i,(r+t)/o,(a+n)/i],c=[];3===e.rank?(l=!0,u=Ol([e])):u=e;for(var d=0;d<u.shape[0];d++)c.push(p);var f=oo(c,[c.length,4]),g=ll(0,c.length,1,"int32"),h=h_(u,f,g,[r,a],"nearest");return vh(l?rm(Tl(h)):h,s)}))}},{key:"upsize",value:function(e,t,n,r){return ki((function(){return vh(g_(e,[t,n]),r)}))}},{key:"call",value:function(e,t){var n=this;return ki((function(){var t=rm(e),r=t.dtype,a=t.shape,o=a[a.length-3],i=a[a.length-2],s=0;o!==n.height&&(s=Math.floor((o-n.height)/2));var u=0;return i!==n.width&&0===(u=Math.floor((i-n.width)/2))&&(u=1),s>=0&&u>=0?n.centerCrop(t,s,u,n.height,n.width,o,i,r):n.upsize(e,n.height,n.width,r)}))}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=am(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}]),n}(hm);m_.className="CenterCrop",Li(m_);var v_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).numTokens=e.numTokens,e.outputMode?r.outputMode=e.outputMode:r.outputMode="multiHot",r}return(0,R.Z)(n,[{key:"getConfig",value:function(){var e={numTokens:this.numTokens,outputMode:this.outputMode},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){return null==(e=am(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}},{key:"call",value:function(e,t){var n=this;return ki((function(){var r;if("int32"!==(e=rm(e)).dtype&&(e=vh(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==n.outputMode)throw new xg("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));r=rm(t.countWeights)}var a=Mu(e),o=zu(e),i=Eu(n.numTokens,a).bufferSync().get(0),s=Tu(o,0).bufferSync().get(0);if(!i||!s)throw new xg("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(n.numTokens));return function(e,t,n,r){var a=rm(e);if("int32"!==a.dtype&&(a=vh(a,"int32")),"int"===t)return a;var o=a.shape;if(0===a.rank&&(a=xu(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=xu(a,-1)),a.rank>2)throw new xg("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(o)+" which would result in output rank ".concat(a.rank,"."));var i,s=["multiHot","oneHot"].includes(t),u=a;if(i=vu(u,"undefined"!==typeof r&&"count"===t?r:[],n,s),"tfIdf"!==t)return i;if(r)return Ti(i,r);throw new xg("When outputMode is 'tfIdf', weights must be provided.")}(e,n.outputMode,n.numTokens,r)}))}}]),n}(hm);v_.className="CategoryEncoding",Li(v_);var y_=new Set(["bilinear","nearest"]),b_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;if((0,T.Z)(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,e.interpolation){if(!y_.has(e.interpolation))throw new xg("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));r.interpolation=e.interpolation}else r.interpolation="bilinear";return r.cropToAspectRatio=Boolean(e.cropToAspectRatio),r}return(0,R.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=am(e))[2];return[this.height,this.width,t]}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return ki((function(){var t=[n.height,n.width];if("bilinear"===n.interpolation)return Bp.resizeBilinear(e,t,!n.cropToAspectRatio);if("nearest"===n.interpolation)return Bp.resizeNearestNeighbor(e,t,!n.cropToAspectRatio);throw new Error("Interpolation is ".concat(n.interpolation," but only ").concat((0,E.Z)(y_)," are supported"))}))}}]),n}(hm);b_.className="Resizing",Li(b_);var __=function(){function e(t){(0,T.Z)(this,e),this.seed=t}return(0,R.Z)(e,[{key:"next",value:function(){if(void 0!==this.seed)return this.seed++}}]),e}();__.className="RandomSeed";var k_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).randomGenerator=new __(e.seed),r}return(0,R.Z)(n,[{key:"getConfig",value:function(){var e={seed:this.randomGenerator.seed},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(hm);k_.className="BaseRandomLayer";var x_=new Set(["bilinear","nearest"]),w_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;(0,T.Z)(this,n),r=t.call(this,e);var a=e.factor,o=e.interpolation,i=void 0===o?"bilinear":o;if(r.factor=a,Array.isArray(r.factor)&&2===r.factor.length)r.widthLower=r.factor[0],r.widthUpper=r.factor[1];else{if(Array.isArray(r.factor)||!(r.factor>0))throw new xg("Invalid factor: ".concat(r.factor,". Must be positive number or tuple of 2 numbers"));r.widthLower=-r.factor,r.widthUpper=r.factor}if(r.widthLower<-1||r.widthUpper<-1)throw new xg("factor must have values larger than -1. Got: ".concat(r.factor));if(r.widthUpper<r.widthLower)throw new xg("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(r.widthUpper,".\n        Got lower bound: ").concat(r.widthLower,"\n      "));if(i){if(!x_.has(i))throw new xg("Invalid interpolation parameter: ".concat(i," is not implemented"));r.interpolation=i}return r}return(0,R.Z)(n,[{key:"getConfig",value:function(){var e={factor:this.factor,interpolation:this.interpolation},t=(0,Km.Z)((0,hg.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=am(e))[2];return[this.imgHeight,-1,t]}},{key:"call",value:function(e,t){var n=this;return ki((function(){var t=rm(e);n.imgHeight=t.shape[t.shape.length-3];var r=t.shape[t.shape.length-2];n.widthFactor=ul([1],1+n.widthLower,1+n.widthUpper,"float32",n.randomGenerator.next());var a=n.widthFactor.dataSync()[0]*r;a=Math.round(a);var o=[n.imgHeight,a];switch(n.interpolation){case"bilinear":return Bp.resizeBilinear(e,o);case"nearest":return Bp.resizeNearestNeighbor(e,o);default:throw new Error("Interpolation is ".concat(n.interpolation,"\n          but only ").concat((0,E.Z)(x_)," are supported"))}}))}}]),n}(k_);w_.className="RandomWidth",Li(w_);var O_,S_;ye().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(O_||(O_={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(S_||(S_={}));Error;new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function C_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(F_(e)){var o=Array.isArray(e)?[]:{};for(var i in r.add(e),e){var s=C_(e[i],t,n,r);o[i]=s}return r.delete(e),e.__proto__&&(o.__proto__=e.__proto__),o}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function E_(e){return T_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:R_)}function T_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(F_(r)){var o=Array.isArray(r)?[]:{};n.add(r);var i=function(r){var a=T_(e.map((function(e){return e[r]})),t,n);o[r]=a};for(var s in r)i(s);return n.delete(r),o}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function R_(e){return null===e?null:F_(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function F_(e){var t=!1;ye().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof __webpack_require__(977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Oa)&&!(e instanceof Promise)&&!t)}function I_(e){return function(e,t){return C_(e,t)}(e,M_)}function M_(e){return e instanceof Oa?{value:e.clone(),recurse:!1}:F_(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var A_=function(){function e(t){if((0,T.Z)(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return(0,R.Z)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=(0,C.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(yB){n.e(yB)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),N_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){return(0,T.Z)(this,n),t.call(this,n.INITIAL_CAPACITY)}return(0,R.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){(0,Km.Z)((0,hg.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),(0,Km.Z)((0,hg.Z)(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){(0,Km.Z)((0,hg.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),(0,Km.Z)((0,hg.Z)(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(A_);function D_(e){return new z_(e)}function L_(e,t){return new $_(e,t)}N_.INITIAL_CAPACITY=32;var B_,P_=function(){function e(){(0,T.Z)(this,e)}return(0,R.Z)(e,[{key:"toArray",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new K_(this,e)}},{key:"filter",value:function(e){return new H_(this,e)}},{key:"map",value:function(e){return new V_(this,e)}},{key:"mapAsync",value:function(e){return new X_(this,e)}},{key:"serialMapAsync",value:function(e){return new X_(this,e).serial()}},{key:"flatmap",value:function(e){return new Y_(this,e)}},{key:"forEachAsync",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){return new Z_(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R_;return this.rowMajorBatch(e,t).map((function(e){return E_(e,n)}))}},{key:"concatenate",value:function(e,t){return new $_(new j_([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new U_(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new W_(this,e)}},{key:"prefetch",value:function(e){return new J_(this,e)}},{key:"shuffle",value:function(e,t){return new Q_(this,e,t)}},{key:"serial",value:function(){return new G_(this)}}]),e}(),j_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).items=e,r.trav=0,r}return(0,R.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:I_(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),z_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).nextFn=e,r}return(0,R.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),G_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),W_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:xi(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),U_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),Z_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,T.Z)(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=o,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),H_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:xi(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),V_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r,a,o,i,s;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=ja(t.value),r=this.transform(t.value),a=ja(r),o=(0,C.Z)(n);try{for(o.s();!(i=o.n()).done;)Pa(s=i.value,a)||s.dispose()}catch(yB){o.e(yB)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),K_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),X_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r,a,o,i,s;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=ja(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=ja(r),o=(0,C.Z)(n);try{for(o.s();!(i=o.n()).done;)Pa(s=i.value,a)||s.dispose()}catch(yB){o.e(yB)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),q_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){var e;return(0,T.Z)(this,n),(e=t.call(this)).outputQueue=new N_,e.lastRead=Promise.resolve({value:null,done:!1}),e}return(0,R.Z)(n,[{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(P_),Y_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r,a,o,i,s;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=ja(t.value),r=this.transform(t.value),a=ja(r),this.outputQueue.pushAll(r),o=(0,C.Z)(n);try{for(o.s();!(i=o.n()).done;)Pa(s=i.value,a)||s.dispose()}catch(yB){o.e(yB)}finally{o.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(q_),$_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(P_);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(B_||(B_={}));var J_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r){var a;return(0,T.Z)(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new A_(r),a}return(0,R.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(P_),Q_=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e,r,a){var o;return(0,T.Z)(this,n),(o=t.call(this,e,r)).upstream=e,o.windowSize=r,o.upstreamExhausted=!1,o.random=al.alea(a||aa().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return(0,R.Z)(n,[{key:"next",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(J_),ek=function(){function e(){(0,T.Z)(this,e),this.size=null}return(0,R.Z)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return P(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),tk((0,S.Z)((0,O.Z)().mark((function t(){return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,nk));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,tk((0,S.Z)((0,O.Z)().mark((function t(){return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,tk((0,S.Z)((0,O.Z)().mark((function t(){return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return ki((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return tk((0,S.Z)((0,O.Z)().mark((function n(){return(0,O.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return ki((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return tk((0,S.Z)((0,O.Z)().mark((function n(){return(0,O.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return tk((0,S.Z)((0,O.Z)().mark((function n(){return(0,O.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,tk((0,S.Z)((0,O.Z)().mark((function t(){var r;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=D_((0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",L_(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,tk((0,S.Z)((0,O.Z)().mark((function t(){return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=al.alea(t||aa().toString());return tk((0,S.Z)((0,O.Z)().mark((function t(){var o;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.int32(),n&&(o+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,o.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,tk((0,S.Z)((0,O.Z)().mark((function t(){return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function tk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){(0,ca.Z)(a,n);var r=(0,da.Z)(a);function a(){var e;return(0,T.Z)(this,a),(e=r.apply(this,arguments)).size=t,e}return(0,R.Z)(a,[{key:"iterator",value:function(){var t=(0,S.Z)((0,O.Z)().mark((function t(){return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(ek))}function nk(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof Oa||sa(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Oa?Ol(e):oo(e)}(e),recurse:!1}:{value:null,recurse:!0}}ek.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function rk(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&P("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var ak=Rc,ok=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(){var e;return(0,T.Z)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new F((0,gg.Z)(e),bi()),e}return(0,R.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,ye().get("IS_NODE")&&Mr("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&ee(n[0])){var a=n.map((function(e){return oa(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?lc(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,n)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return ia(e)}));return hi(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return hi(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return bi().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e).complexTensorInfos;null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=aa(),t(),r=aa()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){rk([e],"where");var t=this.readSync(e.dataId);return ak(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return(0,Km.Z)((0,hg.Z)(n.prototype),"epsilon",this).call(this)}}]),n}(I);ok.nextDataId=0;function ik(e){return function(t,n,r){for(var a=$(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}function sk(e,t,n){return uk(e,ik(t),n)}function uk(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;rk(s,e);var u,l=i,p=l.data.get(s.dataId).values;if("string"===s.dtype){if(!Array.isArray(p))throw new Error("String tensor's value was not an instance of Array");u=Tc(p)}else u=p;var c=n||s.dtype,d=t(u,c,o);return l.makeTensorInfo(s.shape,c,d)}}Oi("cpu",(function(){return new ok}),1);var lk=sk(bt,(function(e){return e>=0?e:Math.exp(e)-1})),pk={kernelName:bt,backendName:"cpu",kernelFunc:lk};function ck(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var dk={kernelName:Lt,backendName:"cpu",kernelFunc:ck};function fk(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;rk([a],"leakyRelu");for(var i=G(a.shape),s=n.data.get(a.dataId).values,u=Y("float32",i),l=0;l<s.length;l++)u[l]=s[l]<0?o*s[l]:s[l];return n.makeTensorInfo(a.shape,"float32",u)}var gk={kernelName:Wt,backendName:"cpu",kernelFunc:fk};function hk(e){return function(t,n,r,a,o){var i=Ki(t,n),s=i.length,u=oe(i),l=Y(o,G(i)),p=t.length,c=n.length,d=oe(t),f=oe(n),g=Hi(t,i),h=Hi(n,i);if(g.length+h.length===0)for(var m=0;m<l.length;++m)l[m]=e(r[m%r.length],a[m%a.length]);else for(var v=function(){var t=fe(y,s,u),n=t.slice(-p);g.forEach((function(e){return n[e]=0}));var o=de(n,p,d),i=t.slice(-c);h.forEach((function(e){return i[e]=0}));var m=de(i,c,f);l[y]=e(r[o],a[m])},y=0;y<l.length;++y)v();return[l,i]}}var mk=hk((function(e,t){return e<0?t*e:e}));function vk(e){var t=e.inputs,n=e.backend,a=t.x,o=t.alpha;rk([a,o],"prelu");var i=n.data.get(a.dataId).values,s=n.data.get(o.dataId).values,u=mk(a.shape,o.shape,i,s,"float32"),l=(0,r.Z)(u,2),p=l[0],c=l[1];return n.makeTensorInfo(c,"float32",p)}var yk={kernelName:On,backendName:"cpu",kernelFunc:vk},bk=sk(Mn,(function(e){return Math.max(0,e)})),_k={kernelName:Mn,backendName:"cpu",kernelFunc:bk},kk=sk(Pn,(function(e){return Math.min(Math.max(0,e),6)})),xk={kernelName:Pn,backendName:"cpu",kernelFunc:kk},wk=ik((function(e){return 1/(1+Math.exp(-e))})),Ok=sk($n,(function(e){return 1/(1+Math.exp(-e))})),Sk={kernelName:$n,backendName:"cpu",kernelFunc:Ok};function Ck(e,t,n,r,a){if("linear"===n)return ck({inputs:{x:t},backend:e});if("relu"===n)return bk({inputs:{x:t},backend:e});if("elu"===n)return lk({inputs:{x:t},backend:e});if("relu6"===n)return kk({inputs:{x:t},backend:e});if("prelu"===n)return vk({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return fk({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return Ok({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function Ek(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}var Tk={kernelName:Xe,backendName:"cpu",kernelFunc:Ek};function Rk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return Ek({inputs:{real:Rk(e,t,"float32"),imag:Rk(e,t,"float32")},backend:e});var r=le(G(t),n);return e.makeTensorInfo(t,n,r)}function Fk(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var Ik={kernelName:Fn,backendName:"cpu",kernelFunc:Fk};function Mk(e,t,n,a){if("int32"===a)return[t,"int32",Int32Array.from(e)];if("bool"===a){var o=ra([0],n),i=hk((function(e,t){return e!==t?1:0}))(t,[],e,o,"bool"),s=(0,r.Z)(i,2),u=s[0];return[s[1],"bool",u]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(a))}function Ak(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.dtype;if("complex64"===i){if("complex64"===o.dtype)return ck({inputs:{x:o},backend:n});var s=Rk(n,o.shape,o.dtype),u=Ak({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Ek({inputs:{real:u,imag:s},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),l}if("complex64"===o.dtype){var p=Fk({inputs:{input:o},backend:n}),c=Ak({inputs:{x:p},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(p),c}if(!J(o.dtype,i)){var d=ck({inputs:{x:o},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}var f=Mk(n.data.get(o.dataId).values,o.shape,o.dtype,i),g=(0,r.Z)(f,3),h=g[0],m=g[1],v=g[2];return n.makeTensorInfo(h,m,v)}var Nk={kernelName:He,backendName:"cpu",kernelFunc:Ak};function Dk(e,t,n,a){return null==n?function(n){var o=n.inputs,i=n.backend,s=o.a,u=o.b,l=i;rk([s,u],e);var p=l.data.get(s.dataId).values,c=l.data.get(u.dataId).values,d="string"===s.dtype?Tc(p):p,f="string"===s.dtype?Tc(c):c,g=a||s.dtype,h=t(s.shape,u.shape,d,f,g),m=(0,r.Z)(h,2),v=m[0],y=m[1];return l.makeTensorInfo(y,g,v)}:function(e){var o=e.inputs,i=e.backend,s=o.a,u=o.b,l=i;if("complex64"===s.dtype||"complex64"===u.dtype){var p=Ak({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(p.dataId),d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,g=l.data.get(d.dataId).values,h=l.data.get(f.dataId).values,m=Ak({inputs:{x:u},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(m.dataId),y=v.complexTensorInfos.real,b=v.complexTensorInfos.imag,_=l.data.get(y.dataId).values,k=l.data.get(b.dataId).values,x=n(s.shape,u.shape,g,h,_,k),w=(0,r.Z)(x,3),O=w[0],S=w[1],C=w[2],E=l.makeTensorInfo(C,"float32",O),T=l.makeTensorInfo(C,"float32",S),R=Ek({inputs:{real:E,imag:T},backend:l});return l.disposeIntermediateTensorInfo(p),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(E),l.disposeIntermediateTensorInfo(T),R}var F=l.data.get(s.dataId).values,I=l.data.get(u.dataId).values,M=a||s.dtype,A=t(s.shape,u.shape,F,I,M),N=(0,r.Z)(A,2),D=N[0],L=N[1];return l.makeTensorInfo(L,M,D)}}function Lk(e){return function(t,n,r,a,o,i){var s=Ki(t,n),u=G(s),l=s.length,p=oe(s),c=Y("float32",u),d=Y("float32",u),f=Hi(t,s),g=Hi(n,s),h=lc(r,a),m=lc(o,i),v=t.length,y=oe(t),b=n.length,_=oe(n);if(f.length+g.length===0)for(var k=0;k<c.length;k++){var x=k%h.length,w=k%m.length,O=e(h[2*x],h[2*x+1],m[2*w],m[2*w+1]);c[k]=O.real,d[k]=O.imag}else for(var S=function(){var t=fe(C,l,p),n=t.slice(-v);f.forEach((function(e){return n[e]=0}));var r=de(n,v,y),a=t.slice(-b);g.forEach((function(e){return a[e]=0}));var o=de(a,b,_),i=e(h[2*r],h[2*r+1],m[2*o],m[2*o+1]);c[C]=i.real,d[C]=i.imag},C=0;C<c.length;C++)S();return[c,d,s]}}var Bk=hk((function(e,t){return e+t})),Pk=Lk((function(e,t,n,r){return{real:e+n,imag:t+r}})),jk=Dk(Ce,Bk,Pk),zk={kernelName:Ce,backendName:"cpu",kernelFunc:jk};function Gk(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=G(a.shape),s=K(o,i),u=G(s);P(i===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var l=n.data.get(a.dataId);if(null!=l.complexTensorInfos){var p=l.complexTensorInfos.real,c=l.complexTensorInfos.imag;p.shape=s,c.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var Wk={kernelName:An,backendName:"cpu",kernelFunc:Gk};function Uk(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.a,i=t.b,s=a.transposeA,u=a.transposeB;rk([o,i],"matMul");var l=o.shape.length,p=i.shape.length,c=s?o.shape[l-2]:o.shape[l-1],d=u?i.shape[p-1]:i.shape[p-2],f=s?o.shape[l-1]:o.shape[l-2],g=u?i.shape[p-2]:i.shape[p-1],h=o.shape.slice(0,-2),m=i.shape.slice(0,-2),v=G(h),y=G(m),b=Ki(o.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,g]);P(c===d,(function(){return"Error in matMul: inner shapes (".concat(c,") and (")+"".concat(d,") of Tensors with shapes ").concat(o.shape," and ")+"".concat(i.shape," and transposeA=").concat(s)+" and transposeB=".concat(u," must match.")}));for(var _=u?[y,g,d]:[y,d,g],k=Gk({inputs:{x:o},backend:n,attrs:{shape:s?[v,c,f]:[v,f,c]}}),x=Gk({inputs:{x:i},backend:n,attrs:{shape:_}}),w=s?k.shape[1]:k.shape[2],O=s?k.shape[2]:k.shape[1],S=u?x.shape[1]:x.shape[2],C=Math.max(v,y),E=n.data.get(k.dataId).values,T=n.data.get(x.dataId).values,R=oe(k.shape),F=oe(x.shape),I=s?[R[0],1,R[1]]:[R[0],R[1],1],M=(0,r.Z)(I,3),A=M[0],N=M[1],D=M[2],L=u?[1,F[1],F[0]]:[F[1],1,F[0]],B=(0,r.Z)(L,3),j=B[0],z=B[1],W=B[2],U=O*S,Z=hi([C,O,S],k.dtype),H=Z.values,V=n.blockSize,K=0;K<C;K++)for(var X=K%v,q=K%y,Y=0;Y<O;Y+=V)for(var $=Math.min(Y+V,O),J=0;J<S;J+=V)for(var Q=Math.min(J+V,S),ee=0;ee<w;ee+=V)for(var te=Math.min(ee+V,w),ne=Y;ne<$;ne++)for(var re=J;re<Q;re++){for(var ae=0,ie=ee;ie<te;ie++){ae+=E[X*A+ne*N+ie*D]*T[ie*j+re*z+q*W]}H[K*U+(ne*S+re)]+=ae}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(b,Z.dtype,Z.values)}var Zk={kernelName:Ge,backendName:"cpu",kernelFunc:Uk};var Hk={kernelName:Rr,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,s=a.a,u=a.b,l=a.bias,p=a.preluActivationWeights,c=i.transposeA,d=i.transposeB,f=i.activation,g=i.leakyreluAlpha,h=[];t=Uk({inputs:{a:s,b:u},attrs:{transposeA:c,transposeB:d},backend:o}),l&&(n=jk({inputs:{a:t,b:l},backend:o}),h.push(t),t=n),f&&(r=Ck(o,t,f,p,g),h.push(t),t=r);for(var m=0,v=h;m<v.length;m++){var y=v[m];o.disposeIntermediateTensorInfo(y)}return t}};function Vk(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var Kk={kernelName:we,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;rk(t,"abs");var r=new Float32Array(G(t.shape));return r=Vk(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},Xk=sk(Oe,(function(e){return Math.acos(e)})),qk={kernelName:Oe,backendName:"cpu",kernelFunc:Xk},Yk=sk(Se,(function(e){return Math.acosh(e)})),$k={kernelName:Se,backendName:"cpu",kernelFunc:Yk};var Jk={kernelName:Ee,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;rk(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=hi(r[0].shape,r[0].dtype),i=o.values,s=0;s<r.length;s++)for(var u=a[s],l=0;l<i.length;l++)i[l]+=u[l];return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function Qk(e,t,n,r,a){for(var o=t.length,i=G(t),s=oe(t),u=oe(a),l=Y(n,G(a)),p=0;p<i;++p){for(var c=fe(p,o,s),d=new Array(c.length),f=0;f<d.length;f++)d[f]=c[r[f]];l[de(d,o,u)]=e[p]}return l}function ex(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;rk(a,"transpose");for(var i=a.shape.length,s=new Array(i),u=0;u<s.length;u++)s[u]=a.shape[o[u]];var l=Qk(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(l,s,a.dtype),shape:s,dtype:a.dtype}}var tx={kernelName:xr,backendName:"cpu",kernelFunc:ex};var nx={kernelName:Te,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.axis,s=a.keepDims;rk(o,"all");var u=X(i,o.shape),l=u,p=Vu(l,o.shape.length),c=o;null!=p&&(c=ex({inputs:{x:o},backend:n,attrs:{perm:p}}),l=Xu(l.length,o.shape.length)),Hu("all",l,c.shape.length);for(var d=Uu(c.shape,l),f=(0,r.Z)(d,2),g=f[0],h=G(f[1]),m=le(G(g),c.dtype),v=n.data.get(c.dataId).values,y=0;y<m.length;++y){for(var b=y*h,_=v[b],k=0;k<h;++k){var x=v[b+k];_=_&&x}m[y]=_}null!=p&&n.disposeIntermediateTensorInfo(c);var w=n.makeTensorInfo(g,c.dtype,m);if(s){var O=Gk({inputs:{x:w},backend:n,attrs:{shape:Zu(g,u)}});return n.disposeIntermediateTensorInfo(w),O}return w}};var rx={kernelName:Re,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.axis,s=a.keepDims;rk(o,"any");var u=X(i,o.shape),l=u,p=Vu(l,o.shape.length),c=o;null!=p&&(c=ex({inputs:{x:o},backend:n,attrs:{perm:p}}),l=Xu(l.length,o.shape.length)),Hu("any",l,c.shape.length);for(var d=Uu(c.shape,l),f=(0,r.Z)(d,2),g=f[0],h=G(f[1]),m=le(G(g),c.dtype),v=n.data.get(c.dataId).values,y=0;y<m.length;++y){for(var b=y*h,_=v[b],k=0;k<h;++k){var x=v[b+k];_=_||x}m[y]=_}null!=p&&n.disposeIntermediateTensorInfo(c);var w=n.makeTensorInfo(g,c.dtype,m);if(s){var O=Gk({inputs:{x:w},backend:n,attrs:{shape:Zu(g,u)}});return n.disposeIntermediateTensorInfo(w),O}return w}};var ax={kernelName:Fe,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.axis;rk(o,"argMax");var s=X(i,o.shape),u=Vu(s,o.shape.length),l=o,p=[];null!=u&&(l=ex({inputs:{x:o},backend:n,attrs:{perm:u}}),p.push(l),s=Xu(s.length,l.shape.length)),Hu("argMax",s=[s[0]],l.shape.length);for(var c=Uu(l.shape,s),d=(0,r.Z)(c,2),f=d[0],g=d[1],h=le(G(f),"int32"),m=G(g),v=n.data.get(l.dataId).values,y=0;y<h.length;++y){for(var b=y*m,_=v[b],k=0,x=0;x<m;++x){var w=v[b+x];w>_&&(_=w,k=x)}h[y]=k}return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",h)}};var ox={kernelName:Ie,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.axis;rk(o,"argMin");var s=X(i,o.shape),u=Vu(s,o.shape.length),l=o,p=[];null!=u&&(l=ex({inputs:{x:o},backend:n,attrs:{perm:u}}),p.push(l),s=Xu(s.length,l.shape.length)),Hu("argMin",s=[s[0]],l.shape.length);for(var c=Uu(l.shape,s),d=(0,r.Z)(c,2),f=d[0],g=d[1],h=le(G(f),"int32"),m=G(g),v=n.data.get(l.dataId).values,y=0;y<h.length;++y){for(var b=y*m,_=v[b],k=0,x=0;x<m;++x){var w=v[b+x];w<_&&(_=w,k=x)}h[y]=k}return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",h)}},ix=sk(Me,(function(e){return Math.asin(e)})),sx={kernelName:Me,backendName:"cpu",kernelFunc:ix},ux=sk(Ae,(function(e){return Math.asinh(e)})),lx={kernelName:Ae,backendName:"cpu",kernelFunc:ux},px=sk(Ne,(function(e){return Math.atan(e)})),cx={kernelName:Ne,backendName:"cpu",kernelFunc:px},dx=hk((function(e,t){return Math.atan2(e,t)})),fx=Dk(Le,dx),gx={kernelName:Le,backendName:"cpu",kernelFunc:fx},hx=sk(De,(function(e){return Math.atanh(e)})),mx={kernelName:De,backendName:"cpu",kernelFunc:hx};function vx(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,p=a.effectiveFilterHeight,c=a.effectiveFilterWidth,d=a.padInfo.top,f=a.padInfo.left,g="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=hi(a.outShape,n),m=h.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],_=0;_<a.batchSize;++_)for(var k=_*v,x=_*r[0],w=0;w<a.inChannels;++w)for(var O=0;O<a.outHeight;++O)for(var S=O*i-d,C=Math.max(0,S),E=Math.min(a.inHeight,p+S),T=k+O*y,R=0;R<a.outWidth;++R){for(var F=R*s-f,I=Math.max(0,F),M=Math.min(a.inWidth,c+F),A=g,N=0,D=0,L=C;L<E;L+=u){for(var B=x+L*r[1],P=I;P<M;P+=l){var j=e[B+P*r[2]+w];"max"===o&&j>A?A=j:"avg"===o&&(N+=j,D++)}if(isNaN(A))break}m[T+R*b+w]="avg"===o?N/D:A}return h}function yx(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=hi(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,p=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=r.padInfo.top,g=r.padInfo.left,h=hi(t,n,e),m=0;m<r.batchSize;++m)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var b=y*s-f,_=b;_<0;)_+=l;for(var k=Math.min(r.inHeight,c+b),x=0;x<r.outWidth;++x){for(var w=x*u-g,O=w;O<0;)O+=p;for(var S=Math.min(r.inWidth,d+w),C=Number.NEGATIVE_INFINITY,E=-1,T=_;T<k;T+=l)for(var R=T-b,F=O;F<S;F+=p){var I=F-w,M=h.get(m,T,F,v);M>C&&(C=M,E=a?o?((m*r.inHeight+T)*r.inWidth+F)*r.inChannels+v:(T*r.inWidth+F)*r.inChannels+v:R*d+I)}i.set(E,m,y,x,v)}}return i}function bx(e,t,n,r,a,o){for(var i=a.strideDepth,s=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,p=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterDepth,f=a.effectiveFilterHeight,g=a.effectiveFilterWidth,h=a.padInfo.front,m=a.padInfo.top,v=a.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=hi(a.outShape,n),_=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],x=a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[3]*a.outShape[4],O=a.outShape[4],S=0;S<a.batchSize;++S)for(var C=S*k,E=S*r[0],T=0;T<a.inChannels;++T)for(var R=0;R<a.outDepth;++R){for(var F=R*i-h,I=F;I<0;)I+=l;for(var M=Math.min(a.inDepth,d+F),A=C+R*x,N=0;N<a.outHeight;++N){for(var D=N*s-m,L=D;L<0;)L+=p;for(var B=Math.min(a.inHeight,f+D),P=A+N*w,j=0;j<a.outWidth;++j){for(var z=j*u-v,G=z;G<0;)G+=c;for(var W=Math.min(a.inWidth,g+z),U=P+j*O,Z=y,H=0,V=0,K=I;K<M;K+=l){for(var X=E+K*r[1],q=L;q<B;q+=p){for(var Y=X+q*r[2],$=G;$<W;$+=c){var J=e[Y+$*r[3]+T];if("max"===o&&J>Z?Z=J:"avg"===o&&(H+=J,V++),isNaN(Z))break}if(isNaN(Z))break}if(isNaN(Z))break}_[U+T]="avg"===o?H/Math.max(V,1):Z}}}return b}var _x={kernelName:Be,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;rk(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;P(Vs(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var l,p=Ls(a.shape,o,i,1,s,u);if(1===p.filterWidth&&1===p.filterHeight&&W(p.inShape,p.outShape))l=ck({inputs:{x:a},backend:n});else{var c=n.data.get(a.dataId).values,d=oe(a.shape),f=vx(c,a.shape,a.dtype,d,p,"avg");l=n.makeTensorInfo(p.outShape,a.dtype,f.values)}return l}};var kx={kernelName:je,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;rk(a,"avgPool3d");var p=Bs(a.shape,o,i,1,s,u,l),c=bx(n.data.get(a.dataId).values,a.shape,a.dtype,oe(a.shape),p,"avg");return n.makeTensorInfo(c.shape,"float32",c.values)}};var xx={kernelName:ze,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;rk([a,o],"avgPool3DGrad");for(var p=Bs(o.shape,i,s,1,u,l),c=p.strideDepth,d=p.strideHeight,f=p.strideWidth,g=p.filterDepth,h=p.filterHeight,m=p.filterWidth,v=p.dilationDepth,y=p.dilationHeight,b=p.dilationWidth,_=p.effectiveFilterDepth,k=p.effectiveFilterHeight,x=p.effectiveFilterWidth,w=_-1-p.padInfo.front,O=x-1-p.padInfo.left,S=k-1-p.padInfo.top,C=hi(o.shape,"float32"),E=1/(g*h*m),T=n.bufferSync(a),R=0;R<p.batchSize;++R)for(var F=0;F<p.inChannels;++F)for(var I=0;I<p.inDepth;++I)for(var M=0;M<p.inHeight;++M)for(var A=0;A<p.inWidth;++A){for(var N=I-w,D=M-S,L=A-O,B=0,P=0;P<_;P+=v){var j=(N+P)/c;if(!(j<0||j>=p.outDepth||Math.floor(j)!==j))for(var z=0;z<k;z+=y){var G=(D+z)/d;if(!(G<0||G>=p.outHeight||Math.floor(G)!==G))for(var W=0;W<x;W+=b){var U=(L+W)/f;if(!(U<0||U>=p.outWidth||Math.floor(U)!==U))B+=T.get(R,j,G,U,F)}}}C.set(B*E,R,I,M,A,F)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var wx={kernelName:Pe,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;rk([a,o],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,p=Ls(i.shape,s,u,1,l),c=p.strideHeight,d=p.strideWidth,f=p.filterHeight,g=p.filterWidth,h=p.dilationHeight,m=p.dilationWidth,v=p.effectiveFilterHeight,y=p.effectiveFilterWidth,b=y-1-p.padInfo.left,_=v-1-p.padInfo.top,k=hi(i.shape,"float32"),x=1/(f*g),w=n.data.get(a.dataId).values,O=hi(a.shape,"float32",w),S=0;S<p.batchSize;++S)for(var C=0;C<p.inChannels;++C)for(var E=0;E<p.inHeight;++E)for(var T=0;T<p.inWidth;++T){for(var R=E-_,F=T-b,I=0,M=0;M<v;M+=h){var A=(R+M)/c;if(!(A<0||A>=p.outHeight||Math.floor(A)!==A))for(var N=0;N<y;N+=m){var D=(F+N)/d;if(!(D<0||D>=p.outWidth||Math.floor(D)!==D))I+=O.get(S,A,D,C)}}k.set(I*x,S,E,T,C)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var Ox={kernelName:It,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,s=t.mean,u=t.variance;P(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),P(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),P(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),rk([a,s,u,o,i],"batchNorm");var l=r.varianceEpsilon;null==l&&(l=.001);for(var p=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,d=n.data.get(u.dataId).values,f=o?n.data.get(o.dataId).values:new Float32Array([1]),g=i?n.data.get(i.dataId).values:new Float32Array([0]),h=new Float32Array(p.length),m=g.length,v=f.length,y=d.length,b=c.length,_=0,k=0,x=0,w=0,O=0;O<p.length;++O)h[O]=g[_++]+(p[O]-c[k++])*f[x++]/Math.sqrt(d[w++]+l),_>=m&&(_=0),k>=b&&(k=0),x>=v&&(x=0),w>=y&&(w=0);return n.makeTensorInfo(a.shape,a.dtype,h)}};function Sx(e,t,n,r,a){var o=Es(r,t,n),i=G(n),s=oe(r);if(o){var u=Ts(t,s);return"string"===a?e.slice(u,u+i):e.subarray(u,u+i)}for(var l=hi(r,a,"string"===a?Tc(e):e),p=hi(n,a),c=0;c<p.size;++c){var d=p.indexToLoc(c),f=d.map((function(e,n){return e+t[n]}));p.set.apply(p,[l.get.apply(l,(0,E.Z)(f))].concat((0,E.Z)(d)))}return"string"===a?p.values.map((function(e){return oa(e)})):p.values}function Cx(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.begin,s=a.size;rk(o,"slice");var u=Rs(o,i,s),l=(0,r.Z)(u,2),p=l[0],c=l[1];Ss(o,p,c);var d=Sx(n.data.get(o.dataId).values,p,c,o.shape,o.dtype);return n.makeTensorInfo(c,o.dtype,d)}var Ex={kernelName:Kn,backendName:"cpu",kernelFunc:Cx};var Tx={kernelName:We,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;rk([a],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),u=Xp(a.shape,o,s),l=qp(u.length,o.length),p=Yp(a.shape,o,s),c=$p(i,o.length),d=Jp(p,i,o.length),f=Gk({inputs:{x:a},backend:n,attrs:{shape:u}}),g=ex({inputs:{x:f},backend:n,attrs:{perm:l}}),h=Gk({inputs:{x:g},backend:n,attrs:{shape:p}}),m=Cx({inputs:{x:h},backend:n,attrs:{begin:c,size:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(h),m}};function Rx(e,t,n,r,a){for(var o=G(r),i=le(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i[u]+=o>0?t[s]:1)}return i}function Fx(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=hi([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<o;u++){var l=e.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?i.set(1,s,l):t.size>0?i.set(i.get(s,l)+t.get(s,u),s,l):i.set(i.get(s,l)+1,s,l))}return i}var Ix={kernelName:Ue,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=Rx(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}};var Mx={kernelName:Ze,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=Ki(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Ax=ik((function(e){return Math.ceil(e)})),Nx=uk(Ve,Ax),Dx={kernelName:Ve,backendName:"cpu",kernelFunc:Nx},Lx=sk(Ke,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),Bx={kernelName:Ke,backendName:"cpu",kernelFunc:Lx},Px={kernelName:qe,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(G(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,l=0;l<s.length;l++){var p=s[l],c=u[l];r[l]=Math.hypot(p,c)}return n.makeOutput(r,t.shape,"float32")}};function jx(e,t,n,r){var a=$(n,G(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=G(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?Tc(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+i,l=0;l<e.shape[1];++l)a[u+l]=r[o++];i+=e.shape[1]}))}return a}function zx(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var Gx={kernelName:Pt,backendName:"cpu",kernelFunc:zx};function Wx(e){var t=e.inputs,n=e.backend,r=X(e.attrs.axis,t[0].shape)[0];Up(t.map((function(e){return e.shape})),r);var a=Zp(t.map((function(e){return e.shape})),r);if(0===G(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return G(e.shape)>0}));if(1===o.length)return ck({inputs:{x:o[0]},backend:n});if("complex64"===o[0].dtype){var i=o.map((function(e){return Fk({inputs:{input:e},backend:n})})),s=o.map((function(e){return zx({inputs:{input:e},backend:n})})),u=Wx({inputs:i,backend:n,attrs:{axis:r}}),l=Wx({inputs:s,backend:n,attrs:{axis:r}}),p=Ek({inputs:{real:u,imag:l},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),p}var c=o.map((function(e){var t=G(e.shape.slice(r));return Gk({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),d=c.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=Zp(c.map((function(e){return e.shape})),1);var f=1===c[0].shape[0],g=jx(d,a,t[0].dtype,f),h=Zp(o.map((function(e){return e.shape})),r),m=n.makeTensorInfo(h,t[0].dtype,g);return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var Ux={kernelName:Ye,backendName:"cpu",kernelFunc:Wx};function Zx(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dataFormat,l=r.dilations,p=r.dimRoundingMode;rk([a,o],"conv2d");for(var c=Xs(u),d=Ps(a.shape,o.shape,i,l,s,p,!1,c),f=d.filterHeight,g=d.filterWidth,h=d.dilationHeight,m=d.dilationWidth,v=d.padInfo.left,y=d.padInfo.top,b="channelsLast"===d.dataFormat,_=new ka(d.outShape,a.dtype),k=oe(a.shape),x=oe(o.shape),w=k[0],O=b?k[1]:k[2],S=b?k[2]:1,C=b?1:k[1],E=_.strides[0],T=b?_.strides[1]:_.strides[2],R=b?_.strides[2]:1,F=b?1:_.strides[1],I=n.data.get(a.dataId).values,M=n.data.get(o.dataId).values,A=_.values,N=0;N<d.batchSize;++N)for(var D=N*w,L=N*E,B=0;B<d.outHeight;++B)for(var P=L+B*T,j=B*d.strideHeight-y,z=0;z<f;++z){var G=j+z*h;if(!(G<0||G>=d.inHeight))for(var W=z*x[0],U=D+G*O,Z=0;Z<d.outWidth;++Z)for(var H=P+Z*R,V=Z*d.strideWidth-v,K=0;K<g;++K){var X=V+K*m;if(!(X<0||X>=d.inWidth))for(var q=U+X*S,Y=W+K*x[1],$=0;$<d.inChannels;++$){for(var J=I[q+$*C],Q=0;Q<d.outChannels;++Q)A[H+Q*F]+=J*M[Y+Q];Y+=d.outChannels}}}return n.makeTensorInfo(_.shape,_.dtype,A)}var Hx={kernelName:$e,backendName:"cpu",kernelFunc:Zx};var Vx={kernelName:Je,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,p=r.filterShape;rk([a,o],"conv2dBackpropFilter");for(var c=Xs(u),d=Ps(a.shape,p,i,1,s,l,!1,c),f=d.strideHeight,g=d.strideWidth,h=d.filterHeight,m=d.filterWidth,v="channelsLast"===d.dataFormat,y=new ka(d.filterShape,"float32"),b=d.padInfo.left,_=d.padInfo.top,k=n.data.get(a.dataId).values,x=n.data.get(o.dataId).values,w=new ka(a.shape,a.dtype,k),O=new ka(o.shape,o.dtype,x),S=0;S<h;++S)for(var C=Math.max(0,Math.ceil((_-S)/f)),E=Math.min(d.outHeight,(d.inHeight+_-S)/f),T=0;T<m;++T)for(var R=Math.max(0,Math.ceil((b-T)/g)),F=Math.min(d.outWidth,(d.inWidth+b-T)/g),I=0;I<d.inChannels;++I)for(var M=0;M<d.outChannels;++M){for(var A=0,N=0;N<d.batchSize;++N)for(var D=C;D<E;++D)for(var L=S+D*f-_,B=R;B<F;++B){var P=T+B*g-b;A+=v?w.get(N,L,P,I)*O.get(N,D,B,M):w.get(N,I,L,P)*O.get(N,M,D,B)}y.set(A,S,T,I,M)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var Kx={kernelName:Qe,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.dy,i=t.filter,s=a.inputShape,u=a.strides,l=a.pad,p=a.dataFormat,c=a.dimRoundingMode;rk([o,i],"conv2dBackpropInput");var d=oe(i.shape),f=oe(o.shape),g=Xs(p),h=Ps(s,i.shape,u,1,l,c,!1,g),m=new ka(h.inShape,"float32"),v=m.values,y=n.data.get(o.dataId).values,b=n.data.get(i.dataId).values,_=(0,r.Z)(d,3),k=_[0],x=_[1],w=_[2],O=h.batchSize,S=h.filterHeight,C=h.filterWidth,E=h.inChannels,T=h.inHeight,R=h.inWidth,F=h.outChannels,I=h.outHeight,M=h.outWidth,A=h.strideHeight,N=h.strideWidth;g=h.dataFormat;for(var D=S-1-h.padInfo.top,L=C-1-h.padInfo.left,B="channelsLast"===g,P=m.strides[0],j=B?m.strides[1]:m.strides[2],z=B?m.strides[2]:1,G=B?1:m.strides[1],W=f[0],U=B?f[1]:f[2],Z=B?f[2]:1,H=B?1:f[1],V=0;V<O;++V)for(var K=0;K<E;++K)for(var X=0;X<T;++X)for(var q=X-D,Y=Math.max(0,Math.ceil(q/A)),$=Math.min(I,(S+q)/A),J=0;J<R;++J){for(var Q=J-L,ee=Math.max(0,Math.ceil(Q/N)),te=Math.min(M,(C+Q)/N),ne=0,re=Y;re<$;++re)for(var ae=re*A-q,ie=ee;ie<te;++ie)for(var se=W*V+U*re+Z*ie,ue=k*(S-1-ae)+x*(C-1-(ie*N-Q))+w*K,le=0;le<F;++le){ne+=y[se+H*le]*b[ue+le]}v[P*V+j*X+z*J+G*K]=ne}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var Xx={kernelName:et,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations;rk([a,o],"conv3d");for(var l=js(a.shape,o.shape,i,u,s),p=l.filterDepth,c=l.filterHeight,d=l.filterWidth,f=l.dilationDepth,g=l.dilationHeight,h=l.dilationWidth,m=l.padInfo,v=m.front,y=m.left,b=m.top,_=new ka(l.outShape,a.dtype),k=n.data.get(a.dataId).values,x=n.data.get(o.dataId).values,w=_.values,O=oe(a.shape),S=oe(o.shape),C=0;C<l.batchSize;++C)for(var E=C*O[0],T=C*_.strides[0],R=0;R<l.outDepth;++R)for(var F=T+R*_.strides[1],I=R*l.strideDepth-v,M=0;M<p;++M){var A=I+M*f;if(!(A<0||A>=l.inDepth))for(var N=M*S[0],D=E+A*O[1],L=0;L<l.outHeight;++L)for(var B=F+L*_.strides[2],P=L*l.strideHeight-b,j=0;j<c;++j){var z=P+j*g;if(!(z<0||z>=l.inHeight))for(var G=N+j*S[1],W=D+z*O[2],U=0;U<l.outWidth;++U)for(var Z=B+U*l.outChannels,H=U*l.strideWidth-y,V=0;V<d;++V){var K=H+V*h;if(!(K<0||K>=l.inWidth))for(var X=G+V*S[2],q=W+K*l.inChannels,Y=X,$=0;$<l.inChannels;++$){for(var J=k[q+$],Q=0;Q<l.outChannels;++Q)w[Z+Q]+=J*x[Y+Q];Y+=l.outChannels}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var qx={kernelName:tt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=t.dy,s=a.strides,u=a.pad,l=a.filterShape;rk([o,i],"conv3dBackpropFilterV2");for(var p=oe(o.shape),c=oe(i.shape),d=js(o.shape,l,s,1,u),f=d.strideDepth,g=d.strideHeight,h=d.strideWidth,m=d.filterDepth,v=d.filterHeight,y=d.filterWidth,b=new ka(d.filterShape,"float32"),_=b.values,k=(0,r.Z)(b.strides,4),x=k[0],w=k[1],O=k[2],S=k[3],C=n.data.get(i.dataId).values,E=(0,r.Z)(c,4),T=E[0],R=E[1],F=E[2],I=E[3],M=n.data.get(o.dataId).values,A=(0,r.Z)(p,4),N=A[0],D=A[1],L=A[2],B=A[3],P=d.padInfo.front,j=d.padInfo.left,z=d.padInfo.top,G=0;G<m;++G)for(var W=Math.max(0,Math.ceil((P-G)/f)),U=Math.min(d.outDepth,(d.inDepth+P-G)/f),Z=G*x,H=0;H<v;++H)for(var V=Math.max(0,Math.ceil((z-H)/g)),K=Math.min(d.outHeight,(d.inHeight+z-H)/g),X=H*w+Z,q=0;q<y;++q)for(var Y=Math.max(0,Math.ceil((j-q)/h)),$=Math.min(d.outWidth,(d.inWidth+j-q)/h),J=q*O+X,Q=0;Q<d.inChannels;++Q)for(var ee=Q*S+J,te=0;te<d.outChannels;++te){for(var ne=0,re=0;re<d.batchSize;++re)for(var ae=re*N,ie=re*T,se=W;se<U;++se)for(var ue=(G+se*f-P)*D+ae,le=se*R+ie,pe=V;pe<K;++pe)for(var ce=(H+pe*g-z)*L+ue,de=pe*F+le,fe=Y;fe<$;++fe){var ge=fe*I+de;ne+=M[(q+fe*h-j)*B+ce+Q]*C[ge+te]}_[ee+te]=ne}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var Yx={kernelName:nt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.dy,i=t.filter,s=a.pad,u=a.strides,l=a.inputShape;rk([o],"conv3dBackpropInputV2");for(var p=oe(o.shape),c=oe(i.shape),d=js(l,i.shape,u,1,s),f=new ka(d.inShape,"float32"),g=f.values,h=(0,r.Z)(f.strides,4),m=h[0],v=h[1],y=h[2],b=h[3],_=n.data.get(o.dataId).values,k=(0,r.Z)(p,4),x=k[0],w=k[1],O=k[2],S=k[3],C=n.data.get(i.dataId).values,E=(0,r.Z)(c,4),T=E[0],R=E[1],F=E[2],I=E[3],M=d.batchSize,A=d.filterDepth,N=d.filterHeight,D=d.filterWidth,L=d.inChannels,B=d.inDepth,P=d.inHeight,j=d.inWidth,z=d.outChannels,G=d.outDepth,W=d.outHeight,U=d.outWidth,Z=d.strideDepth,H=d.strideHeight,V=d.strideWidth,K=A-1-d.padInfo.front,X=N-1-d.padInfo.top,q=D-1-d.padInfo.left,Y=0;Y<M;++Y)for(var $=0;$<L;++$)for(var J=0;J<B;++J)for(var Q=J-K,ee=Math.max(0,Math.ceil(Q/Z)),te=Math.min(G,(A+Q)/Z),ne=0;ne<P;++ne)for(var re=ne-X,ae=Math.max(0,Math.ceil(re/H)),ie=Math.min(W,(N+re)/H),se=0;se<j;++se){for(var ue=se-q,le=Math.max(0,Math.ceil(ue/V)),pe=Math.min(U,(D+ue)/V),ce=0,de=ee;de<te;++de)for(var fe=de*Z-Q,ge=ae;ge<ie;++ge)for(var he=ge*H-re,me=le;me<pe;++me)for(var ve=x*Y+w*de+O*ge+S*me,ye=T*(A-1-fe)+R*(N-1-he)+F*(D-1-(me*V-ue))+I*$,be=0;be<z;++be){ce+=_[ve+be]*C[ye+be]}g[m*Y+v*J+y*ne+b*se+$]=ce}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},$x=sk(rt,(function(e){return Math.cos(e)})),Jx={kernelName:rt,backendName:"cpu",kernelFunc:$x},Qx=sk(at,(function(e){return Math.cosh(e)})),ew={kernelName:at,backendName:"cpu",kernelFunc:Qx};var tw={kernelName:st,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,a=e.attrs,o=t.image,i=t.boxes,s=t.boxInd,u=a.cropSize,l=a.method,p=a.extrapolationValue,c=(0,r.Z)(o.shape,4),d=c[0],f=c[1],g=c[2],h=c[3],m=i.shape[0],v=(0,r.Z)(u,2),y=v[0],b=v[1],_=hi([m,y,b,h],"float32"),k=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,w=n.data.get(o.dataId).values,O=oe(o.shape),S=oe(_.shape),C=0;C<m;C++){var E=4*C,T=k[E],R=k[E+1],F=k[E+2],I=k[E+3],M=x[C];if(!(M>=d))for(var A=y>1?(F-T)*(f-1)/(y-1):0,N=b>1?(I-R)*(g-1)/(b-1):0,D=0;D<y;D++){var L=y>1?T*(f-1)+D*A:.5*(T+F)*(f-1);if(L<0||L>f-1)for(var B=0;B<b;B++)for(var P=0;P<h;P++){var j=P+B*S[2]+D*S[1]+C*S[0];_.values[j]=p}else if("bilinear"===l)for(var z=Math.floor(L),G=Math.ceil(L),W=L-z,U=0;U<b;U++){var Z=b>1?R*(g-1)+U*N:.5*(R+I)*(g-1);if(Z<0||Z>g-1)for(var H=0;H<h;H++){var V=H+U*S[2]+D*S[1]+C*S[0];_.values[V]=p}else for(var K=Math.floor(Z),X=Math.ceil(Z),q=Z-K,Y=0;Y<h;Y++){var $=Y+K*O[2]+z*O[1]+M*O[0],J=w[$],Q=w[$=Y+X*O[2]+z*O[1]+M*O[0]],ee=w[$=Y+K*O[2]+G*O[1]+M*O[0]],te=J+(Q-J)*q,ne=ee+(w[$=Y+X*O[2]+G*O[1]+M*O[0]]-ee)*q;$=Y+U*S[2]+D*S[1]+C*S[0],_.values[$]=te+(ne-te)*W}}else for(var re=0;re<b;++re){var ae=b>1?R*(g-1)+re*N:.5*(R+I)*(g-1);if(ae<0||ae>g-1)for(var ie=0;ie<h;ie++){var se=ie+re*S[2]+D*S[1]+C*S[0];_.values[se]=p}else for(var ue=Math.round(ae),le=Math.round(L),pe=0;pe<h;pe++){var ce=pe+ue*O[2]+le*O[1]+M*O[0],de=pe+re*S[2]+D*S[1]+C*S[0];_.values[de]=w[ce]}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var nw={kernelName:ot,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;rk(a,"cumprod");var u=Vu([o],a.shape.length),l=a;null!=u&&(l=ex({inputs:{x:a},backend:n,attrs:{perm:u}}));var p=Xu(1,a.shape.length)[0];if(p!==l.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(p));for(var c=Aa(l.dtype,"int32"),d=ue(G(l.shape),c),f=n.data.get(l.dataId).values,g=l.shape[l.shape.length-1],h=s?function(e,t){return e+g-t-1}:function(e,t){return e+t},m=0;m<f.length;m+=g)for(var v=0;v<g;v++){var y=h(m,v);if(0===v)d[y]=i?1:f[y];else{var b=h(m,v-1);d[y]=i?f[b]*d[b]:f[y]*d[b]}}var _=n.makeTensorInfo(l.shape,c,d);if(null!=u){var k=ex({inputs:{x:_},backend:n,attrs:{perm:Ku(u)}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(l),k}return _}};var rw={kernelName:it,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;rk(a,"cumsum");var u=Vu([o],a.shape.length),l=a;null!=u&&(l=ex({inputs:{x:a},backend:n,attrs:{perm:u}}));var p=Xu(1,a.shape.length)[0];if(p!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(p));for(var c=Aa(l.dtype,"int32"),d=le(G(l.shape),c),f=n.data.get(l.dataId).values,g=l.shape[l.shape.length-1],h=s?function(e,t){return e+g-t-1}:function(e,t){return e+t},m=0;m<f.length;m+=g)for(var v=0;v<g;v++){var y=h(m,v);if(0===v)d[y]=i?0:f[y];else{var b=h(m,v-1);d[y]=i?f[b]+d[b]:f[y]+d[b]}}var _=n.makeTensorInfo(l.shape,c,d);if(null!=u){var k=ex({inputs:{x:_},backend:n,attrs:{perm:Ku(u)}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(l),k}return _}};var aw={kernelName:ut,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=Rx(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}if(2===a.shape.length){var l=Fx(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(l.shape,o.dtype,l.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var ow={kernelName:lt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;P("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)}));for(var s=a.shape[0],u=a.shape[1],l=a.shape[2],p=a.shape[3],c=u*o,d=l*o,f=p/(o*o),g=n.data.get(a.dataId).values,h=new Float32Array(s*c*d*f),m=0,v=0;v<s;++v)for(var y=0;y<c;++y)for(var b=Math.floor(y/o),_=y%o,k=0;k<d;++k)for(var x=Math.floor(k/o),w=(_*o+k%o)*f,O=0;O<f;++O){var S=O+w+p*(x+l*(b+u*v));h[m++]=g[S]}return n.makeTensorInfo([s,c,d,f],a.dtype,h)}};function iw(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode;rk([a,o],"depthwiseConv2DNative");var p=oe(a.shape),c=oe(o.shape),d=u;null==d&&(d=[1,1]),P(Vs(i,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(d,"'")}));for(var f=Ps(a.shape,o.shape,i,d,s,l,!0),g=f.filterHeight,h=f.filterWidth,m=f.dilationHeight,v=f.dilationWidth,y=f.padInfo,b=y.left,_=y.top,k=f.outChannels/f.inChannels,x=new ka(f.outShape,a.dtype),w=n.data.get(a.dataId).values,O=n.data.get(o.dataId).values,S=x.values,C=0;C<f.batchSize;++C)for(var E=C*p[0],T=C*x.strides[0],R=0;R<f.outHeight;++R)for(var F=T+R*x.strides[1],I=R*f.strideHeight-_,M=0;M<g;++M){var A=I+M*m;if(!(A<0||A>=f.inHeight))for(var N=M*c[0],D=E+A*p[1],L=0;L<f.outWidth;++L)for(var B=F+L*x.strides[2],j=L*f.strideWidth-b,z=0;z<h;++z){var G=j+z*v;if(!(G<0||G>=f.inWidth))for(var W=N+z*c[1],U=D+G*f.inChannels,Z=B,H=W,V=0;V<f.inChannels;++V){for(var K=w[U+V],X=0;X<k;++X)S[Z+X]+=K*O[H+X];Z+=k,H+=k}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var sw={kernelName:pt,backendName:"cpu",kernelFunc:iw};var uw={kernelName:ct,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,p=r.filterShape;rk([a,o],"depthwiseConv2dNativeBackpropFilter");for(var c=Ps(a.shape,p,i,s,u,l,!0),d=c.strideHeight,f=c.strideWidth,g=c.filterHeight,h=c.filterWidth,m=new ka(c.filterShape,"float32"),v=c.padInfo.left,y=c.padInfo.top,b=c.outChannels/c.inChannels,_=n.data.get(a.dataId).values,k=new ka(a.shape,a.dtype,_),x=n.data.get(o.dataId).values,w=new ka(o.shape,o.dtype,x),O=0;O<g;++O)for(var S=Math.max(0,Math.ceil((y-O)/d)),C=Math.min(c.outHeight,(c.inHeight+y-O)/d),E=0;E<h;++E)for(var T=Math.max(0,Math.ceil((v-E)/f)),R=Math.min(c.outWidth,(c.inWidth+v-E)/f),F=0;F<c.outChannels;++F){for(var I=Math.trunc(F/b),M=F%b,A=0,N=0;N<c.batchSize;++N)for(var D=S;D<C;++D)for(var L=O+D*d-y,B=T;B<R;++B){var P=E+B*f-v;A+=k.get(N,L,P,I)*w.get(N,D,B,F)}m.set(A,O,E,I,M)}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var lw={kernelName:dt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.dy,i=t.filter,s=a.strides,u=a.dilations,l=a.pad,p=a.dimRoundingMode,c=a.inputShape;rk([o,i],"depthwiseConv2DNativeBackpropInput");for(var d=oe(o.shape),f=oe(i.shape),g=Ps(c,i.shape,s,u,l,p,!0),h=new ka(g.inShape,"float32"),m=h.values,v=(0,r.Z)(h.strides,3),y=v[0],b=v[1],_=v[2],k=n.data.get(o.dataId).values,x=(0,r.Z)(d,3),w=x[0],O=x[1],S=x[2],C=n.data.get(i.dataId).values,E=(0,r.Z)(f,3),T=E[0],R=E[1],F=E[2],I=g.batchSize,M=g.filterHeight,A=g.filterWidth,N=g.inChannels,D=g.inHeight,L=g.inWidth,B=g.outChannels,P=g.outHeight,j=g.outWidth,z=g.strideHeight,G=g.strideWidth,W=M-1-g.padInfo.top,U=A-1-g.padInfo.left,Z=B/N,H=0;H<I;++H)for(var V=0;V<N;++V)for(var K=0;K<D;++K)for(var X=K-W,q=Math.max(0,Math.ceil(X/z)),Y=Math.min(P,(M+X)/z),$=0;$<L;++$){for(var J=$-U,Q=Math.max(0,Math.ceil(J/G)),ee=Math.min(j,(A+J)/G),te=0,ne=q;ne<Y;++ne)for(var re=ne*z-X,ae=Q;ae<ee;++ae)for(var ie=w*H+O*ne+S*ae,se=T*(M-1-re)+R*(A-1-(ae*G-J))+F*V,ue=0;ue<Z;++ue){te+=k[ie+(V*Z+ue)]*C[se+ue]}m[y*H+b*K+_*$+V]=te}return n.makeTensorInfo(h.shape,h.dtype,h.values)}};var pw={kernelName:ft,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=G(r.shape),o=n.data.get(r.dataId).values,i=hi([a,a],r.dtype),s=i.values,u=0;u<o.length;u++)s[u*a+u]=o[u];var l=[].concat((0,E.Z)(r.shape),(0,E.Z)(r.shape));return n.makeTensorInfo(l,i.dtype,i.values)}},cw={kernelName:gt,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,l=n,p=l.data.get(a.dataId).values,c=a.shape.length,d=l.data.get(o.dataId).values,f=o.shape.length,g=Ds(a.shape,o.shape,i,s,"NHWC",u),h=g.batchSize,m=g.inHeight,v=g.inWidth,y=g.inChannels,b=g.outHeight,_=g.outWidth,k=g.padInfo,x=g.strideHeight,w=g.strideWidth,O=g.filterHeight,S=g.filterWidth,C=g.dilationHeight,E=g.dilationWidth,T=g.outShape,R=G(T),F=T.length,I=$(a.dtype,R),M=0;M<h;++M)for(var A=0;A<b;++A)for(var N=A*x-k.top,D=0;D<_;++D)for(var L=D*w-k.left,B=0;B<y;++B){for(var P=Number.MIN_SAFE_INTEGER,j=0;j<O;++j){var z=N+j*C;if(z>=0&&z<m)for(var W=0;W<S;++W){var U=L+W*E;if(U>=0&&U<v){var Z=de([M,z,U,B],c,oe(a.shape)),H=de([j,W,B],f,oe(o.shape)),V=p[Z]+d[H];V>P&&(P=V)}}}I[de([M,A,D,B],F,oe(T))]=P}return{dataId:l.write(ra(I,a.dtype),T,a.dtype),shape:T,dtype:a.dtype}}},dw={kernelName:mt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,l=r.dilations,p=n,c=se(a.shape,p.data.get(a.dataId).values),d=se(o.shape,p.data.get(o.dataId).values),f=Ds(a.shape,o.shape,s,u,"NHWC",l),g=f.batchSize,h=f.inHeight,m=f.inWidth,v=f.inChannels,y=f.outHeight,b=f.outWidth,_=f.padInfo,k=f.strideHeight,x=f.strideWidth,w=f.filterHeight,O=f.filterWidth,S=f.dilationHeight,C=f.dilationWidth,E=f.outShape;P(i.rank===E.length,(function(){return"Error in ".concat(mt,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(i.rank)}));for(var T=se(E,p.data.get(i.dataId).values),R=pe(o.shape,o.dtype),F=0;F<g;++F)for(var I=0;I<y;++I)for(var M=I*k-_.top,A=0;A<b;++A)for(var N=A*x-_.left,D=0;D<v;++D){for(var L=Number.MIN_SAFE_INTEGER,B=0,j=0,z=0;z<w;++z){var G=M+z*S;if(G>=0&&G<h)for(var W=0;W<O;++W){var U=N+W*C;if(U>=0&&U<m){var Z=c[F][G][U][D]+d[z][W][D];Z>L&&(L=Z,B=z,j=W)}}}R[B][j][D]+=T[F][I][A][D]}return{dataId:p.write(ra(R,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},fw={kernelName:ht,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,l=r.dilations,p=n,c=se(a.shape,p.data.get(a.dataId).values),d=se(o.shape,p.data.get(o.dataId).values),f=Ds(a.shape,o.shape,s,u,"NHWC",l),g=f.batchSize,h=f.inHeight,m=f.inWidth,v=f.inChannels,y=f.outHeight,b=f.outWidth,_=f.padInfo,k=f.strideHeight,x=f.strideWidth,w=f.filterHeight,O=f.filterWidth,S=f.dilationHeight,C=f.dilationWidth,E=f.outShape;P(i.rank===E.length,(function(){return"Error in ".concat(ht,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(i.rank)}));for(var T=se(E,p.data.get(i.dataId).values),R=pe(a.shape,a.dtype),F=0;F<g;++F)for(var I=0;I<y;++I)for(var M=I*k-_.top,A=0;A<b;++A)for(var N=A*x-_.left,D=0;D<v;++D){for(var L=Number.MIN_SAFE_INTEGER,B=M<0?0:M,j=N<0?0:N,z=0;z<w;++z){var G=M+z*S;if(G>=0&&G<h)for(var W=0;W<O;++W){var U=N+W*C;if(U>=0&&U<m){var Z=c[F][G][U][D]+d[z][W][D];Z>L&&(L=Z,B=G,j=U)}}}R[F][B][j][D]+=T[F][I][A][D]}return{dataId:p.write(ra(R,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},gw=hk((function(e,t){return e*t})),hw=Lk((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),mw=Dk(fn,gw,hw),vw={kernelName:fn,backendName:"cpu",kernelFunc:mw};function yw(e){var t,n=e.inputs,a=e.backend,o=e.attrs,i=n.x,s=o.axis,u=o.keepDims;rk(i,"sum");var l=(t="bool"===i.dtype?Ak({inputs:{x:i},backend:a,attrs:{dtype:"int32"}}):ck({inputs:{x:i},backend:a})).shape.length,p=X(s,t.shape),c=Vu(p,l),d=p,f=t;null!=c&&(f=ex({inputs:{x:t},backend:a,attrs:{perm:c}}),d=Xu(d.length,l)),Hu("sum",d,f.shape.length);for(var g=Uu(f.shape,d),h=(0,r.Z)(g,2),m=h[0],v=h[1],y=Rk(a,m,Aa(f.dtype,"int32")),b=G(v),_=a.data.get(y.dataId).values,k=a.data.get(f.dataId).values,x=0;x<_.length;++x){for(var w=x*b,O=0,S=0;S<b;++S)O+=k[w+S];_[x]=O}if(u){var C=y;y=Gk({inputs:{x:y},backend:a,attrs:{shape:Zu(y.shape,p)}}),a.disposeIntermediateTensorInfo(C)}return a.disposeIntermediateTensorInfo(t),null!=c&&a.disposeIntermediateTensorInfo(f),y}var bw={kernelName:er,backendName:"cpu",kernelFunc:yw};var _w={kernelName:yt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=vc(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;bc(o.length,s,r);for(var u=_c(i,s),l=u.path,p=u.steps,c=p.length,d=null,f=o.length,g=[],h=0;h<c;++h){var m,v=(0,C.Z)(p[h]);try{for(v.s();!(m=v.n()).done;){var y=m.value,b=yc(f,s[y]),_=b.permutationIndices,k=b.expandDims,x=void 0;kc(_)?x=r[y]:(x=ex({inputs:{x:r[y]},backend:n,attrs:{perm:_}}),g.push(x));for(var w=x.shape.slice(),O=0;O<k.length;++O)w.splice(k[O],0,1);W(x.shape,w)||(x=Gk({inputs:{x:x},backend:n,attrs:{shape:w}}),g.push(x)),null===d?d=x:(d=mw({inputs:{a:x,b:d},backend:n}),g.push(d))}}catch(yB){v.e(yB)}finally{v.f()}h<c-1&&(l[h]>=0&&(d=yw({inputs:{x:d},backend:n,attrs:{axis:l[h]-(o.length-f),keepDims:!1}}),g.push(d)),f--)}for(var S=0,E=g;S<E.length;S++){var T=E[S];T!==d&&n.disposeIntermediateTensorInfo(T)}return d}};var kw={kernelName:_t,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;rk([r,a],"eluGrad");for(var o=new Float32Array(G(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<i.length;++u){var l=i[u];o[u]=l>=0?s[u]:s[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",o)}},xw=hk((function(e,t){return e===t?1:0})),ww=Dk(xt,xw,null,"bool"),Ow={kernelName:xt,backendName:"cpu",kernelFunc:ww},Sw=sk(kt,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),Cw={kernelName:kt,backendName:"cpu",kernelFunc:Sw},Ew=ik((function(e){return Math.exp(e)})),Tw=uk(wt,Ew,"float32"),Rw={kernelName:wt,backendName:"cpu",kernelFunc:Tw};function Fw(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(P(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),Gk({inputs:{x:a},backend:n,attrs:{shape:s}})}var Iw={kernelName:Ot,backendName:"cpu",kernelFunc:Fw},Mw=ik((function(e){return Math.expm1(e)})),Aw=uk(St,Mw),Nw={kernelName:St,backendName:"cpu",kernelFunc:Aw},Dw=hk((function(e,t){return e/t})),Lw=Dk(vt,Dw),Bw={kernelName:vt,backendName:"cpu",kernelFunc:Lw},Pw=hk((function(e,t){return e-t})),jw=Lk((function(e,t,n,r){return{real:e-n,imag:t-r}})),zw=Dk(mr,Pw,jw),Gw={kernelName:mr,backendName:"cpu",kernelFunc:zw};function Ww(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,l=[a,o],p=G(l),c=Y("float32",p),d=Y("float32",p),f=0;f<a;f++){for(var g=Cx({inputs:{x:s},backend:n,attrs:{begin:[f,0],size:[1,o]}}),h=Cx({inputs:{x:u},backend:n,attrs:{begin:[f,0],size:[1,o]}}),m=Ek({inputs:{real:g,imag:h},backend:n}),v=Uw(m,t,n),y=lc(v.real,v.imag),b=0;b<o;b++){var _=pc(y,b);c[f*o+b]=_.real,d[f*o+b]=_.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m)}var k=n.makeTensorInfo(l,"float32",c),x=n.makeTensorInfo(l,"float32",d),w=Ek({inputs:{real:k,imag:x},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(x),w}function Uw(e,t,n){var r=G(e.shape),a=n.data.get(e.dataId),o=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((v=r)&v-1)){var s=Zw(o,i,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(u,"float32",s.real),p=n.makeTensorInfo(u,"float32",s.imag),c=n.makeTensorInfo([],"float32",na(r,"float32")),d=ck({inputs:{x:c},backend:n}),f=Bw.kernelFunc({inputs:{a:l,b:c},backend:n}),g=Bw.kernelFunc({inputs:{a:p,b:d},backend:n}),h=n.data.get(f.dataId).values,m=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),{real:h,imag:m}}return s}var v,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=dc(a*s,t,n),l=pc(e,s);o+=l.real*u.real-l.imag*u.imag,i+=l.real*u.imag+l.imag*u.real}n&&(o/=t,i/=t),cc(r,o,i,a)}return r}(lc(o,i),r,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(y)}function Zw(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=lc(e,t),i=n/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(o),u=s.real,l=s.imag,p=[u.length],c=a.makeTensorInfo(p,"float32",u),d=a.makeTensorInfo(p,"float32",l),f=Ek({inputs:{real:c,imag:d},backend:a}),g=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(o),h=g.real,m=g.imag,v=[h.length],y=a.makeTensorInfo(v,"float32",h),b=a.makeTensorInfo(v,"float32",m),_=Ek({inputs:{real:y,imag:b},backend:a}),k=Zw(u,l,i,r,a),x=k.real,w=k.imag,O=[x.length],S=a.makeTensorInfo(O,"float32",x),C=a.makeTensorInfo(O,"float32",w),E=Ek({inputs:{real:S,imag:C},backend:a}),T=Zw(h,m,i,r,a),R=T.real,F=T.imag,I=[R.length],M=a.makeTensorInfo(I,"float32",R),A=a.makeTensorInfo(I,"float32",F),N=Ek({inputs:{real:M,imag:A},backend:a}),D=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}(n,r),L=[D.real.length],B=a.makeTensorInfo(L,"float32",D.real),P=a.makeTensorInfo(L,"float32",D.imag),j=Ek({inputs:{real:B,imag:P},backend:a}),z=mw({inputs:{a:j,b:N},backend:a}),G=jk({inputs:{a:E,b:z},backend:a}),W=zw({inputs:{a:E,b:z},backend:a}),U=Fk({inputs:{input:G},backend:a}),Z=Fk({inputs:{input:W},backend:a}),H=zx({inputs:{input:G},backend:a}),V=zx({inputs:{input:W},backend:a}),K=Wx({inputs:[U,Z],backend:a,attrs:{axis:0}}),X=Wx({inputs:[H,V],backend:a,attrs:{axis:0}}),q=a.data.get(K.dataId).values,Y=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(X),{real:q,imag:Y}}var Hw={kernelName:Ct,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=G(r.shape),o=r.shape[r.shape.length-1],i=Gk({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=Ww(i,!1,n),u=Gk({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}};function Vw(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||ne(a),i=$(o,G(r));return function(e,t,n){e.fill(t)}(i,a),t.makeTensorInfo(r,o,i)}var Kw={kernelName:Et,backendName:"cpu",kernelFunc:Vw};var Xw={kernelName:Tt,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),a=t.image,o=n,i=Y(a.dtype,G(a.shape)),s=(0,r.Z)(a.shape,4),u=s[0],l=s[1],p=s[2],c=s[3],d=o.data.get(a.dataId).values,f=0;f<u;f++)for(var g=f*p*l*c,h=0;h<l;h++)for(var m=h*(p*c),v=0;v<p;v++)for(var y=v*c,b=0;b<c;b++){var _=Math.round(p-v-1),k=g+m+y+b,x=d[k];if(_>=0&&_<p)x=d[g+m+_*c+b];i[k]=x}return{dataId:o.write(i,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},qw=ik((function(e){return Math.floor(e)})),Yw=uk(Rt,qw),$w={kernelName:Rt,backendName:"cpu",kernelFunc:Yw},Jw=hk((function(e,t){return Math.floor(e/t)})),Qw=Dk(Ft,Jw,null,"int32"),eO={kernelName:Ft,backendName:"cpu",kernelFunc:Qw};var tO={kernelName:Fr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,p=r.dataFormat,c=r.dilations,d=r.dimRoundingMode,f=r.activation,g=r.leakyreluAlpha,h=Zx({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:l,dataFormat:p,dilations:c,dimRoundingMode:d}});if(i){var m=h;if("NCHW"===p&&1===i.shape.length&&1!==i.shape[0]){var v=Gk({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});h=jk({inputs:{a:h,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else h=jk({inputs:{a:h,b:i},backend:n});n.disposeIntermediateTensorInfo(m)}if(f){var y=h;if("NCHW"===p&&"prelu"===f&&1===s.shape.length&&1!==s.shape[0]){var b=Gk({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});h=Ck(n,h,f,b,g),n.disposeIntermediateTensorInfo(b)}else h=Ck(n,h,f,s,g);n.disposeIntermediateTensorInfo(y)}return h}};var nO={kernelName:Ir,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,p=r.dataFormat,c=r.dilations,d=r.dimRoundingMode,f=r.activation,g=r.leakyreluAlpha,h=iw({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:l,dataFormat:p,dilations:c,dimRoundingMode:d}});if(i){var m=h;h=jk({inputs:{a:h,b:i},backend:n}),n.disposeIntermediateTensorInfo(m)}if(f){var v=h;h=Ck(n,h,f,s,g),n.disposeIntermediateTensorInfo(v)}return h}};function rO(e,t,n,r,a,o,i,s,u){for(var l=hi([r,o],n),p=0;p<r;p++){for(var c=[],d=0,f=0;f<a;f++){var g=e[p*a+f];d+=g*i[f],c.push(g)}if(d<0||d>=u/o)throw new Error("Invalid indices: ".concat(c," does not index into ").concat(s));for(var h=0;h<o;h++)l.values[p*o+h]=t.get.apply(t,(0,E.Z)(t.indexToLoc(d*o+h)))}return l}var aO={kernelName:At,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.params,o=t.indices,i=G(a.shape),s=o.shape,u=s[s.length-1],l=Qp(a,o),p=(0,r.Z)(l,4),c=p[0],d=p[1],f=p[2],g=p[3];if(0===d)return n.makeTensorInfo(c,a.dtype,[]);var h=rO(n.data.get(o.dataId).values,n.bufferSync(a),a.dtype,d,u,f,g,a.shape,i);return n.makeTensorInfo(c,a.dtype,h.values)}};function oO(e,t,n){for(var r=hi(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],s=o[2],u=t.locToIndex([i,s]);o[2]=t.values[u];var l=e.locToIndex(o);0<=l&&l<e.values.length&&(r.values[a]=e.values[l])}return r}var iO={kernelName:Mt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims;rk([a,o],"gatherV2");for(var u=X(i,a.shape)[0],l=n.data.get(o.dataId).values,p=a.shape[u],c=function(){var e=l[d];P(e<=p-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(p-1,"]")}))},d=0;d<l.length;++d)c();var f=s;null==s&&(f=0);var g=G(o.shape),h=Ec(a,o,u,f),m=Gk({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),v=Gk({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,g/h.batchSize]}}),y=[h.batchSize,h.outerSize,g/h.batchSize,h.sliceSize],b=n.bufferSync(v),_=oO(n.bufferSync(m),b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(h.outputShape,_.dtype,_.values)}},sO=hk((function(e,t){return e>t?1:0})),uO=Dk(Nt,sO,null,"bool"),lO={kernelName:Nt,backendName:"cpu",kernelFunc:uO},pO=hk((function(e,t){return e>=t?1:0})),cO=Dk(Dt,pO,null,"bool"),dO={kernelName:Dt,backendName:"cpu",kernelFunc:cO};var fO={kernelName:Bt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=G(r.shape),o=r.shape[r.shape.length-1],i=Gk({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=Ww(i,!0,n),u=Gk({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}},gO=sk(jt,(function(e){return Number.isFinite(e)?1:0}),"bool"),hO={kernelName:jt,backendName:"cpu",kernelFunc:gO},mO=sk(zt,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),vO={kernelName:zt,backendName:"cpu",kernelFunc:mO},yO=sk(Gt,(function(e){return Number.isNaN(e)?1:0}),"bool"),bO={kernelName:Gt,backendName:"cpu",kernelFunc:yO},_O=hk((function(e,t){return e<t?1:0})),kO=Dk(Ut,_O,null,"bool"),xO={kernelName:Ut,backendName:"cpu",kernelFunc:kO},wO=hk((function(e,t){return e<=t?1:0})),OO=Dk(Zt,wO,null,"bool"),SO={kernelName:Zt,backendName:"cpu",kernelFunc:OO};function CO(e,t,n){var r=(t-e)/(n-1),a=le(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}var EO={kernelName:Ht,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=CO(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},TO=ik((function(e){return Math.log(e)})),RO=uk(Vt,TO),FO={kernelName:Vt,backendName:"cpu",kernelFunc:RO},IO=sk(Kt,(function(e){return Math.log1p(e)})),MO={kernelName:Kt,backendName:"cpu",kernelFunc:IO},AO=hk((function(e,t){return e&&t})),NO=Dk(Xt,AO,null,"bool"),DO={kernelName:Xt,backendName:"cpu",kernelFunc:NO},LO=sk(qt,(function(e){return e?0:1}),"bool"),BO={kernelName:qt,backendName:"cpu",kernelFunc:LO},PO=hk((function(e,t){return e||t})),jO=Dk(Yt,PO,null,"bool"),zO={kernelName:Yt,backendName:"cpu",kernelFunc:jO};var GO={kernelName:$t,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta;rk(a,"LRN");var l=a.shape[3],p=l-1,c=n.data.get(a.dataId).values,d=G(a.shape),f=new Float32Array(d);function g(e){for(var t=e%l,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,p),a=0;n<=r;n++){var i=c[n];a+=i*i}return a}for(var h=0;h<d;h++){var m=g(h),v=c[h]*Math.pow(i+s*m,-u);f[h]=v}return n.makeTensorInfo(a.shape,a.dtype,f)}};var WO={kernelName:Jt,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,p=r.beta;rk(i,"LRNGrad");for(var c=G(i.shape),d=i.shape[3],f=n.data.get(i.dataId).values,g=n.data.get(a.dataId).values,h=n.data.get(o.dataId).values,m=new Float32Array(c),v=c,y=0;y<v;y++){for(var b=y%d,_=y-b+Math.max(0,b-s),k=y-b+Math.min(d,b+s+1),x=0,w=_;w<k;w++)x+=Math.pow(g[w],2);x=l*x+u;for(var O=_;O<k;O++){var S=-2*l*p*g[O]*h[y]/x;y===O&&(S+=Math.pow(x,-p)),S*=f[y],m[O]+=S}}return n.makeTensorInfo(i.shape,a.dtype,m)}};function UO(e,t,n,r){for(var a=Y(r,G(n)),o=0;o<a.length;++o){for(var i=o*t,s=e[i],u=0;u<t;++u){var l=e[i+u];(Number.isNaN(l)||l>s)&&(s=l)}a[o]=s}return a}function ZO(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.reductionIndices,s=a.keepDims,u=n,l=o.shape,p=l.length,c=X(i,l),d=c,f=Vu(d,p),g=u.data.get(o.dataId).values;if(null!=f){for(var h=new Array(p),m=0;m<h.length;m++)h[m]=l[f[m]];g=Qk(g,l,o.dtype,f,h),d=Xu(d.length,p),l=h}rk(o,"max"),Hu("max",d,p);var v=Uu(l,d),y=(0,r.Z)(v,2),b=y[0],_=UO(g,G(y[1]),b,o.dtype),k=u.write(_,b,o.dtype),x=b;s&&(x=Zu(b,c));return{dataId:k,shape:x,dtype:o.dtype}}var HO={kernelName:Qt,backendName:"cpu",kernelFunc:ZO},VO=hk((function(e,t){return Math.max(e,t)})),KO=Dk(en,VO),XO={kernelName:en,backendName:"cpu",kernelFunc:KO};var qO={kernelName:tn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;rk(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;P(Vs(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var l,p=Ls(a.shape,o,i,1,s,u);if(1===p.filterWidth&&1===p.filterHeight&&W(p.inShape,p.outShape))l=ck({inputs:{x:a},backend:n});else{var c=n.data.get(a.dataId).values,d=oe(a.shape),f=vx(c,a.shape,a.dtype,d,p,"max");l=n.makeTensorInfo(p.outShape,a.dtype,f.values)}return l}};var YO={kernelName:rn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;rk(a,"maxPool3d");var p=Bs(a.shape,o,i,1,s,u,l),c=bx(n.data.get(a.dataId).values,a.shape,a.dtype,oe(a.shape),p,"max");return n.makeTensorInfo(c.shape,"float32",c.values)}};var $O={kernelName:an,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;rk([a,o],"maxPool3DGrad");for(var p=Bs(o.shape,i,s,1,u,l),c=function(e,t){for(var n=hi(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,p=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=t.padInfo.front,f=t.padInfo.top,g=t.padInfo.left,h=0;h<t.batchSize;++h)for(var m=0;m<t.inChannels;++m)for(var v=0;v<t.outDepth;++v){for(var y=v*r-d,b=y;b<0;)b+=i;for(var _=Math.min(t.inDepth,l+y),k=0;k<t.outHeight;++k){for(var x=k*a-f,w=x;w<0;)w+=s;for(var O=Math.min(t.inHeight,p+x),S=0;S<t.outWidth;++S){for(var C=S*o-g,E=C;E<0;)E+=u;for(var T=Math.min(t.inWidth,c+C),R=Number.NEGATIVE_INFINITY,F=-1,I=b;I<_;I+=i)for(var M=I-y,A=w;A<O;A+=s)for(var N=A-x,D=E;D<T;D+=u){var L=D-C,B=e.get(h,I,A,D,m);B>=R&&(R=B,F=M*p*c+N*p+L)}n.set(F,h,v,k,S,m)}}}return n}(n.bufferSync(o),p),d=p.strideDepth,f=p.strideHeight,g=p.strideWidth,h=p.dilationDepth,m=p.dilationHeight,v=p.dilationWidth,y=p.effectiveFilterDepth,b=p.effectiveFilterHeight,_=p.effectiveFilterWidth,k=y-1-p.padInfo.front,x=_-1-p.padInfo.left,w=b-1-p.padInfo.top,O=hi(o.shape,"float32"),S=n.bufferSync(a),C=0;C<p.batchSize;++C)for(var E=0;E<p.inChannels;++E)for(var T=0;T<p.inDepth;++T)for(var R=0;R<p.inHeight;++R)for(var F=0;F<p.inWidth;++F){for(var I=T-k,M=R-w,A=F-x,N=0,D=0;D<y;D+=h){var L=(I+D)/d;if(!(L<0||L>=p.outDepth||Math.floor(L)!==L))for(var B=0;B<b;B+=m){var P=(M+B)/f;if(!(P<0||P>=p.outHeight||Math.floor(P)!==P))for(var j=0;j<_;j+=v){var z=(A+j)/g;if(!(z<0||z>=p.outWidth||Math.floor(z)!==z)){var G=y*b*_-1-c.get(C,L,P,z,E)===D*b*_+B*_+j?1:0;if(0!==G)N+=S.get(C,L,P,z,E)*G}}}}O.set(N,C,T,R,F,E)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}};var JO={kernelName:nn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;rk([o,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,p=r.dimRoundingMode,c=Ls(i.shape,s,u,1,l,p),d=n.data.get(i.dataId).values,f=hi(c.outShape,i.dtype,yx(d,i.shape,i.dtype,c).values),g=c.strideHeight,h=c.strideWidth,m=c.dilationHeight,v=c.dilationWidth,y=c.effectiveFilterHeight,b=c.effectiveFilterWidth,_=b-1-c.padInfo.left,k=y-1-c.padInfo.top,x=hi(i.shape,"float32"),w=n.data.get(a.dataId).values,O=hi(a.shape,"float32",w),S=0;S<c.batchSize;++S)for(var C=0;C<c.inChannels;++C)for(var E=0;E<c.inHeight;++E)for(var T=0;T<c.inWidth;++T){for(var R=E-k,F=T-_,I=0,M=0;M<y;M+=m){var A=(R+M)/g;if(!(A<0||A>=c.outHeight||Math.floor(A)!==A))for(var N=0;N<b;N+=v){var D=(F+N)/h;if(!(D<0||D>=c.outWidth||Math.floor(D)!==D)){var L=y*b-1-f.get(S,A,D,C)===M*b+N?1:0;if(0!==L)I+=O.get(S,A,D,C)*L}}}x.set(I,S,E,T,C)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var QO={kernelName:on,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,o=t.x,i=n.filterSize,s=n.strides,u=n.pad,l=n.includeBatchInIndex,p=a;rk(o,"MaxPoolWithArgmax");var c=p.data.get(o.dataId).values,d=Ls(o.shape,i,s,[1,1],u),f=function(e,t,n,r,a){var o=vx(e,0,n,oe(t),a,"max"),i=yx(e,t,n,a,!0,r);return[o.values,i.values]}(c,o.shape,o.dtype,l,d),g=(0,r.Z)(f,2),h=g[0],m=g[1],v=p.write(h,d.outShape,o.dtype),y=p.write(m,d.outShape,o.dtype);return[{dataId:v,shape:d.outShape,dtype:o.dtype},{dataId:y,shape:d.outShape,dtype:"int32"}]}};var eS={kernelName:sn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=X(o,a.shape),u=G(Uu(a.shape,s)[1]),l=[],p=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(p);var c=Ak({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(c);var d=Lw({inputs:{a:c,b:p},backend:n});l.push(d);var f=yw({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:i}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}};var tS={kernelName:un,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.axis,s=a.keepDims;rk(o,"min");var u=X(i,o.shape),l=u,p=Vu(l,o.shape.length),c=o;null!=p&&(c=ex({inputs:{x:o},backend:n,attrs:{perm:p}}),l=Xu(l.length,o.shape.length)),Hu("min",l,c.shape.length);for(var d=Uu(c.shape,l),f=(0,r.Z)(d,2),g=f[0],h=G(f[1]),m=le(G(g),c.dtype),v=n.data.get(c.dataId).values,y=0;y<m.length;++y){for(var b=y*h,_=v[b],k=0;k<h;++k){var x=v[b+k];(Number.isNaN(x)||x<_)&&(_=x)}m[y]=_}null!=p&&n.disposeIntermediateTensorInfo(c);var w=n.makeTensorInfo(g,c.dtype,m);if(s){var O=Gk({inputs:{x:w},backend:n,attrs:{shape:Zu(g,u)}});return n.disposeIntermediateTensorInfo(w),O}return w}},nS=hk((function(e,t){return Math.min(e,t)})),rS=Dk(ln,nS),aS={kernelName:ln,backendName:"cpu",kernelFunc:rS};var oS={kernelName:pn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;rk(a,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),l=o.map((function(e,t){return e[0]+a.shape[t]})),p="reflect"===i?0:1,c=n.data.get(a.dataId).values,d=a.shape.length,f=oe(a.shape),g=G(s),h=s.length,m=oe(s),v=Y(a.dtype,g),y=0;y<g;y++){for(var b=fe(y,h,m),_=0;_<h;_++)b[_]<u[_]?b[_]=2*u[_]-b[_]-p:b[_]>=l[_]&&(b[_]=2*(l[_]-1)-b[_]+p);b=b.map((function(e,t){return e-u[t]}));var k=de(b,d,f);v[y]=c[k]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},iS=hk((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),sS=Dk(cn,iS),uS={kernelName:cn,backendName:"cpu",kernelFunc:sS};function lS(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(s));var u=X([s],a.shape),l=ZO({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),p=Zu(l.shape,u),c=Gk({inputs:{x:l},backend:n,attrs:{shape:p}}),d=zw({inputs:{a:a,b:c},backend:n}),f=Tw({inputs:{x:d},backend:n}),g=yw({inputs:{x:f},backend:n,attrs:{axis:u,keepDims:!1}}),h=Gk({inputs:{x:g},backend:n,attrs:{shape:p}}),m=Lw({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(h),m}var pS={kernelName:rr,backendName:"cpu",kernelFunc:lS};var cS={kernelName:dn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized;rk(a,"multinomial");for(var u=s?a:lS({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],p=u.shape[1],c=n.data.get(u.dataId).values,d=[l,o],f=le(G(d),"int32"),g=0;g<l;++g){var h=g*p,m=new Float32Array(p-1);m[0]=c[h];for(var v=1;v<m.length;++v)m[v]=m[v-1]+c[h+v];for(var y=al.alea(i.toString()),b=g*o,_=0;_<o;++_){var k=y();f[b+_]=m.length;for(var x=0;x<m.length;x++)if(k<m[x]){f[b+_]=x;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",f)}};function dS(e,t,n){var r=na(-1,n);return gw([],t,r,e,n)}var fS={kernelName:gn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.x;rk(a,"neg");var o=dS(n.data.get(a.dataId).values,a.shape,a.dtype),i=(0,r.Z)(o,2),s=i[0],u=i[1];return n.makeTensorInfo(u,a.dtype,s)}},gS=ap;var hS={kernelName:mn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;rk(a,"NonMaxSuppression");var l=n.data.get(a.dataId).values,p=n.data.get(o.dataId).values,c=gS(l,p,i,s,u).selectedIndices;return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}},mS=op;var vS={kernelName:vn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize;rk(a,"NonMaxSuppressionPadded");var p=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,d=mS(p,c,i,s,u,l),f=d.selectedIndices,g=d.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}},yS=ip;var bS={kernelName:yn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma;rk(a,"NonMaxSuppressionWithScore");var p=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,d=yS(p,c,i,s,u,l),f=d.selectedIndices,g=d.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}},_S=hk((function(e,t){return e!==t?1:0})),kS=Dk(hn,_S,null,"bool"),xS={kernelName:hn,backendName:"cpu",kernelFunc:kS};var wS={kernelName:_n,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.dtype,i=r.depth,s=r.onValue,u=r.offValue;rk(a,"oneHot");var l=G(a.shape),p=new Float32Array(l*i);p.fill(u);for(var c=n.data.get(a.dataId).values,d=0;d<l;++d)c[d]>=0&&c[d]<i&&(p[d*i+c[d]]=s);return n.makeTensorInfo([].concat((0,E.Z)(a.shape),[i]),o,p)}};function OS(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=Fk({inputs:{input:r},backend:n}),o=OS({inputs:{x:a},backend:n}),i=zx({inputs:{input:r},backend:n}),s=OS({inputs:{x:i},backend:n}),u=Ek({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return Vw({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var SS={kernelName:Cr,backendName:"cpu",kernelFunc:OS};var CS={kernelName:bn,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=Fk({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=zx({inputs:{input:a},backend:r}),u=OS({inputs:{x:s},backend:r}),l=Ek({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return Vw({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function ES(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Fw({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){j(a,e.shape,"All tensors passed to stack must have matching shapes"),P(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=Wx({inputs:t.map((function(e){var t=Fw({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var TS={kernelName:kn,backendName:"cpu",kernelFunc:ES};var RS={kernelName:xn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;rk(a,"pad");var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),l=n.data.get(a.dataId).values,p=G(a.shape),c=a.shape.length,d=oe(a.shape),f=G(s),g=s.length,h=oe(s),m=Y(a.dtype,f);0!==i&&m.fill(i);for(var v=0;v<p;v++){m[de(fe(v,c,d).map((function(e,t){return e+u[t]})),g,h)]=l[v]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},FS=hk((function(e,t){return Math.pow(e,t)})),IS=Dk(wn,FS),MS={kernelName:wn,backendName:"cpu",kernelFunc:IS};function AS(e,t,n,a){for(var o=Uu(e,a),i=(0,r.Z)(o,2),s=i[0],u=i[1],l=Aa(t,"int32"),p=le(G(s),l),c=G(u),d=0;d<p.length;++d){for(var f=d*c,g=1,h=0;h<c;++h)g*=n[f+h];p[d]=g}return{outVals:p,outShape:s,outDtype:l}}var NS={kernelName:Sn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;rk(a,"prod");var s=a.shape.length,u=X(o,a.shape),l=Vu(u,s),p=u,c=a,d=[];null!=l&&(c=ex({inputs:{x:a},backend:n,attrs:{perm:l}}),d.push(c),p=Xu(p.length,s));var f=n.data.get(c.dataId).values,g=AS(c.shape,c.dtype,f,p),h=g.outVals,m=g.outShape,v=g.outDtype,y=m;return i&&(y=Zu(m,u)),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,v,h)}};function DS(e,t,n,r){var a=[],o=0,i=t.length-1+n.length,s=new Array(i).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var o=1;o<r.length;++o)if(r[o-1]>r[o])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,l=0;l<t.length-1;++l){u*=t[l];for(var p=t[l+1],c=1;c<u+1;++c)s[l].push(c*p)}for(var d=0;d<e.length;++d){for(var f=e[d],g=e[d]+1,h=0;h<n.length;++h){var m=n[h],v=h+t.length-1;if(v>=0)for(var y=s[v],b=y[y.length-1]-m[f],_=f;_<g;++_)s[v].push(m[_+1]+b);f=m[f],g=m[g]}g!==f&&(a.push([f,g]),o+=g-f)}return{outSplits:s,valueSlices:a,numValues:o}}function LS(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function BS(e,t,n,r,a){var o=t.slice();o[0]=a;var i=$(n,G(o)),s=e.length;return function(e,t,n,r,a,o){var i,s=LS(t,2)[1],u=LS(o,2)[1],l=0,p=(0,C.Z)(n);try{for(p.s();!(i=p.n()).done;)for(var c=i.value,d=c[0];d<c[1];++d){for(var f=0;f<r;++f)a[l*u+f]=e[d*s+f];++l}}catch(yB){p.e(yB)}finally{p.f()}}(e,t,r,0===s?0:s/t[0],i,o),[i,o]}function PS(e,t,n,r,a,o,i,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=fe(r,t.length,oe(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(o,i,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=DS(o,i,e,r[0]),l=u.outSplits,p=u.valueSlices,c=u.numValues,d=function(e){for(var t=[],n=function(){var n=$("int32",e[r].length);t.push(n),e[r].forEach((function(e,t){return n[t]=e}))},r=0;r<e.length;++r)n();return t}(l),f=BS(n,r,a,p,c);return[d,f[0],f[1]]}var jS={kernelName:Cn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.paramsNestedSplits,i=t.paramsDenseValues,s=t.indices,u=(a.outputRaggedRank,o.map((function(e){return n.data.get(e.dataId).values}))),l=o.map((function(e){return e.shape})),p=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,d=PS(u,l,p,i.shape,i.dtype,c,s.shape),f=(0,r.Z)(d,3),g=f[0],h=f[1],m=f[2],v=g.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),y=n.makeTensorInfo(m,i.dtype,h);return v.concat([y])}},zS=2147483647;function GS(e,t,n,r,a,o,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");var s=0===t.length,u=0===a.length,l=0===i.length,p=[];s||p.push(t[0]),u||p.push(a[0]),l||p.push(i[0]);for(var c=1;c<p.length;++c)if(p[c]!==p[c-1])throw new Error("starts, limits, and deltas must have the same shape");var d=0===p.length?1:p[0],f=$("int32",d+1);f[0]=0;for(var g=0;g<d;++g){var h=s?e[0]:e[g],m=u?r[0]:r[g],v=l?o[0]:o[g];if(0===v)throw new Error("Requires delta != 0");var y=void 0;if(v>0&&m<h||v<0&&m>h)y=0;else if((y=Math.ceil(Math.abs((m-h)/v)))>zS)throw new Error("Requires ((limit - start) / delta) <= ".concat(zS));f[g+1]=f[g]+y}for(var b=$(n,f[d]),_=0,k=0;k<d;++k)for(var x=f[k+1]-f[k],w=s?e[0]:e[k],O=l?o[0]:o[k],S=0;S<x;++S)b[_++]=w,w+=O;return[f,b]}var WS={kernelName:En,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.starts,o=t.limits,i=t.deltas,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,p=GS(s,a.shape,a.dtype,u,o.shape,l,i.shape),c=(0,r.Z)(p,2),d=c[0],f=c[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([f.length],a.dtype,f)]}},US=Lp,ZS=function(){function e(t,n,r,a,o,i,s,u,l,p){var c;(0,T.Z)(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=o,this.defaultValue=i,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=function(e){var t,n={FIRST_DIM_SIZE:Lp.FIRST_DIM_SIZE,VALUE_ROWIDS:Lp.VALUE_ROWIDS,ROW_LENGTHS:Lp.ROW_LENGTHS,ROW_SPLITS:Lp.ROW_SPLITS,ROW_LIMITS:Lp.ROW_LIMITS,ROW_STARTS:Lp.ROW_STARTS},r=[],a=(0,C.Z)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!(o in n))break;r.push(n[o])}}catch(yB){a.e(yB)}finally{a.f()}return r}(p),this.raggedRank=0===(c=this.rowPartitionTypes).length?0:c[0]===Lp.FIRST_DIM_SIZE?c.length-1:c.length}return(0,R.Z)(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===US.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===US.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case US.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case US.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(US[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return VS(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape;!function(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var o=e[a],i=t[a+1];if(o>=0&&i>=0&&1!==o&&o!==i)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(o," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(i))}}}(this.defaultValueShape,t);var n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=function(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var o=n[a],i=r[r.length-n.length+a],s=r[i];if(o>=0)if(s>=0){if(s!==o)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(o," but shape[").concat(a+e,"] = ").concat(s))}else r[i]=o}return r}(this.raggedRank,n,t),a=r;a[0]<0&&(a[0]=e);for(var o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],o=0,i=0;i<r;++i,o+=t)a.push(o);for(var s=r;s<e;++s)a.push(-1);return P(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,o=[],i=0;i<a-1;++i){var s=e[i+1]-e[i],u=Math.min(r,s),l=t[i];-1===l&&(u=0);for(var p=0;p<u;++p)o.push(l),l+=n;for(var c=0;c<s-u;++c)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,o=[];if(0===a)return[];var i=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));var u=t[s];o.push(u);for(var l=1;l<a;++l){var p=e[l];if(p===s)u>=0&&(++i<r?u+=n:u=-1);else{if(i=0,s=p,p>=t.length)throw new Error("Got nextValueRowId=".concat(p," which is not less than ").concat(t.length));u=t[p]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case US.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case US.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(US[o]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case US.FIRST_DIM_SIZE:return e[0];case US.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case US.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(US[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=VS(t,!1),o=$(this.valuesDType,G(a));if(n[0]*t[0]>0){for(var i=this.calculateFirstParentOutputIndex(e,n[0],t[0]),s=1;s<=this.raggedRank;++s){i=this.calculateOutputIndex(s-1,i,n[s],t[s])}this.setOutput(this.raggedRank,i,o,a)}return[a,o]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,o=n,i=r.slice(),s=G(i=i.slice(e+1)),u=t.length,l=this.defaultValue;if(l.length!==s&&1!==l.length){var p=this.defaultValueShape;ki((function(){var e=Ys(l,p),t=ru(e,i);l=t.dataSync()}))}for(var c=0,d=0,f=0,g=0;g<=u;++g){var h=g<u?t[g]:-1;if(h!==f){if(d<f){var m=a.subarray(c*s);HS(o.subarray(d*s),m,(f-d)*s)}if(g>=u){var v=n.length;h=Math.floor(v/s)}if(h>f)if(1===this.defaultValue.length)o.subarray(f*s,h*s).fill(this.defaultValue[0]),f=h;else for(;h>f;){HS(o.slice(f*s),l,s),++f}h<0?(c=g+1,d=f):(c=g,f=(d=f)+1)}else++f}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,o=1;o<t;++o){var i=e[o];i!==r&&(r=i,a=Math.max(o-n,a),n=o)}return Math.max(t-n,a)}}]),e}();function HS(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function VS(e,t){var n,r=[],a=(0,C.Z)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o<0){if(!t)throw new Error("Dimension ".concat(o," must be >= 0"));if(o<-1)throw new Error("Dimension ".concat(o," must be >= -1"));o=-1}r.push(o)}}catch(yB){a.e(yB)}finally{a.f()}return r}function KS(e,t,n,r,a,o,i,s,u,l){return new ZS(e,t,n,r,a,o,i,s,u,l).compute()}var XS={kernelName:Tn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.shape,i=t.values,s=t.defaultValue,u=t.rowPartitionTensors,l=a.rowPartitionTypes,p=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,f=u.map((function(e){return n.data.get(e.dataId).values})),g=u.map((function(e){return e.shape})),h=KS(p,o.shape,c,i.shape,i.dtype,d,s.shape,f,g,l),m=(0,r.Z)(h,2),v=m[0],y=m[1];return n.makeTensorInfo(v,i.dtype,y)}};function qS(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return le(0,r);var a=le(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return a}var YS={kernelName:Rn,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=qS(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},$S=sk(In,(function(e){return 1/e})),JS={kernelName:In,backendName:"cpu",kernelFunc:$S};var QS={kernelName:Ln,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.images,i=a.alignCorners,s=a.halfPixelCenters,u=a.size;rk(o,"resizeBilinear");for(var l=oe(o.shape),p=(0,r.Z)(u,2),c=p[0],d=p[1],f=(0,r.Z)(o.shape,4),g=f[0],h=f[1],m=f[2],v=f[3],y=n.data.get(o.dataId).values,b=new Float32Array(G([g,c,d,v])),_=[i&&c>1?h-1:h,i&&d>1?m-1:m],k=[i&&c>1?c-1:c,i&&d>1?d-1:d],x=0,w=_[0]/k[0],O=_[1]/k[1],S=0;S<g;S++)for(var C=0;C<c;C++){var E=void 0;E=s?w*(C+.5)-.5:w*C;for(var T=Math.max(0,Math.floor(E)),R=E-T,F=Math.min(h-1,Math.ceil(E)),I=S*l[0]+T*l[1],M=S*l[0]+F*l[1],A=0;A<d;A++){var N=void 0;N=s?O*(A+.5)-.5:O*A;for(var D=Math.max(0,Math.floor(N)),L=N-D,B=Math.min(m-1,Math.ceil(N)),P=I+D*l[2],j=M+D*l[2],z=I+B*l[2],W=M+B*l[2],U=0;U<v;U++){var Z=y[P+U],H=y[j+U],V=Z+(y[z+U]-Z)*L,K=V+(H+(y[W+U]-H)*L-V)*R;b[x++]=K}}}return n.makeTensorInfo([g,c,d,v],"float32",b)}};var eC={kernelName:Bn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.images,i=t.dy,s=a.alignCorners;rk([i,o],"resizeBilinearGrad");for(var u=oe(o.shape),l=(0,r.Z)(o.shape,4),p=l[0],c=l[1],d=l[2],f=l[3],g=(0,r.Z)(i.shape,3),h=g[1],m=g[2],v=new Float32Array(p*c*d*f),y=[s&&h>1?c-1:c,s&&m>1?d-1:d],b=[s&&h>1?h-1:h,s&&m>1?m-1:m],_=y[0]/b[0],k=y[1]/b[1],x=n.data.get(i.dataId).values,w=0,O=0;O<p;O++)for(var S=O*u[0],C=0;C<h;C++)for(var E=C*_,T=Math.floor(E),R=Math.min(Math.ceil(E),c-1),F=S+T*u[1],I=S+R*u[1],M=E-T,A=1-M,N=0;N<m;N++)for(var D=N*k,L=Math.floor(D),B=Math.min(Math.ceil(D),d-1),P=D-L,j=1-P,z=F+L*u[2],G=F+B*u[2],W=I+L*u[2],U=I+B*u[2],Z=A*j,H=A*P,V=M*j,K=M*P,X=0;X<f;X++){var q=x[w++];v[z+X]+=q*Z,v[G+X]+=q*H,v[W+X]+=q*V,v[U+X]+=q*K}return n.makeTensorInfo([p,d,c,f],"float32",v)}};var tC={kernelName:Nn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.images,i=a.alignCorners,s=a.halfPixelCenters,u=a.size;rk(o,"resizeNearestNeighbor");for(var l=oe(o.shape),p=(0,r.Z)(u,2),c=p[0],d=p[1],f=(0,r.Z)(o.shape,4),g=f[0],h=f[1],m=f[2],v=f[3],y=n.data.get(o.dataId).values,b=new Float32Array(g*c*d*v),_=[i&&c>1?h-1:h,i&&d>1?m-1:m],k=[i&&c>1?c-1:c,i&&d>1?d-1:d],x=_[0]/k[0],w=_[1]/k[1],O=0,S=0;S<g;S++)for(var C=S*l[0],E=0;E<c;E++){var T=s?x*(E+.5):x*E,R=Math.min(h-1,i?Math.round(T):Math.floor(T));s&&(R=Math.max(0,R));for(var F=C+R*l[1],I=0;I<d;I++){var M=s?w*(I+.5):w*I,A=Math.min(m-1,i?Math.round(M):Math.floor(M));s&&(A=Math.max(0,A));for(var N=F+A*l[2],D=0;D<v;D++){var L=y[N+D];b[O++]=L}}}return n.makeTensorInfo([g,c,d,v],o.dtype,b)}};var nC={kernelName:Dn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.images,i=t.dy,s=a.alignCorners;rk([i,o],"resizeNearestNeighborGrad");for(var u=oe(o.shape),l=oe(i.shape),p=(0,r.Z)(o.shape,4),c=p[0],d=p[1],f=p[2],g=p[3],h=(0,r.Z)(i.shape,3),m=h[1],v=h[2],y=new Float32Array(c*d*f*g),b=n.data.get(i.dataId).values,_=[s&&m>1?d-1:d,s&&v>1?f-1:f],k=[s&&m>1?m-1:m,s&&v>1?v-1:v],x=_[0]/k[0],w=_[1]/k[1],O=1/x,S=1/w,C=2*Math.ceil(O)+2,E=2*Math.ceil(S)+2,T=0;T<c;T++)for(var R=T*u[0],F=0;F<d;F++)for(var I=R+F*u[1],M=Math.floor(F*O),A=Math.floor(M-C/2),N=0;N<f;N++)for(var D=I+N*u[2],L=Math.floor(N*S),B=Math.floor(L-E/2),P=0;P<g;P++){for(var j=0,z=0;z<C;z++){var G=z+A;if(!(G<0||G>=m)){var W=R+G*l[1],U=G*x;if(F===Math.min(d-1,s?Math.round(U):Math.floor(U)))for(var Z=0;Z<E;Z++){var H=Z+B;if(!(H<0||H>=v)){var V=W+H*l[2],K=H*w;N===Math.min(f-1,s?Math.round(K):Math.floor(K))&&(j+=b[V+P])}}}}y[D+P]=j}return n.makeTensorInfo(o.shape,o.dtype,y)}};var rC={kernelName:jn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims;rk(a,"reverse");var i=a.shape.length,s=X(o,a.shape);if(0===i)return ck({inputs:{x:a},backend:n});for(var u=new ka(a.shape,a.dtype),l=n.bufferSync(a),p=function(){var e=u.indexToLoc(c),t=e.slice();s.forEach((function(e){return t[e]=a.shape[e]-1-t[e]})),u.set.apply(u,[l.get.apply(l,(0,E.Z)(t))].concat((0,E.Z)(e)))},c=0;c<u.size;c++)p();return n.makeTensorInfo(u.shape,u.dtype,u.values)}},aC={kernelName:Tr,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,a=e.backend,o=t.image,i=n.radians,s=n.fillValue,u=n.center,l=a,p=Y(o.dtype,G(o.shape)),c=(0,r.Z)(o.shape,4),d=c[0],f=c[1],g=c[2],h=c[3],m=Kp(u,f,g),v=(0,r.Z)(m,2),y=v[0],b=v[1],_=Math.sin(i),k=Math.cos(i),x=l.data.get(o.dataId).values,w=0;w<d;w++)for(var O=w*g*f*h,S=0;S<f;S++)for(var C=S*(g*h),E=0;E<g;E++)for(var T=E*h,R=0;R<h;R++){var F=[d,S,E,R],I=F[2],M=F[1],A=(I-y)*k-(M-b)*_,N=(I-y)*_+(M-b)*k;A=Math.round(A+y),N=Math.round(N+b);var D=s;if("number"!==typeof s&&(D=3===R?255:s[R]),A>=0&&A<g&&N>=0&&N<f)D=x[O+N*(g*h)+A*h+R];p[O+C+T+R]=D}return{dataId:l.write(p,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},oC=sk(zn,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),iC={kernelName:zn,backendName:"cpu",kernelFunc:oC},sC=ik((function(e){return 1/Math.sqrt(e)})),uC=uk(Gn,sC),lC={kernelName:Gn,backendName:"cpu",kernelFunc:uC};function pC(e,t,n,r,a,o,i,s,u,l){var p=[r/a,a],c=e.values,d=t.values;if(0===r)return hi(n,t.dtype);var f=u instanceof ka?u:hi(p,t.dtype);"string"===typeof u||"number"===typeof u?f.values.fill(u):"boolean"===typeof u&&f.values.fill(+u);for(var g=0;g<o;g++){for(var h=[],m=0,v=0;v<i;v++){var y=c[g*i+v];h.push(y),m+=y*s[v]}if(m<0||m>=r/a)throw new Error("Invalid indices: ".concat(h," does not index into ").concat(n));for(var b=0;b<a;b++)l?f.values[m*a+b]+=d[g*a+b]:f.values[m*a+b]=0===t.rank?d[0]:d[g*a+b]}return f}var cC={kernelName:Wn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=ec(0,a,i),u=s.sliceRank,l=s.numUpdates,p=s.sliceSize,c=s.strides,d=s.outputSize,f=pC(n.bufferSync(a),n.bufferSync(o),i,d,p,l,u,c,0,!0);return n.makeTensorInfo(i,f.dtype,f.values)}};function dC(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function fC(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var gC={kernelName:Zn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,o=t.values,i=r.side,s=function(e,t,n,r,a,o){for(var i=$("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),l=s*a,p=0;p<a;++p)i[l+p]="left"===o?dC(u,t[p+l]):fC(u,t[p+l]);return i}(n.data.get(a.dataId).values,n.data.get(o.dataId).values,a.shape[0],a.shape[1],o.shape[1],i);return n.makeTensorInfo(o.shape,"int32",s)}};var hC={kernelName:Hn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;rk([r,a,o],"select");for(var i=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,p=Aa(a.dtype,o.dtype),c=le(G(a.shape),p),d=0,f=0===i||i>1||1===a.shape.length?1:G(a.shape.slice(1)),g=0;g<s.length;g++)for(var h=0;h<f;h++)1===s[g]?c[d++]=u[g]:c[d++]=l[g];return n.makeTensorInfo(a.shape,p,c)}},mC=sk(Vn,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),vC={kernelName:Vn,backendName:"cpu",kernelFunc:mC},yC=sk(Yn,(function(e){return e<0?-1:e>0?1:0})),bC={kernelName:Yn,backendName:"cpu",kernelFunc:yC},_C=sk(Xn,(function(e){return Math.sin(e)})),kC={kernelName:Xn,backendName:"cpu",kernelFunc:_C},xC=sk(qn,(function(e){return Math.sinh(e)})),wC={kernelName:qn,backendName:"cpu",kernelFunc:xC},OC=Math.log(1.1920928955078125e-7)+2,SC=sk(Jn,(function(e){var t=e>-OC,n=e<OC,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),CC={kernelName:Jn,backendName:"cpu",kernelFunc:SC};var EC={kernelName:tr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;rk([a],"spaceToBatchND");var s=G(o),u=[[0,0]];u.push.apply(u,(0,E.Z)(i));for(var l=1+o.length;l<a.shape.length;++l)u.push([0,0]);var p=RS.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),c=Xp(p.shape,o,s,!1),d=qp(c.length,o.length,!1),f=Yp(p.shape,o,s,!1),g=Gk({inputs:{x:p},backend:n,attrs:{shape:c}}),h=ex({inputs:{x:g},backend:n,attrs:{perm:d}}),m=Gk({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(h),m}};function TC(e,t,n,r,a,o,i){var s=t[0],u=o[0],l=new Array(u),p=new Array(s),c=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[$(n,0),[0,c],$(a,0),l,p]}for(var d,f=!0,g=0,h=new Array(u).fill(0),m=0;m<s;++m){var v=e[m*c];if(v<0)throw new Error((d=v,"indices(".concat(m,", 0) is invalid: ").concat(d," < 0")));if(v>=u)throw new Error(Oc(m,v,u));++h[v],f=f&&v>=g,g=v}for(var y=!0,b=0;b<u;++b){var _=0===h[b];l[b]=_,y=y&&!_,h[b]=Math.max(h[b],1),b>0&&(h[b]+=h[b-1])}if(y&&f){for(var k=e,x=r,w=0;w<s;++w)p[w]=w;return[k,[s,c],x,l,p]}for(var O=h[u-1],S=$(n,O*c),C=$(a,O),E=new Array(u).fill(0),T=0;T<s;++T){var R=e[T*c],F=E[R],I=(0===R?0:h[R-1])+F;E[R]++;for(var M=0;M<c;++M)S[I*c+M]=e[T*c+M];C[I]=r[T],p[T]=I}for(var A=0;A<u;++A){if(0===E[A]){var N=0===A?0:h[A-1];S[N*c+0]=A;for(var D=1;D<c;++D)S[N*c+D]=0;C[N]=i}}return[S,[O,c],C,l,p]}var RC={kernelName:ar,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.indices,o=t.values,i=t.denseShape,s=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(o.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));var u=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,p=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values[0],d=TC(u,a.shape,a.dtype,l,o.dtype,p,c),f=(0,r.Z)(d,5),g=f[0],h=f[1],m=f[2],v=f[3],y=f[4];return[n.makeTensorInfo(h,a.dtype,g),n.makeTensorInfo([h[0]],o.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],a.dtype,new Int32Array(y))]}};function FC(e,t,n,r,a){for(var o,i,s=G(r),u=t[0],l=a.length,p=[],c=1,d=-1,f=0;f<l;++f){var g=a[f];if(-1===g){if(-1!==d)throw new Error((i=f,"only one output dimension may be -1, not both ".concat(d," and ").concat(i)));d=f,p.push(1)}else{if(g<0)throw new Error((o=g,"size ".concat(f," must be non-negative, not ").concat(o)));c*=g,p.push(g)}}if(-1!==d){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var h=Math.trunc(s/c);if(c*h!==s)throw new Error(function(e,t){var n=G(e),r=G(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,p));p[d]=h}if(G(p)!==s)throw new Error(function(e,t){var n=G(e),r=G(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,p));var m=r.length,v=[];if(m>0){v[m-1]=1;for(var y=m-2;y>=0;--y)v[y]=v[y+1]*r[y+1]}var b=[];if(l>0){b[l-1]=1;for(var _=l-2;_>=0;--_)b[_]=b[_+1]*p[_+1]}for(var k=$(n,u*l),x=0;x<u;++x){for(var w=0,O=0;O<m;++O)w+=e[x*m+O]*v[O];for(var S=0;S<l;++S)k[x*l+S]=Math.trunc(w/b[S]),w%=b[S]}return[k,[u,l],p]}var IC={kernelName:or,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.inputIndices,o=t.inputShape,i=t.newShape;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(o.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var s=Array.from(n.data.get(o.dataId).values),u=n.data.get(a.dataId).values,l=Array.from(n.data.get(i.dataId).values),p=FC(u,a.shape,a.dtype,s,l),c=(0,r.Z)(p,3),d=c[0],f=c[1],g=c[2];return[n.makeTensorInfo(f,a.dtype,d),n.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}};function MC(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],l=u[1],p=s>0?a[s-1]+1:0;if(p<0)throw new Error("segment ids must be >= 0");var c=t.slice();c[0]=p;var d=$(n,c.reduce((function(e,t){return e*t}),1));if(0===s)return p>0&&d.fill(i),[d,c];if(p<=0)throw new Error("segment ids must be >= 0");for(var f=0,g=1,h=0,m=a[f];;){var v=0;if(g<s){if(m===(v=a[g])){++g;continue}if(m>=v)throw new Error("segment ids are not increasing")}if(m<0||m>=p)throw new Error(Sc(m,p));m>h&&d.fill(i,h*l,m*l);for(var y=f;y<g;++y){var b=r[y];if(b<0||b>=u[0])throw new Error(Cc(y,r[y],u[0]));for(var _=0;_<l;_++)d[m*l+_]+=e[b*l+_]}if(o)for(var k=0;k<l;k++)d[m*l+k]/=g-f;if(f=g,h=m+1,m=v,++g>s)break}return h<p&&d.fill(i,h*l,p*l),[d,c]}var AC={kernelName:ir,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.data,o=t.indices,i=t.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,p=MC(s,a.shape,a.dtype,u,l,!0),c=(0,r.Z)(p,2),d=c[0],f=c[1];return n.makeTensorInfo(f,a.dtype,d)}};var NC={kernelName:sr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.data,o=t.indices,i=t.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,p=MC(s,a.shape,a.dtype,u,l),c=(0,r.Z)(p,2),d=c[0],f=c[1];return n.makeTensorInfo(f,a.dtype,d)}};var DC={kernelName:ur,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.sparseIndices,i=n.sparseValues,s=n.defaultValue,u=a.outputShape,l=ec(0,o,u),p=l.sliceRank,c=l.numUpdates,d=l.sliceSize,f=l.strides,g=l.outputSize,h=!1,m=r.bufferSync(o);switch(i.dtype){case"bool":t=pC(m,r.bufferSync(i),u,g,d,c,p,f,Boolean(r.data.get(s.dataId).values[0]),h);break;case"float32":t=pC(m,r.bufferSync(i),u,g,d,c,p,f,r.data.get(s.dataId).values[0],h);break;case"int32":t=pC(m,r.bufferSync(i),u,g,d,c,p,f,r.data.get(s.dataId).values[0],h);break;case"string":t=pC(m,r.bufferSync(i),u,g,d,c,p,f,ia(r.data.get(s.dataId).values[0]),h);break;default:throw new Error("Unsupported type ".concat(i.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var LC={kernelName:nr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=X(r.axis,a.shape)[0],s=wc(a,o,i),u=new Array(a.shape.length).fill(0),l=a.shape.slice();return s.map((function(e){var t=(0,E.Z)(l);t[i]=e;var r=Cx({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,r}))}},BC=ik((function(e){return Math.sqrt(e)})),PC=sk(Qn,(function(e){return Math.sqrt(e)})),jC={kernelName:Qn,backendName:"cpu",kernelFunc:PC},zC={kernelName:pr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;rk(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},GC=hk((function(e,t){var n=e-t;return n*n})),WC=Dk(lr,GC),UC={kernelName:lr,backendName:"cpu",kernelFunc:WC},ZC=ik((function(e,t){var n=t.pattern,r=t.replaceGlobal,a=t.rewrite;return e.replace(new RegExp(n,r?"g":""),a)})),HC=uk(cr,ZC),VC={kernelName:cr,backendName:"cpu",kernelFunc:HC},KC=sk(Er,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),XC={kernelName:Er,backendName:"cpu",kernelFunc:KC};function qC(e,t,n,r){for(var a=hi(e,t.dtype),o=0;o<a.size;o++){for(var i=a.indexToLoc(o),s=new Array(i.length),u=0;u<s.length;u++)s[u]=i[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,E.Z)(i)))}return a}var YC={kernelName:dr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,s=r.strides,u=r.beginMask,l=r.endMask,p=r.ellipsisMask,c=r.newAxisMask,d=r.shrinkAxisMask;rk(a,"stridedSlice");var f,g=Fs(a.shape,o,i,s,u,l,p,c,d),h=g.finalShapeSparse,m=g.finalShape,v=g.isIdentity,y=g.sliceDim0,b=g.isSimpleSlice,_=g.begin,k=g.end,x=g.strides;if(v)f=Gk({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){P(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var w=Cs(_,k,x),O=Cx({inputs:{x:a},backend:n,attrs:{begin:_,size:w}});f=Gk({inputs:{x:O},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(O)}else{var S=qC(h,n.bufferSync(a),x,_);f=n.makeTensorInfo(m,S.dtype,S.values)}return f}},$C=function(){function e(t,n,r,a,o,i){(0,T.Z)(this,e),this.separator=oa(t),this.nGramWidths=n,this.leftPad=oa(r),this.rightPad=oa(a),this.padWidth=o,this.preserveShort=i}return(0,R.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,o){for(var i=this,s=function(){var s=i.getPadWidth(o),l=Math.max(0,s-u),p=Math.max(0,s-(a-(u+1))),c=o-(l+p),d=t+(l>0?0:u-s),f=0;f+=l*i.leftPad.length;for(var g=0;g<c;++g)f+=e[d+g].length;f+=p*i.rightPad.length,f+=(l+p+c-1)*i.separator.length,n[r+u]=new Uint8Array(f);for(var h=n[r+u],m=0,v=function(e){return e.forEach((function(e){return h[m++]=e}))},y=0;y<l;++y)v(i.leftPad),v(i.separator);for(var b=0;b<c-1;++b)v(e[d+b]),v(i.separator);if(c>0){v(e[d+c-1]);for(var _=0;_<p;++_)v(i.separator),v(i.rightPad)}else{for(var k=0;k<p-1;++k)v(i.rightPad),v(i.separator);v(i.rightPad)}},u=0;u<a;++u)s()}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var i=1;i<a;++i){var s=t[i]>=o;if(!(s=s&&t[i]<=r))throw new Error("Invalid split value ".concat(t[i],", must be in [").concat(o,", ").concat(r,"]"));o=t[i]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var u=a-1,l=$("int32",a);if(0===r||0===a){for(var p=new Array(r),c=0;c<=u;++c)l[c]=0;return[p,l]}l[0]=0;for(var d=function(){var e=t[f]-t[f-1],r=0;n.nGramWidths.forEach((function(t){r+=n.getNumNGrams(e,t)})),n.preserveShort&&e>0&&0===r&&(r=1),l[f]=l[f-1]+r},f=1;f<=u;++f)d();for(var g=new Array(l[u]),h=function(r){var a=t[r],o=l[r];if(n.nGramWidths.forEach((function(i){var s=t[r+1]-t[r],u=n.getNumNGrams(s,i);n.createNGrams(e,a,g,o,u,i),o+=u})),n.preserveShort&&o===l[r]){var i=t[r+1]-t[r];if(0===i)return"continue";var s=i+2*n.padWidth;n.createNGrams(e,a,g,o,1,s)}},m=0;m<u;++m)h(m);return[g,l]}}]),e}();function JC(e,t,n,r,a,o,i,s){return new $C(n,r,a,o,i,s).compute(e,t)}var QC={kernelName:fr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=a.separator,i=a.nGramWidths,s=a.leftPad,u=a.rightPad,l=a.padWidth,p=a.preserveShortSequences,c=t.data,d=t.dataSplits,f=JC(n.data.get(c.dataId).values,n.data.get(d.dataId).values,o,i,s,u,l,p),g=(0,r.Z)(f,2),h=g[0],m=g[1];return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(d.shape,"int32",m)]}};function eE(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){var i=e.subarray(a,o);n&&0===i.length||r.push(i),a=o+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var l=e.subarray(0,u);n&&0===l.length||r.push(l),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var p=0;p<e.length;++p)r.push(e.subarray(p,p+1))}function tE(e,t,n){for(var r=e.length,a=[],o=0,i=0,s=new Array(r),u=0;u<r;++u){var l=a.length;eE(e[u],t,n,a);var p=a.length-l;s[u]=p,o+=p,i=Math.max(i,p)}for(var c=$("int32",2*o),d=new Array(o),f=[r,i],g=0,h=0;h<r;++h)for(var m=0;m<s[h];++m)c[2*g]=h,c[2*g+1]=m,d[g]=a[g],++g;return[c,d,f]}var nE={kernelName:gr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs.skipEmpty,o=t.input,i=t.delimiter;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var s=tE(n.data.get(o.dataId).values,n.data.get(i.dataId).values[0],a),u=(0,r.Z)(s,3),l=u[0],p=u[1],c=u[2],d=p.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",p),n.makeTensorInfo([2],"int32",new Int32Array(c))]}};function rE(e,t){for(var n=$("int32",e.length),r=0;r<e.length;++r)n[r]=ta(e[r]).modulo(t).getLowBitsUnsigned();return n}var aE={kernelName:hr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=rE(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",o)}},oE=sk(vr,(function(e){return Math.tan(e)})),iE={kernelName:vr,backendName:"cpu",kernelFunc:oE},sE=sk(yr,(function(e){return Math.tanh(e)}));var uE={kernelName:Un,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.tensor,a=t.indices,o=t.updates,i=ec(0,a,r.shape),s=i.sliceRank,u=i.numUpdates,l=i.sliceSize,p=i.strides,c=i.outputSize,d=n.bufferSync(a),f=n.bufferSync(o),g=n.bufferSync(r),h=pC(d,f,r.shape,c,l,u,s,p,g,!1);return n.makeTensorInfo(r.shape,h.dtype,h.values)}};function lE(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=hi(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];var l=e.locToIndex(s);a.values[o]=e.values[l]}return a}var pE={kernelName:br,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;rk(a,"tile");var i=lE(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},cE=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function dE(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,i=Math.log(a),s=.5*Math.exp(2*i/3),u=.5*Math.sqrt(i*s*(a-s)/a)*Math.sign(o-a/2);dE(e,t,Math.max(n,Math.floor(t-o*s/a+u)),Math.min(r,Math.floor(t+(a-o)*s/a+u)))}var l=e[t],p=n,c=r;for(L(e,n,t),cE(e[r],l)>0&&L(e,n,r);p<c;){for(L(e,p,c),p++,c--;cE(e[p],l)<0;)p+=1;for(;cE(e[c],l)>0;)c-=1}0===cE(e[n],l)?L(e,n,c):L(e,c+=1,r),c<=t&&(n=c+1),t<=c&&(r=c-1)}}function fE(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,s=o,u=Y(n,i*r),l=Y("int32",i*r),p=function(){var t=c*s,n=e.subarray(t,t+s),o=new Array(n.length);n.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(dE(o,r),o=o.slice(0,r)),a&&o.sort(cE);for(var i=c*r,p=u.subarray(i,i+r),d=l.subarray(i,i+r),f=0;f<r;f++)p[f]=o[f].value,d[f]=o[f].index},c=0;c<i;c++)p();var d=t.slice();return d[d.length-1]=r,[hi(d,n,u),hi(d,"int32",l)]}var gE={kernelName:_r,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.k,s=a.sorted;rk(o,"topk");var u=fE(n.data.get(o.dataId).values,o.shape,o.dtype,i,s),l=(0,r.Z)(u,2),p=l[0],c=l[1];return[n.makeTensorInfo(p.shape,p.dtype,p.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};var hE={kernelName:kr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,o=t.image,i=t.transforms,s=n.interpolation,u=n.fillMode,l=n.fillValue,p=n.outputShape,c=(0,r.Z)(o.shape,4),d=c[0],f=c[1],g=c[2],h=c[3],m=null!=p?p:[f,g],v=(0,r.Z)(m,2),y=v[0],b=v[1],_=[d,y,b,h],k=oe(o.shape),x=k[0],w=k[1],O=k[2],S=oe(_),C=S[0],E=S[1],T=S[2],R=Y(o.dtype,G(_));R.fill(l);for(var F=a.data.get(o.dataId).values,I=a.data.get(i.dataId).values,M=0;M<d;++M){for(var A=1===i.shape[0]?I:I.subarray(8*M,8*M+8),N=0;N<y;++N)for(var D=0;D<b;++D)for(var L=0;L<h;++L){var B=void 0,P=A[6]*D+A[7]*N+1;if(0!==P){var j=(A[0]*D+A[1]*N+A[2])/P,z=(A[3]*D+A[4]*N+A[5])/P,W=mE(j,g,u),U=mE(z,f,u);switch(s){case"nearest":B=yE(F,f,g,x,w,O,M,U,W,L,l);break;case"bilinear":B=bE(F,f,g,x,w,O,M,U,W,L,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(s))}R[M*C+N*E+D*T+L]=B}}return a.makeTensorInfo(_,o.dtype,R)}return{dataId:a.write(R,_,o.dtype),shape:o.shape,dtype:o.dtype}}};function mE(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return N(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return N(0,n,t-1)}(e,t);case"nearest":return function(e,t){return N(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function vE(e,t,n,r,a,o,i,s,u,l,p){return 0<=s&&s<t&&0<=u&&u<n?e[i*r+s*a+u*o+l]:p}function yE(e,t,n,r,a,o,i,s,u,l,p){return vE(e,t,n,r,a,o,i,Math.round(s),Math.round(u),l,p)}function bE(e,t,n,r,a,o,i,s,u,l,p){var c=Math.floor(s),d=Math.floor(u),f=c+1,g=d+1;return(f-s)*((g-u)*vE(e,t,n,r,a,o,i,c,d,l,p)+(u-d)*vE(e,t,n,r,a,o,i,c,g,l,p))+(s-c)*((g-u)*vE(e,t,n,r,a,o,i,f,d,l,p)+(u-d)*vE(e,t,n,r,a,o,i,f,g,l,p))}function _E(e,t,n,r){for(var a=X(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var s=a+1;s<n.length;s++)o[2]*=n[s];for(var u=new Map,l=new Int32Array(n[a]),p=new ka(o,r,e),c=[],d=1===o[0]&&1===o[2],f=0;f<n[a];f++){var g=void 0;if(d)g=e[f].toString();else{for(var h=[],m=0;m<o[0];m++)for(var v=0;v<o[2];v++)h.push(p.get(m,f,v));g=h.join(",")}var y=u.get(g);if(null!=y)l[f]=y;else{var b=u.size;u.set(g,b),l[f]=b,c.push(f)}}var _=o.slice();_[1]=u.size;var k=new ka(_,r);c.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)k.set(p.get(n,e,r),n,t,r)}));var x=n.slice();return x[a]=_[1],{outputValues:k.values,outputShape:x,indices:l}}var kE={kernelName:wr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;rk(o,"unique");var i=_E(r.data.get(o.dataId).values,a,o.shape,o.dtype),s=i.outputValues,u=i.outputShape,l=i.indices;return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};var xE={kernelName:Or,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,s=a.shape[o],u=new Array(i-1),l=0,p=0;p<i;p++)p!==o&&(u[l++]=a.shape[p]);var c=new Array(i).fill(0),d=a.shape.slice();d[o]=1;for(var f=new Array(s),g=0;g<f.length;g++){c[o]=g;var h=Cx({inputs:{x:a},backend:n,attrs:{begin:c,size:d}});f[g]=Gk({inputs:{x:h},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(h)}return f}};for(var wE={kernelName:Sr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;rk(a,"unsortedSegmentSum");for(var s=[],u=[],l=a.shape.length-o.shape.length,p=o,c=0;c<l;++c){var d=Fw({inputs:{input:p},backend:n,attrs:{dim:c+1}});p=d,u.push(d)}for(var f=0;f<i;++f){var g=na(f,"int32"),h=n.makeTensorInfo([],"int32",g),m=ww({inputs:{a:h,b:p},backend:n}),v=Ak({inputs:{x:m},backend:n,attrs:{dtype:"float32"}}),y=mw({inputs:{a:v,b:a},backend:n}),b=yw({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(h),u.push(m),u.push(v),u.push(y),u.push(b)}var _=ES({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),_}},OE=0,SE=[Hk,Kk,qk,$k,zk,Jk,nx,rx,ax,ox,sx,lx,cx,gx,mx,_x,kx,xx,wx,Zk,Ox,Tx,Ix,Mx,Nk,Dx,Bx,Tk,Px,Ux,Hx,Vx,Kx,Xx,qx,Yx,Jx,ew,tw,nw,rw,aw,ow,sw,uw,lw,pw,cw,dw,fw,_w,pk,kw,Ow,Cw,Rw,Iw,Nw,Hw,Kw,Xw,$w,eO,tO,nO,aO,iO,lO,dO,dk,fO,Gx,hO,vO,bO,gk,xO,SO,EO,FO,MO,DO,BO,zO,GO,WO,HO,XO,qO,YO,$O,JO,QO,eS,tS,aS,oS,uS,cS,vw,fS,hS,vS,bS,xS,wS,CS,TS,RS,MS,yk,NS,jS,WS,XS,YS,Ik,Bw,JS,_k,xk,Wk,QS,eC,tC,nC,rC,aC,iC,lC,cC,gC,hC,vC,Sk,bC,kC,wC,Ex,pS,CC,EC,RC,IC,AC,NC,DC,LC,jC,zC,UC,VC,XC,YC,QC,nE,aE,Gw,bw,iE,{kernelName:yr,backendName:"cpu",kernelFunc:sE},uE,pE,gE,hE,tx,kE,xE,wE,SS];OE<SE.length;OE++){Pr(SE[OE])}var CE,EE,TE,RE={},FE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function IE(e,t){if(!(e in RE)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if(ye().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete RE[e]}),!1),ye().getBool("SOFTWARE_WEBGL_ENABLED")&&(FE.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",FE)||n.getContext("experimental-webgl",FE);return n.getContext("webgl2",FE)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;RE[e]=n}var r=RE[e];return null==r||r.isContextLost()?(delete RE[e],IE(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),RE[e])}function ME(e,t){return[t,e]}function AE(e){var t=G(e);return Z(Math.ceil(t/4))}function NE(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function DE(e,t){var n,r,a,o,i,s,u,l,p,c,d=e;return 2===ye().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,o=d.RGBA32F,i=d.RED,u=4,l=1,p=d.HALF_FLOAT,c=d.FLOAT,s=d.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=d.RGBA,i=e.RGBA,u=4,l=4,p=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:p,textureTypeFloat:c}}function LE(e,t){var n=t();return ye().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(CE||(CE={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(EE||(EE={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(TE||(TE={}));function BE(e){return!!(ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function PE(e,t){return qE(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var jE,zE,GE=/ERROR: [0-9]+:([0-9]+):/g;function WE(e,t){var n=GE.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return H((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var l=i.slice(0,r-1),p=i.slice(r-1,r),c=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(H(p[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}function UE(e,t){if(LE(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function ZE(e,t,n,r,a,o,i){var s=e.getAttribLocation(t,n);return-1!==s&&(LE(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),LE(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)})),LE(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function HE(e,t,n,r){LE(e,(function(){return function(e,t,n){YE(e,n),LE(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),LE(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),LE(e,(function(){return e.uniform1i(n,r)}))}function VE(e,t,n){LE(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),LE(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function KE(e,t){LE(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),LE(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function XE(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function qE(e,t,n){var r=LE(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function YE(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function $E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return G(e.slice(0,e.length-t))}function JE(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function QE(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[$E(e)].concat((0,E.Z)(JE(e)))),t}function eT(e){return e%2===0}function tT(e,t){if(W(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(eT(n)&&eT(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&eT(e[0])&&eT(t[0])}function nT(e,t){return null!=e.getExtension(t)}function rT(e){try{if(null!=IE(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function aT(e){if(0===e)return!1;var t=IE(e);if(1!==e){if(nT(t,"EXT_color_buffer_float"))return oT(t);var n="EXT_color_buffer_half_float";if(nT(t,n)){var r=t.getExtension(n);return function(e,t){var n=DE(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,r)}return!1}return!!nT(t,"OES_texture_float")&&(!!nT(t,"WEBGL_color_buffer_float")&&oT(t))}function oT(e){var t=DE(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function iT(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&P("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var sT=ye();function uT(){var e,t,n,r,a,o,i,s,u,l;return 2===ye().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s=ye().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function lT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=oe(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / ").concat(t),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(o,"; ").concat(i,";")})).join("")}function pT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=oe(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(o,"; ").concat(i,";")})).join("")}function cT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=function(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var o=n-3;o>=0;--o)a[o]="(".concat(a[o+1]," * ").concat(r[o+1],")");return a}(e.map((function(e,t){return t})),t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / ").concat(r[a]),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(r[a]):"index -= ".concat(e[a]," * ").concat(r[a]);return"".concat(o,"; ").concat(i,";")})).join("")}function dT(e){var t=oe(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}sT.registerFlag("HAS_WEBGL",(function(){return sT.getNumber("WEBGL_VERSION")>0})),sT.registerFlag("WEBGL_VERSION",(function(){return rT(2)?2:rT(1)?1:0})),sT.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),sT.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===sT.get("WEBGL_VERSION")})),sT.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),sT.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),sT.registerFlag("WEBGL_PACK",(function(){return sT.getBool("HAS_WEBGL")})),sT.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_PACK_CLIP",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_PACK_REDUCE",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_CONV_IM2COL",(function(){return sT.getBool("WEBGL_PACK")})),sT.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==jE){var t=IE(e);jE=t.getParameter(t.MAX_TEXTURE_SIZE)}return jE}(sT.getNumber("WEBGL_VERSION"))})),sT.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==zE){var t=IE(e);zE=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,zE)}(sT.getNumber("WEBGL_VERSION"))})),sT.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=sT.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=IE(e);return nT(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:nT(t,"EXT_disjoint_timer_query")?1:0}(e)})),sT.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return sT.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Xa()})),sT.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=IE(e);if(1===e){if(!nT(t,"OES_texture_float"))return!1}else if(!nT(t,"EXT_color_buffer_float"))return!1;return oT(t)}(sT.getNumber("WEBGL_VERSION"))})),sT.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!sT.getBool("WEBGL_FORCE_F16_TEXTURES")&&sT.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),sT.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return aT(sT.getNumber("WEBGL_VERSION"))})),sT.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=sT.getNumber("WEBGL_VERSION"))&&null!=IE(e).fenceSync;var e})),sT.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return sT.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),sT.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),sT.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return Xa()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),sT.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),sT.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),sT.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),sT.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),sT.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),sT.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return sT.getBool("IS_TEST")})),sT.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),sT.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),sT.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1})),sT.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var fT="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",gT=Hi;function hT(e,t,n){var r=[];if(e.forEach((function(e){var t=G(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(ST(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,o,i=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?vT(e,r):mT(e,r);var o=e.shapeInfo.logicalShape,i=t.logicalShape;o.length<=i.length&&(a+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=gT(e.shapeInfo.logicalShape,t.logicalShape),l=OT(s),p=s-i,c=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(c[e+p]," = 0;")})).join("\n");var d="";d=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(c[t+p])})).join(", ");var f="return outputValue;",g=1===G(e.shapeInfo.logicalShape),h=G(t.logicalShape),m=1===h;if(1!==i||g||m){if(g&&!m)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=i-2,y=i-1;u.indexOf(v)>-1&&u.indexOf(y)>-1?f="return vec4(outputValue.x);":u.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(y)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(d,");\n      ").concat(f,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&W(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var l,p=OT(u),c=gT(e.shapeInfo.logicalShape,t.logicalShape),d=u-s,f=["x","y","z","w","u","v"];l=0===s?"":u<2&&c.length>=1?"coords = 0;":c.map((function(e){return"coords.".concat(f[e+d]," = 0;")})).join("\n");var g="";g=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+d])})).join(", ");return"\n    float ".concat(a,"() {\n      ").concat(p," coords = getOutputCoords();\n      ").concat(l,"\n      return get").concat(r,"(").concat(g,");\n    }\n  ")}(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,l=uT(),p=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),c=function(e){var t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(yT,"\n    ").concat(bT,"\n    ").concat(_T,"\n  ");return t}(l);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(W(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),o=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),o=a*Math.ceil(e[e.length-2]/2),i=o,s="",u="b, r, c",l=2;l<e.length-1;l++)i*=e[e.length-l-1],s="\n      int b".concat(l," = index / ").concat(i,";\n      index -= b").concat(l," * ").concat(i,";\n    ")+s,u="b".concat(l,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(W(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=pT(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=lT(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=pT(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=lT(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=lT(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=lT(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),n.packedInputs&&(c+=kT),[c,p,o,i,a,s,n.userCode].join("\n")}function mT(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){var n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(a,"() {return ").concat(n,";}");var o=(0,r.Z)(e.shapeInfo.texShape,2),i=o[0],s=o[1];if(1===i&&1===s)return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var u=xT(n);if(t)return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var l=(0,r.Z)(e.shapeInfo.texShape,2),p=l[0],c=l[1];return"\n    float ".concat(a,"() {\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(c,", ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(wT(e),"\n      }\n    ");var a=e.shapeInfo.texShape,o=a[0],i=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=xT(n);if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===o)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&W(n,o)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var i=o[0],s=o[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=q(n),l=u.newShape,p=u.keptDims,c=l;if(c.length<n.length){var d=CT(e,c),f=["row","col"];return"\n      ".concat(mT(d,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(ET(f,p),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(wT(e),"\n      }\n    ");var g=o[0],h=o[1],m=xT(r);if(1===h)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(g,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===g)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(h,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(m,";\n    vec2 uv = uvFromFlat(").concat(g,", ").concat(h,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],s=q(n),u=s.newShape,l=s.keptDims,p=u;if(p.length<n.length){var c=CT(e,p),d=["row","col","depth"];return"\n        ".concat(mT(c,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(ET(d,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(wT(e),"\n      }\n    ");var f=e.shapeInfo.texShape,g=f[0],h=f[1],m=e.shapeInfo.flatOffset;if(h===o&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(g,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===i&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(g,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var v=xT(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(g,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,s=n[1]*i,u=q(n),l=u.newShape,p=u.keptDims;if(l.length<n.length){var c=CT(e,l),d=["row","col","depth","depth2"];return"\n      ".concat(mT(c,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(ET(d,p),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(wT(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,g=e.shapeInfo.texShape,h=g[0],m=g[1],v="int stride2 = ".concat(r,"Shape[3];"),y="int stride1 = ".concat(r,"Shape[2] * stride2;"),b="int stride0 = ".concat(r,"Shape[1] * stride1;");if(m===s&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(v,"\n        ").concat(y,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(m===o&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var _=xT(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(v,"\n      ").concat(y,"\n      ").concat(b,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(_,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index + ").concat(_,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=q(t),l=u.newShape,p=u.keptDims;if(l.length<t.length){var c=CT(e,l),d=["row","col","depth","depth2","depth3"];return"\n      ".concat(mT(c),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(ET(d,p),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(wT(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,g=e.shapeInfo.texShape,h=g[0],m=g[1];if(m===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var v=xT(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=q(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){var s=CT(e,o),u=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(mT(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(ET(u,i),");\n      }\n    ")}var l=t[5],p=t[4]*l,c=t[3]*p,d=t[2]*c,f=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(f,", ").concat(d,", ").concat(c,", ").concat(p,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(l,", 1)));\n        ").concat(wT(e),"\n      }\n    ");var g=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1];if(v===f&&null==g)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(c,", ").concat(p,", ").concat(l,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===l&&null==g)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var y=xT(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(f," + col * ").concat(d," + depth * ").concat(c," +\n          depth2 * ").concat(p," + depth3 * ").concat(l," + depth4 + ").concat(y,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function vT(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=uT();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=uT();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");var i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],s=o[1],u=uT();if(null!=o&&W(n,o))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],p=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(p,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){var s=[1,2],u=CT(e,n.slice(1)),l=["b","row","col"];return"\n        ".concat(vT(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(ET(l,s),");\n        }\n      ")}var p=uT();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(p.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=i[0],d=i[1],f=Math.ceil(n[2]/2),g=f*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(c,", ").concat(d,", ").concat(g,", ").concat(f,", b, row, col);\n      return ").concat(p.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=uT();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var o=e.shapeInfo.logicalShape,i=o.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=u[0],p=u[1],c=Math.ceil(o[i-1]/2),d=c*Math.ceil(o[i-2]/2),f="int b, int row, int col",g="b * ".concat(d," + (row / 2) * ").concat(c," + (col / 2)"),h=2;h<i-1;h++)f="int b".concat(h,", ")+f,d*=o[i-h-1],g="b".concat(h," * ").concat(d," + ")+g;return"\n    vec4 ".concat(r,"(").concat(f,") {\n      int index = ").concat(g,";\n      int texR = index / ").concat(p,";\n      int texC = index - texR * ").concat(p,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,", ").concat(l,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var yT="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",bT="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",_T="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",kT="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function xT(e){return"offset".concat(e)}function wT(e){var t=e.name,n=G(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function OT(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function ST(e,t,n){var r=q(t),a=r.newShape,o=r.keptDims,i=t.length,s=e&&3===i&&1===t[0],u=s?t.slice(1):a,l=!e&&i>1&&!W(t,n)&&a.length<i||s;return{useSqueezeShape:l,uniformShape:l?u:t,keptDims:o}}function CT(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function ET(e,t){return t.map((function(t){return e[t]})).join(", ")}function TT(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=hT(a,i,t),u=function(e,t){var n=qE(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(LE(e,(function(){return e.shaderSource(n,t)})),LE(e,(function(){return e.compileShader(n)})),ye().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw WE(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),l=e.createProgram(u);return ye().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:o,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:o,outShapeInfo:i},RT(e,t,l))}function RT(e,t,n){var r,a,o,i,s=[],u=[],l=null;i=e.getUniformLocation(n,"NAN",!1),1===ye().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));var p,c=!1,d=(0,C.Z)(t.variableNames);try{for(d.s();!(p=d.n()).done;){var f=p.value,g={name:f,uniform:e.getUniformLocation(n,f,c),offset:e.getUniformLocation(n,"offset".concat(f),c)};t.enableShapeUniforms&&(g.shape=e.getUniformLocation(n,"".concat(f,"Shape"),c),g.texShape=e.getUniformLocation(n,"".concat(f,"TexShape"),c)),s.push(g)}}catch(yB){d.e(yB)}finally{d.f()}if(t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",c),o=e.getUniformLocation(n,"outShapeStrides",c),a=e.getUniformLocation(n,"outTexShape",c)),t.customUniforms){var h,m=(0,C.Z)(t.customUniforms);try{for(m.s();!(h=m.n()).done;){var v=h.value;u.push(e.getUniformLocation(n,v.name,c))}}catch(yB){m.e(yB)}finally{m.f()}}return{variablesLocations:s,customUniformLocations:u,infLoc:l,nanLoc:i,outShapeLocation:r,outShapeStridesLocation:o,outTexShapeLocation:a}}function FT(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!W(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!W(i,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(s," must match"))}}))}function IT(e){return ye().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var MT=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=CE.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=uT();this.outputShape=t,this.enableShapeUniforms=IT(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?pT(["r","c","d"],t):lT(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),AT=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=CE.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=uT();this.outputShape=t,this.enableShapeUniforms=IT(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?pT(["r","c","d"],t):lT(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),NT=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["A"],this.outTexUsage=EE.DOWNLOAD;var n=uT();this.outputShape=t,this.userCode="\n      ".concat(fT,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),DT=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=EE.DOWNLOAD;var n=uT();this.outputShape=t,this.userCode="\n      ".concat(fT,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),LT={R:0,G:1,B:2,A:3},BT=(0,R.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";(0,T.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=uT();this.outputShape=t,this.enableShapeUniforms=IT(this.outputShape.length);var o="result";n&&(o="floor(result * 255. + 0.5)");for(var i="",s=0;s<r.length;s++){var u=r[s];i+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(LT[u],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":dT(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(r.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(r.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(i,"\n        }\n        ").concat(a.output," = vec4(").concat(o,", 0., 0., 0.);\n      }\n    ")})),PT=(0,R.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=uT();this.outputShape=t,this.enableShapeUniforms=IT(this.outputShape.length);var a="",o="result";n&&(o="floor(result * 255. + 0.5)");for(var i=0;i<=1;i++)for(var s=0;s<=1;s++){var u=2*i+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":dT(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(o,";\n        }\n    ")}));function jT(e){var t=uT();return function(e,t){var n=qE(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(LE(e,(function(){return e.shaderSource(n,t)})),LE(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function zT(e){return function(e,t){var n=qE(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return LE(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),LE(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function GT(e){return function(e,t){var n=qE(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return LE(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),LE(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function WT(e,t,n,r,a,o){!function(e,t){var n=ye().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);var i=function(e){return qE(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return LE(e,(function(){return e.bindTexture(s,i)})),LE(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),LE(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),LE(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),LE(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===ye().getNumber("WEBGL_VERSION")?LE(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)})):LE(e,(function(){return e.texStorage2D(s,1,r,t,n)})),LE(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:i,texShape:[n,t]}}function UT(e){return e.internalFormatFloat}function ZT(e){return e.internalFormatHalfFloat}function HT(e){return e.downloadTextureFormat}function VT(e){return e.internalFormatPackedFloat}function KT(e){return e.internalFormatPackedHalfFloat}function XT(e,t,n,a,o,i,s,u){var l=e,p=new Float32Array(function(e,t){var n=NE(e,t),a=(0,r.Z)(n,2);return a[0]*a[1]*4}(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,p),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),p}var qT=function(){function e(t){(0,T.Z)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];var n=ye().getNumber("WEBGL_VERSION");if(null!=t?(this.gl=t,function(e,t){RE[e]=t}(n,t)):this.gl=IE(n),t=this.gl,2===ye().getNumber("WEBGL_VERSION")){var r=t;this.createVertexArray=function(){return LE(r,(function(){return r.createVertexArray()}))},this.bindVertexArray=function(e){return LE(r,(function(){return r.bindVertexArray(e)}))},this.deleteVertexArray=function(e){return LE(r,(function(){return r.deleteVertexArray(e)}))},this.getVertexArray=function(){return LE(r,(function(){return r.getParameter(r.VERTEX_ARRAY_BINDING)}))}}else if(null!=t){var a=t.getExtension("OES_vertex_array_object");if(null==a)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=function(){return LE(t,(function(){return a.createVertexArrayOES()}))},this.bindVertexArray=function(e){return LE(t,(function(){return a.bindVertexArrayOES(e)}))},this.deleteVertexArray=function(e){return LE(t,(function(){return a.deleteVertexArrayOES(e)}))},this.getVertexArray=function(){return LE(t,(function(){return t.getParameter(a.VERTEX_ARRAY_BINDING_OES)}))}}var o="WEBGL_color_buffer_float",i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===ye().getNumber("WEBGL_VERSION")){var s="OES_texture_half_float";if(this.textureFloatExtension=PE(this.gl,"OES_texture_float"),nT(this.gl,s))this.textureHalfFloatExtension=PE(this.gl,s);else if(ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(o),nT(this.gl,i))this.colorBufferHalfFloatExtension=PE(this.gl,i);else if(ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(o="EXT_color_buffer_float",nT(this.gl,o))this.colorBufferFloatExtension=this.gl.getExtension(o);else{if(!nT(this.gl,i))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(i)}this.vertexBuffer=zT(this.gl),this.indexBuffer=GT(this.gl),this.framebuffer=function(e){return qE(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=DE(this.gl,this.textureHalfFloatExtension)}return(0,R.Z)(e,[{key:"debug",get:function(){return ye().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;LE(t,(function(){return t.finish()})),LE(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),LE(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),LE(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),LE(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),LE(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var o=ME(t,n),i=(0,r.Z)(o,2);return WT(e,i[0],i[1],UT(a),a.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var o=ME(t,n),i=(0,r.Z)(o,2);return WT(e,i[0],i[1],ZT(a),a.textureFormatFloat,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var o=ME(t,n),i=(0,r.Z)(o,2);return WT(e,i[0],i[1],HT(a),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){LE(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===ye().getNumber("WEBGL_VERSION")?LE(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):LE(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===ye().getNumber("WEBGL_VERSION")?LE(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):LE(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),LE(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,s,u;LE(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),2===ye().getNumber("WEBGL_VERSION")?LE(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,i)})):LE(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,i)})),LE(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var o=NE(t,n),i=(0,r.Z)(o,2);return WT(e,i[0],i[1],KT(a),e.RGBA,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,a){var o=NE(t,n),i=(0,r.Z)(o,2);return WT(e,i[0],i[1],VT(a),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(KE(this.gl,this.framebuffer),this.outputTexture=null),LE(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var a=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,a){var o=ME(t,n),i=(0,r.Z)(o,2),s=i[0],u=i[1],l=new Uint8Array(t*n*4);return LE(e,(function(){return e.readPixels(0,0,s,u,a.downloadTextureFormat,e.UNSIGNED_BYTE,l)})),new Float32Array(l.buffer)}(a.gl,t,n,a.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return XT(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();LE(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return LE(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),LE(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),LE(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(ye().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return LE(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=jT(n));var r,a=function(e){return qE(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return LE(n,(function(){return n.attachShader(a,t.vertexShader)})),LE(n,(function(){return n.attachShader(a,e)})),function(e,t){if(LE(e,(function(){return e.linkProgram(t)})),!ye().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,a),r=Object.assign(a,{vao:this.createVertexArray()}),this.bindVertexArray(r.vao),LE(n,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer)})),console.assert(function(e,t,n){return LE(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),ZE(e,t,"clipSpacePos",n,3,20,0)&&ZE(e,t,"uv",n,2,20,12)}(n,r,this.vertexBuffer),"gpgpu_util.bindVertexProgramAttributeStreams not fully successful."),this.debug&&UE(n,r),this.setProgram(r),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(LE(this.gl,(function(){return t.gl.deleteProgram(e)})),this.deleteVertexArray(e.vao))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&(this.bindVertexArray(this.program.vao),this.debug&&UE(this.gl,this.program)),LE(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return qE(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),LE(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),HE(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var a=NE(t,n),o=(0,r.Z)(a,2),i=o[0],s=o[1];this.setOutputMatrixTextureDriver(e,i,s)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&UE(this.gl,this.program),XE(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;if(this.debug){var t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}LE(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),LE(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=PE(this.gl,2===ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V((function(){return n.disposed||n.isQueryAvailable(t,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in ye().platform&&(r=ye().platform.setTimeoutCustom.bind(ye().platform)),V((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),VE(this.gl,e,this.framebuffer),this.debug&&XE(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(VE(this.gl,this.outputTexture,this.framebuffer),this.debug&&XE(this.gl)):KE(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;VE(r,e,this.framebuffer),this.debug&&XE(r),this.outputTexture=e,LE(r,(function(){return r.viewport(0,0,t,n)})),LE(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),LE(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var YT=Bk,$T=Rx,JT=Fx,QT=Mk,eR=Ax,tR=jx,nR=xw,rR=Ew,aR=Mw,oR=qw,iR=rO,sR=oO,uR=sO,lR=pO,pR=_O,cR=wO,dR=CO,fR=TO,gR=UO,hR=VO,mR=nS,vR=gw,yR=dS,bR=_S,_R=AS,kR=PS,xR=GS,wR=KS,OR=qS,SR=sC,CR=pC,ER=wk,TR=Vk,RR=Sx,FR=TC,IR=FC,MR=MC,AR=BC,NR=ZC,DR=qC,LR=JC,BR=tE,PR=rE,jR=Pw,zR=lE,GR=fE,WR=Qk,UR=_E;function ZR(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function HR(e,t){return 1===t?[e]:ZR(e,t)}var VR=function(){function e(t){if((0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=IT(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=HR("rc",this.rank),r=OT(this.rank),a=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}return(0,R.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),o=2;o<this.rank;o++)a="".concat(e[e.length-1-o],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),KR=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=IT(this.outputShape.length);for(var r="",a=0;a<4;a++){var o="thisRC = rc;";a%2===1&&(o+="thisRC.z += 1;"),a>1&&(o+="thisRC.y += 1;"),r+="\n        ".concat(o,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?cT(["r","c","d"],"inputShape"):lT(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":dT(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var XR=function(){function e(t){(0,T.Z)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}return(0,R.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=YR(t,n),a=$R(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=qR(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var s=this.freeTextures[a].pop();return this.usedTextures[a].push(s),s}return r===TE.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===TE.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===TE.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===TE.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===TE.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=YR(n,r),o=$R(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=qR(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=ye().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var u=this.usedTextures[o],l=u&&u.indexOf(e);if(null==l||l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[l]=u[u.length-1],u.pop(),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function qR(e,t,n,a,o){var i,s=function(e,t){switch(e){case TE.PACKED_2X2_FLOAT32:return VT(t);case TE.PACKED_2X2_FLOAT16:return KT(t);case TE.UNPACKED_FLOAT32:return UT(t);case TE.UNPACKED_FLOAT16:return ZT(t);case TE.PACKED_4X1_UNSIGNED_BYTE:return HT(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,a);if(o){var u=NE(e[0],e[1]),l=(0,r.Z)(u,2);i=l[0]*l[1]}else{var p=ME(e[0],e[1]),c=(0,r.Z)(p,2);i=c[0]*c[1]}var d=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,s);return i*d}function YR(e,t){if(e===EE.UPLOAD)return TE.PACKED_2X2_FLOAT32;if(e===EE.RENDER||null==e)return function(e){return ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?TE.PACKED_2X2_FLOAT32:TE.UNPACKED_FLOAT32:e?TE.PACKED_2X2_FLOAT16:TE.UNPACKED_FLOAT16}(t);if(e===EE.DOWNLOAD||e===EE.PIXELS)return TE.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function $R(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var JR=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=IT(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),QR="if (isnan(x)) return x;",eF="return x;",tF="return abs(x);";var nF="return (x >= 0.0) ? x : (exp(x) - 1.0);",rF=QR+"\n  return (x < 0.0) ? 0.0 : x;\n",aF=QR+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",oF="return x;",iF="return 1.0 / (1.0 + exp(-1.0 * x));",sF="return x;",uF="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",lF="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",pF="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cF="return 1.0 / (1.0 + exp(-1.0 * x));",dF=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=IT(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),fF=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=IT(this.outputShape.length);var n=t.length,r=HR("rc",n),a=OT(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),s=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),gF=Rc,hF={};var mF=ye().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var vF=function(e){(0,ca.Z)(n,e);var t=(0,da.Z)(n);function n(e){var r,a,o;if((0,T.Z)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!ye().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof qT)a=e;else{var i=IE(ye().getNumber("WEBGL_VERSION"),e);a=new qT(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=IE(ye().getNumber("WEBGL_VERSION"));a=new qT(s),r.binaryCache=((o=ye().getNumber("WEBGL_VERSION"))in hF||(hF[o]={}),hF[o]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new XR(r.gpgpu),r.numMBBeforeWarning=null==ye().global.screen?1024:ye().global.screen.height*ye().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new F((0,gg.Z)(r),bi()),r}return(0,R.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"writeTexture",value:function(e,t,n,r,a,o){var i=this.makeTensorInfo(t,n),s=this.texData.get(i.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,a]},s.texShape=[r,a];var u=QE(t),l=new BT(u,!1,o),p=this.runWebGLProgram(l,[i],n,[[r,a]]);return p.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(i),p.dataId}},{key:"write",value:function(e,t,n){if((ye().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ye().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:EE.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(ye().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:EE.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new dF(i,oF):new JR(i,oF);var l=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),p=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),p}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var c,d,f=null!=this.activeTimers;(f&&(c=aa()),"complex64"===r)?d=lc(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):d=this.getValuesFromTexture(e);return f&&(this.downloadWaitMs+=aa()-c),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n,r,a,o,i,s,u,l,p,c,d,f,g,h,m,v,y,b,_,k,x,w,S;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,o=r.shape,i=r.slice,s=r.dtype,u=r.complexTensorInfos,l=r.isPacked,null==i){e.next=11;break}return p=l?new dF(o,oF):new JR(o,oF),c=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:s}],s),d=this.read(c.dataId),this.disposeIntermediateTensorInfo(c),e.abrupt("return",d);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!ye().getBool("DEBUG")){e.next=16;break}if(ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==ye().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(f=null,"complex64"!==s&&ye().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(t),m=this.texData.get(g.dataId),f=(h=this.gpgpu).createBufferFromTexture.apply(h,[m.texture.texture].concat((0,E.Z)(AE(o))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:y=e.sent,b=y[0],_=y[1],v=lc(b,_),e.next=32;break;case 31:null==f?v=this.getValuesFromTexture(t):(k=G(o),v=this.gpgpu.downloadFloat32MatrixFromBuffer(f,k));case 32:return null!=g&&this.disposeIntermediateTensorInfo(g),null!=f&&LE(x=this.gpgpu.gl,(function(){return x.deleteBuffer(f)})),w=this.convertAndCacheOnCPU(t,v),S=this.pendingRead.get(t),this.pendingRead.delete(t),S.forEach((function(e){return e(w)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&bi().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",w);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,o=n.slice,i=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){var l;l=s?new dF(a,oF):new JR(a,oF);var p=this.runWebGLProgram(l,[{dataId:e,shape:a,dtype:i}],i),c=this.readToGPU(p,t);return this.disposeIntermediateTensorInfo(p),c}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var d=this.decode(e,t.customTexShape),f=bi().makeTensorFromTensorInfo(d),g=this.texData.get(d.dataId);return Object.assign({tensorRef:f},g.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return ia(e)}));return hi(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return hi(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!BE(n)){if(ye().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,o=G(n);if(ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var i,s=this.decode(e),u=this.texData.get(s.dataId),l=(i=this.gpgpu).downloadMatrixFromPackedTexture.apply(i,[u.texture.texture].concat((0,E.Z)(AE(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),l}var p=ye().getBool("WEBGL_PACK")&&!0===a,c=p?QE(n):n,d=p?new DT(c):new NT(c),f=this.runWebGLProgram(d,[{shape:c,dtype:r,dataId:e}],"float32"),g=this.texData.get(f.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture.texture,g.texShape[0],g.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(f),h}},{key:"timerAvailable",value:function(){return ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var o=ua(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=ua(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,S.Z)((0,O.Z)().mark((function e(){var n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(o);case 3:n=e.sent,s.kernelMs=B(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:aa(),endMs:null}}},{key:"endTimer",value:function(e){return ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=aa(),e)}},{key:"getQueryTime",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){var n;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e).complexTensorInfos;return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var p=this.texData.get(e);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mF;return ye().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&G(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){Mr("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return gF(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new dF(e.shape,t),a=this.compileAndRun(r,[e],n);return bi().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=TR(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(ye().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,tF,e.dtype);var n=new JR(e.shape,tF),r=this.compileAndRun(n,[e]);return bi().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&ee(n[0])){var a=n.map((function(e){return oa(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return bi().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new fF(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new VR(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[$E(e.shape)].concat((0,E.Z)(JE(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[$E(t)].concat((0,E.Z)(JE(t))),o=new KR(a,n),i=[n],s=this.runWebGLProgram(o,[r],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype;null!=t&&P(G(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var i,s=QE(a);i=r?new AT(s):new MT(s);var u=[null!=t?t:AE(s)];return{dtype:o,shape:a,dataId:this.runWebGLProgram(i,[{shape:s,dtype:o,dataId:e}],o,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===CE.DENSE){var l=null!=i?i:AE(e.outputShape);u.texShape=l.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===G(s.shape))return u.values=Y(s.dtype,0),s;var p=[],c=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&G(t.shape)<=ye().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),p.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!tT(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),p.push(t),n=a.texData.get(t.dataId),r.shape=o}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var d,f={shape:s.shape,texData:u,isUniform:!1},g=function(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var o=t.texData.texShape,i=ST(e.packedInputs,t.shape,o),s=i.useSqueezeShape,u=i.uniformShape,l=i.keptDims,p="",c="",d="";if(1===u.length&&e.packedInputs){var f=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];p="".concat(f[0]>1,"_").concat(f[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var g=oe(u);d="".concat(g[0]===o[1],"_").concat(g[g.length-1]===o[1])}}else c="".concat(u[0]>1,"_").concat(u[1]>1);var h=t.shape.length,m=2===u.length&&W(t.shape,o),v=1===G(t.shape),y=Hi(t.shape,n.shape),b=!e.packedInputs&&h===n.shape.length&&W(o,n.texData.texShape),_=e.packedInputs||u.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(h,"_").concat(b,"_").concat(s?l:"","_").concat(u.length,"_").concat(v,"_").concat(y,"_").concat(m,"_").concat(p,"_").concat(c,"_").concat(d,"_").concat(_,"_").concat(a)}else{var k=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(k,"_").concat(a)}}));var a=e.userCode,o=e.constructor.name;return o+"_"+r+"_"+a+"".concat(ye().getNumber("WEBGL_VERSION"))}(e,c,f),h=this.getAndSaveBinary(g,(function(){return TT(a.gpgpu,e,c,f)})),m=null!=this.activeTimers;m&&(d=this.startTimer()),ye().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(FT(t.inShapeInfos,n),FT([t.outShapeInfo],[r]));var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):e.setOutputMatrixTexture(o.texture,i[0],i[1]),e.setProgram(t.webGLProgram),1===ye().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(var s=0;s<n.length;++s){var u=n[s],l=t.variablesLocations[s],p=l.uniform,c=l.offset,d=l.shape,f=l.texShape;if(d){var g=ST(t.program.packedInputs,u.shape,u.texData.texShape).uniformShape;switch(g.length){case 1:e.gl.uniform1iv(d,new Int32Array(g));break;case 2:e.gl.uniform2iv(d,new Int32Array(g));break;case 3:e.gl.uniform3iv(d,new Int32Array(g));break;case 4:e.gl.uniform4iv(d,new Int32Array(g))}}if(f&&e.gl.uniform2i(f,u.texData.texShape[0],u.texData.texShape[1]),null!=p)if(u.isUniform)if(G(u.shape)<2)e.gl.uniform1f(p,u.uniformValues[0]);else{var h=u.uniformValues;h instanceof Float32Array||(h=new Float32Array(h)),e.gl.uniform1fv(p,h)}else null!=u.texData.slice&&null!=c&&e.gl.uniform1i(c,u.texData.slice.flatOffset),e.setInputMatrixTexture(u.texData.texture.texture,p,s)}var m=t.outShapeLocation;if(m)switch(r.shape.length){case 1:e.gl.uniform1iv(m,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(m,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(m,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(m,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var v=oe(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(v));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(v));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(v))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(var y=0;y<t.program.customUniforms.length;++y){var b=t.program.customUniforms[y],_=t.customUniformLocations[y],k=a[y];if("float"===b.type)e.gl.uniform1fv(_,k);else if("vec2"===b.type)e.gl.uniform2fv(_,k);else if("vec3"===b.type)e.gl.uniform3fv(_,k);else if("vec4"===b.type)e.gl.uniform4fv(_,k);else if("int"===b.type)e.gl.uniform1iv(_,k);else if("ivec2"===b.type)e.gl.uniform2iv(_,k);else if("ivec3"===b.type)e.gl.uniform3iv(_,k);else{if("ivec4"!==b.type)throw Error("uniform type ".concat(b.type," is not supported yet."));e.gl.uniform4iv(_,k)}}e.executeProgram()}(this.gpgpu,h,c,f,r),p.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var v=ye().get("WEBGL_FLUSH_THRESHOLD");if(v>0){var y=aa();y-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!ye().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!ye().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=ki((function(){if(!ye().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=ye().getBool("DEBUG");ye().set("DEBUG",!1);var n=e.abs(Ai(1e-8)).dataSync()[0];if(ye().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,a=t.dtype,o=t.values,i=t.texture,s=t.usage,u=t.isPacked;if(null==i){var l,p=null!=this.activeTimers;p&&(l=aa());var c=t.texShape;if(null==c&&(c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ye().getNumber("WEBGL_MAX_TEXTURE_SIZE"),a=ye().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(a===1/0&&ye().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(a=n/2),t&&(n*=2,a*=2,1===(e=e.map((function(t,n){return n>=e.length-2?D(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var o=q(e);e=o.newShape}var i=G(e),s=null;e.length<=1&&i<=n?s=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?s=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?s=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?s=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?s=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(s=[e[0],e[1]*e[2]*e[3]]);var u=null!=s&&Math.max.apply(Math,(0,E.Z)(s))>a&&Math.min.apply(Math,(0,E.Z)(s))<=(t?2:1)&&Math.min.apply(Math,(0,E.Z)(s))>0;if(null==s||u)if(t){var l=$E(e),p=2,c=2;if(e.length){var d=JE(e),f=(0,r.Z)(d,2);p=f[0],c=f[1]}s=Z(i=l*(p/2)*(c/2)).map((function(e){return 2*e}))}else s=Z(i);return s}(n,u),t.texShape=c),null!=o){var d,f=QE(n),g=c[1],h=c[0],m=o instanceof Uint8Array||o instanceof Uint8ClampedArray;if(u||!m){var v=NE(c[0],c[1]),y=(0,r.Z)(v,2);g=y[0],h=y[1]}d=u?new PT(f,m):new BT(f,m);var b=m?[h,g]:c,_=this.makeTensorInfo(b,a),k=this.texData.get(_.dataId);k.usage=m?EE.PIXELS:EE.UPLOAD,k.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(_.dataId),g,h,o);var x=[[h,g]],w=this.runWebGLProgram(d,[_],a,x,!0),O=this.texData.get(w.dataId);t.texShape=O.texShape,t.isPacked=O.isPacked,t.usage=O.usage,ye().get("ENGINE_COMPILE_ONLY")?this.disposeData(w.dataId):(t.texture=O.texture,t.values=null,this.texData.delete(w.dataId)),this.disposeIntermediateTensorInfo(_),p&&(this.uploadWaitMs+=aa()-l)}else{var S=this.acquireTexture(c,s,a,u);t.texture=S}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Q(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,r.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,a,o,i,s,u,l,p=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,a=Object.entries(this.binaryCache);n<a.length;n++)o=(0,r.Z)(a[n],2),i=o[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:s=(0,O.Z)().mark((function e(){var n,a,o;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,r.Z)(l[u],2),a=n[1],o=new Promise((function(e){try{p.checkCompletion_(a),e(!0)}catch(t){throw t}})),t.push(o);case 3:case"end":return e.stop()}}),e)})),u=0,l=Object.entries(this.binaryCache);case 8:if(!(u<l.length)){e.next=13;break}return e.delegateYield(s(),"t0",10);case 10:u++,e.next=8;break;case 13:return e.abrupt("return",Promise.all(t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=(0,S.Z)((0,O.Z)().mark((function e(t){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,Wp();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw WE(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.values(this.binaryCache);e<t.length;e++){var n=t[e],r=RT(this.gpgpu,n.program,n.webGLProgram),a=r.variablesLocations,o=r.customUniformLocations,i=r.infLoc,s=r.nanLoc,u=r.outShapeLocation,l=r.outShapeStridesLocation,p=r.outTexShapeLocation;n.variablesLocations=a,n.customUniformLocations=o,n.infLoc=i,n.nanLoc=s,n.outShapeLocation=u,n.outShapeStridesLocation=l,n.outTexShapeLocation=p}}},{key:"createTensorFromGPUData",value:function(e,t,n){e.channels=e.channels||"RGBA";var r=e.texture,a=e.height,o=e.width,i=e.channels,s=bi().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var u=s.writeTexture(r,t,n,a,o,i);return bi().makeTensorFromDataId(u,t,n,s)}}]),n}(I);vF.nextDataId=0;qa()&&Oi("webgl",(function(){return new vF}),2);var yF="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",bF=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["A","B"],this.outputShape=Ki(n,r),this.enableShapeUniforms=IT(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),_F="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",kF=(0,R.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,T.Z)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ki(n,r);var o=this.outputShape.length;this.enableShapeUniforms=IT(o);var i="";if(a)if(0===o||1===G(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=OT(o);if(i="\n          ".concat(s," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=HR("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}));function xF(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var wF={kernelName:Lt,backendName:"webgl",kernelFunc:xF};function OF(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=xF({inputs:{x:r},backend:n}),u=xF({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:u},o}var SF={kernelName:Xe,backendName:"webgl",kernelFunc:OF},CF="return (a < 0.) ? b * a : a;",EF="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var TF={kernelName:Wt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",na(o,"float32")),s=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new kF(EF,a.shape,i.shape):new bF(CF,a.shape,i.shape),u=n.runWebGLProgram(s,[a,i],"float32");return n.disposeIntermediateTensorInfo(i),u}},RF="return (a < 0.) ? b * a : a;",FF="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var IF={kernelName:On,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new kF(FF,r.shape,a.shape):new bF(RF,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],"float32")}},MF="if (isnan(x)) return x;";function AF(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,s=e.backend,u=i.x,l=s,p=a||u.dtype;if(l.shouldExecuteOnCPU([u])&&null!=r){var c=l.texData.get(u.dataId),d=r(c.values,p);return l.makeTensorInfo(u.shape,p,d)}return o=ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new dF(u.shape,n):new JR(u.shape,t),l.runWebGLProgram(o,[u],p)}}function NF(e){var t=e.opSnippet,n=e.packedOpSnippet,a=e.checkOutOfBounds,o=void 0!==a&&a,i=e.supportsComplex,s=void 0!==i&&i,u=e.cpuKernelImpl,l=e.dtype;return function(e){var a=e.inputs,i=e.backend,p=a.a,c=a.b,d=i;if(s&&"complex64"===p.dtype){var f=d.texData.get(p.dataId),g=d.texData.get(c.dataId),h=[[f.complexTensorInfos.real,g.complexTensorInfos.real],[f.complexTensorInfos.imag,g.complexTensorInfos.imag]].map((function(e){var n=(0,r.Z)(e,2),a=n[0],o=n[1],i={dataId:a.dataId,dtype:a.dtype,shape:p.shape},s={dataId:o.dataId,dtype:o.dtype,shape:c.shape},u=new bF(t,p.shape,c.shape);return d.runWebGLProgram(u,[i,s],Aa(a.dtype,o.dtype))})),m=(0,r.Z)(h,2),v=m[0],y=m[1],b=OF({inputs:{real:v,imag:y},backend:d});return d.disposeIntermediateTensorInfo(v),d.disposeIntermediateTensorInfo(y),b}var _,k=l||Aa(p.dtype,c.dtype);if(("string"===p.dtype||"string"===c.dtype||d.shouldExecuteOnCPU([p,c]))&&null!=u){var x=d.texData.get(p.dataId).values,w=d.texData.get(c.dataId).values,O="string"===p.dtype?Tc(x):x,S="string"===p.dtype?Tc(w):w,C=u(p.shape,c.shape,O,S,k),E=(0,r.Z)(C,2),T=E[0],R=E[1],F=d.makeTensorInfo(R,k);return d.texData.get(F.dataId).values=T,F}return _=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new kF(n,p.shape,c.shape,o):new bF(t,p.shape,c.shape),d.runWebGLProgram(_,[p,c],k)}}function DF(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?sF:eF;if("relu"===e)return t?lF:rF;if("elu"===e)return t?uF:nF;if("relu6"===e)return t?pF:aF;if("prelu"===e)return t?FF:RF;if("leakyrelu"===e)return t?EF:CF;if("sigmoid"===e)return t?cF:iF;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var LF=(0,R.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];(0,T.Z)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=IT(this.outputShape.length);var p=a?t[1]:t[2],c=Math.ceil(p/2),d=a?"i * 2, rc.y":"rc.y, i * 2",f=o?"rc.z, i * 2":"i * 2, rc.z",g=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",v="";s&&(m=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),v="result = activation(result);");var y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");var b="rc.x",_="rc.x";t[0]<n[0]?b="imod(rc.x, ".concat(t[0],")"):n[0]<t[0]&&(_="imod(rc.x, ".concat(n[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(c,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(b,";\n        int batchB = ").concat(_,";\n        for (int i = 0; i < ").concat(c,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(f,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(g[0]," * ").concat(h[0],");\n          result += (").concat(g[1]," * ").concat(h[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(v,"\n\n        setOutput(result);\n      }\n    ")})),BF={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},PF=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ki(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),jF="return a * b;";function zF(e){var t,n=e.inputs,a=e.backend,o=n.a,i=n.b,s=Aa(o.dtype,i.dtype);if("complex64"===o.dtype){var u=a.texData.get(o.dataId),l=a.texData.get(i.dataId),p=new PF(BF.REAL,o.shape,i.shape),c=new PF(BF.IMAG,o.shape,i.shape),d=[{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=a.runWebGLProgram(p,d,"float32"),g=a.runWebGLProgram(c,d,"float32"),h=OF({inputs:{real:f,imag:g},backend:a});return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(g),h}if(a.shouldExecuteOnCPU([o,i])){var m=a.texData.get(o.dataId),v=a.texData.get(i.dataId),y=vR(o.shape,i.shape,m.values,v.values,s),b=(0,r.Z)(y,2),_=b[0],k=b[1],x=a.makeTensorInfo(k,s);return a.texData.get(x.dataId).values=_,x}return t=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new kF(jF,o.shape,i.shape):new bF(jF,o.shape,i.shape),a.runWebGLProgram(t,[o,i],s)}var GF={kernelName:fn,backendName:"webgl",kernelFunc:zF};function WF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=n,s=G(a.shape),u=K(o,s),l=G(u);P(s===l,(function(){return"The new shape (".concat(u,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var p=i.texData.get(a.dataId);return!p.isPacked||tT(a.shape,u)||null!==p.texture&&tT(p.shape,u)?(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[$E(e.shape)].concat((0,E.Z)(JE(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[$E(t)].concat((0,E.Z)(JE(t))),i=new KR(o,r),s=[r],u=n.runWebGLProgram(i,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,i)}var UF={kernelName:An,backendName:"webgl",kernelFunc:WF},ZF=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s=4*Math.floor(r/4),u=r%4,l="sumValue += dot(values, ones);";if(null!=n){var p=1/n;l="sumValue += dot(values * ".concat(U(p)?p.toPrecision(2):p,", ones);")}var c="";o%r>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),HF=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var l="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?l="sumValue":"prod"===n?l="prodValue":"all"===n?l="allValue":"any"===n&&(l="anyValue");var p=4*Math.floor(r/4),c=r%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),f="vec4";"all"===n?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===n&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var g="";o%r>0&&(g="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(g,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(p,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(p,";\n        if (").concat(1===c,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===c,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===c,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}));function VF(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=Vp(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var s,u=a[i],l=u.inSize,p=u.windowSize,c=u.outSize,d=void 0;d="mean"===n?0===i?new ZF({windowSize:p,inSize:l,batchSize:e.shape[0],outSize:c},l):new ZF({windowSize:p,inSize:l,batchSize:e.shape[0],outSize:c}):new HF({windowSize:p,inSize:l,batchSize:e.shape[0],outSize:c},n),s=o,o=r.runWebGLProgram(d,[o],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return o}var KF=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=OT(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")}));var XF=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=OT(this.rank),i=ZR("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=i[u];var l="vec2(".concat(s.slice(-2).join(),")"),p="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),c="getChannel(getA(".concat(s.join(),"), ").concat(l,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(c,";\n      if(").concat(p,") {\n        result[1] = ").concat(c,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(c,";\n        if(").concat(p,") {\n          result[3] = ").concat(c,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function qF(e,t,n){var r=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XF(e.shape,t):new KF(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function YF(e){var t=e.inputs,n=e.backend,a=e.attrs;return function(e,t,n,a){var o=t,i=e.shape.length,s=X(o,e.shape),u=s,l=Vu(u,i),p=null!=l,c=e;p&&(c=qF(e,l,a),u=Xu(u.length,i)),Hu("sum",u,i);var d=Uu(c.shape,u),f=(0,r.Z)(d,2),g=f[0],h=f[1],m=g;n&&(m=Zu(g,s));var v=G(h),y=WF({inputs:{x:c},attrs:{shape:[G(e.shape)/v,v]},backend:a}),b=VF(y,Na(e.dtype),"sum",a),_=WF({inputs:{x:b},attrs:{shape:m},backend:a});return a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),p&&a.disposeIntermediateTensorInfo(c),_}(t.x,a.axis,a.keepDims,n)}var $F={kernelName:er,backendName:"webgl",kernelFunc:YF};function JF(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,s=r,u=o.shape.length,l=new Array(u),p=0;p<l.length;p++)l[p]=o.shape[i[p]];if(s.shouldExecuteOnCPU([o])){var c=s.texData.get(o.dataId).values,d=WR(c,o.shape,o.dtype,i,l);t=s.makeTensorInfo(l,o.dtype),s.texData.get(t.dataId).values=d}else t=qF(o,i,s);return t}var QF={kernelName:xr,backendName:"webgl",kernelFunc:JF},eI=1e3;function tI(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,l=void 0===u?null:u,p=e.leakyreluAlpha,c=void 0===p?0:p,d=e.activation,f=void 0===d?null:d,g=t.shape.length,h=n.shape.length,m=r?t.shape[g-2]:t.shape[g-1],v=a?n.shape[h-1]:n.shape[h-2],y=r?t.shape[g-1]:t.shape[g-2],b=a?n.shape[h-2]:n.shape[h-1],_=t.shape.slice(0,-2),k=n.shape.slice(0,-2),x=G(_),w=G(k),O=Ki(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);P(m===v,(function(){return"Error in matMul: inner shapes (".concat(m,") and (")+"".concat(v,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var S,C=r?[x,m,y]:[x,y,m],E=a?[w,b,v]:[w,v,b],T=WF({inputs:{x:t},backend:o,attrs:{shape:C}}),R=WF({inputs:{x:n},backend:o,attrs:{shape:E}}),F=[T,R],I=Math.max(x,w),M=r?T.shape[1]:T.shape[2],A=null!=s,N=null!=l,D="leakyrelu"===f,L=null!=f?DF(f,!0):null;if((1===y||1===b)&&M>eI&&!1===(A||N||D||null!=L)){var B=T,j=R;r&&(B=JF({inputs:{x:T},backend:o,attrs:{perm:[0,2,1]}}),F.push(B)),a&&(j=JF({inputs:{x:R},backend:o,attrs:{perm:[0,2,1]}}),F.push(j));var z=1===b,W=B;1!==b&&(W=WF({inputs:{x:B},backend:o,attrs:{shape:[I,M,1]}}),F.push(W));var U=1===b?2:1,Z=j;z&&(Z=WF({inputs:{x:j},backend:o,attrs:{shape:[I,1,M]}}),F.push(Z));var H=zF({inputs:{a:W,b:Z},backend:o});S=YF({inputs:{x:H},backend:o,attrs:{axis:U,keepDims:!0}}),F.push(H)}else{var V=Aa(t.dtype,n.dtype),K=new LF(C,E,[I,y,b],r,a,A,L,N,D),X=[T,R];if(null!=s&&X.push(s),N&&X.push(l),D){var q=o.makeTensorInfo([],"float32",na(c,"float32"));X.push(q),F.push(q)}S=o.runWebGLProgram(K,X,V)}var Y=WF({inputs:{x:S},backend:o,attrs:{shape:O}});F.push(S);for(var $=0,J=F;$<J.length;$++){var Q=J[$];o.disposeIntermediateTensorInfo(Q)}return Y}var nI={kernelName:Rr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights,u=r.transposeA,l=r.transposeB,p=r.activation;return tI({a:a,b:o,transposeA:u,transposeB:l,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:p})}},rI="return abs(x);";var aI={kernelName:we,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=TR(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new dF(a.shape,rI):new JR(a.shape,rI),r.runWebGLProgram(t,[a],a.dtype)}},oI=AF({opSnippet:QR+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),iI={kernelName:Oe,backendName:"webgl",kernelFunc:oI},sI=AF({opSnippet:QR+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),uI={kernelName:Se,backendName:"webgl",kernelFunc:sI},lI="return a + b;",pI=NF({opSnippet:lI,packedOpSnippet:lI,supportsComplex:!0,cpuKernelImpl:YT}),cI={kernelName:Ce,backendName:"webgl",kernelFunc:pI},dI=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),fI=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var gI={kernelName:Ee,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return xF({inputs:{x:a[0]},backend:r});if(a.length>ye().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),s=e({inputs:a.slice(o),backend:r});return e({inputs:[i,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return Aa(e,t)})),l=a.map((function(e){return e.shape})),p=ye().getBool("WEBGL_PACK")?new fI(a[0].shape,l):new dI(a[0].shape,l);return r.runWebGLProgram(p,a,u)}};var hI={kernelName:Te,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.axis,s=a.keepDims,u=o.shape.length,l=X(i,o.shape),p=l,c=Vu(p,u),d=o;null!=c&&(d=JF({inputs:{x:o},backend:n,attrs:{perm:c}}),p=Xu(p.length,u)),Hu("all",p,u);var f,g=Uu(d.shape,p),h=(0,r.Z)(g,2),m=h[0],v=WF({inputs:{x:d},backend:n,attrs:{shape:[-1,G(h[1])]}}),y=VF(v,v.dtype,"all",n);return f=WF(s?{inputs:{x:y},backend:n,attrs:{shape:Zu(m,l)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),null!=c&&n.disposeIntermediateTensorInfo(d),f}};var mI={kernelName:Re,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.axis,s=a.keepDims,u=o.shape.length,l=X(i,o.shape),p=l,c=Vu(p,u),d=o;null!=c&&(d=JF({inputs:{x:o},backend:n,attrs:{perm:c}}),p=Xu(p.length,u)),Hu("any",p,u);var f,g=Uu(d.shape,p),h=(0,r.Z)(g,2),m=h[0],v=WF({inputs:{x:d},backend:n,attrs:{shape:[-1,G(h[1])]}}),y=VF(v,v.dtype,"any",n);return f=WF(s?{inputs:{x:y},backend:n,attrs:{shape:Zu(m,l)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),null!=c&&n.disposeIntermediateTensorInfo(d),f}},vI=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),yI=(0,R.Z)((function e(t,n,r,a){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var s,u,l=this.outputShape,p=l.length,c=OT(p),d=HR("coords",p);if(1===i){var f=OT(u=p+1);s="\n        ".concat(f," sourceLocR = ").concat(f,"(").concat(d.join(),", 0);\n        ++").concat(d[p-1],";\n        ").concat(f," sourceLocG = ").concat(f,"(").concat(d.join(),", 0);\n        ++").concat(d[p-2],";\n        ").concat(f," sourceLocA = ").concat(f,"(").concat(d.join(),", 0);\n        --").concat(d[p-1],";\n        ").concat(f," sourceLocB = ").concat(f,"(").concat(d.join(),", 0);\n        --").concat(d[p-2],";")}else u=p,s="\n        ".concat(c," sourceLocR = coords;\n        ++").concat(d[p-1],";\n        ").concat(c," sourceLocG = coords;\n        ++").concat(d[p-2],";\n        ").concat(c," sourceLocA = coords;\n        --").concat(d[p-1],";\n        ").concat(c," sourceLocB = coords;\n        --").concat(d[p-2],";");var g=["x","y","z","w","u","v"].slice(0,u),h="."+g[u-1],m=g.map((function(e){return"int "+e})),v=HR("sourceLocR",u-1).concat("inIdx.r"),y=HR("sourceLocG",u-1).concat("inIdx.g"),b=HR("sourceLocB",u-1).concat("inIdx.b"),_=HR("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",x=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(v.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(_.join(),")));"),w="vec4(\n            getAChannel(".concat(v.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(_.join(),") : 0.)"),O=a?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(g.join(),"),\n                                          vec2(").concat(g.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(g.join(),"),\n                               vec2(").concat(g.slice(-2).join(),"));\n      }\n      ").concat(O,"\n      void main() {\n        ").concat(c," coords = getOutputCoords();\n        bool hasNextCol = ").concat(d[p-1]," < ").concat(l[p-1]-1,";\n        bool hasNextRow = ").concat(d[p-2]," < ").concat(l[p-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(h,", sourceLocG").concat(h,",\n          sourceLocB").concat(h,", sourceLocA").concat(h,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(x,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function bI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=Vp(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new vI(s,n,null==r),l=[t];null!=r&&l.push(r);var p=e.runWebGLProgram(u,l,"int32");if(1===p.shape[1])return p;var c=bI(e,t,n,p);return e.disposeIntermediateTensorInfo(p),c}function _I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=Vp(a[a.length-1]),i=new yI(a,o,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(i,s,"int32");if(u.shape.length===t.shape.length){var l=_I(e,t,n,u);return e.disposeIntermediateTensorInfo(u),l}return u}function kI(e,t,n,a){var o=[n];if(Hu("arg"+a.charAt(0).toUpperCase()+a.slice(1),o,t.shape.length),!ye().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],s=e.texData.get(t.dataId),u=t;null!==s&&s.isPacked&&(u=e.unpackTensor(t),i.push(u));var l=Uu(u.shape,o),p=(0,r.Z)(l,2),c=p[0],d=G(p[1]),f=WF({inputs:{x:u},backend:e,attrs:{shape:[-1,d]}});i.push(f);var g=bI(e,f,a);i.push(g);var h=WF({inputs:{x:g},backend:e,attrs:{shape:c}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),h}return _I(e,t,a)}var xI={kernelName:Fe,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=X(r.axis,a.shape),i=Vu(o,a.shape.length),s=a,u=[];null!=i&&(s=JF({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=Xu(o.length,s.shape.length)),Hu("argMax",[o[0]],s.shape.length);var l=kI(n,s,o[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var wI={kernelName:Ie,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=X(r.axis,a.shape),i=Vu(o,a.shape.length),s=a,u=[];null!=i&&(s=JF({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=Xu(o.length,s.shape.length)),Hu("argMin",[o[0]],s.shape.length);var l=kI(n,s,o[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},OI=AF({opSnippet:QR+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),SI={kernelName:Me,backendName:"webgl",kernelFunc:OI},CI=AF({opSnippet:QR+"return log(x + sqrt(x * x + 1.0));"}),EI={kernelName:Ae,backendName:"webgl",kernelFunc:CI},TI=AF({opSnippet:QR+"\n  return atan(x);\n"}),RI={kernelName:Ne,backendName:"webgl",kernelFunc:TI},FI=NF({opSnippet:yF+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+_F+"\n  return result;\n"}),II={kernelName:Le,backendName:"webgl",kernelFunc:FI},MI=AF({opSnippet:QR+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),AI={kernelName:De,backendName:"webgl",kernelFunc:MI},NI=(0,R.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,T.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,p=t.dilationWidth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.top,g=t.padInfo.left;this.outputShape=t.outShape;var h="avg"===n,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),v="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(h||(y="-1.0 / 1e-20"),r){this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(f,", ").concat(g,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(p,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(">="," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?m:v:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var b="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(b="avgValue / max(count, 1.0)");var _=4*Math.floor(i/4),k=i%4,x="\n      if (".concat(h,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(g,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(c,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(_,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(p,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(p,", d),\n              getValue(batch, xR, xC + 2 * ").concat(p,", d),\n              getValue(batch, xR, xC + 3 * ").concat(p,", d)\n            );\n\n            ").concat(x,"\n          }\n\n          int xC = xCCorner + ").concat(_,";\n          if (").concat(1===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(x,"\n          } else if (").concat(2===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(p,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(x,"\n          } else if (").concat(3===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(p,", d),\n              getValue(batch, xR, xC + 2 * ").concat(p,", d),\n              initializationValue\n            );\n\n            ").concat(x,"\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}})),DI=(0,R.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,T.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideDepth,u=t.strideHeight,l=t.strideWidth,p=t.dilationDepth,c=t.dilationHeight,d=t.dilationWidth,f=t.effectiveFilterDepth,g=t.effectiveFilterHeight,h=t.effectiveFilterWidth,m=t.padInfo.front,v=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,_="0.0";if(b||(_="-1.0 / 1e-20"),r){this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(v,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(f,";\n              wD += ").concat(p,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(g,";\n                wR += ").concat(c,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(h,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(">="," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(g," * ").concat(h," +\n                      wR * ").concat(h," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / max(count, 1.0)");var x=4*Math.floor(i/4),w=i%4,O="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(v,", ").concat(y,");\n      const float initializationValue = ").concat(_,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(_,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(p,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(g,";\n            wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(O,"\n            }\n\n            int xC = xCCorner + ").concat(x,";\n            if (").concat(1===w,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(O,"\n            } else if (").concat(2===w,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(O,"\n            } else if (").concat(3===w,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(O,"\n            }\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}}));var LI={kernelName:Be,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;iT(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;P(Vs(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var l=Ls(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&W(l.inShape,l.outShape))return xF({inputs:{x:a},backend:n});var p=new NI(l,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}};var BI={kernelName:je,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,p=Bs(a.shape,o,i,[1,1,1],s,u,l),c=new DI(p,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}},PI=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,p=u-1-t.padInfo.top,c=l-1-t.padInfo.left,d=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(p,", ").concat(c,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),jI=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,p=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,g=c-1-t.padInfo.front,h=d-1-t.padInfo.top,m=f-1-t.padInfo.left,v=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(g,", ").concat(h,", ").concat(m,");\n      const float avgMultiplier = float(").concat(v,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(c,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(p,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var zI={kernelName:ze,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,p=Bs(o.shape,i,s,[1,1,1],u,l),c=new jI(p);return n.runWebGLProgram(c,[a],o.dtype)}};var GI={kernelName:Pe,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;iT([a,o],"avgPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,p=Ls(i.shape,s,u,1,l),c=new PI(p);return n.runWebGLProgram(c,[a],i.dtype)}};var WI={kernelName:Ge,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return tI({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},UI=(0,R.Z)((function e(t,n,r,a,o,i){(0,T.Z)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],Ki(t,n),Ki(t,r);var s="0.0";null!=a&&(Ki(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=o&&(Ki(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),ZI=(0,R.Z)((function e(t,n,r,a,o,i){(0,T.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ki(t,n),Ki(t,r);var s="vec4(0.0)";null!=a&&(Ki(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(Ki(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),HI={kernelName:It,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,s=t.offset,u=t.scale;P(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),P(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),P(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var p=[a,o,i],c=null;null!=s&&(c=s.shape,p.push(s));var d=null;null!=u&&(d=u.shape,p.push(u));var f=ye().getBool("WEBGL_PACK_NORMALIZATION")?new ZI(a.shape,o.shape,i.shape,c,d,l):new UI(a.shape,o.shape,i.shape,c,d,l);return n.runWebGLProgram(f,p,p[0].dtype)}},VI=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=OT(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return KI.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),o=t.map((function(e,t){return"sourceLoc.".concat(KI[t]," = start[").concat(t,"] + coords.").concat(KI[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),KI=["x","y","z","w","u","v"];var XI=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=OT(this.rank),r=HR("coords",this.rank),a=HR("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function qI(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=Rs(o,a.begin,a.size),s=(0,r.Z)(i,2),u=s[0],l=s[1];if(Ss(o,u,l),0===G(l))return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){var p=n.texData.get(o.dataId),c=RR(p.values,u,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}var d=n.texData.get(o.dataId).isPacked,f=Es(o.shape,u,l);if(d||!f){var g=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XI(l):new VI(l),h=[u];return n.runWebGLProgram(g,[o],o.dtype,h)}return n.uploadToGPU(o.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var s=Ts(t,oe(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(o,u,l,n)}var YI={kernelName:Kn,backendName:"webgl",kernelFunc:qI},$I={kernelName:We,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;P(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=Xp(a.shape,o,s),l=qp(u.length,o.length),p=Yp(a.shape,o,s),c=$p(i,o.length),d=Jp(p,i,o.length),f=[],g=WF({inputs:{x:a},backend:n,attrs:{shape:u}}),h=JF({inputs:{x:g},backend:n,attrs:{perm:l}}),m=WF({inputs:{x:h},backend:n,attrs:{shape:p}}),v=qI({inputs:{x:m},backend:n,attrs:{begin:c,size:d}});return f.push(g),f.push(h),f.push(m),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}};var JI={kernelName:Ue,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=n.readSync(a.dataId),u=n.readSync(o.dataId),l=$T(s,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}};var QI={kernelName:Ze,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.readSync(r.dataId),i=n.readSync(a.dataId),s=Ki(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},eM=NF({opSnippet:"return float(a != b);",cpuKernelImpl:bR,dtype:"bool"}),tM={kernelName:hn,backendName:"webgl",kernelFunc:eM};function nM(e){var t=e.inputs,n=e.backend,r=t.input;return xF({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var rM={kernelName:Fn,backendName:"webgl",kernelFunc:nM},aM="return float(int(x));";var oM={kernelName:He,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,a=t.backend,o=t.attrs,i=n.x,s=o.dtype;if("complex64"===s){if("complex64"===i.dtype)return xF({inputs:{x:i},backend:a});var u=Qu(i.shape),l=e({inputs:{x:i},backend:a,attrs:{dtype:"float32"}}),p=OF({inputs:{real:l,imag:u},backend:a});return u.dispose(),a.disposeIntermediateTensorInfo(l),p}if("complex64"===i.dtype){var c=nM({inputs:{input:i},backend:a}),d=e({inputs:{x:c},backend:a,attrs:{dtype:s}});return a.disposeIntermediateTensorInfo(c),d}if(!J(i.dtype,s)){var f=xF({inputs:{x:i},backend:a});return{dataId:f.dataId,shape:f.shape,dtype:s}}if(a.shouldExecuteOnCPU([i])){var g=a.texData.get(i.dataId).values,h=QT(g,i.shape,i.dtype,s),m=(0,r.Z)(h,3),v=m[0],y=m[1],b=m[2];return a.makeTensorInfo(v,y,b)}if("int32"===s)return function(e,t){var n=new JR(e.shape,aM),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,a);if("bool"===s){var _=a.makeTensorInfo([],"bool",Y("bool",1)),k=eM({inputs:{a:i,b:_},backend:a});return a.disposeIntermediateTensorInfo(_),k}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(s))}},iM="return ceil(x);",sM=AF({opSnippet:iM,packedOpSnippet:iM,cpuKernelImpl:eR}),uM={kernelName:Ve,backendName:"webgl",kernelFunc:sM},lM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),pM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var cM={kernelName:Ke,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,s=a.clipValueMax;t=ye().getBool("WEBGL_PACK_CLIP")?new pM(o.shape):new lM(o.shape);var u=[[i],[s]];return r.runWebGLProgram(t,[o],o.dtype,u)}},dM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function fM(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var gM={kernelName:qe,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new dM(r.shape),i=[fM(r,a.complexTensorInfos.real),fM(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},hM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.outputShape=[],this.outputShape=Zp(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(i,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),mM=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Zp(t,n);var r=this.outputShape,a=r.length,o=OT(a),i=HR("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var l=1;l<u.length;l++)u[l]=u[l-1]+t[l][n];for(var p=s[n],c=s.slice(-2),d=s.join(),f="if (".concat(p," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(d,"), vec2(").concat(c.join(),"));\n        }"),g=1;g<u.length;g++){var h=u[g-1];f+="\n        if (".concat(p," < ").concat(u[g],"  && ").concat(p," >= ").concat(u[g-1],") {\n          return getChannel(\n            getT").concat(g,"(").concat(vM(s,p,h),"),\n            vec2(").concat(vM(c,p,h),"));\n        }")}var m=u.length,v=u[u.length-1];f+="\n        return getChannel(\n          getT".concat(m,"(").concat(vM(s,p,v),"),\n          vec2(").concat(vM(c,p,v),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(f,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}));function vM(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function yM(e){var t=e.inputs,n=e.backend,r=t.input;return xF({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var bM={kernelName:Pt,backendName:"webgl",kernelFunc:yM};function _M(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return nM({inputs:{input:e},backend:n})})),o=e.map((function(e){return yM({inputs:{input:e},backend:n})})),i=_M(a,t,n),s=_M(o,t,n),u=OF({inputs:{real:i,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}var l=n.shouldExecuteOnCPU(e);if("string"===r&&(l=!0),l){var p=e.map((function(e){var r=G(e.shape.slice(t));return WF({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),c=p.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),d=Zp(p.map((function(e){return e.shape})),1),f=1===p[0].shape[0],g=tR(c,d,r,f),h=Zp(e.map((function(e){return e.shape})),t),m=n.makeTensorInfo(h,r,g);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var v=e.filter((function(e){return G(e.shape)>0})),y=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&v[0].shape.length>1;if(1===v.length){var b=y?new JR(e[0].shape,oF):new dF(e[0].shape,oF);return n.runWebGLProgram(b,e,r)}var _=ye().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(v.length>_){for(var k=[],x=0;x<v.length;x+=_){var w=v.slice(x,x+_);k.push(_M(w,t,n))}for(var O=_M(k,t,n),S=0,C=k;S<C.length;S++){var E=C[S];n.disposeIntermediateTensorInfo(E)}return O}if(y){var T=new mM(v.map((function(e){return e.shape})),t);return n.runWebGLProgram(T,v,r)}var R=function(e,t,n){var r=Zp(e.map((function(e){return e.shape})),t),a=e.map((function(e){return WF({inputs:{x:e},attrs:{shape:[-1,G(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(v,t,n),F=R.tensors2D,I=R.outShape,M=new hM(F.map((function(e){return e.shape}))),A=n.runWebGLProgram(M,F,r);F.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var N=WF({inputs:{x:A},attrs:{shape:I},backend:n});return n.disposeIntermediateTensorInfo(A),N}function kM(e){var t=e.inputs,n=e.backend,r=X(e.attrs.axis,t[0].shape)[0];Up(t.map((function(e){return e.shape})),r);var a=Zp(t.map((function(e){return e.shape})),r);if(0===G(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return G(e.shape)>0}));return 1===o.length?xF({inputs:{x:o[0]},backend:n}):_M(o,r,n)}var xM={kernelName:Ye,backendName:"webgl",kernelFunc:kM},wM=(0,R.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,T.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,p=t.dilationHeight,c=t.dilationWidth,d=t.filterHeight,f=t.filterWidth,g=4*Math.floor(t.inChannels/4),h=t.inChannels%4,m="channelsLast"===t.dataFormat,v=m?1:2,y=m?2:3,b=m?3:1,_="",k="";r&&(_=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(_,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(v,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(p,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(f,"; wC++) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(g,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===h,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(g,") *\n                    getW(wR, wC, ").concat(g,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(g,", xR, xC) *\n                    getW(wR, wC, ").concat(g,", d2);\n              }\n\n            } else if (").concat(2===h,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(g,", d2),\n                getW(wR, wC, ").concat(g," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(g,"),\n                  getX(batch, xR, xC, ").concat(g," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(g,", xR, xC),\n                  getX(batch, ").concat(g," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===h,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(g,", d2),\n                getW(wR, wC, ").concat(g," + 1, d2),\n                getW(wR, wC, ").concat(g," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(g,"),\n                  getX(batch, xR, xC, ").concat(g," + 1),\n                  getX(batch, xR, xC, ").concat(g," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(g,", xR, xC),\n                  getX(batch, ").concat(g," + 1, xR, xC),\n                  getX(batch, ").concat(g," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(x,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),OM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,p=t.dilationWidth,c=t.filterDepth,d=t.filterHeight,f=t.filterWidth,g=4*Math.floor(t.inChannels/4),h=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(c,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,"; wC++) {\n              int xC = xCCorner + wC * ").concat(p,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(g,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===h,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(g,") *\n                  getW(wF, wR, wC, ").concat(g,", d2);\n              } else if (").concat(2===h,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(g,"),\n                  getX(batch, xF, xR, xC, ").concat(g," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(g,", d2),\n                  getW(wF, wR, wC, ").concat(g," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===h,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(g,"),\n                  getX(batch, xF, xR, xC, ").concat(g," + 1),\n                  getX(batch, xF, xR, xC, ").concat(g," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(g,", d2),\n                  getW(wF, wR, wC, ").concat(g," + 1, d2),\n                  getW(wF, wR, wC, ").concat(g," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),SM=(0,R.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,T.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=IT(this.outputShape.length);for(var i=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,l=t.filterHeight,p=t.filterWidth,c=p,d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",f=0;f<p;f++)d+="\n           vec4 xTexelC".concat(2*f,";\n           int xTexelC").concat(2*f,"Ready;\n           vec4 xTexelC").concat(2*f+1,";\n           int xTexelC").concat(2*f+1,"Ready;\n           vec4 xC").concat(f,";");d+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var g=0;g<p;g++)d+="\n           xTexelC".concat(2*g," = vec4(0.0);\n           xTexelC").concat(2*g,"Ready = 0;\n           xTexelC").concat(2*g+1," = vec4(0.0);\n           xTexelC").concat(2*g+1,"Ready = 0;\n           xC").concat(g," = vec4(0.0);");d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var h=0;h<(c+1)/2;h++){var m=2*h;if(d+="\n           xC = xCCorner + ".concat(m*u,";\n           "),1===s){if(m<p&&(i%2===1?(d+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n               "),d+=1===u&&m>0?"\n                 xC".concat(m," = vec4(xTexelC").concat(m-2,".zw, xTexelC").concat(m,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(m," = vec4(previous.zw, xTexelC").concat(m,".xy);\n                   } else {\n                     xC").concat(m," = vec4(0.0, 0.0, xTexelC").concat(m,".xy);\n                   }\n                   ")):d+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n\n                 xC").concat(m," = xTexelC").concat(m,";\n                 "),m+1<p)){var v=i%2===0?D(u):u;u%2===0&&i%2===1||u%2!==0&&i%2!==1?(d+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(v,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                     xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(m+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(m+1,"Ready = 1;\n                   }\n                   "),d+=u>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(m+1," = vec4(previous.zw, xTexelC").concat(m+1,".xy);\n                     } else {\n                      xC").concat(m+1," = vec4(0.0, 0.0, xTexelC").concat(m+1,".xy);\n                     }\n                     "):"\n                     xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".xy);\n                     ")):d+=1===v?"\n                     xC".concat(m+1," = xTexelC").concat(m,";\n                     "):"\n                     xCOffset = xC + ".concat(v,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                       xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(m+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(m+1,"Ready = 1;\n                     }\n\n                     xC").concat(m+1," = xTexelC").concat(m+1,";\n                     ")}}else m<p&&(i%2===1?(d+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                   xTexelC").concat(m+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(m+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m+1,"Ready = 1;\n                 }\n\n                 xC").concat(m," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n               "),m+1<p&&(d+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(m+1," = vec4(xTexelC").concat(m+1,".xy, final.xy);\n                 "))):(d+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                   xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(m+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(m+1,"Ready = 1;\n                 }\n\n                 xC").concat(m," = vec4(\n                   xTexelC").concat(m,".xy, xTexelC").concat(m+1,".xy);\n               "),m+1<p&&(d+="\n                   xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n                 "))));m<p&&(d+="\n             wTexel = getW(r, ".concat(m,", d1, d2);\n             dotProd += xC").concat(m,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(m,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),m+1<p&&(d+="\n               wTexel = getW(r, ".concat(m+1,", d1, d2);\n               dotProd += xC").concat(m+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(m+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";var y="",b="";r&&(y=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):o?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),b="result = activation(result);");var _=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(y,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(d,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(_,"\n         ").concat(b,"\n         setOutput(result);\n       }\n     ")})),CM=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=IT(this.outputShape.length);for(var r=n.dataFormat,a=uT(),o="channelsLast"===r,i=o?1:2,s=o?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),l="",p=0;p<=1;p++)for(var c=0;c<=1;c++)l+="\n          blockIndex = rc.z + ".concat(c,";\n          pos = rc.y + ").concat(p,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(o,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*p+c,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*p+c,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function EM(e,t){var n=e.length;return n>=3?[].concat((0,E.Z)(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function TM(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,l=void 0===u?null:u,p=e.leakyreluAlpha,c=void 0===p?0:p,d=e.activation,f=void 0===d?null:d,g=n.shape,h=o.texData.get(n.dataId),m=a.inChannels,v=g[0]*g[1]*g[2],y=a.outChannels,b="channelsLast"===a.dataFormat,_=[];if(null!=l){var k=EM(l.shape,b);null!=k&&(l=WF({inputs:{x:l},backend:o,attrs:{shape:k}}),_.push(l))}if(null!=s){var x=EM(s.shape,b);null!=x&&(s=WF({inputs:{x:s},backend:o,attrs:{shape:x}}),_.push(s))}if(!((1===v||1===y)&&m>eI)&&h.isPacked&&b&&null!=h.texture&&g[2]%2!==0&&W(h.shape.slice(-3),g.slice(-3))){var w=g[0]*g[1]*(g[2]+1),O={dataId:n.dataId,shape:[1,w,a.inChannels],dtype:n.dtype},S=h.shape;h.shape=h.shape.slice(),h.shape[h.shape.length-2]++,P(tT(h.shape,O.shape),(function(){return"packed reshape ".concat(h.shape," to ").concat(O.shape," isn't free")}));var C=WF({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});_.push(C);var E=tI({a:O,b:C,backend:o,transposeA:!1,transposeB:false,bias:s,activation:f,preluActivationWeights:l,leakyreluAlpha:c}),T=o.texData.get(E.dataId);P(T.isPacked,(function(){return"batchMatMul result is expected to be packed"})),h.shape=S,T.shape=a.outShape,(t=xF({inputs:{x:E},backend:o})).shape=a.outShape,_.push(E)}else{var R=a.outHeight*a.outWidth,F=WF({inputs:{x:n},backend:o,attrs:{shape:b?[a.batchSize,R,a.inChannels]:[a.batchSize,a.inChannels,R]}}),I=WF({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),M=tI({a:b?F:I,b:b?I:F,transposeA:!b,transposeB:false,backend:o,bias:s,activation:f,preluActivationWeights:l,leakyreluAlpha:c});t=WF({inputs:{x:M},backend:o,attrs:{shape:a.outShape}}),_.push(F),_.push(I),_.push(M)}for(var A=0,N=_;A<N.length;A++){var D=N[A];o.disposeIntermediateTensorInfo(D)}return t}function RM(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,s=e.preluActivationWeights,u=void 0===s?null:s,l=e.leakyreluAlpha,p=void 0===l?0:l,c=e.activation,d=void 0===c?null:c,f=r.filterWidth,g=r.filterHeight,h=r.inChannels,m=r.outWidth,v=r.outHeight,y="channelsLast"===r.dataFormat,b=f*g*h,_=v*m,k=[r.batchSize,b,_],x=[];if(null!=u){var w=EM(u.shape,y);null!=w&&(u=WF({inputs:{x:u},backend:a,attrs:{shape:w}}),x.push(u))}if(null!=i){var O=EM(i.shape,y);null!=O&&(i=WF({inputs:{x:i},backend:a,attrs:{shape:O}}),x.push(i))}var S=WF({inputs:{x:n},backend:a,attrs:{shape:[1,b,G(n.shape)/b]}});x.push(S);var C=new CM(k,r),E=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],T=a.runWebGLProgram(C,[t],"float32",E),R=WF({inputs:{x:T},backend:a,attrs:{shape:k}});x.push(T),x.push(R);var F=null!=i,I=null!=u,M="leakyrelu"===d,A=d?DF(d,!0):null,N=new LF(y?R.shape:S.shape,y?S.shape:R.shape,y?[r.batchSize,_,r.outChannels]:[r.batchSize,r.outChannels,_],!0,!1,F,A,I,M),D=y?[R,S]:[S,R];if(i&&D.push(i),I&&D.push(u),M){var L=a.makeTensorInfo([],"float32",na(p,"float32"));D.push(L),x.push(L)}var B=a.runWebGLProgram(N,D,"float32"),P=WF({inputs:{x:B},backend:a,attrs:{shape:r.outShape}});x.push(B);for(var j=0,z=x;j<z.length;j++){var W=z[j];a.disposeIntermediateTensorInfo(W)}return P}var FM={kernelName:$e,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,l=a.dataFormat,p=a.dilations,c=a.dimRoundingMode,d=Xs(l),f=Ps(o.shape,i.shape,s,p,u,c,!1,d);if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(f.strideWidth<=2&&"channelsLast"===d&&ye().getBool("WEBGL_EXP_CONV")){var g=new SM(f),h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];t=r.runWebGLProgram(g,[o,i],"float32",h)}else if(ye().getBool("WEBGL_CONV_IM2COL"))t=RM({x:o,filter:i,convInfo:f,backend:r});else{var m=new wM(f);t=r.runWebGLProgram(m,[o,i],"float32")}else t=TM({x:o,filter:i,convInfo:f,backend:r});var v=WF({inputs:{x:t},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(t),v}},IM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              ").concat(i?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),MM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,l=i?1:2,p=i?2:3,c=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(c,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(p,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),AM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),NM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,l=r-1-t.padInfo.top,p=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(l,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var DM={kernelName:Je,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,p=r.filterShape,c=Xs(u),d=Ps(a.shape,p,i,1,s,l,!1,c),f=new IM(d);return n.runWebGLProgram(f,[a,o],"float32")}},LM=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=IT(this.outputShape.length);var n=t.filterHeight,r=t.filterWidth,a=n-1-t.padInfo.top,o=r-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(t.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(t.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}));var BM={kernelName:Qe,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,p=r.dimRoundingMode,c=Xs(l),d=Ps(i,o.shape,s,1,u,p,!1,c);if(ye().getBool("WEBGL_PACK")&&"channelsLast"===c){var f=[[d.strideHeight,d.strideWidth]],g=new LM(d);return n.runWebGLProgram(g,[a,o],"float32",f)}var h=new MM(d);return n.runWebGLProgram(h,[a,o],"float32")}};var PM={kernelName:et,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,l=js(a.shape,o.shape,i,u,s),p=new OM(l);return n.runWebGLProgram(p,[a,o],"float32")}};var jM={kernelName:tt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape,l=js(a.shape,u,i,1,s),p=new AM(l);return n.runWebGLProgram(p,[a,o],"float32")}};var zM,GM={kernelName:nt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=js(r.inputShape,o.shape,s,1,i),l=new NM(u);return n.runWebGLProgram(l,[a,o],"float32")}},WM=AF({opSnippet:MF+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(_F,"\n  return result;\n")}),UM={kernelName:rt,backendName:"webgl",kernelFunc:WM},ZM=AF({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),HM={kernelName:at,backendName:"webgl",kernelFunc:ZM},VM=(0,R.Z)((function e(t,n,a,o,i){(0,T.Z)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var s=(0,r.Z)(t,4),u=s[0],l=s[1],p=s[2],c=s[3],d=(0,r.Z)(n,1)[0],f=(0,r.Z)(a,2),g=f[0],h=f[1];this.outputShape=[d,g,h,c];var m="bilinear"===o?1:0,v="".concat(l-1,".0"),y="".concat(p-1,".0"),b=g>1?["".concat((l-1)/(g-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],_=(0,r.Z)(b,3),k=_[0],x=_[1],w=_[2],O=h>1?["".concat((p-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],S=(0,r.Z)(O,3),C=S[0],E=S[1],R=S[2];this.userCode="\n      const float height_ratio = float(".concat(k,");\n      const float width_ratio = float(").concat(C,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(u,") {\n          return;\n        }\n\n        float height_scale = ").concat(x,";\n        float width_scale = ").concat(E,";\n\n        float in_y = ").concat(w,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(R,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),KM={kernelName:st,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,p=new VM(a.shape,o.shape,s,u,l);return n.runWebGLProgram(p,[a,o,i],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(zM||(zM={}));var XM=(0,R.Z)((function e(t,n,r,a){(0,T.Z)(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var o=this.outputShape.length,i=this.op===zM.Prod?"1.0":"0.0",s=r?i:"getX(".concat(qM(o,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],l="",p="";r?(l=a?"end != ".concat(u-1):"end != 0",p=a?"end + 1":"end - 1"):(l=a?"end + pow2 < ".concat(u):"end >= pow2",p=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(OT(o)," coords = getOutputCoords();\n        int end = ").concat(YM(o,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(p,";\n          ").concat(YM(o,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(qM(o,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function qM(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function YM(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function $M(e,t,n,r,a,o){var i=t.shape.length,s=Vu([r],i),u=t;null!=s&&(u=JF({inputs:{x:t},backend:n,attrs:{perm:s}}));var l=Xu(1,i)[0];if(l!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var p=u.shape[l],c=xF({inputs:{x:u},backend:n}),d=0;d<=Math.ceil(Math.log2(p))-1;d++){var f=new XM(e,u.shape,!1,o),g=[[d]],h=c;c=n.runWebGLProgram(f,[c],c.dtype,g),n.disposeIntermediateTensorInfo(h)}if(a){var m=new XM(e,u.shape,a,o),v=c;c=n.runWebGLProgram(m,[c],c.dtype),n.disposeIntermediateTensorInfo(v)}if(null!=s){var y=JF({inputs:{x:c},backend:n,attrs:{perm:Ku(s)}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),y}return c}var JM={kernelName:ot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;return $M(zM.Prod,a,n,o,i,s)}};var QM={kernelName:it,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;return $M(zM.Sum,a,n,o,i,s)}};var eA={kernelName:ut,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),l=n.readSync(o.dataId),p=$T(u,l,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,p)}if(2===a.shape.length){var c=n.bufferSync(a),d=n.bufferSync(o),f=JT(c,d,i,s);return n.makeTensorInfo(f.shape,o.dtype,f.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},tA=function(){function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,R.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var nA={kernelName:lt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat,s=a.shape[0],u=("NHWC"===i?a.shape[1]:a.shape[2])*o,l=("NHWC"===i?a.shape[2]:a.shape[3])*o,p=("NHWC"===i?a.shape[3]:a.shape[1])/(o*o),c=new tA("NHWC"===i?[s,u,l,p]:[s,p,u,l],o,i);return n.runWebGLProgram(c,[a],a.dtype)}},rA=(0,R.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,T.Z)(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=IT(this.outputShape.length);var i=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,l="",p="";r&&(l=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),p="result = activation(result);");var c=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(c,"\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),aA=(0,R.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,T.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=IT(this.outputShape.length);for(var i=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,l=t.dilationWidth,p=t.filterHeight,c=t.filterWidth,d=c,f="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",g=0;g<c;g++)f+="\n          vec4 xTexelC".concat(2*g,";\n          int xTexelC").concat(2*g,"Ready;\n          vec4 xTexelC").concat(2*g+1,";\n          int xTexelC").concat(2*g+1,"Ready;\n          vec4 xC").concat(g,";");f+="\n    for (int r = 0; r < ".concat(p,"; r++) {\n      ");for(var h=0;h<c;h++)f+="\n          xTexelC".concat(2*h," = vec4(0.0);\n          xTexelC").concat(2*h,"Ready = 0;\n          xTexelC").concat(2*h+1," = vec4(0.0);\n          xTexelC").concat(2*h+1,"Ready = 0;\n          xC").concat(h," = vec4(0.0);");f+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var m=0;m<(d+1)/2;m++){var v=2*m;if(f+="\n          xC = xCCorner + ".concat(v*l,";\n          "),1===u){if(v<c&&(s%2===1?(f+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n              "),f+=1===l&&v>0?"\n                xC".concat(v," = vec4(xTexelC").concat(v-2,".zw, xTexelC").concat(v,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(v," = vec4(previous.zw, xTexelC").concat(v,".xy);\n                  } else {\n                    xC").concat(v," = vec4(0.0, 0.0, xTexelC").concat(v,".xy);\n                  }\n                  ")):f+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                xC").concat(v," = xTexelC").concat(v,";\n                "),v+1<c)){var y=s%2===0?D(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(f+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                    xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(v+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(v+1,"Ready = 1;\n                  }\n                  "),f+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(v+1," = vec4(previous.zw, xTexelC").concat(v+1,".xy);\n                    } else {\n                     xC").concat(v+1," = vec4(0.0, 0.0, xTexelC").concat(v+1,".xy);\n                    }\n                    "):"\n                    xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".xy);\n                    ")):f+=1===y?"\n                    xC".concat(v+1," = xTexelC").concat(v,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                      xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(v+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(v+1,"Ready = 1;\n                    }\n\n                    xC").concat(v+1," = xTexelC").concat(v+1,";\n                    ")}}else v<c&&(s%2===1?(f+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                  xTexelC").concat(v+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(v+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v+1,"Ready = 1;\n                }\n\n                xC").concat(v," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n              "),v+1<c&&(f+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(v+1," = vec4(xTexelC").concat(v+1,".xy, final.xy);\n                "))):(f+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                  xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(v+1,"Ready = 1;\n                }\n\n                xC").concat(v," = vec4(\n                  xTexelC").concat(v,".xy, xTexelC").concat(v+1,".xy);\n              "),v+1<c&&(f+="\n                  xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n                "))));v<c&&(f+="\n            wTexel = getW(r, ".concat(v,", d1, q);\n            dotProd += xC").concat(v," * vec4(wTexel.xz, wTexel.xz);\n          "),v+1<c&&(f+="\n              wTexel = getW(r, ".concat(v+1,", d1, q);\n              dotProd += xC").concat(v+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}f+="\n    }\n  ",f+="\n      }\n    ";var b="",_="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),_="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(f,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(_,"\n        setOutput(result);\n      }\n    ")}));var oA={kernelName:pt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode,p=u;null==p&&(p=[1,1]),P(Vs(i,p),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(p,"'")}));var c,d=Ps(a.shape,o.shape,i,p,s,l,!0);c=ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new aA(d):new rA(d);var f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(c,[a,o],"float32",f)}},iA=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),sA=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var uA={kernelName:ct,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,p=r.filterShape,c=Ps(a.shape,p,i,s,u,l,!0),d=new iA(c);return n.runWebGLProgram(d,[a,o],"float32")}};var lA={kernelName:dt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,p=Ps(r.inputShape,o.shape,i,s,u,l,!0),c=new sA(p);return n.runWebGLProgram(c,[a,o],"float32")}},pA=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var cA={kernelName:ft,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,E.Z)(r.shape),(0,E.Z)(r.shape)),o=G(r.shape),i=WF({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new pA(o),u=n.runWebGLProgram(s,[i],i.dtype),l=WF({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),l}},dA=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,l=t.dilationHeight,p=t.dilationWidth,c=a.top,d=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(c,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(p,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var fA={kernelName:gt,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,l=a.dilations,p=Ds(o.shape,i.shape,s,u,"NHWC",l),c=new dA(p),d=WF({inputs:{x:t=r.runWebGLProgram(c,[o,i],"float32")},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),d}};var gA={kernelName:yt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=vc(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;bc(o.length,s,r);for(var u=_c(i,s),l=u.path,p=u.steps,c=p.length,d=null,f=o.length,g=[],h=0;h<c;++h){var m,v=(0,C.Z)(p[h]);try{for(v.s();!(m=v.n()).done;){var y=m.value,b=yc(f,s[y]),_=b.permutationIndices,k=b.expandDims,x=void 0;kc(_)?x=r[y]:(x=JF({inputs:{x:r[y]},backend:n,attrs:{perm:_}}),g.push(x));for(var w=x.shape.slice(),O=0;O<k.length;++O)w.splice(k[O],0,1);W(x.shape,w)||(x=WF({inputs:{x:x},backend:n,attrs:{shape:w}}),g.push(x)),null===d?d=x:(d=zF({inputs:{a:x,b:d},backend:n}),g.push(d))}}catch(yB){v.e(yB)}finally{v.f()}h<c-1&&(l[h]>=0&&(d=YF({inputs:{x:d},backend:n,attrs:{axis:l[h]-(o.length-f),keepDims:!1}}),g.push(d)),f--)}for(var S=0,E=g;S<E.length;S++){var T=E[S];T!==d&&n.disposeIntermediateTensorInfo(T)}return d}},hA=AF({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),mA={kernelName:bt,backendName:"webgl",kernelFunc:hA},vA={kernelName:_t,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new kF("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new bF("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},yA=NF({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:nR}),bA={kernelName:xt,backendName:"webgl",kernelFunc:yA},_A=AF({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(rc,";\n  float a1 = ").concat(ac,";\n  float a2 = ").concat(oc,";\n  float a3 = ").concat(ic,";\n  float a4 = ").concat(sc,";\n  float a5 = ").concat(uc,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),kA={kernelName:kt,backendName:"webgl",kernelFunc:_A},xA=AF({opSnippet:MF+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:rR,dtype:"float32"}),wA={kernelName:wt,backendName:"webgl",kernelFunc:xA};function OA(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,s=o.shape.slice(),u=a;return a<0&&(P(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+a+1),s.splice(u,0,1),WF({inputs:{x:o},backend:r,attrs:{shape:s}})}var SA={kernelName:Ot,backendName:"webgl",kernelFunc:OA},CA="return exp(x) - 1.0;",EA=AF({opSnippet:CA,packedOpSnippet:CA,cpuKernelImpl:aR}),TA={kernelName:St,backendName:"webgl",kernelFunc:EA},RA=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function FA(e,t,n){var r=n.texData.get(e.dataId),a=G(e.shape),o=e.shape[e.shape.length-1],i=WF({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,u=new RA("real",s,t),l=new RA("imag",s,t),p=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],c=n.runWebGLProgram(u,p,"float32"),d=n.runWebGLProgram(l,p,"float32"),f=OF({inputs:{real:c,imag:d},backend:n});n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d);var g=WF({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(f),g}var IA={kernelName:Ct,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return FA(t.input,!1,n)}},MA=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function AA(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||ne(a))){var i=$(o,G(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var s=new MA(r,a),u=[[a]];return t.runWebGLProgram(s,[],o,u)}var NA,DA={kernelName:Et,backendName:"webgl",kernelFunc:AA},LA=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),BA={kernelName:Tt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new LA(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},PA="return floor(x);",jA=AF({opSnippet:PA,packedOpSnippet:PA,cpuKernelImpl:oR}),zA={kernelName:Rt,backendName:"webgl",kernelFunc:jA},GA=NF({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),WA={kernelName:Ft,backendName:"webgl",kernelFunc:GA},UA=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["A"];var n=uT(),a=(0,r.Z)(t,2),o=a[0],i=a[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(o,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),ZA=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=uT(),a=(0,r.Z)(t,2),o=a[0],i=a[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(o,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),HA={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.pixels,i=a.numChannels,s="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,u="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,l=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],p=(0,r.Z)(l,2),c=p[0],d=p[1],f=[d,c],g=[d,c,i];if(u||s){var h=ye().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=NA&&h===VA||(VA=h,NA=document.createElement("canvas").getContext("2d",{willReadFrequently:VA})),NA.canvas.width=c,NA.canvas.height=d,NA.drawImage(o,0,0,c,d),o=NA.canvas}var m=n.makeTensorInfo(f,"int32");n.texData.get(m.dataId).usage=EE.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),o);var v=ye().getBool("WEBGL_PACK")?new ZA(g):new UA(g),y=n.runWebGLProgram(v,[m],"int32");return n.disposeData(m.dataId),y}},VA=ye().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var KA={kernelName:Fr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=n.bias,u=n.preluActivationWeights,l=a.strides,p=a.pad,c=a.dataFormat,d=a.dilations,f=a.dimRoundingMode,g=a.activation,h=a.leakyreluAlpha,m=Xs(c),v=Ps(o.shape,i.shape,l,d,p,f,!1,m),y=[],b=null!=s,_=null!=u,k="leakyrelu"===g,x=function(){var e=[o,i],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=WF({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&e.push(t(s,c)),_&&e.push(t(u,c)),k){var n=r.makeTensorInfo([],"float32",na(h,"float32"));e.push(n),y.push(n)}return e};if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if(v.strideWidth<=2&&"channelsLast"===m&&ye().getBool("WEBGL_EXP_CONV")){var w=g?DF(g,!0):null,O=new SM(v,b,w,_,k),S=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],C=x();t=r.runWebGLProgram(O,C,"float32",S)}else if(ye().getBool("WEBGL_CONV_IM2COL"))t=RM({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:g,preluActivationWeights:u,leakyreluAlpha:h});else{var E=g?DF(g,!1):null,T=new wM(v,b,E,_,k),R=x();t=r.runWebGLProgram(T,R,"float32")}else t=TM({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:g,preluActivationWeights:u,leakyreluAlpha:h});var F=WF({inputs:{x:t},backend:r,attrs:{shape:v.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),F}};var XA={kernelName:Ir,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,p=r.dilations,c=r.dimRoundingMode,d=r.activation,f=r.leakyreluAlpha,g=[],h=p;null==h&&(h=[1,1]),P(Vs(u,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(h,"'")}));var m,v=Ps(a.shape,o.shape,u,h,l,c,!0),y=ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,b=d?DF(d,y):null,_=[a,o],k=null!=i,x=null!=s,w="leakyrelu"===d;if(k&&_.push(i),x&&_.push(s),w){var O=n.makeTensorInfo([],"float32",na(f,"float32"));_.push(O),g.push(O)}m=y?new aA(v,k,b,x,w):new rA(v,k,b,x,w);var S=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],C=n.runWebGLProgram(m,_,"float32",S);return g.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),C}},qA=(0,R.Z)((function e(t,n,r,a){(0,T.Z)(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var o=OT(r.length),i="\n    int index;",s=0;s<this.sliceDim;s++)i+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var YA={kernelName:At,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.params,o=t.indices,i=o.shape,s=i[i.length-1],u=G(a.shape),l=Qp(a,o),p=(0,r.Z)(l,4),c=p[0],d=p[1],f=p[2],g=p[3],h=WF({inputs:{x:o},backend:n,attrs:{shape:[d,s]}}),m=WF({inputs:{x:a},backend:n,attrs:{shape:[G(a.shape)/f,f]}});if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var v=n.readSync(o.dataId),y=n.bufferSync(a),b=iR(v,y,a.dtype,d,s,f,g,a.shape,u);return n.makeTensorInfo(c,a.dtype,b.values)}var _=new qA(s,g,[d,f],a.shape),k=n.runWebGLProgram(_,[m,h],m.dtype),x=WF({inputs:{x:k},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(k),x}},$A=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=OT(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function JA(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims,u=X(i,a.shape)[0];if(ye().get("DEBUG"))for(var l=n.readSync(o.dataId),p=a.shape[u],c=function(){var e=l[d];P(e<=p-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(p-1,"]")}))},d=0;d<l.length;++d)c();var f=Ec(a,o,u,s),g=G(o.shape),h=[],m=WF({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),v=WF({inputs:{x:o},backend:n,attrs:{shape:[f.batchSize,g/f.batchSize]}});h.push(m),h.push(v);var y=[f.batchSize,f.outerSize,g/f.batchSize,f.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var b=n.bufferSync(v),_=n.bufferSync(m),k=sR(_,b,y);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f.outputShape,k.dtype,k.values)}var x=new $A(m.shape,y),w=n.runWebGLProgram(x,[m,v],m.dtype);h.push(w);var O=WF({inputs:{x:w},backend:n,attrs:{shape:f.outputShape}});return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),O}var QA={kernelName:Mt,backendName:"webgl",kernelFunc:JA},eN=NF({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:uR,dtype:"bool"}),tN={kernelName:Nt,backendName:"webgl",kernelFunc:eN},nN=NF({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:lR}),rN={kernelName:Dt,backendName:"webgl",kernelFunc:nN};var aN={kernelName:Bt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return FA(t.input,!0,n)}},oN=AF({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),iN={kernelName:jt,backendName:"webgl",kernelFunc:oN},sN=AF({opSnippet:"return float(isinf(x));",dtype:"bool"}),uN={kernelName:zt,backendName:"webgl",kernelFunc:sN},lN=AF({opSnippet:"return float(isnan(x));",dtype:"bool"}),pN={kernelName:Gt,backendName:"webgl",kernelFunc:lN},cN=NF({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:pR,dtype:"bool"}),dN={kernelName:Ut,backendName:"webgl",kernelFunc:cN},fN=NF({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:cR,dtype:"bool"}),gN={kernelName:Zt,backendName:"webgl",kernelFunc:fN};var hN={kernelName:Ht,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=dR(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},mN=AF({opSnippet:MF+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:fR}),vN={kernelName:Vt,backendName:"webgl",kernelFunc:mN},yN=AF({opSnippet:MF+"\n  return log(1.0 + x);\n"}),bN={kernelName:Kt,backendName:"webgl",kernelFunc:yN},_N=NF({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),kN={kernelName:Xt,backendName:"webgl",kernelFunc:_N},xN=AF({opSnippet:"return float(!(x >= 1.0));"}),wN={kernelName:qt,backendName:"webgl",kernelFunc:xN},ON=NF({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),SN={kernelName:Yt,backendName:"webgl",kernelFunc:ON},CN=(0,R.Z)((function e(t,n,r,a,o){(0,T.Z)(this,e),this.variableNames=["x"],this.outputShape=[];var i,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(l,")"):1===o?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")})),EN=(0,R.Z)((function e(t,n,r,a,o){(0,T.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(l,")"):1===o?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")})),TN={kernelName:$t,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta,l=ye().getBool("WEBGL_PACK_NORMALIZATION")?new EN(a.shape,o,i,s,u):new CN(a.shape,o,i,s,u);return n.runWebGLProgram(l,[a],a.dtype)}},RN=(0,R.Z)((function e(t,n,r,a,o){(0,T.Z)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),FN={kernelName:Jt,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,p=r.beta,c=new RN(a.shape,s,u,l,p);return n.runWebGLProgram(c,[a,o,i],a.dtype)}};function IN(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.reductionIndices,s=a.keepDims,u=o.shape.length,l=X(i,o.shape),p=l,c=Vu(p,u),d=null!=c,f=n.shouldExecuteOnCPU([o]),g=o;if(d){if(f){for(var h=n.texData.get(g.dataId).values,m=new Array(u),v=0;v<m.length;v++)m[v]=o.shape[c[v]];var y=WR(h,o.shape,o.dtype,c,m);g=n.makeTensorInfo(m,o.dtype),n.texData.get(g.dataId).values=y}else g=qF(o,c,n);p=Xu(p.length,u)}Hu("max",p,u);var b,_=Uu(g.shape,p),k=(0,r.Z)(_,2),x=k[0],w=k[1],O=x;if(s&&(O=Zu(x,l)),f){var S=n.texData.get(g.dataId).values,C=gR(S,G(w),O,o.dtype);b=n.makeTensorInfo(O,o.dtype),n.texData.get(b.dataId).values=C}else b=function(e,t,n,r){var a=G(t),o=WF({inputs:{x:e},attrs:{shape:[G(e.shape)/a,a]},backend:r}),i=VF(o,e.dtype,"max",r),s=WF({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(g,w,O,n);return d&&n.disposeIntermediateTensorInfo(g),b}var MN={kernelName:Qt,backendName:"webgl",kernelFunc:IN},AN=NF({opSnippet:yF+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+_F+"\n  return result;\n",cpuKernelImpl:hR}),NN={kernelName:en,backendName:"webgl",kernelFunc:AN};var DN={kernelName:tn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;iT(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;P(Vs(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var l=Ls(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&W(l.inShape,l.outShape))return xF({inputs:{x:a},backend:n});var p=new NI(l,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}};var LN={kernelName:rn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,p=Bs(a.shape,o,i,[1,1,1],s,l,u),c=new DI(p,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}},BN=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,s=o-1-t.padInfo.top,u=i-1-t.padInfo.left,l=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),PN=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,p=t.effectiveFilterWidth,c=u-1-t.padInfo.front,d=l-1-t.padInfo.top,f=p-1-t.padInfo.left,g=u*l*p-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(c,", ").concat(d,", ").concat(f,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(g," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(p," +\n                  wR * ").concat(p," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var jN={kernelName:an,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,p=Bs(o.shape,i,s,[1,1,1],u,l),c=new DI(p,"max",!0),d=n.runWebGLProgram(c,[o],o.dtype),f=new PN(p),g=n.runWebGLProgram(f,[a,d],o.dtype);return n.disposeIntermediateTensorInfo(d),g}};var zN={kernelName:nn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;iT([o,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,p=r.dimRoundingMode,c=Ls(i.shape,s,u,1,l,p),d=new NI(c,"max",!0),f=n.runWebGLProgram(d,[i],i.dtype),g=new BN(c),h=n.runWebGLProgram(g,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),h}};var GN={kernelName:on,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,o=t.x,i=n.filterSize,s=n.strides,u=n.pad,l=n.includeBatchInIndex,p=a;P(4===o.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,".")}));var c=[1,1];P(Vs(s,c),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(c,"'")}));var d=Ls(o.shape,i,s,c,u),f=function(e,t,n,r){var a=new NI(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new NI(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(o,l,d,p),g=(0,r.Z)(f,2);return[g[0],g[1]]}};var WN={kernelName:sn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,o=t.x,i=n.keepDims,s=n.axis,u=a,l=o.shape.length,p=X(s,o.shape),c=p,d=Vu(c,l),f=null!=d,g=u.shouldExecuteOnCPU([o]),h=[],m=o;if(f){if(g){for(var v=u.texData.get(m.dataId).values,y=new Array(l),b=0;b<y.length;b++)y[b]=o.shape[d[b]];var _=WR(v,o.shape,o.dtype,d,y);m=u.makeTensorInfo(y,o.dtype),u.texData.get(m.dataId).values=_}else m=qF(o,d,u);h.push(m),c=Xu(c.length,l)}Hu("sum",c,l);var k=Uu(m.shape,c),x=(0,r.Z)(k,2),w=x[0],O=x[1],S=w;i&&(S=Zu(w,p));for(var C=function(e,t,n,r){var a=G(t),o=WF({inputs:{x:e},attrs:{shape:[G(e.shape)/a,a]},backend:r}),i=VF(o,"float32","mean",r),s=WF({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(m,O,S,u),E=0,T=h;E<T.length;E++){var R=T[E];u.disposeIntermediateTensorInfo(R)}return C}};var UN={kernelName:un,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.axis,s=a.keepDims,u=o.shape.length,l=X(i,o.shape),p=l,c=Vu(p,u),d=o;null!=c&&(d=JF({inputs:{x:o},backend:n,attrs:{perm:c}}),p=Xu(p.length,o.shape.length)),Hu("min",p,u);var f,g=Uu(d.shape,p),h=(0,r.Z)(g,2),m=h[0],v=WF({inputs:{x:d},backend:n,attrs:{shape:[-1,G(h[1])]}}),y=VF(v,v.dtype,"min",n);return f=WF(s?{inputs:{x:y},backend:n,attrs:{shape:Zu(m,l)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),null!=c&&n.disposeIntermediateTensorInfo(d),f}},ZN=NF({opSnippet:yF+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+_F+"\n  return result;\n",cpuKernelImpl:mR}),HN={kernelName:ln,backendName:"webgl",kernelFunc:ZN},VN=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=OT(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),KN=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=OT(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=HR("rc",a),l=HR("source",a),p="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),c=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),d="reflect"===r?0:1,f="";if(1===a){var g="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");f="\n        ".concat(o," rc = outputLoc;\n        ").concat(g,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(c,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(p,") {\n          ").concat(g,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(c,");\n        }\n      ")}else{var h="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");f="\n        ".concat(o," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(c,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(p,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(c,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(h,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(c,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(p,") {\n            ").concat(h,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(c,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")})),XN={kernelName:pn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,s=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KN(a.shape,o,i):new VN(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},qN=NF({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+_F+"\n  return result;\n"}),YN={kernelName:cn,backendName:"webgl",kernelFunc:qN},$N=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),JN=NF({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),QN={kernelName:vt,backendName:"webgl",kernelFunc:JN},eD="return a - b;",tD=NF({opSnippet:eD,packedOpSnippet:eD,supportsComplex:!0,cpuKernelImpl:jR}),nD={kernelName:mr,backendName:"webgl",kernelFunc:tD};function rD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=X([r.dim],a.shape),i=IN({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),s=Zu(i.shape,o),u=WF({inputs:{x:i},backend:n,attrs:{shape:s}}),l=tD({inputs:{a:a,b:u},backend:n}),p=xA({inputs:{x:l},backend:n}),c=YF({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:!1}}),d=WF({inputs:{x:c},backend:n,attrs:{shape:s}}),f=JN({inputs:{a:p,b:d},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),f}var aD={kernelName:rr,backendName:"webgl",kernelFunc:rD};var oD={kernelName:dn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized,u=s?a:rD({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],p=u.shape[1],c=new $N(l,p,o),d=[[i]],f=n.runWebGLProgram(c,[u],"int32",d);return s||n.disposeIntermediateTensorInfo(u),f}},iD=QR+"\n  return -x;\n";var sD={kernelName:gn,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,o=n.x;if(a.shouldExecuteOnCPU([o])){var i=a.texData.get(o.dataId),s=yR(i.values,o.shape,o.dtype),u=(0,r.Z)(s,2),l=u[0],p=u[1];return a.makeTensorInfo(p,o.dtype,l)}return t=ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new dF(o.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new JR(o.shape,iD),a.runWebGLProgram(t,[o],o.dtype)}},uD=ap;var lD={kernelName:mn,backendName:"webgl",kernelFunc:function(e){Mr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=n.readSync(a.dataId),p=n.readSync(o.dataId),c=uD(l,p,i,s,u).selectedIndices;return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}},pD=op;var cD={kernelName:vn,backendName:"webgl",kernelFunc:function(e){Mr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize,p=n.readSync(a.dataId),c=n.readSync(o.dataId),d=pD(p,c,i,s,u,l),f=d.selectedIndices,g=d.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}},dD=ip;var fD={kernelName:yn,backendName:"webgl",kernelFunc:function(e){Mr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,p=n.readSync(a.dataId),c=n.readSync(o.dataId),d=dD(p,c,i,s,u,l),f=d.selectedIndices,g=d.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}},gD=(0,R.Z)((function e(t,n,r,a){(0,T.Z)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),hD={kernelName:_n,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.dtype,i=r.depth,s=r.onValue,u=r.offValue,l=G(a.shape),p=new gD(l,i,s,u),c=WF({inputs:{x:a},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(p,[c],o);n.disposeIntermediateTensorInfo(c);var f=WF({inputs:{x:d},backend:n,attrs:{shape:[].concat((0,E.Z)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(d),f}};function mD(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=nM({inputs:{input:r},backend:n}),o=mD({inputs:{x:a},backend:n}),i=yM({inputs:{input:r},backend:n}),s=mD({inputs:{x:i},backend:n}),u=OF({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return AA({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var vD={kernelName:Cr,backendName:"webgl",kernelFunc:mD};var yD={kernelName:bn,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=nM({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=yM({inputs:{input:a},backend:r}),u=mD({inputs:{x:s},backend:r}),l=OF({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return AA({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var bD={kernelName:kn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return OA({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){j(a,e.shape,"All tensors passed to stack must have matching shapes"),P(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=kM({inputs:t.map((function(e){var t=OA({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},_D=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=OT(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),kD=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=OT(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=HR("rc",a),l=HR("source",a),p="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),c=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),d=["".concat(o," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(p,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(p,") {")],f=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",h=0,m=1===a?2:4;h<m;h++)g+="\n        ".concat(d[h],"\n        if (").concat(f,") {\n          result[").concat(h,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(h,"] = getChannel(getX(").concat(l.join(),"), ").concat(c,");\n        }\n      ");g+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(g,"\n        setOutput(result);\n      }\n    ")})),xD=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;if(0===G(a.shape)){var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return AA({backend:n,attrs:{shape:s,value:i,dtype:a.dtype}})}var u=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kD(a.shape,o,i):new _D(a.shape,o,i),l=[[i]];return n.runWebGLProgram(u,[a],a.dtype,l)},wD={kernelName:xn,backendName:"webgl",kernelFunc:xD},OD=NF({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+_F+"\n  return result;\n"}),SD={kernelName:wn,backendName:"webgl",kernelFunc:OD};var CD={kernelName:Sn,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,a=e.backend,o=e.attrs,i=n.x,s=o.axis,u=o.keepDims,l=i.shape.length,p=[],c=X(s,i.shape),d=c,f=Vu(d,l),g=i;if(null!=f&&(g=JF({inputs:{x:i},backend:a,attrs:{perm:f}}),d=Xu(d.length,l),p.push(g)),Hu("prod",d,l),a.shouldExecuteOnCPU([g])){var h=a.texData.get(g.dataId).values,m=_R(g.shape,g.dtype,h,d),v=m.outVals,y=m.outShape,b=m.outDtype;t=a.makeTensorInfo(y,b,v)}else{var _=Uu(g.shape,d),k=(0,r.Z)(_,2),x=k[0],w=G(k[1]),O=WF({inputs:{x:g},backend:a,attrs:{shape:[-1,w]}}),S=VF(O,Na(i.dtype),"prod",a);t=WF({inputs:{x:S},backend:a,attrs:{shape:x}}),p.push(O),p.push(S)}if(u){p.push(t);var C=Zu(t.shape,c);t=WF({inputs:{x:t},backend:a,attrs:{shape:C}})}return p.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),t}};var ED={kernelName:Cn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.paramsNestedSplits,i=t.paramsDenseValues,s=t.indices,u=a.outputRaggedRank,l=o.map((function(e){return n.readSync(e.dataId)})),p=o.map((function(e){return e.shape})),c=n.readSync(i.dataId),d=n.readSync(s.dataId),f=kR(l,p,c,i.shape,i.dtype,d,s.shape,u),g=(0,r.Z)(f,3),h=g[0],m=g[1],v=g[2],y=h.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),b=n.makeTensorInfo(v,i.dtype,m);return y.concat([b])}};var TD={kernelName:En,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.starts,o=t.limits,i=t.deltas,s=n.readSync(a.dataId),u=n.readSync(o.dataId),l=n.readSync(i.dataId),p=xR(s,a.shape,a.dtype,u,o.shape,l,i.shape),c=(0,r.Z)(p,2),d=c[0],f=c[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([f.length],a.dtype,f)]}};var RD={kernelName:Tn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.shape,i=t.values,s=t.defaultValue,u=t.rowPartitionTensors,l=a.rowPartitionTypes,p=n.readSync(o.dataId),c=n.readSync(i.dataId),d=n.readSync(s.dataId),f=u.map((function(e){return n.readSync(e.dataId)})),g=u.map((function(e){return e.shape})),h=wR(p,o.shape,c,i.shape,i.dtype,d,s.shape,f,g,l),m=(0,r.Z)(h,2),v=m[0],y=m[1];return n.makeTensorInfo(v,i.dtype,y)}},FD=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=OR(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},ID={kernelName:Rn,backendName:"webgl",kernelFunc:FD},MD=AF({opSnippet:"return 1.0 / x;"}),AD={kernelName:In,backendName:"webgl",kernelFunc:MD},ND=AF({opSnippet:QR+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),DD={kernelName:Mn,backendName:"webgl",kernelFunc:ND},LD=AF({opSnippet:QR+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),BD={kernelName:Pn,backendName:"webgl",kernelFunc:LD},PD=(0,R.Z)((function e(t,n,a,o,i){(0,T.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var s=(0,r.Z)(t,4),u=s[0],l=s[1],p=s[2],c=s[3];this.outputShape=[u,n,a,c];var d,f=[o&&n>1?l-1:l,o&&a>1?p-1:p],g=[o&&n>1?n-1:n,o&&a>1?a-1:a];d=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/g[0],",\n          ").concat(f[1]/g[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(p,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),jD=(0,R.Z)((function e(t,n,a,o,i){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=(0,r.Z)(t,4),u=s[0],l=s[1],p=s[2],c=s[3];this.outputShape=[u,n,a,c];var d,f=[o&&n>1?l-1:l,o&&a>1?p-1:p],g=[o&&n>1?n-1:n,o&&a>1?a-1:a];d=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/g[0],",\n          ").concat(f[1]/g[1],",\n          ").concat(f[1]/g[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(p,".0,\n                                     ").concat(p,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(a-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var zD={kernelName:Ln,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.images,i=a.alignCorners,s=a.halfPixelCenters,u=a.size,l=(0,r.Z)(u,2),p=l[0],c=l[1],d=ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new jD(o.shape,p,c,i,s):new PD(o.shape,p,c,i,s);return n.runWebGLProgram(d,[o],"float32")}},GD=(0,R.Z)((function e(t,n,a){(0,T.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var o=(0,r.Z)(n,3),i=o[1],s=o[2],u=(0,r.Z)(t,3),l=u[1],p=u[2],c=[a&&l>1?i-1:i,a&&p>1?s-1:s],d=[a&&l>1?l-1:l,a&&p>1?p-1:p],f=c[0]/d[0],g=c[1]/d[1],h=1/f,m=1/g,v=2*Math.ceil(h)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(g,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(p,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(s-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var WD={kernelName:Bn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new GD(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},UD=(0,R.Z)((function e(t,n,a,o,i){(0,T.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var s=(0,r.Z)(t,4),u=s[0],l=s[1],p=s[2],c=s[3];this.outputShape=[u,n,a,c];var d,f=[o&&n>1?l-1:l,o&&a>1?p-1:p],g=[o&&n>1?n-1:n,o&&a>1?a-1:a],h=o?"0.5":"0.0";d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/g[0],",\n          ").concat(f[1]/g[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(p,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),ZD=(0,R.Z)((function e(t,n,a,o,i){(0,T.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=(0,r.Z)(t,4),u=s[0],l=s[1],p=s[2],c=s[3];this.outputShape=[u,n,a,c];var d,f=[o&&n>1?l-1:l,o&&a>1?p-1:p],g=[o&&n>1?n-1:n,o&&a>1?a-1:a],h=o?"0.5":"0.0";d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/g[0],",\n          ").concat(f[1]/g[1],",\n          ").concat(f[1]/g[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(p,".0,\n                                     ").concat(p,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(a-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var HD={kernelName:Nn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.images,i=a.alignCorners,s=a.halfPixelCenters,u=a.size,l=(0,r.Z)(u,2),p=l[0],c=l[1],d=ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZD(o.shape,p,c,i,s):new UD(o.shape,p,c,i,s);return n.runWebGLProgram(d,[o],o.dtype)}},VD=(0,R.Z)((function e(t,n,a){(0,T.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var o=(0,r.Z)(n,3),i=o[1],s=o[2],u=(0,r.Z)(t,3),l=u[1],p=u[2],c=[a&&l>1?i-1:i,a&&p>1?s-1:s],d=[a&&l>1?l-1:l,a&&p>1?p-1:p],f=c[0]/d[0],g=c[1]/d[1],h=1/f,m=1/g,v=2*Math.ceil(h)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(g,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(p,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(c[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(c[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(a," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(s,") - 1),\n                ").concat(a," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var KD={kernelName:Dn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new VD(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},XD=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=OT(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),qD=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=HR("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=OT(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),o=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(o,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var YD={kernelName:jn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,s=X(o,a.shape);if(0===i)return xF({inputs:{x:a},backend:n});var u=ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qD(a.shape,s):new XD(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},$D=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var o="";o="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),JD={kernelName:Tr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,o=t.image,i=n.radians,s=n.fillValue,u=n.center,l=a,p=new $D(o.shape,s),c=Kp(u,o.shape[1],o.shape[2]),d=(0,r.Z)(c,2),f=[[d[0],d[1],Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(p,[o],o.dtype,f)}},QD=AF({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),eL={kernelName:zn,backendName:"webgl",kernelFunc:QD},tL=AF({opSnippet:"return inversesqrt(x);",cpuKernelImpl:SR}),nL={kernelName:Gn,backendName:"webgl",kernelFunc:tL},rL=(0,R.Z)((function e(t,n,r,a,o,i){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];(0,T.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var u=OT(o.length),l=OT(i.length),p="";1===r?p="i":2===r&&(p="i, j");var c="getIndices(".concat(p,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var f="getUpdates(".concat(d,")"),g="";s&&(g="coords[0], coords[1]");var h="getDefaultValue(".concat(g,")"),m=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(o,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(c,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(f,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(h,", sum, float(found)));\n        }\n      ")})),aL=(0,R.Z)((function e(t,n,r,a,o,i){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];(0,T.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;var u=OT(o.length),l=OT(i.length),p="";1===r?p="i":2===r&&(p="i, j");var c="getIndices(".concat(p,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var f="getUpdates(".concat(d,")"),g="";s&&(g="coords[0], coords[1]");var h="getDefaultValue(".concat(g,")"),m=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(o,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(t,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(n,"; j+=2) {\n              ivec4 index = round(").concat(c,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(n,") {\n                flattenedIndex += index.yw * ").concat(v,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(f,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(h,", sum, found));\n        }\n      ")}));var oL={kernelName:Wn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=ec(0,a,i),u=s.sliceRank,l=s.numUpdates,p=s.sliceSize,c=s.strides,d=s.outputSize,f=[d/p,p];if(0===d)return n.makeTensorInfo(i,a.dtype);var g,h=WF({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=WF({inputs:{x:o},backend:n,attrs:{shape:[l,p]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));g=ye().getBool("WEBGL_PACK")?new aL(l,u,h.shape.length,m.shape.length,c,f):new rL(l,u,h.shape.length,m.shape.length,c,f);var y=n.runWebGLProgram(g,[m,h,v],m.dtype),b=WF({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}},iL=(0,R.Z)((function e(t,n,r,a){(0,T.Z)(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var o="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),i=2===ye().getNumber("WEBGL_VERSION")?"while (left < right) {":o,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(i,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var sL={kernelName:Zn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,o=t.values,i=r.side,s=new iL(a.shape[0],a.shape[1],o.shape[1],i),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,o],"int32",u)}},uL=(0,R.Z)((function e(t,n,r){var a,o;if((0,T.Z)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],l=0;l<n.length;l++)u.push("".concat(i[l])),l<t&&s.push("".concat(i[l]));a=s.join(),o=u.join()}var p=OT(r);this.userCode="\n      void main() {\n        ".concat(p," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")}));var lL={kernelName:Hn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new uL(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],Aa(a.dtype,o.dtype))}},pL=AF({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(tc,";\n  float scale = ").concat(nc,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),cL={kernelName:Vn,backendName:"webgl",kernelFunc:pL},dL=AF({opSnippet:MF+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:ER}),fL={kernelName:$n,backendName:"webgl",kernelFunc:dL},gL=AF({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),hL={kernelName:Yn,backendName:"webgl",kernelFunc:gL},mL=AF({opSnippet:MF+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(_F,"\n  return result;\n")}),vL={kernelName:Xn,backendName:"webgl",kernelFunc:mL},yL=AF({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),bL={kernelName:qn,backendName:"webgl",kernelFunc:yL},_L=AF({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),kL={kernelName:Jn,backendName:"webgl",kernelFunc:_L},xL={kernelName:tr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;P(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,E.Z)(i));for(var l=1+o.length;l<a.shape.length;++l)u.push([0,0]);var p=[],c=xD({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=Xp(c.shape,o,s,!1),f=qp(d.length,o.length,!1),g=Yp(c.shape,o,s,!1),h=WF({inputs:{x:c},backend:n,attrs:{shape:d}}),m=JF({inputs:{x:h},backend:n,attrs:{perm:f}}),v=WF({inputs:{x:m},backend:n,attrs:{shape:g}});return p.push(c),p.push(h),p.push(m),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}};var wL={kernelName:ar,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.indices,o=t.values,i=t.denseShape,s=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==a.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(o.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));var u=n.readSync(a.dataId),l=n.readSync(o.dataId),p=n.readSync(i.dataId),c=n.readSync(s.dataId)[0],d=FR(u,a.shape,a.dtype,l,o.dtype,p,c),f=(0,r.Z)(d,5),g=f[0],h=f[1],m=f[2],v=f[3],y=f[4];return[n.makeTensorInfo(h,a.dtype,g),n.makeTensorInfo([h[0]],o.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],a.dtype,new Int32Array(y))]}};var OL={kernelName:or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.inputIndices,o=t.inputShape,i=t.newShape;if(2!==a.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(o.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var s=Array.from(n.readSync(o.dataId)),u=n.readSync(a.dataId),l=Array.from(n.readSync(i.dataId)),p=IR(u,a.shape,a.dtype,s,l),c=(0,r.Z)(p,3),d=c[0],f=c[1],g=c[2];return[n.makeTensorInfo(f,a.dtype,d),n.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}};var SL={kernelName:ir,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.data,o=t.indices,i=t.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var s=n.readSync(a.dataId),u=n.readSync(o.dataId),l=n.readSync(i.dataId),p=MR(s,a.shape,a.dtype,u,l,!0),c=(0,r.Z)(p,2),d=c[0],f=c[1];return n.makeTensorInfo(f,a.dtype,d)}};var CL={kernelName:sr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=t.data,o=t.indices,i=t.segmentIds;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(o.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var s=n.readSync(a.dataId),u=n.readSync(o.dataId),l=n.readSync(i.dataId),p=MR(s,a.shape,a.dtype,u,l),c=(0,r.Z)(p,2),d=c[0],f=c[1];return n.makeTensorInfo(f,a.dtype,d)}};var EL={kernelName:ur,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=ec(0,a,s),l=u.sliceRank,p=u.numUpdates,c=u.sliceSize,d=u.strides,f=u.outputSize;if("string"===o.dtype){var g=n.bufferSync(a),h=n.bufferSync(o),m=ia(n.readSync(i.dataId)[0]),v=CR(g,h,s,f,c,p,l,d,m,false);return n.makeTensorInfo(s,v.dtype,v.values)}var y=new rL(p,l,a.shape.length,o.shape.length,d,[f,1],false),b=n.runWebGLProgram(y,[o,a,i],o.dtype),_=WF({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),_}};var TL={kernelName:nr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=X(r.axis,a.shape)[0],s=wc(a,o,i),u=a.shape.length,l=new Array(u).fill(0),p=a.shape.slice();return s.map((function(e){var t=(0,E.Z)(p);t[i]=e;var r=qI({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[i]+=e,r}))}},RL="return sqrt(x);",FL=AF({opSnippet:RL,packedOpSnippet:RL,cpuKernelImpl:AR}),IL={kernelName:Qn,backendName:"webgl",kernelFunc:FL},ML={kernelName:pr,backendName:"webgl",kernelFunc:AF({opSnippet:"return x * x;"})},AL="return (a - b) * (a - b);",NL=NF({opSnippet:AL,packedOpSnippet:AL}),DL={kernelName:lr,backendName:"webgl",kernelFunc:NL};var LL={kernelName:cr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;if("string"!==a.dtype)throw new Error("Input must be of datatype string");var o=Tc(n.readSync(a.dataId)),i=NR(o,"string",r);return n.makeTensorInfo(a.shape,"string",i)}};var BL={kernelName:Er,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=QR+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new JR(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},PL=(0,R.Z)((function e(t,n,r){(0,T.Z)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=OT(r.length),i=OT(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var jL={kernelName:dr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,s=a.end,u=a.strides,l=a.beginMask,p=a.endMask,c=a.ellipsisMask,d=a.newAxisMask,f=a.shrinkAxisMask,g=Fs(o.shape,i,s,u,l,p,c,d,f),h=g.finalShapeSparse,m=g.finalShape,v=g.isIdentity,y=g.sliceDim0,b=g.isSimpleSlice,_=g.begin,k=g.end,x=g.strides;if(v)t=WF({inputs:{x:o},backend:r,attrs:{shape:m}});else if(y||b){P(o.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(o.shape.length)}));var w=Cs(_,k,x),O=qI({inputs:{x:o},backend:r,attrs:{begin:_,size:w}});t=WF({inputs:{x:O},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(O)}else{if(r.shouldExecuteOnCPU([o])){var S=r.readSync(o.dataId),C=hi(o.shape,o.dtype,S),E=DR(h,C,x,_);t=r.makeTensorInfo(m,o.dtype,E.values)}else{var T=new PL(_,x,h);t=r.runWebGLProgram(T,[o],o.dtype)}}var R=WF({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),R}};var zL={kernelName:fr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=a.separator,i=a.nGramWidths,s=a.leftPad,u=a.rightPad,l=a.padWidth,p=a.preserveShortSequences,c=t.data,d=t.dataSplits,f=n.readSync(c.dataId),g=n.readSync(d.dataId),h=LR(f,g,o,i,s,u,l,p),m=(0,r.Z)(h,2),v=m[0],y=m[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",y)]}};var GL={kernelName:gr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs.skipEmpty,o=t.input,i=t.delimiter;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var s=n.readSync(o.dataId),u=n.readSync(i.dataId)[0],l=BR(s,u,a),p=(0,r.Z)(l,3),c=p[0],d=p[1],f=p[2],g=d.length;return[n.makeTensorInfo([g,2],"int32",c),n.makeTensorInfo([g],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var WL={kernelName:hr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(a.dataId),i=PR(o,r);return n.makeTensorInfo(a.shape,"int32",i)}},UL=AF({opSnippet:"return tan(x);"}),ZL={kernelName:vr,backendName:"webgl",kernelFunc:UL},HL=AF({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),VL={kernelName:yr,backendName:"webgl",kernelFunc:HL};var KL={kernelName:Un,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.tensor,o=t.indices,i=t.updates;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(r);var s=ec(0,o,a.shape),u=s.sliceRank,l=s.numUpdates,p=s.sliceSize,c=s.strides,d=s.outputSize,f=[d/p,p];if(0===d)return n.makeTensorInfo(a.shape,o.dtype);var g=WF({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),h=WF({inputs:{x:i},backend:n,attrs:{shape:[l,p]}}),m=WF({inputs:{x:a},backend:n,attrs:{shape:f}}),v=new rL(l,u,g.shape.length,h.shape.length,c,f,!1,!0),y=n.runWebGLProgram(v,[h,g,m],m.dtype),b=WF({inputs:{x:y},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}},XL=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=OT(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")}));function qL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype||a.shape.length>5){var i=n.readSync(a.dataId),s="string"===a.dtype?i.map((function(e){return ia(e)})):i,u=hi(a.shape,a.dtype,s),l=zR(u,o);return n.makeTensorInfo(l.shape,l.dtype,l.values)}var p=new XL(a.shape,o);return n.runWebGLProgram(p,[a],a.dtype)}var YL={kernelName:br,backendName:"webgl",kernelFunc:qL},$L=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),JL=(0,R.Z)((function e(t){(0,T.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function QL(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function eB(e){for(var t=1;t<e;)t*=2;return t}var tB={kernelName:_r,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.x,i=a.k,s=a.sorted,u=ye().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ye().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),p=o.shape,c=p[p.length-1];if(n.shouldExecuteOnCPU([o])||c<u||i>l){var d=n.readSync(o.dataId),f=GR(d,p,o.dtype,i,s),g=(0,r.Z)(f,2),h=g[0],m=g[1];return[n.makeTensorInfo(h.shape,h.dtype,h.values),n.makeTensorInfo(m.shape,m.dtype,m.values)]}if(0===i)return p[p.length-1]=0,[n.makeTensorInfo(p,o.dtype,[]),n.makeTensorInfo(p,"int32",[])];if(1===c)return[o,AA({attrs:{shape:p,dtype:"int32",value:0},backend:n})];var v=n.texData.get(o.dataId),y=null!==v&&v.isPacked,b=y?n.unpackTensor(o):o,_=G(p)/c,k=WF({inputs:{x:b},attrs:{shape:[_,c]},backend:n});y&&QL(n,b);for(var x=eB(i),w=eB(c),O=null,S=function(){return null===O?[k,k]:[k,O]},C=function(e,t,r){var a=S(),o=new $L(r),i=[[c],[null===O?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=O;O=n.runWebGLProgram(o,a,"int32",i),QL(n,s)},E=1;E<x;E*=2)for(var T=2*E,R=E;R>=1;R/=2)C(T,R,[_,w]);for(var F=w;F>x;F/=2){var I=S(),M=new JL([_,F/2]),A=[[c],[null===O?1:0],[x]],N=O;O=n.runWebGLProgram(M,I,"int32",A),QL(n,N);for(var D=x/2,L=2*D,B=D;B>=1;B/=2)C(L,B,O.shape)}var P=O;O=qI({inputs:{x:O},backend:n,attrs:{begin:0,size:[_,i]}}),QL(n,P);var j=JA({inputs:{x:k,indices:O},backend:n,attrs:{axis:1,batchDims:1}});QL(n,k);var z=p.slice(0,-1);z.push(i),P=O,O=WF({inputs:{x:O},attrs:{shape:z},backend:n}),QL(n,P);var W=j;return j=WF({inputs:{x:j},attrs:{shape:z},backend:n}),QL(n,W),[j,O]}},nB=(0,R.Z)((function e(t,n,r,a,o,i){(0,T.Z)(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var rB={kernelName:kr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,a=e.attrs,o=t.image,i=t.transforms,s=a.interpolation,u=a.fillMode,l=a.fillValue,p=a.outputShape,c=(0,r.Z)(o.shape,4),d=c[0],f=c[1],g=c[2],h=c[3],m=null!=p?p:[f,g],v=(0,r.Z)(m,2),y=v[0],b=v[1],_=new nB(f,g,s,u,l,[d,y,b,h]);return n.runWebGLProgram(_,[o,i],"float32")}};var aB={kernelName:wr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;iT(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),s=UR(i,a,o.shape,o.dtype),u=s.outputValues,l=s.outputShape,p=s.indices;return[r.makeTensorInfo(l,o.dtype,u),r.makeTensorInfo([p.length],"int32",p)]}};var oB={kernelName:Or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,s=i.shape.length,u=a.shape[o],l=new Array(s-1),p=0,c=0;c<s;c++)c!==o&&(l[p++]=i.shape[c]);var d=[],f=new Array(s).fill(0),g=i.shape.slice();g[o]=1;for(var h=new Array(u),m=0;m<h.length;m++){f[o]=m;var v=qI({inputs:{x:i},backend:n,attrs:{begin:f,size:g}}),y=WF({inputs:{x:v},backend:n,attrs:{shape:l}});h[m]=y,d.push(v)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}},iB=(0,R.Z)((function e(t,n){(0,T.Z)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,s=i*Math.ceil(o/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),l=r%4,p="\n        sumValue += dot(values, segFilter);\n    ",c="";o%r>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(p,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(p,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(p,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(p,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var sB={kernelName:Sr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,s=a.shape.length,u=[],l=0,p=Vu([l],s),c=a;null!=p&&(c=JF({inputs:{x:a},backend:n,attrs:{perm:p}}),u.push(c),l=Xu(1,s)[0]);var d=function(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}(c.shape,l,i),f=G([c.shape[l]]),g=WF({inputs:{x:c},backend:n,attrs:{shape:[-1,f]}});u.push(g);var h=function e(t,r,a,o,i){var s=t.shape[0],l=t.shape[1],p=function(e,t){var n,r=!1;for(e<=Hp?(n=e,r=!0):n=ae(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=ae(e,n+1);return n}(l,i),c=new iB({windowSize:p,inSize:l,batchSize:s,numSegments:i},r),d=n.compileAndRun(c,[t,a],o);if(u.push(d),d.shape[1]===i)return d;var f=FD({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),g=qL({inputs:{x:f},backend:n,attrs:{reps:[l/p]}});return u.push(f),u.push(g),e(d,r,g,o,i)}(g,"unsortedSegmentSum",o,Na(a.dtype),i),m=WF({inputs:{x:h},backend:n,attrs:{shape:d}}),v=m;if(null!=p){u.push(m);var y=Ku(p);v=JF({inputs:{x:v},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},uB=0,lB=[nI,aI,iI,uI,cI,gI,hI,mI,xI,wI,SI,EI,RI,II,AI,LI,BI,zI,GI,WI,HI,$I,JI,QI,oM,uM,cM,SF,gM,xM,FM,DM,BM,PM,jM,GM,UM,HM,KM,JM,QM,eA,nA,oA,uA,lA,cA,fA,gA,mA,vA,bA,kA,wA,SA,TA,IA,DA,BA,zA,WA,HA,KA,XA,YA,QA,tN,rN,wF,aN,bM,iN,uN,pN,TF,dN,gN,hN,vN,bN,kN,wN,SN,TN,FN,MN,NN,DN,LN,jN,zN,GN,WN,UN,HN,XN,YN,oD,GF,sD,lD,cD,fD,tM,hD,yD,bD,wD,SD,IF,CD,ED,TD,RD,ID,rM,QN,AD,DD,BD,UF,zD,WD,HD,KD,YD,JD,eL,nL,oL,sL,lL,cL,fL,hL,vL,bL,YI,aD,kL,xL,wL,OL,SL,CL,EL,TL,IL,ML,DL,LL,BL,jL,zL,GL,WL,nD,$F,ZL,VL,KL,YL,tB,rB,QF,aB,oB,sB,vD];uB<lB.length;uB++){Pr(lB[uB])}var pB=__webpack_require__(97),cB=__webpack_require__.n(pB),dB={thumb:[0,1,2,3,4],indexFinger:[0,5,6,7,8],middleFinger:[0,9,10,11,12],ringFinger:[0,13,14,15,16],pinky:[0,17,18,19,20]},fB={0:{color:"yellow",size:15},1:{color:"gold",size:6},2:{color:"green",size:10},3:{color:"gold",size:6},4:{color:"gold",size:6},5:{color:"purple",size:10},6:{color:"gold",size:6},7:{color:"gold",size:6},8:{color:"gold",size:6},9:{color:"blue",size:10},10:{color:"gold",size:6},11:{color:"gold",size:6},12:{color:"gold",size:6},13:{color:"red",size:10},14:{color:"gold",size:6},15:{color:"gold",size:6},16:{color:"gold",size:6},17:{color:"orange",size:10},18:{color:"gold",size:6},19:{color:"gold",size:6},20:{color:"gold",size:6}},gB=function(e,t){e.length>0&&e.forEach((function(e){for(var n=e.landmarks,r=0;r<Object.keys(dB).length;r++)for(var a=Object.keys(dB)[r],o=0;o<dB[a].length-1;o++){var i=dB[a][o],s=dB[a][o+1];t.beginPath(),t.moveTo(n[i][0],n[i][1]),t.lineTo(n[s][0],n[s][1]),t.strokeStyle="plum",t.lineWidth=4,t.stroke()}for(var u=0;u<n.length;u++){var l=n[u][0],p=n[u][1];t.beginPath(),t.arc(l,p,fB[u].size,0,3*Math.PI),t.fillStyle=fB[u].color,t.fill()}}))},hB=__webpack_require__(961);var mB=function(){(0,t.useRef)(null);var e=(0,t.useRef)(null),n=(0,t.useRef)(null),o=(0,t.useState)(!1),i=(0,r.Z)(o,2),s=i[0],u=i[1],l=(0,t.useState)([]),p=(0,r.Z)(l,2),c=p[0],d=p[1],f=(0,t.useState)([]),g=(0,r.Z)(f,2),h=g[0],m=g[1],v=["ain","al","aleff","bb","dal","dha","dhad","fa","gaaf","ghain","ha","haa","jeem","kaaf","khaa","la","laam","meem","nothing","nun","ra","saad","seen","sheen","ta","taa","thaa","thal","toot","waw","ya","yaa","zay"];(0,t.useEffect)((function(){var e=function(){var e=(0,S.Z)((0,O.Z)().mark((function e(){var t,n,r;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hB.n.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm");case 2:return t=e.sent,e.next=5,hB.uq.createFromOptions(t,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-assets/hand_landmarker.task"},numHands:2});case 5:return n=e.sent,console.log("Handpose model loaded."),e.next=9,ty("https://raw.githubusercontent.com/Mustafa-Esmaail/arabic-sign-language/sign-lang-model-v1/model.json");case 9:r=e.sent,u(!0),console.log(s),setInterval((function(){_(n,r)}),100);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var y=function(e,t,n){var r=[];return n.map((function(n){var a=Math.min(Number(n.x*e),e-1),o=Math.min(Number(n.y*t),t-1);r.push([a,o])})),r},b=function(e){var t=e,n=0,r=0,a=[];t.map((function(e,o){0===o&&(n=t[o][0],r=t[o][1]),t[o][0]=t[o][0]-n,t[o][1]=t[o][1]-r,a.push(t[o][0]),a.push(t[o][1])}));var o=Math.max.apply(null,a.map(Math.abs));return a.map((function(e,t){a[t]=a[t]/o})),d(a),a},_=function(){var t=(0,S.Z)((0,O.Z)().mark((function t(r,a){var o,i,s,u;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof e.current||null===e.current||4!==e.current.video.readyState){t.next=14;break}return o=e.current.video,i=e.current.video.videoWidth,s=e.current.video.videoHeight,e.current.video.width=i,e.current.video.height=s,n.current.width=i,n.current.height=s,t.next=10,r.detect(o);case 10:t.sent.landmarks.map((function(e){var t=y(i,s,e),n=b(t),r=oo(n).reshape([1,42]),o=a.predict(r).dataSync(),u=Array.from(o),l=Math.max.apply(null,u),p=u.indexOf(l);m(h.push(v[p])),d(n)})),u=n.current.getContext("2d"),gB(c,u);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return(0,a.jsx)("div",{id:"portfolio",className:"text-center",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"section-title",children:[(0,a.jsx)("h2",{children:"Try Model"}),(0,a.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit duis sed dapibus leonec."})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)(cB(),{ref:e,style:{marginLeft:"auto",marginRight:"auto",textAlign:"center",zindex:9,width:640,height:480}}),(0,a.jsx)("canvas",{ref:n,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",top:0,right:0,left:0,textAlign:"center",zindex:9,width:640,height:480}})]}),(0,a.jsxs)("div",{className:"section-result",children:[(0,a.jsx)("h2",{children:"Result"}),(0,a.jsx)("p",{children:h.map((function(e,t){return e}))})]})]})})},vB=(new(w())('a[href*="#"]',{speed:1e3,speedAsDuration:!0}),function(){var e=(0,t.useState)({}),n=(0,r.Z)(e,2),p=n[0],g=n[1];return(0,t.useEffect)((function(){g(k)}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(o,{}),(0,a.jsx)(i,{data:p.Header}),(0,a.jsx)(s,{data:p.Features}),(0,a.jsx)(u,{data:p.About}),(0,a.jsx)(l,{data:p.Services}),(0,a.jsx)(c,{data:p.Gallery}),(0,a.jsx)(mB,{}),(0,a.jsx)(d,{data:p.Testimonials}),(0,a.jsx)(f,{data:p.Team}),(0,a.jsx)(_,{data:p.Contact})]})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.render((0,a.jsx)(t.StrictMode,{children:(0,a.jsx)(vB,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}()})();
//# sourceMappingURL=main.c6ba42f3.js.map